{"version":3,"file":"static/js/5781.03b2b6ed.chunk.js","mappings":"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","sources":["pages/User/Investor/Recordround.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TopBar from \"../../../components/Users/TopBar\";\r\nimport ModuleSideNav from \"../../../components/Users/ModuleSideNav\";\r\nimport Alertpopup from \"../../../components/Alertpopup\";\r\nimport {\r\n  SectionWrapper,\r\n  Wrapper,\r\n} from \"../../../components/Styles/RegisterStyles\";\r\nimport PreviousSection from \"../../../components/Users/PreviousSection\";\r\n\r\nimport { NumericFormat } from \"react-number-format\";\r\nimport axios from \"axios\";\r\nimport DangerAlertPopup from \"../../../components/Admin/DangerAlertPopup\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { API_BASE_URL } from \"../../../config/config\";\r\nexport default function Recordround() {\r\n  const apiUrlRound = API_BASE_URL + \"api/user/capitalround/\";\r\n  var apiURLInvestor = API_BASE_URL + \"api/user/investor/\";\r\n\r\n  const [countrySymbolList, setCountrysymbollist] = useState([]);\r\n  const [CurrencySymbol, setCurrencySymbol] = useState('');\r\n  const [CurrDisplay, setCurrDisplay] = useState(\"CAD $\");\r\n  const [errorMsg, seterrorMsg] = useState(\"\");\r\n  const [successMsg, setsuccessMsg] = useState(\"\");\r\n  const [activeSection, setActiveSection] = useState(\"shareclass\");\r\n  const storedUsername = localStorage.getItem(\"SignatoryLoginData\");\r\n  const [messageAll, setmessageAll] = useState(\"\");\r\n  const [errr, seterrr] = useState(false);\r\n  const userLogin = JSON.parse(storedUsername);\r\n  const { id } = useParams();\r\n  const [ClientIP, setClientIP] = useState(\"\");\r\n  const [CountryName, setCountryName] = useState(\"\");\r\n  const [records, setrecords] = useState([]);\r\n  // Add this to your component state\r\n  const navigate = useNavigate();\r\n  const [errorMessageCenter, seterrorMessageCenter] = useState('')\r\n  const [errors, setErrors] = useState({\r\n    // convertibleTrigger: \"\",\r\n    liquidationOther: \"\",\r\n    nameOfRound: \"\",\r\n    shareClassType: \"\",\r\n    shareclassother: \"\",\r\n    instrumentType: \"\",\r\n    customInstrument: \"\",\r\n    issuedshares: \"\",\r\n    dateroundclosed: \"\",\r\n    liquidation: [],\r\n    convertible: \"\",\r\n    convertibleType: \"\",\r\n    voting: \"\",\r\n    termsheetFile: \"\",\r\n    subscriptiondocument: \"\",\r\n\r\n    common_stock_valuation: \"\",\r\n    preferred_valuation: \"\",\r\n    valuationCap: \"\",\r\n    discountRate: \"\",\r\n    //safeType: \"\",\r\n    interestRate: \"\",\r\n    repaymentSchedule: \"\",\r\n    hasWarrants_Bank: \"\",\r\n    valuationCap_note: \"\",\r\n    discountRate_note: \"\",\r\n    maturityDate: \"\",\r\n    interestRate_note: \"\",\r\n    exercisedate_bank: \"\",\r\n\r\n    pricePerShare: \"\",\r\n    founders: \"\",\r\n  });\r\n  const [formData, setFormData] = useState({\r\n    liquidationOther: \"\",\r\n    liquidationpreferences: \"\",\r\n    nameOfRound: \"\",\r\n    shareClassType: \"Common Shares\",\r\n    shareclassother: \"\",\r\n    description: \"\",\r\n    instrumentType: \"\",\r\n    customInstrument: \"\",\r\n    roundsize: \"\",\r\n    currency: \"CAD $\",\r\n    issuedshares: \"\",\r\n    dateroundclosed: \"\",\r\n    rights: \"\",\r\n    liquidation: [],\r\n    convertible: \"\",\r\n    convertibleType: \"\",\r\n    voting: \"\",\r\n    termsheetFile: null,\r\n    subscriptiondocument: null,\r\n    generalnotes: \"\",\r\n\r\n    //  WRONG: Empty string evaluates to FALSE\r\n    // hasWarrants_preferred: \"\",\r\n\r\n    //  CORRECT: Use boolean false\r\n    hasWarrants_preferred: false,\r\n\r\n    //  Warrant fields with proper defaults\r\n    warrant_coverage_percentage: \"\",\r\n    warrant_exercise_type: \"next_round_adjusted\", // Default value\r\n    warrant_adjustment_percent: \"\",\r\n    warrant_adjustment_direction: \"decrease\", // Default value\r\n    expirationDate_preferred: \"\",\r\n    warrant_notes: \"\",\r\n\r\n    // Other fields...\r\n    preferred_valuation: \"\",\r\n    valuationCap: \"\",\r\n    discountRate: \"\",\r\n    interestRate: \"\",\r\n    repaymentSchedule: \"\",\r\n    hasWarrants_Bank: false, //  Boolean, not empty string\r\n    valuationCap_note: \"\",\r\n    discountRate_note: \"\",\r\n    maturityDate: \"\",\r\n    interestRate_note: \"\",\r\n    customInstrument: \"\",\r\n    roundStatus: \"\",\r\n    pricePerShare: \"\",\r\n    pre_money: \"\",\r\n    post_money: \"\",\r\n    optionPoolPercent: \"\",\r\n    optionPoolPercent_post: \"\",\r\n    existingShares: \"\",\r\n    isPostEntered: false,\r\n    investorPostMoney: \"\",\r\n    isCalculationSource: false,\r\n    lastUpdatedField: null,\r\n  });\r\n\r\n\r\n  const [isFirstRound, setIsFirstRound] = useState(false);\r\n  const [founderCount, setFounderCount] = useState(1);\r\n  const [foundersData, setFoundersData] = useState([{\r\n    shares: '',\r\n    shareType: 'common',\r\n    voting: 'voting'\r\n  }]);\r\n  //Check Authorized Signature\r\n  const apiURLSignature = API_BASE_URL + \"api/user/\";\r\n  var apiURLAiFile = API_BASE_URL + \"api/user/aifile/\";\r\n  const [existingSharesUse, setexistingSharesUse] = useState('0');\r\n  useEffect(() => {\r\n    // getAuthorizedSignature();\r\n    getPreviousFundingRound();\r\n    handleCheckPayemt();\r\n    getexistingShares();\r\n\r\n  }, []);\r\n  const getexistingShares = async () => {\r\n    try {\r\n      const res = await axios.post(\r\n        apiURLAiFile + \"getexistingShares\",\r\n        { company_id: userLogin.companies[0].id },\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const checkData = res.data.results;\r\n      let pricePerShareFromDB = \"0.01\";\r\n      let parsedFounderData = {};\r\n      let foundersDataFromDB = [];\r\n      let totalShares = 0;\r\n\r\n      if (checkData.length > 0) {\r\n        let rawFounderData = checkData[0].founder_data;\r\n\r\n        //  Handle both object & JSON string formats\r\n        if (typeof rawFounderData === \"object\" && rawFounderData !== null) {\r\n          parsedFounderData = rawFounderData;\r\n        } else if (typeof rawFounderData === \"string\") {\r\n          try {\r\n            // Clean and safely parse the string\r\n            if (rawFounderData.startsWith('\"') && rawFounderData.endsWith('\"')) {\r\n              rawFounderData = rawFounderData.slice(1, -1);\r\n              rawFounderData = rawFounderData.replace(/\\\\\"/g, '\"');\r\n            }\r\n            parsedFounderData = JSON.parse(rawFounderData);\r\n          } catch (err) {\r\n            console.error(\" Error parsing founder_data JSON:\", err);\r\n          }\r\n        }\r\n\r\n        //  Extract fields safely\r\n        if (parsedFounderData.founders && Array.isArray(parsedFounderData.founders)) {\r\n          foundersDataFromDB = parsedFounderData.founders;\r\n        }\r\n\r\n        if (parsedFounderData.pricePerShare) {\r\n          pricePerShareFromDB = parsedFounderData.pricePerShare;\r\n        }\r\n\r\n        //  Get total shares safely (supports both totalShares / totalshares)\r\n        totalShares =\r\n          parseFloat(parsedFounderData.totalShares) ||\r\n          parseFloat(parsedFounderData.totalshares) ||\r\n          0;\r\n\r\n        setexistingSharesUse(totalShares);\r\n\r\n        //  Update formData state\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          existingShares: totalShares,\r\n\r\n        }));\r\n      } else {\r\n        console.warn(\" No existing shares found for this company.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\" Error fetching existing shares:\", err);\r\n    }\r\n  };\r\n\r\n  const [allowedRounds, setAllowedRounds] = useState(null); // null for loading state\r\n  const [previousRounds, setPreviousRounds] = useState([]);\r\n\r\n  const getPreviousFundingRound = async () => {\r\n    try {\r\n      console.log(\" Fetching allowed rounds...\");\r\n\r\n      const res = await axios.post(\r\n        `${apiUrlRound}getPreviousFundingRound`,\r\n        {\r\n          company_id: userLogin.companies[0].id,\r\n        }\r\n      );\r\n\r\n\r\n\r\n      if (res.data.success) {\r\n        setPreviousRounds(res.data.results);\r\n        setAllowedRounds(res.data.allowedRounds || []); // Ensure array\r\n\r\n        console.log(\" Allowed Rounds from API:\", res.data.allowedRounds);\r\n        console.log(\" Allowed Count:\", res.data.allowedRounds?.length || 0);\r\n\r\n        // Show what's blocked\r\n        if (res.data.allowedRounds) {\r\n          const blockedRounds = [\r\n            \"Pre-Seed\", \"Seed\", \"Post-Seed\",\r\n            \"Series A\", \"Series A Extension\",\r\n            \"Series B\", \"Series B Extension\",\r\n            \"Series C\", \"Series C Extension\",\r\n            \"Series D\", \"Series D Extension\"\r\n          ].filter(round => !res.data.allowedRounds.includes(round));\r\n\r\n          console.log(\" Blocked Rounds:\", blockedRounds);\r\n        }\r\n\r\n        // Reset if current selection not allowed\r\n        if (selected !== \"default\" && res.data.allowedRounds && !res.data.allowedRounds.includes(selected)) {\r\n          console.log(` Resetting selection: ${selected} is not allowed`);\r\n          setSelected(\"default\");\r\n          handleInputChange(\"shareClassType\", \"\");\r\n        }\r\n      } else {\r\n        console.error(\" API Error:\", res.data.message);\r\n        // Fallback to all rounds\r\n        setAllowedRounds([\r\n          \"Pre-Seed\", \"Seed\", \"Post-Seed\",\r\n          \"Series A\", \"Series A Extension\",\r\n          \"Series B\", \"Series B Extension\",\r\n          \"Series C\", \"Series C Extension\",\r\n          \"Series D\", \"Series D Extension\",\r\n          \"Bridge Round\", \"Advisor Shares\", \"OTHER\"\r\n        ]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\" Network Error:\", err);\r\n      // Fallback to all rounds\r\n      setAllowedRounds([\r\n        \"Pre-Seed\", \"Seed\", \"Post-Seed\",\r\n        \"Series A\", \"Series A Extension\",\r\n        \"Series B\", \"Series B Extension\",\r\n        \"Series C\", \"Series C Extension\",\r\n        \"Series D\", \"Series D Extension\",\r\n        \"Bridge Round\", \"Advisor Shares\", \"OTHER\"\r\n      ]);\r\n    }\r\n  };\r\n\r\n  // Helper function for frontend\r\n\r\n\r\n\r\n  const getAuthorizedSignature = async () => {\r\n    // Skip check for Owner\r\n    if (userLogin.role === \"owner\") return;\r\n\r\n    let formData = {\r\n      company_id: userLogin.companies[0].id,\r\n      user_id: userLogin.id,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        apiURLSignature + \"getAuthorizedSignature\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const checkData = res.data.results;\r\n\r\n      if (checkData.length > 0) {\r\n        const checkSignature = checkData[0];\r\n        if (checkSignature.approve === \"No\") {\r\n          navigate(\"/record-round-list\");\r\n        }\r\n      } else {\r\n        navigate(\"/record-round-list\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching authorized signature:\", err);\r\n    }\r\n  };\r\n\r\n  //Checkpayment\r\n  const handleCheckPayemt = async () => {\r\n    let formData = {\r\n      company_id: userLogin.companies[0].id,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        apiURLAiFile + \"checkSubscriptionInvestorReport\",\r\n        {\r\n          company_id: userLogin.companies[0].id,\r\n        }\r\n      );\r\n\r\n      const { subscriptionActive, updateAlreadySubmitted, lastUpdateDate } =\r\n        res.data;\r\n\r\n      if (!subscriptionActive) {\r\n        // navigate(\"/record-round-list\"); // Subscription expired\r\n      } else if (updateAlreadySubmitted) {\r\n      } else {\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      seterrr(true);\r\n    }\r\n  };\r\n\r\n  //Check Authorized Signature\r\n  useEffect(() => {\r\n    getrecords();\r\n  }, []);\r\n\r\n  const getrecords = async () => {\r\n    const formData = {\r\n      company_id: userLogin.companies[0].id,\r\n    };\r\n    try {\r\n      const generateRes = await axios.post(\r\n        apiURLInvestor + \"getrecordRoundList\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      setrecords(generateRes.data.results);\r\n    } catch (err) {\r\n      console.error(\"Error generating summary\", err);\r\n    }\r\n    //  Optionally, call AI Summary API here\r\n    //generateExecutiveSummary(formData);\r\n  };\r\n  useEffect(() => {\r\n    document.title = id ? \"Edit Record Round Page\" : \"Create Record Round Page\";\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      getEditrecordlist();\r\n    }\r\n  }, []);\r\n  const [Editrecords, setEditrecords] = useState(\"\");\r\n  const [RoundData, setRoundData] = useState('')\r\n  const getEditrecordlist = async () => {\r\n    const formData = {\r\n      company_id: userLogin.companies[0].id,\r\n      id: id,\r\n    };\r\n    try {\r\n      const generateRes = await axios.post(\r\n        apiUrlRound + \"getEditrecordlist\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (generateRes.data.results.length > 0) {\r\n        var getData = generateRes.data.results[0];\r\n        setRoundData(getData);\r\n        console.log(getData)\r\n        if (getData.round_type === 'Round 0') {\r\n          setIsFirstRound(true);\r\n\r\n\r\n          // Auto-set Round 0 values if first round\r\n\r\n          handleInputChange(\"nameOfRound\", \"\");\r\n          setSelected(\"Founder Shares (Family and Friends)\");\r\n          setFirstStepCompleted(true);\r\n\r\n        } else {\r\n          setIsFirstRound(false);\r\n        }\r\n\r\n        // Parse instrument_type_data JSON\r\n        let instrumentData = {};\r\n        if (getData.instrument_type_data && getData.instrument_type_data !== '') {\r\n          try {\r\n            let rawData = getData.instrument_type_data;\r\n            if (typeof rawData === 'object' && rawData !== null) {\r\n              instrumentData = rawData;\r\n            } else if (typeof rawData === \"string\") {\r\n              if (rawData.startsWith('\"') && rawData.endsWith('\"')) {\r\n                rawData = rawData.slice(1, -1);\r\n                rawData = rawData.replace(/\\\\\"/g, '\"');\r\n              }\r\n              instrumentData = JSON.parse(rawData);\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Error parsing instrument_type_data\", err);\r\n          }\r\n        }\r\n\r\n        //  NEW: Parse founder_data for Round 0\r\n        let parsedFounderData = {};\r\n        let foundersDataFromDB = [];\r\n        let pricePerShareFromDB = \"0.01\";\r\n\r\n        if (getData.round_type === 'Round 0' && getData.founder_data) {\r\n          try {\r\n            let rawFounderData = getData.founder_data;\r\n\r\n            // Handle different formats of founder_data\r\n            if (typeof rawFounderData === 'object' && rawFounderData !== null) {\r\n              parsedFounderData = rawFounderData;\r\n            } else if (typeof rawFounderData === \"string\") {\r\n              // Clean the string\r\n              if (rawFounderData.startsWith('\"') && rawFounderData.endsWith('\"')) {\r\n                rawFounderData = rawFounderData.slice(1, -1);\r\n                rawFounderData = rawFounderData.replace(/\\\\\"/g, '\"');\r\n              }\r\n              parsedFounderData = JSON.parse(rawFounderData);\r\n            }\r\n\r\n            // Extract founders data for form fields\r\n            if (parsedFounderData.founders && Array.isArray(parsedFounderData.founders)) {\r\n              foundersDataFromDB = parsedFounderData.founders;\r\n            }\r\n\r\n            if (parsedFounderData.pricePerShare) {\r\n              pricePerShareFromDB = parsedFounderData.pricePerShare;\r\n            }\r\n\r\n\r\n\r\n          } catch (err) {\r\n            console.error(\"Error parsing founder_data\", err);\r\n            console.error(\"Raw founder_data:\", getData.founder_data);\r\n          }\r\n        }\r\n\r\n        const updatedFormData = {\r\n          ...getData, // existing fields\r\n          ...instrumentData, // merge parsed JSON\r\n\r\n          //  Set Round 0 specific fields\r\n          ...(getData.round_type === 'Round 0' && {\r\n            pricePerShare: pricePerShareFromDB,\r\n            // Add other Round 0 specific fields if needed\r\n          }),\r\n\r\n          termsheetFile: Array.isArray(getData.termsheetFile)\r\n            ? getData.termsheetFile.map((file) =>\r\n              typeof file === \"string\" ? { name: file } : file\r\n            )\r\n            : getData.termsheetFile\r\n              ? (() => {\r\n                try {\r\n                  const parsed = JSON.parse(getData.termsheetFile);\r\n                  return (Array.isArray(parsed) ? parsed : [parsed]).map(\r\n                    (file) => (typeof file === \"string\" ? { name: file } : file)\r\n                  );\r\n                } catch {\r\n                  return [{ name: getData.termsheetFile }];\r\n                }\r\n              })()\r\n              : [],\r\n\r\n          subscriptiondocument: Array.isArray(getData.subscriptiondocument)\r\n            ? getData.subscriptiondocument.map((file) =>\r\n              typeof file === \"string\" ? { name: file } : file\r\n            )\r\n            : getData.subscriptiondocument\r\n              ? (() => {\r\n                try {\r\n                  const parsed = JSON.parse(getData.subscriptiondocument);\r\n                  return (Array.isArray(parsed) ? parsed : [parsed]).map(\r\n                    (file) => (typeof file === \"string\" ? { name: file } : file)\r\n                  );\r\n                } catch {\r\n                  return [{ name: getData.subscriptiondocument }];\r\n                }\r\n              })()\r\n              : [],\r\n\r\n          liquidation: (() => {\r\n            if (!getData.liquidation) return [];\r\n            if (Array.isArray(getData.liquidation)) {\r\n              return getData.liquidation;\r\n            } else if (typeof getData.liquidation === 'string') {\r\n              return getData.liquidation.split(\",\").map((v) => v.trim()).filter(v => v !== '');\r\n            } else {\r\n              console.warn(\"Unexpected liquidation data type:\", typeof getData.liquidation, getData.liquidation);\r\n              return [];\r\n            }\r\n          })(),\r\n        };\r\n\r\n\r\n        setFormData(updatedFormData);\r\n\r\n        //  SET FOUNDERS DATA FOR ROUND 0\r\n\r\n        if (getData.round_type === 'Round 0' && foundersDataFromDB.length > 0) {\r\n          setFoundersData(foundersDataFromDB);\r\n          setFounderCount(foundersDataFromDB.length);\r\n\r\n        }\r\n\r\n        setEditrecords(generateRes.data.results[0]);\r\n        setSelected(getData.shareClassType);\r\n      } else {\r\n        navigate(\"/record-round-list\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error generating summary\", err);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    if (field === 'currency') {\r\n      setCurrDisplay(value);\r\n    }\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n  const calculateFounderValue = (shares) => {\r\n    const pricePerShare = parseFloat(formData.pricePerShare) || 0;\r\n    return (shares * pricePerShare).toFixed(2);\r\n  };\r\n  const [selected, setSelected] = useState(\"default\");\r\n  const [otherText, setOtherText] = useState(\"\");\r\n  const [isReviewing, setIsReviewing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getIP = async () => {\r\n      try {\r\n        const res = await fetch(\"https://ipapi.co/json/\");\r\n        const data = await res.json();\r\n        console.log(data)\r\n        setClientIP(data.ip); // Save this to state\r\n        setCountryName(data.country_name);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch IP\", error);\r\n      }\r\n    };\r\n\r\n    getIP();\r\n  }, []);\r\n  const handleSubmit = async () => {\r\n\r\n    const formDataToSend = new FormData();\r\n    formDataToSend.append(\"created_by_id\", userLogin.id);\r\n    formDataToSend.append(\"id\", id || \"\"); // Fix: Handle empty id for new records\r\n    formDataToSend.append(\"company_id\", userLogin.companies[0].id);\r\n    formDataToSend.append(\"created_by_role\", userLogin.role);\r\n    formDataToSend.append(\"country_name\", CountryName);\r\n\r\n    // Round 0 vs Round 1+ logic\r\n    if (isFirstRound) {\r\n      // ROUND 0 SPECIFIC DATA\r\n      formDataToSend.append(\"round_type\", \"Round 0\");\r\n      formDataToSend.append(\"shareClassType\", \"Common Shares\");\r\n      formDataToSend.append(\"nameOfRound\", formData.nameOfRound);\r\n      formDataToSend.append(\"issuedshares\", calculateTotalShares().toString());\r\n      formDataToSend.append(\"roundStatus\", \"\");\r\n      formDataToSend.append(\"instrumentType\", \"\");\r\n      formDataToSend.append(\"roundsize\", \"\");\r\n      formDataToSend.append(\"currency\", \"CAD $\");\r\n      formDataToSend.append(\"dateroundclosed\", formData.dateroundclosed); // Add current date for Round 0\r\n\r\n      // Founder data for Round 0 - FIXED: Convert to proper JSON string\r\n      const founderData = {\r\n        founders: foundersData,\r\n        totalShares: calculateTotalShares(),\r\n        totalValue: calculateTotalValue(),\r\n        pricePerShare: formData.pricePerShare || \"0.01\",\r\n        ownershipBreakdown: calculateOwnershipPercentages()\r\n      };\r\n      formDataToSend.append(\"founder_data\", JSON.stringify(founderData));\r\n      formDataToSend.append(\"total_founder_shares\", calculateTotalShares().toString());\r\n      formDataToSend.append(\"founder_count\", founderCount.toString());\r\n\r\n    } else {\r\n      // ROUND 1+ DATA\r\n      formDataToSend.append(\"round_type\", \"Investment\");\r\n      if ((formData.instrumentType === 'Convertible Note' && (formData.shareClassType === \"Pre-Seed\" || formData.shareClassType === \"Post-Seed\")) || (formData.instrumentType === 'Safe' && (formData.shareClassType === 'Seed' || formData.shareClassType === \"Pre-Seed\" || formData.shareClassType === \"Post-Seed\"))) {\r\n        formDataToSend.append(\"investorPostMoney\", \"\");\r\n      } else {\r\n        formDataToSend.append(\"investorPostMoney\", formData.investorPostMoney || \"\");\r\n      }\r\n\r\n      formDataToSend.append(\"shareClassType\", selected || \"\");\r\n      formDataToSend.append(\"nameOfRound\", formData.nameOfRound || \"\");\r\n      if (formData.instrumentType === 'Convertible Note' || formData.instrumentType === 'Safe') {\r\n        formDataToSend.append(\"issuedshares\", \"\");\r\n        //formDataToSend.append(\"optionPoolPercent_post\", formData.optionPoolPercent);\r\n      } else {\r\n        //formDataToSend.append(\"issuedshares\", formData.issuedshares || \"\");\r\n        formDataToSend.append(\"issuedshares\", \"\");\r\n      }\r\n\r\n      if (formData.instrumentType === 'Safe') {\r\n        formDataToSend.append(\"post_money\", \"\");\r\n\r\n      } else {\r\n        formDataToSend.append(\"post_money\", formData.post_money || \"\");\r\n\r\n      }\r\n\r\n      formDataToSend.append(\"roundStatus\", formData.roundStatus || \"\");\r\n      formDataToSend.append(\"instrumentType\", formData.instrumentType || \"\");\r\n      formDataToSend.append(\"roundsize\", formData.roundsize || \"\");\r\n      formDataToSend.append(\"currency\", formData.currency || \"\");\r\n      formDataToSend.append(\"pre_money\", formData.pre_money || \"\");\r\n\r\n      // let optionPoolPostValue = \"\";\r\n\r\n      // if (formData.instrumentType === \"Convertible Note\" || formData.instrumentType === \"Safe\") {\r\n      //   optionPoolPostValue = formData.optionPoolPercent || \"\";\r\n      // } else if (formData.instrumentType === \"Preferred Equity\") {\r\n      //   optionPoolPostValue = formData.optionPoolPercent_post || \"\";\r\n      // } else {\r\n      //   optionPoolPostValue = formData.optionPoolPercent_post || \"\";\r\n      // }\r\n\r\n      formDataToSend.append(\"optionPoolPercent_post\", formData.optionPoolPercent_post);\r\n      formDataToSend.append(\"optionPoolPercent\", formData.optionPoolPercent || \"\");\r\n\r\n    }\r\n\r\n    // COMMON FIELDS FOR BOTH ROUNDS - FIXED: Handle null/undefined values\r\n    formDataToSend.append(\"description\", formData.description || \"\");\r\n    formDataToSend.append(\"liquidationOther\", formData.liquidationOther || \"\");\r\n    formDataToSend.append(\"liquidationpreferences\", formData.liquidationpreferences || \"\");\r\n    formDataToSend.append(\"shareclassother\", formData.shareclassother || \"\");\r\n    formDataToSend.append(\"customInstrument\", formData.customInstrument || \"\");\r\n    formDataToSend.append(\"rights\", formData.rights || \"\");\r\n\r\n    // FIXED: Convert array to string for liquidation field\r\n    formDataToSend.append(\"liquidation\", Array.isArray(formData.liquidation) ? formData.liquidation.join(\",\") : \"\");\r\n\r\n    formDataToSend.append(\"convertible\", formData.convertible || \"\");\r\n    formDataToSend.append(\"convertibleType\", formData.convertibleType || \"\");\r\n    formDataToSend.append(\"voting\", formData.voting || \"\");\r\n    formDataToSend.append(\"dateroundclosed\", formData.dateroundclosed || \"\");\r\n    formDataToSend.append(\"generalnotes\", formData.generalnotes || \"\");\r\n    formDataToSend.append(\"ip_address\", ClientIP || \"\");\r\n    formDataToSend.append(\"ClientIP\", ClientIP || \"\"); // Add both for compatibility\r\n\r\n    // File uploads - FIXED: Handle empty arrays\r\n    if (formData.termsheetFile && formData.termsheetFile.length > 0) {\r\n      formData.termsheetFile.forEach((file) => {\r\n        formDataToSend.append(\"termsheetFile\", file);\r\n      });\r\n    } else {\r\n      formDataToSend.append(\"termsheetFile\", \"\"); // Send empty string if no files\r\n    }\r\n\r\n    if (formData.subscriptiondocument && formData.subscriptiondocument.length > 0) {\r\n      formData.subscriptiondocument.forEach((file) => {\r\n        formDataToSend.append(\"subscriptiondocument\", file);\r\n      });\r\n    } else {\r\n      formDataToSend.append(\"subscriptiondocument\", \"\"); // Send empty string if no files\r\n    }\r\n\r\n    // Instrument data (mostly for Round 1+)\r\n    let instrumentData = {};\r\n    if (!isFirstRound && formData.instrumentType) {\r\n      switch (formData.instrumentType) {\r\n        case \"Common Stock\":\r\n          // instrumentData = {\r\n          //   common_stock_valuation: formData.common_stock_valuation || \"\",\r\n          //   hasWarrants: formData.hasWarrants || false,\r\n          //   ...(formData.hasWarrants && {\r\n          //     exercisePrice: formData.exercisePrice || \"\",\r\n          //     expirationDate: formData.expirationDate || \"\",\r\n          //     warrantRatio: formData.warrantRatio || \"\",\r\n          //     warrantType: formData.warrantType || \"CALL\",\r\n          //   }),\r\n          // };\r\n          instrumentData = {};\r\n          break;\r\n\r\n        case \"Preferred Equity\":\r\n          instrumentData = {\r\n            preferred_valuation: formData.preferred_valuation || \"\",\r\n\r\n            //  WARRANT DATA (will be saved separately)\r\n            hasWarrants_preferred: formData.hasWarrants_preferred || false,\r\n            ...(formData.hasWarrants_preferred && {\r\n              warrant_coverage_percentage: formData.warrant_coverage_percentage || \"\",\r\n              warrant_exercise_type: formData.warrant_exercise_type || \"next_round_adjusted\",\r\n              warrant_adjustment_direction: formData.warrant_adjustment_direction || \"decrease\",\r\n              warrant_adjustment_percent: formData.warrant_adjustment_percent || \"\",\r\n              expirationDate_preferred: formData.expirationDate_preferred || \"\",\r\n              warrant_notes: formData.warrant_notes || \"\",\r\n              warrant_status: 'pending' || \"\"\r\n            })\r\n          };\r\n          break;\r\n\r\n        case \"Safe\":\r\n          instrumentData = {\r\n            valuationCap: formData.valuationCap || \"\",\r\n            discountRate: formData.discountRate || \"\",\r\n            // safeType: formData.safeType || \"PRE_MONEY\",\r\n          };\r\n          break;\r\n\r\n        case \"Venture/Bank DEBT\":\r\n          instrumentData = {\r\n            interestRate: formData.interestRate || \"\",\r\n            repaymentSchedule: formData.repaymentSchedule || \"\",\r\n            hasWarrants_Bank: formData.hasWarrants_Bank || false,\r\n            ...(formData.hasWarrants_Bank && {\r\n              exercisePrice_bank: formData.exercisePrice_bank || \"\",\r\n              exercisedate_bank: formData.exercisedate_bank || \"\",\r\n              warrantRatio_bank: formData.warrantRatio_bank || \"\",\r\n              warrantType_bank: formData.warrantType_bank || \"CALL\",\r\n            }),\r\n          };\r\n          break;\r\n\r\n        case \"Convertible Note\":\r\n          instrumentData = {\r\n            valuationCap_note: formData.valuationCap_note || \"\",\r\n            discountRate_note: formData.discountRate_note || \"\",\r\n            maturityDate: formData.maturityDate || \"\",\r\n            interestRate_note: formData.interestRate_note || \"\",\r\n            //  convertibleTrigger: formData.convertibleTrigger || \"\",\r\n          };\r\n          break;\r\n\r\n        default:\r\n          instrumentData = {};\r\n      }\r\n    }\r\n\r\n    // FIXED: Always send instrument_type_data, even if empty\r\n    formDataToSend.append(\"instrument_type_data\", JSON.stringify(instrumentData));\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        apiUrlRound + \"CreateOrUpdateCapitalRound\",\r\n        formDataToSend,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        }\r\n      );\r\n      const createdRoundId = res.data.id;\r\n      if (!isFirstRound &&\r\n        formData.instrumentType === \"Preferred Equity\" &&\r\n        formData.hasWarrants_preferred &&\r\n        createdRoundId) {\r\n\r\n        const warrantData = {\r\n          roundrecord_id: createdRoundId,\r\n          company_id: userLogin.companies[0].id,\r\n          investor_id: 0, // Will be updated when investor confirms\r\n          warrant_coverage_percentage: parseFloat(formData.warrant_coverage_percentage) || 0,\r\n          warrant_exercise_type: formData.warrant_exercise_type || \"next_round_adjusted\",\r\n          warrant_adjustment_percent: parseFloat(formData.warrant_adjustment_percent) || 0,\r\n          warrant_adjustment_direction: formData.warrant_adjustment_direction || \"decrease\",\r\n          calculated_exercise_price: null, // Calculated when exercised\r\n          calculated_warrant_shares: null, // Calculated when exercised\r\n          warrant_coverage_amount: null, // Calculated when exercised\r\n          warrant_status: \"pending\",\r\n          issued_date: formData.dateroundclosed || new Date().toISOString().split('T')[0],\r\n          expiration_date: formData.expirationDate_preferred || null,\r\n          notes: formData.warrant_notes || null\r\n        };\r\n\r\n        // Save warrant to warrants table\r\n        if (!id) {\r\n\r\n\r\n          await axios.post(\r\n            apiUrlRound + \"createWarrant\",\r\n            warrantData,\r\n            {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          );\r\n        } else {\r\n          const warrantDataUpdate = {\r\n            roundrecord_id: id,\r\n            company_id: userLogin.companies[0].id,\r\n            investor_id: 0, // Will be updated when investor confirms\r\n            warrant_coverage_percentage: parseFloat(formData.warrant_coverage_percentage) || 0,\r\n            warrant_exercise_type: formData.warrant_exercise_type || \"next_round_adjusted\",\r\n            warrant_adjustment_percent: parseFloat(formData.warrant_adjustment_percent) || 0,\r\n            warrant_adjustment_direction: formData.warrant_adjustment_direction || \"decrease\",\r\n            calculated_exercise_price: null, // Calculated when exercised\r\n            calculated_warrant_shares: null, // Calculated when exercised\r\n            warrant_coverage_amount: null, // Calculated when exercised\r\n            warrant_status: \"pending\",\r\n            issued_date: formData.dateroundclosed || new Date().toISOString().split('T')[0],\r\n            expiration_date: formData.expirationDate_preferred || null,\r\n            notes: formData.warrant_notes || null\r\n          };\r\n\r\n          await axios.post(\r\n            apiUrlRound + \"warrantDataUpdate\",\r\n            warrantDataUpdate,\r\n            {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          );\r\n        }\r\n      }\r\n      setIsLoading(false);\r\n      seterrr(false);\r\n      setmessageAll(res.data.message);\r\n      setTimeout(() => {\r\n        setmessageAll(\"\");\r\n        navigate(\"/record-round-list\");\r\n      }, 1500);\r\n    } catch (err) {\r\n      setIsLoading(false);\r\n      seterrr(true);\r\n      setmessageAll(err.response?.data?.message || \"Error creating round\");\r\n      setTimeout(() => {\r\n        setmessageAll(\"\");\r\n      }, 5000);\r\n      console.error(\"Error creating round:\", err);\r\n    }\r\n  };\r\n\r\n  // Share class options\r\n\r\n  const [firstStepCompleted, setFirstStepCompleted] = useState(false);\r\n  const handleOptionClick = (opt) => {\r\n    // If editing (id exists), allow all options\r\n    if (!id) {\r\n      // First step: only Founder Shares selectable\r\n      if (\r\n        !firstStepCompleted &&\r\n        opt !== \"Founder Shares (Family and Friends)\"\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      // After first step is done\r\n      if (\r\n        !firstStepCompleted &&\r\n        opt === \"Founder Shares (Family and Friends)\"\r\n      ) {\r\n        setFirstStepCompleted(true);\r\n        handleInputChange(\"nameOfRound\", \"\");\r\n      }\r\n    }\r\n\r\n    // Set selection and update form data\r\n    setSelected(opt);\r\n    handleInputChange(\r\n      \"shareClassType\",\r\n      opt === \"OTHER\" ? formData.shareclassother : opt\r\n    );\r\n    if (opt !== \"OTHER\") handleInputChange(\"shareclassother\", \"\");\r\n  };\r\n\r\n  const options = [\r\n    //\"Founder Shares (Family and Friends)\",\r\n    //\"Employee Options Pool\", // mandatory first selection\r\n    \"Advisor Shares\",\r\n    \"Pre-Seed\",\r\n    \"Seed\",\r\n    \"Seed Extension / Seed+\",\r\n    \"Series A\",\r\n    \"Series A Extension\",\r\n    \"Series B\",\r\n    \"Series B Extension\",\r\n    \"Series C\",\r\n    \"Series C Extension\",\r\n    \"Series D\",\r\n    \"Bridge Round\",\r\n    \"OTHER\",\r\n  ];\r\n\r\n  // Form sections\r\n\r\n  // Fixed navigation function\r\n  const navigateToSection = (direction) => {\r\n    const currentIndex = sections.findIndex((section) => section.id === activeSection);\r\n\r\n    if (direction === 'next' && currentIndex < sections.length - 1) {\r\n      setActiveSection(sections[currentIndex + 1].id);\r\n    } else if (direction === 'prev' && currentIndex > 0) {\r\n      setActiveSection(sections[currentIndex - 1].id);\r\n    }\r\n  };\r\n\r\n  const getSections = (selectedOption, instrumentType) => {\r\n    if (isFirstRound) {\r\n      // ROUND 0 SECTIONS\r\n      return [\r\n        { id: \"shareclass\", title: \"Founder Share Allocation\" },\r\n        { id: \"description\", title: \"Description\" },\r\n        { id: \"issuedshares\", title: \"Round 0 Summary\" },\r\n        { id: \"rights\", title: \"Rights & Preferences\" },\r\n        { id: \"notes\", title: \"Notes\" },\r\n      ];\r\n    } else {\r\n      // OTHER ROUNDS SECTIONS\r\n      let sections = [\r\n        { id: \"shareclass\", title: \"Share Class\" },\r\n        { id: \"instrument\", title: \"Investment Instrument\" },\r\n        { id: \"roundsize\", title: \"Round Size\" },\r\n        { id: \"issuedshares\", title: \"Round Active/Closed\" },\r\n        { id: \"description\", title: \"Description\" },\r\n        { id: \"rights\", title: \"Rights & Preferences\" },\r\n        // { id: \"liquidation\", title: \"Liquidation Preference\" }, // Isko conditionally add karenge\r\n        // { id: \"convertible\", title: \"Convertible?\" },\r\n        // { id: \"voting\", title: \"Voting Rights\" },\r\n        { id: \"termsheet\", title: \"Term Sheet\" },\r\n        { id: \"subscription\", title: \"Subscription Document\" },\r\n        { id: \"notes\", title: \"Notes\" },\r\n      ];\r\n\r\n      //  Sirf tabhi Liquidation Preference section add karein jab instrumentType \"Preferred Equity\" ho\r\n      if (instrumentType === \"Preferred Equity\") {\r\n        sections.splice(6, 0, { id: \"liquidation\", title: \"Liquidation Preference\" });\r\n      }\r\n\r\n      // Hide \"Investment Instrument\" if user selected \"Seed\"\r\n      // if (selectedOption === \"Seed\") {\r\n      //   sections = sections.filter((s) => s.id !== \"instrument\");\r\n      // }\r\n\r\n      return sections;\r\n    }\r\n  };\r\n\r\n\r\n  const sections = getSections(formData.shareClassType, formData.instrumentType);\r\n\r\n  // Fixed Progress bar calculation\r\n  const totalSections = sections.length;\r\n  const activeIndex = sections.findIndex((section) => section.id === activeSection);\r\n  const progressWidth = totalSections > 0 ? Math.round(((activeIndex + 1) / totalSections) * 100) : 0;\r\n\r\n  //Instrument\r\n  const instrumentOptions = [\r\n    {\r\n      value: \"Common Stock\",\r\n      label: \"Common Stock\",\r\n      description:\r\n        \"Direct sale of common shares, often to founders or early employees.\",\r\n    },\r\n    {\r\n      value: \"Preferred Equity\",\r\n      label: \"Preferred Equity\",\r\n      description:\r\n        \"Equity with liquidity preference, often used in priced rounds with early-stage investors.\",\r\n    },\r\n    {\r\n      value: \"Convertible Note\",\r\n      label: \"Convertible Note\",\r\n      description:\r\n        \"Short-term debt that converts into equity at a future financing round.\",\r\n    },\r\n    {\r\n      value: \"Safe\",\r\n      label: \"Safe\",\r\n      description:\r\n        \"Simple Agreement for Future Equity - converts at the time of a priced round.\",\r\n    },\r\n    {\r\n      value: \"Venture/Bank DEBT\",\r\n      label: \"Venture/Bank DEBT\",\r\n      description:\r\n        \"Non-convertible financing structured as loans, typically repaid with interest.\",\r\n    },\r\n    {\r\n      value: \"OTHER\",\r\n      label: \"Other\",\r\n      description: \"Custom investment instrument not listed above.\",\r\n    },\r\n  ];\r\n\r\n  const liquidationOptions = {\r\n    multiplePreferences: [\r\n      {\r\n        value: \"1\",\r\n        label: \"1x Investor Multiple Preference\",\r\n        description: \"1x multiple of the original investment returned before common shares participate.\",\r\n        group: \"multiple\"\r\n      },\r\n      {\r\n        value: \"2\",\r\n        label: \"2x Investor Multiple Preference\",\r\n        description: \"2x multiple of the original investment returned before common shares participate.\",\r\n        group: \"multiple\"\r\n      },\r\n      {\r\n        value: \"3\",\r\n        label: \"3x Investor Multiple Preference\",\r\n        description: \"3x multiple of the original investment returned before common shares participate.\",\r\n        group: \"multiple\"\r\n      }\r\n    ],\r\n    participationRights: [\r\n      {\r\n        value: \"Non-Participating\",\r\n        label: \"Non-Participating\",\r\n        description: \"Investor chooses either the liquidation preference or the stock value.\",\r\n        group: \"participation\"\r\n      },\r\n      {\r\n        value: \"Participating\",\r\n        label: \"Participating\",\r\n        description: \"Received liquidation preference and then participated pro-rata with common shareholders.\",\r\n        group: \"participation\"\r\n      },\r\n      {\r\n        value: \"Capped Participating\",\r\n        label: \"Capped Participating\",\r\n        description: \"Participation capped at a defined multiple (e.g. total return capped at 3x).\",\r\n        group: \"participation\"\r\n      },\r\n      {\r\n        value: \"Participating with Catch-up\",\r\n        label: \"Participating with Catch-up\",\r\n        description: \"Common gets paid first to a threshold, then preferred 'catches up' before full pro-rata sharing.\",\r\n        group: \"participation\"\r\n      },\r\n      {\r\n        value: \"Senior Debt\",\r\n        label: \"Senior Debt\",\r\n        description: \"A loan or obligation that takes repayment priority over other debts in the event of bankruptcy.\",\r\n        group: \"participation\"\r\n      },\r\n      {\r\n        value: \"Common Debt\",\r\n        label: \"Common Debt\",\r\n        description: \"A loan or obligation that takes secondary repayment priority over other senior debts in the event of bankruptcy.\",\r\n        group: \"participation\"\r\n      }\r\n    ],\r\n    otherOptions: [\r\n      {\r\n        value: \"N/A\",\r\n        label: \"N/A\",\r\n        description: \"Does not apply to this round.\",\r\n        group: \"other\"\r\n      },\r\n      {\r\n        value: \"OTHER\",\r\n        label: \"Other\",\r\n        description: \"Custom response entered by the company.\",\r\n        group: \"other\"\r\n      }\r\n    ]\r\n  };\r\n\r\n  //getallcountrySymbolList\r\n  const [localeFormat, setLocaleFormat] = useState('en-US'); // Add this\r\n  useEffect(() => {\r\n    getallcountrySymbolList();\r\n    getcountrySymbolLocal();\r\n  }, []);\r\n  const getallcountrySymbolList = async () => {\r\n    let formData = {\r\n      id: \"\",\r\n    };\r\n    try {\r\n      const res = await axios.post(\r\n        apiUrlRound + \"getallcountrySymbolList\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\", // Ensure the content type is JSON\r\n          },\r\n        }\r\n      );\r\n\r\n      var respo = res.data.results;\r\n\r\n      setCountrysymbollist(respo);\r\n    } catch (err) {\r\n      // Enhanced error handling\r\n    }\r\n  };\r\n  const [countryCode, setCountryCode] = useState('US'); // Add this state\r\n\r\n  const getcountrySymbolLocal = async () => {\r\n    try {\r\n      const res = await axios.post(\r\n        apiURLSignature + \"getcountrySymbolLocal\",\r\n        { company_id: userLogin.companies[0].id },\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const checkData = res.data.results;\r\n      if (checkData.length > 0) {\r\n        const code = checkData[0].country_code; // \"IN\"\r\n        setCountryCode(code);\r\n\r\n        // Find country data from dynamic list\r\n        const countryData = countrySymbolList.find(\r\n          country => country.code === code\r\n        );\r\n\r\n\r\n        if (countryData) {\r\n          setCurrencySymbol(countryData.currency_symbol); //  for India\r\n\r\n          // Set locale dynamically based on country code\r\n          const locale = getLocaleFromCountryCode(code);\r\n          setLocaleFormat(locale);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\" Error fetching existing shares:\", err);\r\n    }\r\n  };\r\n  const getLocaleFromCountryCode = (code) => {\r\n    const localeMap = {\r\n      'IN': 'en-IN',    // India - 10,00,000\r\n      'US': 'en-US',    // USA - 1,000,000\r\n      'GB': 'en-GB',    // UK - 1,000,000\r\n      'CA': 'en-CA',    // Canada - 1,000,000\r\n      'AU': 'en-AU',    // Australia - 1,000,000\r\n      'DE': 'de-DE',    // Germany - 1.000.000\r\n      'FR': 'fr-FR',    // France - 1 000 000\r\n      'IT': 'it-IT',    // Italy - 1.000.000\r\n      'ES': 'es-ES',    // Spain - 1.000.000\r\n      'NL': 'nl-NL',    // Netherlands - 1.000.000\r\n      'CN': 'zh-CN',    // China - 1,000,000\r\n      'JP': 'ja-JP',    // Japan - 1,000,000\r\n      'KR': 'ko-KR',    // Korea - 1,000,000\r\n      'BR': 'pt-BR',    // Brazil - 1.000.000\r\n      'MX': 'es-MX',    // Mexico - 1,000,000\r\n      'AE': 'ar-AE',    // UAE - 1,000,000\r\n      'SA': 'ar-SA',    // Saudi Arabia - 1,000,000\r\n      'SG': 'en-SG',    // Singapore - 1,000,000\r\n      'MY': 'ms-MY',    // Malaysia - 1,000,000\r\n      'TH': 'th-TH',    // Thailand - 1,000,000\r\n      'PH': 'en-PH',    // Philippines - 1,000,000\r\n      'ID': 'id-ID',    // Indonesia - 1.000.000\r\n      'VN': 'vi-VN',    // Vietnam - 1.000.000\r\n      'PK': 'ur-PK',    // Pakistan - 1,000,000\r\n      'BD': 'bn-BD',    // Bangladesh - 10,00,000\r\n      'LK': 'si-LK',    // Sri Lanka - 1,000,000\r\n      'NP': 'ne-NP',    // Nepal - 10,00,000\r\n    };\r\n\r\n    return localeMap[code] || 'en-US'; // Default\r\n  };\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n\r\n  const handleReviewpage = () => {\r\n    // Check if this is an edit operation\r\n    const isEditOperation = id ? true : false; // If roundId exists, it's edit\r\n\r\n    if (isEditOperation) {\r\n      setsuccessMsg(\r\n        \" WARNING: Editing this round will affect ALL subsequent rounds. \" +\r\n        \"All following investment rounds will be recalculated based on new values. \" +\r\n        \"Please review all information carefully before submitting.\"\r\n      );\r\n    } else {\r\n      setsuccessMsg(\r\n        \"Please review all the information carefully before submitting. \" +\r\n        \"Once submitted, it can be officially recorded.\"\r\n      );\r\n    }\r\n\r\n    setIsReviewing(true); // show confirm button\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    setsuccessMsg(\"\");\r\n    setIsReviewing(false);\r\n    setIsLoading(true);\r\n    await handleSubmit(); // submit form once\r\n  };\r\n  // Utility function\r\n  const shouldShowAlert = (dateStr) => {\r\n    if (!dateStr || dateStr.trim() === \"\") return true; // empty  show\r\n\r\n    const [monthStr, dayStr, yearStr] = dateStr.split(\"/\");\r\n    const month = parseInt(monthStr, 10) - 1; // JS months 0-11\r\n    const day = parseInt(dayStr, 10);\r\n    const year = parseInt(yearStr, 10);\r\n\r\n    if (isNaN(month) || isNaN(day) || isNaN(year)) return true; // invalid  show\r\n\r\n    const roundDate = new Date(year, month, day);\r\n    const today = new Date();\r\n\r\n    // Show if roundDate is in the future\r\n    return roundDate > today;\r\n  };\r\n\r\n  //Check Round 0\r\n  // Recordround.jsx - Add these states after existing states\r\n\r\n\r\n  // Check if this is company's first round\r\n  useEffect(() => {\r\n    if (!id) {\r\n      checkIfFirstRound();\r\n    }\r\n  }, []);\r\n\r\n  const checkIfFirstRound = async () => {\r\n    try {\r\n      const formData = {\r\n        company_id: userLogin.companies[0].id,\r\n        id: id\r\n      };\r\n\r\n      const res = await axios.post(\r\n        apiUrlRound + \"checkExistingRounds\",\r\n        formData\r\n      );\r\n\r\n      const hasExistingRounds = res.data.roundCount;\r\n\r\n      setIsFirstRound(!hasExistingRounds);\r\n\r\n      // Auto-set Round 0 values if first round\r\n      if (!hasExistingRounds) {\r\n        handleInputChange(\"nameOfRound\", \"\");\r\n        setSelected(\"Founder Shares (Family and Friends)\");\r\n        setFirstStepCompleted(true);\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error(\"Error checking rounds:\", err);\r\n    }\r\n  };\r\n  // Add these functions after handleInputChange\r\n  const updateFounderData = (index, field, value) => {\r\n    setFoundersData(prev => {\r\n      const updated = [...prev];\r\n      if (!updated[index]) updated[index] = {};\r\n      updated[index][field] = value;\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const addFounder = () => {\r\n    setFoundersData(prev => [...prev, { shares: '', shareType: 'common', voting: 'voting' }]);\r\n    setFounderCount(prev => prev + 1);\r\n  };\r\n\r\n  const removeFounder = (index) => {\r\n    if (founderCount > 1) {\r\n      setFoundersData(prev => prev.filter((_, i) => i !== index));\r\n      setFounderCount(prev => prev - 1);\r\n    }\r\n  };\r\n\r\n  // Calculation functions for Round 0\r\n  const calculateTotalShares = () => {\r\n    return foundersData.reduce((total, founder) => {\r\n      return total + (parseInt(founder.shares) || 0);\r\n    }, 0);\r\n  };\r\n\r\n  const calculateTotalValue = () => {\r\n    const totalShares = calculateTotalShares();\r\n    const pricePerShare = parseFloat(formData.pricePerShare) || 0;\r\n\r\n    return (totalShares * pricePerShare).toLocaleString(\"en-US\", {\r\n\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    });\r\n  };\r\n\r\n\r\n  const calculateOwnershipPercentages = () => {\r\n    const totalShares = calculateTotalShares();\r\n    if (totalShares === 0) return [];\r\n\r\n    return foundersData.map((founder, index) => {\r\n      const shares = parseInt(founder.shares) || 0;\r\n      const percentage = totalShares > 0 ? (shares / totalShares) * 100 : 0;\r\n      return {\r\n        founder: `Founder ${index + 1}`,\r\n        percentage: percentage.toFixed(1)\r\n      };\r\n    });\r\n  };\r\n\r\n\r\n\r\n  //Round 1\r\n  //  CORRECTED SERIES A CALCULATION\r\n  const [previousRoundOptionPool, setPreviousRoundOptionPool] = useState(0);\r\n\r\n  const [calculatedValues, setCalculatedValues] = useState({\r\n    sharePrice: '0.0000',\r\n    newSharesIssued: 0,\r\n    totalPostShares: 0,\r\n    employeeOptionShares: 0,\r\n    newOptionShares: 0,\r\n    existingOptionPoolPercent: 0,\r\n    postMoneyValuation: '0.00',\r\n    investorOwnershipPercent: '0.00',\r\n    doc4Action: 'NO_ACTION'\r\n  });\r\n  //Series A Safe Round\r\n  const [seriesASafeData, setSeriesASafeData] = useState({\r\n    // Previous round data (from API)\r\n    previousTotalShares: 0.00,\r\n    previousFounderShares: 0.00,\r\n    previousEmployeeShares: 0.00,\r\n    previousSeedInvestment: 0.00,\r\n    previousValuationCap: 0.00,\r\n    previousDiscountRate: 0.00,\r\n\r\n    // Calculation results\r\n    seriesASharePrice: 0,\r\n    seedOptimalPrice: 0,\r\n    seedConversionShares: 0,\r\n    seedConversionValue: 0,\r\n    seedMOIC: 0,\r\n    seriesANewShares: 0,\r\n    seriesANewValue: 0,\r\n    seriesAMOIC: 0,\r\n    totalNewShares: 0,\r\n    totalExcludingOptions: 0,\r\n    totalSharesAfterPool: 0,\r\n    newOptionShares: 0,\r\n    postMoneyValuationEquity: 0,\r\n\r\n    // Ownership %\r\n    foundersPostOwnership: 0,\r\n    employeesPostOwnership: 0,\r\n    seedInvestorsPostOwnership: 0,\r\n    seriesAInvestorsPostOwnership: 0,\r\n    previousIntrumentType: '',\r\n    hasCalculated: true,\r\n  });\r\n  const calculateSeriesASafe = () => {\r\n    if (seriesASafeData.isCalculating) return;\r\n    const preMoney = parseFloat(formData.pre_money || 0);\r\n    const investmentSize = parseFloat(formData.roundsize || 0);\r\n    const optionPoolPost = parseFloat(formData.optionPoolPercent_post || 0); // Can be 0 to 100\r\n\r\n    // Previous round data\r\n    const previousTotalShares = seriesASafeData.previousTotalShares;\r\n    const previousFounderShares = seriesASafeData.previousFounderShares;\r\n    const previousEmployeeShares = seriesASafeData.previousEmployeeShares;\r\n    const previousSeedInvestment = seriesASafeData.previousSeedInvestment;\r\n    const previousValuationCap = seriesASafeData.previousValuationCap;\r\n    const previousDiscountRate = seriesASafeData.previousDiscountRate;\r\n\r\n\r\n\r\n    if (preMoney <= 0 || investmentSize <= 0 || previousTotalShares <= 0) {\r\n\r\n      return;\r\n    }\r\n\r\n    //  STEP 1: Series A share price\r\n    const seriesASharePrice = preMoney / previousTotalShares;\r\n\r\n\r\n    //  STEP 2: Seed conversion prices\r\n    const seedDiscountPrice = seriesASharePrice * (1 - (previousDiscountRate / 100));\r\n    const seedCapPrice = previousValuationCap / previousTotalShares;\r\n\r\n\r\n    //  STEP 3: Optimal purchase price\r\n    const seedOptimalPrice = Math.min(seedDiscountPrice, seedCapPrice);\r\n\r\n\r\n    //  STEP 4: SAFE Notes Conversion\r\n    const seedConversionShares = previousSeedInvestment / seedOptimalPrice;\r\n    const seedConversionValue = seedConversionShares * seriesASharePrice;\r\n    const seedMOIC = seedConversionValue / previousSeedInvestment;\r\n\r\n\r\n    //  STEP 5: Series A Purchase\r\n    const seriesANewShares = investmentSize / seriesASharePrice;\r\n    const seriesANewValue = seriesANewShares * seriesASharePrice;\r\n\r\n\r\n    //  STEP 6: Total new shares from this round\r\n    const totalNewShares = seedConversionShares + seriesANewShares;\r\n\r\n\r\n    //  STEP 7: Total shares EXCLUDING NEW option pool\r\n    const totalExcludingOptions = previousFounderShares + totalNewShares;\r\n\r\n\r\n    //  STEP 8: **CRITICAL - Handle Option Pool logic**\r\n    let totalSharesAfterPool;\r\n    let newOptionShares;\r\n    let employeesPostOwnership;\r\n\r\n    if (optionPoolPost === 0) {\r\n      // Case 1: No new option pool\r\n      totalSharesAfterPool = totalExcludingOptions; // No dilution\r\n      newOptionShares = 0;\r\n      employeesPostOwnership = (previousEmployeeShares / totalSharesAfterPool) * 100;\r\n\r\n    } else {\r\n      // Case 2: With option pool\r\n      // First calculate what the employee ownership % would be WITHOUT new options\r\n      const employeesExistingPercent = (previousEmployeeShares / totalExcludingOptions) * 100;\r\n\r\n      if (employeesExistingPercent >= optionPoolPost) {\r\n        // Case 2a: Existing employee pool is already >= target, no new options needed\r\n        totalSharesAfterPool = totalExcludingOptions;\r\n        newOptionShares = 0;\r\n        employeesPostOwnership = employeesExistingPercent;\r\n\r\n      } else {\r\n        // Case 2b: Need to create new options to reach target %\r\n        totalSharesAfterPool = totalExcludingOptions / (1 - (optionPoolPost / 100));\r\n        newOptionShares = totalSharesAfterPool - totalExcludingOptions - previousEmployeeShares;\r\n        employeesPostOwnership = optionPoolPost;\r\n\r\n      }\r\n    }\r\n\r\n\r\n\r\n    //  STEP 9: Post-Money Valuation\r\n    const postMoneyValuationEquity = totalSharesAfterPool * seriesASharePrice;\r\n\r\n\r\n    //  STEP 10: Ownership percentages\r\n    const foundersPostOwnership = (previousFounderShares / totalSharesAfterPool) * 100;\r\n    const seedInvestorsPostOwnership = (seedConversionShares / totalSharesAfterPool) * 100;\r\n    const seriesAInvestorsPostOwnership = (seriesANewShares / totalSharesAfterPool) * 100;\r\n\r\n    // For 0% case, employeesPostOwnership is already calculated above\r\n    if (optionPoolPost > 0) {\r\n      employeesPostOwnership = ((previousEmployeeShares + newOptionShares) / totalSharesAfterPool) * 100;\r\n    }\r\n\r\n\r\n\r\n    //  STEP 11: Total shares issued in THIS round\r\n    const totalSharesIssuedThisRound = seedConversionShares + seriesANewShares + newOptionShares;\r\n\r\n\r\n    //  STEP 12: Update state\r\n    setSeriesASafeData({\r\n      ...seriesASafeData,\r\n      seriesASharePrice: seriesASharePrice.toFixed(4),\r\n      seedOptimalPrice: seedOptimalPrice.toFixed(4),\r\n      seedConversionShares: Math.round(seedConversionShares),\r\n      seedConversionValue: Math.round(seedConversionValue),\r\n      seedMOIC: seedMOIC.toFixed(2),\r\n      seriesANewShares: Math.round(seriesANewShares),\r\n      seriesANewValue: Math.round(seriesANewValue),\r\n      seriesAMOIC: (seriesANewValue / investmentSize).toFixed(2),\r\n      totalNewShares: Math.round(totalNewShares),\r\n      totalExcludingOptions: Math.round(totalExcludingOptions),\r\n      totalSharesAfterPool: Math.round(totalSharesAfterPool),\r\n      newOptionShares: Math.round(newOptionShares),\r\n      postMoneyValuationEquity: Math.round(postMoneyValuationEquity),\r\n      foundersPostOwnership: foundersPostOwnership.toFixed(1),\r\n      employeesPostOwnership: employeesPostOwnership.toFixed(1),\r\n      seedInvestorsPostOwnership: seedInvestorsPostOwnership.toFixed(1),\r\n      seriesAInvestorsPostOwnership: seriesAInvestorsPostOwnership.toFixed(1),\r\n      hasCalculated: true,\r\n    });\r\n\r\n    //  STEP 13: Update formData\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      issuedshares: Math.round(totalSharesIssuedThisRound).toString(),\r\n      post_money: (preMoney + investmentSize).toFixed(2),\r\n      investorPostMoney: seriesAInvestorsPostOwnership.toFixed(2)\r\n    }));\r\n    setTimeout(() => {\r\n      setFormData(prev => ({ ...prev, isCalculationSource: false }));\r\n    }, 100);\r\n  };\r\n  const [seriesConvertibleData, setSeriesConvertibleData] = useState({\r\n    // Previous round data (from API)\r\n    previousTotalShares: 0,\r\n    previousFounderShares: 0,\r\n    previousEmployeeShares: 0,\r\n    previousRoundSize: 0,\r\n    previousInterestRate: 0,\r\n    previousValuationCap: 0,\r\n    previousDiscountRate: 0,\r\n    previousInstrumentType: \"\",\r\n    previousemployeeSharesFromSeed: 0,\r\n    // Calculated values\r\n    principalPlusInterest: '0.00',\r\n    seriesASharePrice: '0.0000',\r\n    noteOptimalPrice: '0.0000',\r\n    noteConversionShares: 0,\r\n    noteConversionValue: 0,\r\n    noteMOIC: '0.00',\r\n    seriesANewShares: 0,\r\n    seriesANewValue: 0,\r\n    seriesAMOIC: '0.00',\r\n    totalNewSharesBeforeOptions: 0,\r\n    totalExcludingOptions: 0,\r\n    totalSharesAfterPool: 0,\r\n    newOptionShares: 0,\r\n    postMoneyValuationEquity: 0,\r\n    simplePostMoney: 0, // Add this\r\n    foundersPostOwnership: '0.0',\r\n    employeesPostOwnership: '0.0',\r\n    noteInvestorsPostOwnership: '0.0',\r\n    seriesAInvestorsPostOwnership: '0.0',\r\n\r\n\r\n  });\r\n  const calculateSeriesConvertible = () => {\r\n    //  Get input values from form\r\n    console.log(seriesConvertibleData)\r\n    const preMoney = parseFloat(formData.pre_money || 0); // $1,200,000\r\n    const seriesAInvestment = parseFloat(formData.roundsize || 0); // $400,000\r\n    const optionPoolPost = parseFloat(formData.optionPoolPercent_post || 0); // 20%\r\n\r\n    //  Use dynamic data\r\n    const previousRoundSize = seriesConvertibleData.previousRoundSize || 0; // $120,000\r\n    const previousValuationCap = seriesConvertibleData.previousValuationCap || 0; // $1,000,000\r\n    const previousDiscountRate = seriesConvertibleData.previousDiscountRate || 0; // 20%\r\n    const previousInterestRate = seriesConvertibleData.previousInterestRate || 0; // 10% (MISSING!)\r\n\r\n    const previousTotalShares = seriesConvertibleData.previousTotalShares || 0; // 111,111\r\n    const previousFounderShares = seriesConvertibleData.previousFounderShares || 0; // 100,000\r\n    const previousEmployeeShares = seriesConvertibleData.previousEmployeeShares || 0; // 11,111 (BUT IT'S 0!)\r\n\r\n    // FIX: Get employeeSharesFromSeed from API response\r\n    const employeeSharesFromSeed = seriesConvertibleData.previousemployeeSharesFromSeed || 0; // From API response\r\n\r\n    // Validation\r\n    if (preMoney <= 0 || seriesAInvestment <= 0 || previousTotalShares <= 0) {\r\n      return;\r\n    }\r\n\r\n    //  STEP 1: Series A share price\r\n    const seriesASharePrice = preMoney / previousTotalShares; // $10.80\r\n\r\n    //  STEP 2: Convertible Note conversion prices\r\n    const noteDiscountPrice = seriesASharePrice * (1 - (previousDiscountRate / 100)); // $8.64\r\n    const noteCapPrice = previousValuationCap / previousTotalShares; // $9.00\r\n    const noteOptimalPrice = Math.min(noteDiscountPrice, noteCapPrice); // $8.64\r\n\r\n    //  STEP 3: Convertible Note Conversion (WITH INTEREST!)\r\n    const years = 2; // From API\r\n    const principalPlusInterest = previousRoundSize * Math.pow(1 + (previousInterestRate / 100), years); // $145,200\r\n    const noteConversionShares = principalPlusInterest / noteOptimalPrice; // 16,806 shares\r\n\r\n    //  STEP 4: Note Conversion Value\r\n    const noteConversionValue = noteConversionShares * seriesASharePrice; // $181,500\r\n\r\n    //  STEP 5: Note MOIC\r\n    const noteMOIC = (noteConversionValue / previousRoundSize).toFixed(2); // 1.51X\r\n\r\n    //  STEP 6: Series A New Shares\r\n    const seriesANewShares = seriesAInvestment / seriesASharePrice; // 37,037 shares\r\n    const seriesANewValue = seriesANewShares * seriesASharePrice; // $400,000\r\n    const seriesAMOIC = (seriesANewValue / seriesAInvestment).toFixed(2); // 1.00X\r\n\r\n    //  STEP 7: Total shares from conversions\r\n    const totalConversionShares = noteConversionShares + seriesANewShares; // 53,843\r\n\r\n    //  STEP 8: Total excluding option shares (FOUNDERS + CONVERSIONS)\r\n    const totalExcludingOptions = previousFounderShares + totalConversionShares; // 153,843\r\n\r\n    //  STEP 9: Calculate total shares after 20% option pool\r\n    let totalSharesAfterPool;\r\n    let newOptionShares = 0;\r\n\r\n    if (optionPoolPost > 0) {\r\n      // Formula: Total shares after pool = Total excluding options  (1 - pool%)\r\n      totalSharesAfterPool = totalExcludingOptions / (1 - (optionPoolPost / 100)); // 192,303\r\n\r\n      // FIXED: Use employeeSharesFromSeed (11,111) not previousEmployeeShares (0)\r\n      newOptionShares = totalSharesAfterPool - totalExcludingOptions - employeeSharesFromSeed; // 27,349\r\n      newOptionShares = Math.max(0, newOptionShares);\r\n    } else {\r\n      totalSharesAfterPool = previousTotalShares + totalConversionShares;\r\n    }\r\n\r\n    //  STEP 10: Total shares issued in THIS round\r\n    const totalSharesIssuedThisRound = noteConversionShares + seriesANewShares + newOptionShares; // 81,192\r\n\r\n    //  STEP 11: Post-Money Valuation (Equity Value)\r\n    const postMoneyValuationEquity = totalSharesAfterPool * seriesASharePrice; // $2,076,875\r\n\r\n    //  STEP 12: Simple Post-Money (without notes)\r\n    const simplePostMoney = preMoney + seriesAInvestment; // $1,600,000\r\n\r\n    //  STEP 13: Ownership percentages\r\n    const foundersPostOwnership = (previousFounderShares / totalSharesAfterPool) * 100; // 52.0%\r\n    const noteInvestorsPostOwnership = (noteConversionShares / totalSharesAfterPool) * 100; // 8.7%\r\n    const seriesAInvestorsPostOwnership = (seriesANewShares / totalSharesAfterPool) * 100; // 19.3%\r\n    const employeesPostOwnership = ((employeeSharesFromSeed + newOptionShares) / totalSharesAfterPool) * 100; // 20.0%\r\n\r\n    //  STEP 14: Update state\r\n    setSeriesConvertibleData(prev => ({\r\n      ...prev,\r\n      principalPlusInterest: principalPlusInterest.toFixed(2),\r\n      seriesASharePrice: seriesASharePrice.toFixed(4),\r\n      noteOptimalPrice: noteOptimalPrice.toFixed(4),\r\n      noteConversionShares: Math.round(noteConversionShares),\r\n      noteConversionValue: Math.round(noteConversionValue),\r\n      noteMOIC: noteMOIC + \"X\",\r\n      seriesANewShares: Math.round(seriesANewShares),\r\n      seriesANewValue: Math.round(seriesANewValue),\r\n      seriesAMOIC: seriesAMOIC + \"X\",\r\n      totalNewSharesBeforeOptions: Math.round(totalConversionShares),\r\n      totalExcludingOptions: Math.round(totalExcludingOptions),\r\n      totalSharesAfterPool: Math.round(totalSharesAfterPool),\r\n      newOptionShares: Math.round(newOptionShares),\r\n      postMoneyValuationEquity: Math.round(postMoneyValuationEquity),\r\n      simplePostMoney: Math.round(simplePostMoney),\r\n      foundersPostOwnership: foundersPostOwnership.toFixed(1),\r\n      employeesPostOwnership: employeesPostOwnership.toFixed(1),\r\n      noteInvestorsPostOwnership: noteInvestorsPostOwnership.toFixed(1),\r\n      seriesAInvestorsPostOwnership: seriesAInvestorsPostOwnership.toFixed(1)\r\n    }));\r\n    console.log(totalSharesIssuedThisRound);\r\n    //  STEP 15: Update formData\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      issuedshares: Math.round(totalSharesIssuedThisRound).toString(), // 81,192\r\n      post_money: simplePostMoney.toFixed(2),\r\n      sharePrice: seriesASharePrice.toFixed(4)\r\n    }));\r\n  };\r\n  const calculationPreferredEquity = async () => {\r\n    try {\r\n      console.log(\" ==== PREFERRED EQUITY CALCULATION START =====\");\r\n\r\n      //  STEP 1: Get form inputs\r\n      const preMoney = parseFloat(formData.pre_money || 0); // $3,000,000\r\n      const investment = parseFloat(formData.roundsize || 0); // $1,000,000\r\n      const postMoneyPool = parseFloat(formData.optionPoolPercent_post || 0); // 20%\r\n\r\n      //  STEP 2: Get previous round data dynamically\r\n      let previousRoundData = {\r\n        totalShares: 0,\r\n        founderShares: 0,\r\n        employeeShares: 0,\r\n        seedInvestment: 0,\r\n        valuationCap: 0,\r\n        discountRate: 0,\r\n        interestRate: 0, // Default 10%\r\n        instrumentType: \"\"\r\n      };\r\n\r\n      // Try to get from seriesASafeData first (for SAFE rounds)\r\n      if (seriesASafeData.previousTotalShares > 0) {\r\n        previousRoundData.totalShares = seriesASafeData.previousTotalShares;\r\n        previousRoundData.founderShares = seriesASafeData.previousFounderShares;\r\n        previousRoundData.employeeShares = seriesASafeData.previousEmployeeShares;\r\n        previousRoundData.seedInvestment = seriesASafeData.previousSeedInvestment;\r\n        previousRoundData.valuationCap = seriesASafeData.previousValuationCap;\r\n        previousRoundData.discountRate = seriesASafeData.previousDiscountRate;\r\n      }\r\n      // Try to get from seriesConvertibleData (for Convertible Note rounds)\r\n      else if (seriesConvertibleData.previousTotalShares > 0) {\r\n        previousRoundData.totalShares = seriesConvertibleData.previousTotalShares;\r\n        previousRoundData.founderShares = seriesConvertibleData.previousFounderShares;\r\n        previousRoundData.employeeShares = seriesConvertibleData.previousEmployeeShares;\r\n        previousRoundData.seedInvestment = seriesConvertibleData.previousRoundSize;\r\n        previousRoundData.valuationCap = seriesConvertibleData.previousValuationCap;\r\n        previousRoundData.discountRate = seriesConvertibleData.previousDiscountRate;\r\n      }\r\n      // Fallback: Fetch fresh data from API\r\n      else {\r\n        console.log(\" Fetching fresh previous round data...\");\r\n        await fetchPreviousRoundData();\r\n\r\n        // Use data from fetchPreviousRoundData result\r\n        previousRoundData.totalShares = seriesASafeData.previousTotalShares || 0;\r\n        previousRoundData.founderShares = seriesASafeData.previousFounderShares || 0;\r\n        previousRoundData.employeeShares = seriesASafeData.previousEmployeeShares || 0;\r\n        previousRoundData.seedInvestment = seriesASafeData.previousSeedInvestment || 0;\r\n        previousRoundData.valuationCap = seriesASafeData.previousValuationCap || 0;\r\n        previousRoundData.discountRate = seriesASafeData.previousDiscountRate || 0;\r\n      }\r\n\r\n      //  STEP 3: VALIDATION\r\n      if (preMoney <= 0 || investment <= 0 || previousRoundData.totalShares <= 0) {\r\n        console.error(\" Invalid input values for Preferred Equity calculation\");\r\n        console.log(\"Pre-Money:\", preMoney);\r\n        console.log(\"Investment:\", investment);\r\n        console.log(\"Previous Total Shares:\", previousRoundData.totalShares);\r\n\r\n        // Try one more time to fetch data\r\n        try {\r\n          const res = await axios.post(\r\n            apiUrlRound + \"getPreviousRoundForConvertible\",\r\n            {\r\n              company_id: userLogin.companies[0].id,\r\n              current_round_id: id || 0\r\n            }\r\n          );\r\n\r\n          if (res.data.success && res.data.previousRoundData) {\r\n            const data = res.data.previousRoundData;\r\n            previousRoundData.totalShares = data.totalShares || 0;\r\n            previousRoundData.founderShares = data.founderShares || 0;\r\n            previousRoundData.employeeShares = data.employeeShares || 0;\r\n            previousRoundData.seedInvestment = data.seedInvestment || 0;\r\n            previousRoundData.valuationCap = data.valuationCap || 0;\r\n            previousRoundData.discountRate = data.discountRate || 0;\r\n          }\r\n        } catch (fetchErr) {\r\n          console.error(\" Error fetching fresh data:\", fetchErr);\r\n        }\r\n\r\n        // Final check\r\n        if (previousRoundData.totalShares <= 0) {\r\n          console.error(\" Still no previous round data found\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      console.log(` Previous Round Data:`);\r\n      console.log(`   - Total Shares: ${previousRoundData.totalShares.toLocaleString()}`);\r\n      console.log(`   - Founders: ${previousRoundData.founderShares.toLocaleString()}`);\r\n      console.log(`   - Employee Pool: ${previousRoundData.employeeShares.toLocaleString()}`);\r\n      console.log(`   - Previous Investment: $${previousRoundData.seedInvestment.toLocaleString()}`);\r\n\r\n      //  STEP 4: Calculate Share Price (CPAVATE Formula)\r\n      const sharePrice = preMoney / previousRoundData.totalShares;\r\n      console.log(` Share Price: $${sharePrice.toFixed(4)} = $${preMoney}  ${previousRoundData.totalShares}`);\r\n\r\n      //  STEP 5: Process Convertible Note Conversions (if applicable)\r\n      let totalConvertedShares = 0;\r\n      let totalConvertedValue = 0;\r\n\r\n      // Check if there are convertible notes to convert (with valuation cap > 0)\r\n      if (previousRoundData.seedInvestment > 0 && previousRoundData.valuationCap > 0) {\r\n        console.log(` Processing convertible note conversion...`);\r\n\r\n        const noteAmount = previousRoundData.seedInvestment;\r\n        const interestRate = (previousRoundData.interestRate || 0) / 100;\r\n        const discountRate = (previousRoundData.discountRate || 0) / 100;\r\n        const valuationCap = previousRoundData.valuationCap;\r\n        const years = 2; // Default as per CPAVATE\r\n\r\n        // Calculate Principal + Interest\r\n        const principalPlusInterest = noteAmount * Math.pow(1 + interestRate, years);\r\n\r\n        // Calculate Conversion Price\r\n        const discountPrice = sharePrice * (1 - discountRate);\r\n        const capPrice = valuationCap > 0 ? valuationCap / previousRoundData.totalShares : Infinity;\r\n        const conversionPrice = Math.min(discountPrice, capPrice);\r\n\r\n        // Calculate Shares\r\n        const convertedShares = conversionPrice > 0 ? Math.round(principalPlusInterest / conversionPrice) : 0;\r\n        const convertedValue = convertedShares * sharePrice;\r\n\r\n        console.log(`   Convertible Note Details:`);\r\n        console.log(`      - Amount: $${noteAmount.toLocaleString()}`);\r\n        console.log(`      - Principal+Interest: $${principalPlusInterest.toLocaleString()}`);\r\n        console.log(`      - Conversion Price: $${conversionPrice.toFixed(4)}`);\r\n        console.log(`      - Shares: ${convertedShares.toLocaleString()}`);\r\n\r\n        totalConvertedShares = convertedShares;\r\n        totalConvertedValue = convertedValue;\r\n      }\r\n\r\n      //  STEP 6: Series A (Preferred Equity) Shares\r\n      const seriesAShares = Math.round(investment / sharePrice);\r\n      const seriesAValue = seriesAShares * sharePrice;\r\n\r\n      console.log(` Series A Shares: ${seriesAShares.toLocaleString()}`);\r\n      console.log(` Series A Value: $${Math.round(seriesAValue).toLocaleString()}`);\r\n\r\n      //  STEP 7: Total Shares before Option Pool Expansion\r\n      const totalSharesBeforePool = previousRoundData.founderShares + totalConvertedShares + seriesAShares;\r\n      console.log(` Total Shares before pool: ${totalSharesBeforePool.toLocaleString()}`);\r\n\r\n      //  STEP 8: Option Pool Expansion\r\n      let totalSharesAfterPool = totalSharesBeforePool;\r\n      let newOptionShares = 0;\r\n\r\n      if (postMoneyPool > 0) {\r\n        // CPAVATE Formula\r\n        totalSharesAfterPool = Math.round(totalSharesBeforePool / (1 - (postMoneyPool / 100)));\r\n\r\n        // New option shares = Total after pool - Total before pool - Existing option shares\r\n        newOptionShares = totalSharesAfterPool - totalSharesBeforePool - previousRoundData.employeeShares;\r\n\r\n        if (newOptionShares < 0) newOptionShares = 0;\r\n\r\n        console.log(` Option Pool Calculation:`);\r\n        console.log(`   - Target: ${postMoneyPool}%`);\r\n        console.log(`   - Existing: ${previousRoundData.employeeShares.toLocaleString()}`);\r\n        console.log(`   - New: ${newOptionShares.toLocaleString()}`);\r\n        console.log(`   - Total after pool: ${totalSharesAfterPool.toLocaleString()}`);\r\n      }\r\n\r\n      //  STEP 9: Warrant Calculation (if applicable)\r\n      let warrantShares = 0;\r\n      let warrantExercisePrice = sharePrice;\r\n      let warrantValue = 0;\r\n\r\n      const warrantCoverage = parseFloat(formData.warrant_coverage_percentage || 0);\r\n      const warrantAdjustment = parseFloat(formData.warrant_adjustment_percent || 0);\r\n      const warrantDirection = formData.warrant_adjustment_direction || \"decrease\";\r\n\r\n      if (warrantCoverage > 0) {\r\n        // Calculate exercise price\r\n        if (warrantDirection === \"decrease\") {\r\n          warrantExercisePrice = sharePrice * (1 - (warrantAdjustment / 100));\r\n        } else if (warrantDirection === \"increase\") {\r\n          warrantExercisePrice = sharePrice * (1 + (warrantAdjustment / 100));\r\n        }\r\n\r\n        // Warrant shares = Series A new shares  Warrant Coverage %\r\n        warrantShares = Math.round(seriesAShares * (warrantCoverage / 100));\r\n        warrantValue = warrantShares * sharePrice;\r\n\r\n        console.log(` Warrant Calculation:`);\r\n        console.log(`   - Coverage: ${warrantCoverage}%`);\r\n        console.log(`   - Exercise Price: $${warrantExercisePrice.toFixed(4)}`);\r\n        console.log(`   - Shares: ${warrantShares.toLocaleString()}`);\r\n        console.log(`   - Value: $${Math.round(warrantValue).toLocaleString()}`);\r\n      }\r\n\r\n      //  STEP 10: Final Total Shares\r\n      const finalTotalShares = totalSharesAfterPool + warrantShares;\r\n      const postMoneyValuation = finalTotalShares * sharePrice;\r\n\r\n      console.log(` Final Total Shares: ${finalTotalShares.toLocaleString()}`);\r\n      console.log(` Post-Money Valuation: $${Math.round(postMoneyValuation).toLocaleString()}`);\r\n\r\n      //  STEP 11: Ownership Calculations\r\n      const foundersOwnership = (previousRoundData.founderShares / finalTotalShares) * 100;\r\n      const optionPoolOwnership = ((previousRoundData.employeeShares + newOptionShares) / finalTotalShares) * 100;\r\n      const convertedInvestorsOwnership = (totalConvertedShares / finalTotalShares) * 100;\r\n      const seriesAInvestorsOwnership = (seriesAShares / finalTotalShares) * 100;\r\n      const warrantOwnership = (warrantShares / finalTotalShares) * 100;\r\n\r\n      //  STEP 12: Total Shares Issued in THIS round\r\n      const totalSharesIssuedThisRound = seriesAShares + newOptionShares + warrantShares;\r\n\r\n      console.log(` Total Shares Issued This Round: ${totalSharesIssuedThisRound.toLocaleString()}`);\r\n      const simplePostMoney = preMoney + investment;\r\n      //  STEP 13: Update formData\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        issuedshares: Math.round(totalSharesIssuedThisRound).toString(),\r\n        post_money: simplePostMoney.toFixed(2),\r\n        investorPostMoney: seriesAInvestorsOwnership.toFixed(2),\r\n        isCalculationSource: true\r\n      }));\r\n\r\n      //  STEP 14: Set calculated values for display\r\n      setCalculatedValues({\r\n        sharePrice: sharePrice.toFixed(4),\r\n        newSharesIssued: Math.round(seriesAShares),\r\n        totalPostShares: Math.round(finalTotalShares),\r\n        newOptionShares: Math.round(newOptionShares),\r\n        existingOptionPoolPercent: previousRoundOptionPool,\r\n        postMoneyValuation: postMoneyValuation.toFixed(2),\r\n        investorOwnershipPercent: seriesAInvestorsOwnership.toFixed(2),\r\n        doc4Action: newOptionShares > 0 ? 'TOP_UP' : 'NO_ACTION',\r\n\r\n        // Convertible Note data (if any)\r\n        convertedShares: Math.round(totalConvertedShares),\r\n        convertedValue: Math.round(totalConvertedValue),\r\n\r\n        // Warrant data (if any)\r\n        warrantShares: Math.round(warrantShares),\r\n        warrantExercisePrice: warrantExercisePrice.toFixed(4),\r\n        warrantValue: Math.round(warrantValue),\r\n        warrantCoverage: warrantCoverage,\r\n\r\n        // Ownership breakdown\r\n        foundersOwnership: foundersOwnership.toFixed(2),\r\n        optionPoolOwnership: optionPoolOwnership.toFixed(2),\r\n        convertedInvestorsOwnership: convertedInvestorsOwnership.toFixed(2),\r\n        seriesAInvestorsOwnership: seriesAInvestorsOwnership.toFixed(2),\r\n        warrantOwnership: warrantOwnership.toFixed(2),\r\n\r\n        // Previous round info\r\n        previousTotalShares: previousRoundData.totalShares,\r\n        previousSharePrice: sharePrice.toFixed(4)\r\n      });\r\n\r\n      // Reset calculation source flag\r\n      setTimeout(() => {\r\n        setFormData(prev => ({ ...prev, isCalculationSource: false }));\r\n      }, 100);\r\n\r\n      console.log(\" ==== PREFERRED EQUITY CALCULATION COMPLETE =====\");\r\n\r\n    } catch (error) {\r\n      console.error(\" Preferred Equity calculation error:\", error);\r\n    }\r\n  };\r\n  //Automatic Fill\r\n\r\n  // Component ke shuru mein yeh useEffect add karein\r\n  useEffect(() => {\r\n\r\n    const isSeriesCommonStock =\r\n      formData.instrumentType === \"Common Stock\" || formData.instrumentType === \"Preferred Equity\";\r\n\r\n    if (!selected || isFirstRound) return;\r\n    autoFillFromPreviousRound();\r\n    if (isSeriesCommonStock) {\r\n\r\n      //  Only here auto-fill should run\r\n      // autoFillFromPreviousRound();\r\n    } else {\r\n      //  Not Series + Common Stock  reset option pool\r\n      // setFormData(prev => ({\r\n      //   ...prev,\r\n      //   optionPoolPercent: \"0.00\"\r\n      // }));\r\n\r\n      // setPreviousRoundOptionPool(0);\r\n\r\n      // setCalculatedValues(prev => ({\r\n      //   ...prev,\r\n      //   existingOptionPoolPercent: 0\r\n      // }));\r\n      // setFormData(prev => ({\r\n      //   ...prev,\r\n      //   optionPoolPercent: \"0.00\"\r\n      // }));\r\n\r\n      // setPreviousRoundOptionPool(0);\r\n\r\n      // setCalculatedValues(prev => ({\r\n      //   ...prev,\r\n      //   existingOptionPoolPercent: 0\r\n      // }));\r\n\r\n\r\n    }\r\n  }, [selected, formData.instrumentType]);\r\n  // Frontend: Recordround.jsx mein yeh function add karein\r\n  // ============================================\r\n  // autoFillFromPreviousRound - FULLY CORRECTED\r\n  // ============================================\r\n\r\n  const autoFillFromPreviousRound = async () => {\r\n    if (isFirstRound || !selected || selected === \"Advisor Shares\") {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        apiUrlRound + \"getPreviousRoundForAutoFill\",\r\n        {\r\n          company_id: userLogin.companies[0].id,\r\n          current_round_id: id || 0,\r\n          current_instrument_type: formData.instrumentType,\r\n        }\r\n      );\r\n\r\n      if (res.data.success && res.data.data) {\r\n        const data = res.data.data;\r\n\r\n        //  EXISTING SHARES -  set \r\n        if (data.existingShares > 0) {\r\n          setexistingSharesUse(data.existingShares.toString());\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            existingShares: data.existingShares.toString()\r\n          }));\r\n        }\r\n\r\n        //  CRITICAL: FRONTEND  DECIDE  AUTOFILL    \r\n        const isPricedRound =\r\n          formData.instrumentType === \"Common Stock\" ||\r\n          formData.instrumentType === \"Preferred Equity\";\r\n\r\n        const shouldAutofill = isPricedRound && data.can_autofill && data.existingOptionPoolPercent > 0;\r\n\r\n        if (shouldAutofill) {\r\n          //  PRICED ROUND - AUTOFILL\r\n          const preMoneyPool = parseFloat(data.existingOptionPoolPercent) || 0;\r\n\r\n          console.log(` AUTOFILL: Pre-money pool = ${preMoneyPool}%`);\r\n          console.log(` Previous post-money pool = ${data.previousPostMoneyPool}%`);\r\n          console.log(` Employee ownership = ${data.employee_ownership_percent}%`);\r\n\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            optionPoolPercent: preMoneyPool.toFixed(2)\r\n          }));\r\n\r\n          setPreviousRoundOptionPool(preMoneyPool);\r\n\r\n          setCalculatedValues(prev => ({\r\n            ...prev,\r\n            existingOptionPoolPercent: preMoneyPool\r\n          }));\r\n\r\n        } else {\r\n          //  UNPRICED ROUND OR NO PREVIOUS POOL - NO AUTOFILL\r\n          // console.log(` NO AUTOFILL: ${formData.instrumentType || 'Unknown'} round`);\r\n          // console.log(` Previous round had ${data.previousPostMoneyPool}% post-money pool`);\r\n          // console.log(` Employee ownership: ${data.employee_ownership_percent}%`);\r\n\r\n          // setFormData(prev => ({\r\n          //   ...prev,\r\n          //   optionPoolPercent: \"0.00\"\r\n          // }));\r\n\r\n          // setPreviousRoundOptionPool(0);\r\n\r\n          // setCalculatedValues(prev => ({\r\n          //   ...prev,\r\n          //   existingOptionPoolPercent: 0\r\n          // }));\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error(\" Auto-fill error:\", err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // Jab important inputs change ho, toh calculation reset karo\r\n    const shouldResetCalculation =\r\n      formData.pre_money > 0 ||\r\n      formData.roundsize > 0 ||\r\n      formData.optionPoolPercent_post !== seriesASafeData.lastOptionPoolPost;\r\n\r\n    if (shouldResetCalculation && seriesASafeData.hasCalculated) {\r\n      console.log(\"Resetting calculation flag due to input change\");\r\n      setSeriesASafeData(prev => ({\r\n        ...prev,\r\n        hasCalculated: false,\r\n        lastOptionPoolPost: formData.optionPoolPercent_post\r\n      }));\r\n    }\r\n  }, [formData.pre_money, formData.roundsize, formData.optionPoolPercent_post]);\r\n\r\n  useEffect(() => {\r\n    // Only calculate if we have all required data AND haven't calculated yet\r\n\r\n    if (seriesASafeData.previousInstrumentType === 'Safe') {\r\n      const shouldCalculate =\r\n        seriesASafeData.previousInstrumentType &&\r\n        formData.pre_money > 0 &&\r\n        formData.roundsize > 0 &&\r\n        !seriesASafeData.hasCalculated;\r\n\r\n      console.log(\"useEffect - shouldCalculate:\", shouldCalculate, seriesASafeData);\r\n\r\n      if (!shouldCalculate) return;\r\n\r\n      console.log(\"Calculating for:\", seriesASafeData.previousInstrumentType);\r\n\r\n      if (seriesASafeData.previousInstrumentType === 'Safe') {\r\n        calculateSeriesASafe();\r\n      }\r\n    }\r\n    if (seriesASafeData.previousInstrumentType === 'Convertible Note') {\r\n      calculateSeriesConvertible();\r\n    }\r\n  }, [\r\n    formData.pre_money,\r\n    formData.roundsize,\r\n    formData.optionPoolPercent_post,\r\n    seriesASafeData.previousInstrumentType,\r\n    seriesASafeData.hasCalculated\r\n  ]);\r\n\r\n  //  Function 1: Common Stock with Target Pool Top-up (Series/ANY round)\r\n  const calculateCommonStockWithTopUp = (preMoney, investment, priorTotalShares, existingPoolShares, targetPoolPercent) => {\r\n    console.log(preMoney, investment, priorTotalShares, existingPoolShares, targetPoolPercent)\r\n    // Step 1: Shares excluding current pool\r\n    const sharesExcludingPool = priorTotalShares - existingPoolShares;\r\n\r\n    // Step 2: Total shares needed for target pool %\r\n    const totalSharesForTargetPool = sharesExcludingPool / (1 - targetPoolPercent / 100);\r\n\r\n    // Step 3: New pool shares required\r\n    const newPoolShares = totalSharesForTargetPool - priorTotalShares + existingPoolShares;\r\n\r\n    // Step 4: Share price AFTER pool adjustment\r\n    const sharePrice = preMoney / totalSharesForTargetPool;\r\n\r\n    // Step 5: New investor common shares\r\n    const newInvestorShares = investment / sharePrice;\r\n\r\n    // Step 6: Total issued this round\r\n    const totalSharesIssued = newPoolShares + newInvestorShares;\r\n\r\n    return {\r\n      sharePrice: parseFloat(sharePrice.toFixed(4)),\r\n      newPoolShares: Math.round(newPoolShares),\r\n      newInvestorShares: Math.round(newInvestorShares),\r\n      totalSharesIssued: Math.round(totalSharesIssued),\r\n      totalPostShares: Math.round(totalSharesForTargetPool + newInvestorShares),\r\n      postMoneyValuation: (preMoney + investment).toFixed(2)\r\n    };\r\n  };\r\n\r\n  //  Function 2: Common Stock WITHOUT Top-up (existing pool >= target)\r\n  const calculateCommonStockNoTopUp = (preMoney, investment, priorTotalShares) => {\r\n    const sharePrice = preMoney / priorTotalShares;\r\n    const newInvestorShares = investment / sharePrice;\r\n\r\n    return {\r\n      sharePrice: parseFloat(sharePrice.toFixed(4)),\r\n      newPoolShares: 0,\r\n      newInvestorShares: Math.round(newInvestorShares),\r\n      totalSharesIssued: Math.round(newInvestorShares),\r\n      totalPostShares: priorTotalShares + newInvestorShares,\r\n      postMoneyValuation: (preMoney + investment).toFixed(2)\r\n    };\r\n  };\r\n\r\n  //  MAIN useEffect Logic (Clean & Simple)\r\n  useEffect(() => {\r\n    if (formData.isCalculationSource || !formData.instrumentType) {\r\n      return;\r\n    }\r\n    console.log(formData)\r\n    const roundSize = parseFloat(formData.roundsize || 0);\r\n    const preMoney = parseFloat(formData.pre_money || 0);\r\n    const investment = parseFloat(formData.roundsize || 0);\r\n    const targetPoolPercent = parseFloat(formData.optionPoolPercent_post || 0);\r\n    const priorTotalShares = parseFloat(existingSharesUse || 0);\r\n    const existingPoolPercent = parseFloat(formData.optionPoolPercent || 0);\r\n    console.log(existingPoolPercent, priorTotalShares)\r\n    if (preMoney <= 0 || investment <= 0 || priorTotalShares <= 0) {\r\n      return;\r\n    }\r\n    const isCommonStock = formData.instrumentType === \"Common Stock\";\r\n    const needsTopUp = targetPoolPercent > 0 && targetPoolPercent > existingPoolPercent;\r\n\r\n    let calculationResult = {};\r\n\r\n    if (isCommonStock) {\r\n      const existingPoolShares = Math.round(priorTotalShares * (existingPoolPercent / 100));\r\n\r\n      if (needsTopUp) {\r\n        //  Use Top-up function (30% target)\r\n        calculationResult = calculateCommonStockWithTopUp(\r\n          preMoney,\r\n          investment,\r\n          priorTotalShares,\r\n          existingPoolShares,\r\n          targetPoolPercent\r\n        );\r\n      } else {\r\n        //  No top-up needed\r\n        calculationResult = calculateCommonStockNoTopUp(preMoney, investment, priorTotalShares);\r\n      }\r\n    }\r\n    console.log('ll')\r\n    const postMoney = preMoney + roundSize;\r\n\r\n    // Set calculated values\r\n    setCalculatedValues({\r\n      sharePrice: calculationResult.sharePrice,\r\n      newSharesIssued: calculationResult.totalSharesIssued,\r\n      totalPostShares: calculationResult.totalPostShares,\r\n      newOptionShares: calculationResult.newPoolShares,\r\n      existingOptionPoolPercent: existingPoolPercent,\r\n      postMoneyValuation: postMoney,\r\n      investorOwnershipPercent: ((investment / parseFloat(postMoney)) * 100).toFixed(2),\r\n      doc4Action: needsTopUp ? 'TOP_UP' : 'NO_ACTION'\r\n    });\r\n\r\n    // Update form\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      post_money: postMoney,\r\n      investorPostMoney: ((investment / parseFloat(postMoney)) * 100).toFixed(2),\r\n      issuedshares: String(calculatedValues.totalSharesIssued),\r\n      sharePrice: String(calculationResult.sharePrice),\r\n      isCalculationSource: true,\r\n    }));\r\n\r\n    setTimeout(() => {\r\n      setFormData(prev => ({ ...prev, isCalculationSource: false }));\r\n    }, 10);\r\n\r\n  }, [formData.pre_money, formData.instrumentType, formData.optionPoolPercent, formData.roundsize, formData.optionPoolPercent_post, existingSharesUse, previousRoundOptionPool]);\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (formData.instrumentType === \"Preferred Equity\") {\r\n      fetchPreviousRoundData();\r\n    }\r\n  }, [selected, formData.instrumentType]);\r\n  const fetchPreviousRoundData = async () => {\r\n    try {\r\n      const res = await axios.post(\r\n        apiUrlRound + \"getPreviousRoundOptionPool\",\r\n        { company_id: userLogin.companies[0].id }\r\n      );\r\n\r\n      if (res.data.success) {\r\n        const { previousRoundData } = res.data;\r\n        const isSeriesRound = selected?.includes(\"Series\");\r\n        const isSeedRound = selected === \"Seed\";\r\n        console.log(previousRoundData)\r\n        if (isSeriesRound) {\r\n          // Auto-fill Pre-Money pool\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            // optionPoolPercent: res.data.existingOptionPoolPercent.toFixed(2)\r\n          }));\r\n\r\n          setPreviousRoundOptionPool(res.data.existingOptionPoolPercent);\r\n\r\n          //  Set previous round data WITHOUT calculating\r\n          if (previousRoundData.instrumentType === 'Safe') {\r\n            setSeriesASafeData(prev => ({\r\n              ...prev,\r\n              previousTotalShares: previousRoundData.totalShares || 0,\r\n              previousFounderShares: previousRoundData.founderShares || 0,\r\n              previousEmployeeShares: previousRoundData.employeeShares || 0,\r\n              previousSeedInvestorShares: 0,\r\n              previousSeedInvestment: previousRoundData.seedInvestment || 0,\r\n              previousValuationCap: previousRoundData.valuationCap || 0,\r\n              previousDiscountRate: previousRoundData.discountRate || 0,\r\n              previousInstrumentType: previousRoundData.instrumentType || '',\r\n              hasCalculated: false //  Reset calculation flag\r\n            }));\r\n          }\r\n\r\n          //  REMOVE THIS LINE: calculateSeriesASafe();\r\n\r\n        } else if (isSeedRound) {\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            optionPoolPercent: \"0.00\"\r\n          }));\r\n\r\n        }\r\n\r\n        if (previousRoundData.totalShares > 0) {\r\n          setexistingSharesUse(previousRoundData.totalShares.toString());\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\" Error fetching previous round data:\", err);\r\n    }\r\n  };\r\n\r\n  //Series A Convertible\r\n  useEffect(() => {\r\n    if (formData.instrumentType === \"Preferred Equity\") {\r\n      fetchPreviousRoundForConvertible();\r\n    }\r\n  }, [selected, formData.instrumentType]);\r\n  const fetchPreviousRoundForConvertible = async () => {\r\n    try {\r\n\r\n      const res = await axios.post(\r\n        apiUrlRound + \"getPreviousRoundForConvertible\", // Changed API endpoint\r\n        {\r\n          company_id: userLogin.companies[0].id,\r\n          current_round_id: id || 0,\r\n        }\r\n      );\r\n\r\n      if (res.data.success && res.data.previousRoundData) {\r\n        const previousData = res.data.previousRoundData;\r\n        console.log(previousData)\r\n        if (previousData.instrumentType !== '') {\r\n          setSeriesConvertibleData(prev => ({\r\n            ...prev,\r\n            previousTotalShares: previousData.totalShares || 0, // Should be 111,111\r\n            previousFounderShares: previousData.founderShares || 0, // Should be 100,000\r\n            previousEmployeeShares: previousData.employeeShares || 0, // Should be 11,111\r\n            previousRoundSize: previousData.seedInvestment || 0, // Should be 120,000\r\n            previousValuationCap: previousData.valuationCap || 0, // Should be 1,000,000\r\n            previousDiscountRate: previousData.discountRate || 0, // Should be 20\r\n            previousInterestRate: previousData.interestRate, // SAFE has no interest rate\r\n            previousInstrumentType: previousData.instrumentType || \"\", // Should be 20\r\n            previousemployeeSharesFromSeed: previousData.employeeSharesFromSeed || \"\", // Should be 20\r\n          }));\r\n          setSeriesASafeData(prev => ({\r\n            ...prev,\r\n\r\n            previousInstrumentType: previousData.instrumentType || '',\r\n\r\n          }));\r\n        }\r\n\r\n\r\n\r\n      }\r\n    } catch (err) {\r\n      console.error(\" Error fetching previous SAFE round data:\", err);\r\n    }\r\n  };\r\n  //Series A Convertible\r\n\r\n  // Har round change par call karein\r\n\r\n\r\n  // Call this function when needed\r\n\r\n  // getexistingShares function ke baad yeh function add karein (around line 150)\r\n\r\n  // useEffect(() => {\r\n  //   const isSeriesRound = selected?.includes(\"Series\");\r\n  //   const CommonStock = formData.instrumentType;\r\n  //   const isSeriesCommonStock = isSeriesRound && CommonStock === 'Common Stock';\r\n\r\n  //   if (!isFirstRound && isSeriesCommonStock) {\r\n  //     // Reset states first\r\n  //     setPreviousRoundOptionPool(0);\r\n\r\n  //     // Then autofill\r\n  //     autoFillFromPreviousRound();\r\n  //   }\r\n  // }, [selected, isFirstRound]);\r\n\r\n  // Sync states if formData.optionPoolPercent changes manually\r\n  useEffect(() => {\r\n    if (selected?.includes(\"Series\") && formData.optionPoolPercent) {\r\n      const poolValue = parseFloat(formData.optionPoolPercent);\r\n\r\n      if (!isNaN(poolValue) && poolValue > 0 && poolValue !== previousRoundOptionPool) {\r\n\r\n        setPreviousRoundOptionPool(poolValue);\r\n      }\r\n    }\r\n  }, [formData.optionPoolPercent]);\r\n  // Doc 4 Rule\r\n  //Round 1\r\n  function formatCurrentDate(input) {\r\n    const date = new Date(input);\r\n\r\n    if (isNaN(date)) return \"\";\r\n\r\n    const months = [\r\n      \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n      \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n    ];\r\n\r\n\r\n    const day = date.getDate();\r\n    const month = months[date.getMonth()];\r\n    const year = date.getFullYear();\r\n\r\n    const getOrdinal = (n) => {\r\n      if (n >= 11 && n <= 13) return \"th\";\r\n      switch (n % 10) {\r\n        case 1:\r\n          return \"st\";\r\n        case 2:\r\n          return \"nd\";\r\n        case 3:\r\n          return \"rd\";\r\n        default:\r\n          return \"th\";\r\n      }\r\n    };\r\n\r\n    let hours = date.getHours();\r\n    const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n    const seconds = date.getSeconds().toString().padStart(2, \"0\");\r\n    const ampm = hours >= 12 ? \"PM\" : \"AM\";\r\n\r\n    hours = hours % 12;\r\n    hours = hours ? hours : 12; // 0 => 12\r\n\r\n    return `${month} ${day}${getOrdinal(\r\n      day\r\n    )}, ${year} ${hours}:${minutes} ${ampm}`;\r\n  }\r\n  const formatIncorporationDate = (value) => {\r\n    if (!value) return \"Not provided\";\r\n\r\n    // Only year\r\n    if (/^\\d{4}$/.test(value)) {\r\n      return value;\r\n    }\r\n\r\n    // Full date\r\n    return formatCurrentDate(value);\r\n  };\r\n\r\n  const [isCollapsed, setIsCollapsed] = useState(false);\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"fullpage d-block\">\r\n        <div className=\"d-flex align-items-start gap-0\">\r\n          <ModuleSideNav\r\n            isCollapsed={isCollapsed}\r\n            setIsCollapsed={setIsCollapsed}\r\n          />\r\n          <div\r\n            className={`global_view ${isCollapsed ? \"global_view_col\" : \"\"}`}\r\n          >\r\n            <TopBar />\r\n            <SectionWrapper className=\"d-block p-md-4 p-3\">\r\n              <div className=\"container-fluid\">\r\n                <div className=\"d-flex flex-column gap-4\">\r\n                  {errorMsg && (\r\n                    <Alertpopup\r\n                      message={errorMsg}\r\n                      onClose={() => seterrorMsg(\"\")}\r\n                    />\r\n                  )}\r\n                  {errorMessageCenter && (\r\n                    <div className=\"center_error_pop flex items-center justify-between gap-3 shadow-lg\">\r\n                      <div className=\"d-flex align-items-center gap-2\">\r\n                        <span className=\"d-block\">{errorMessageCenter}</span>\r\n                      </div>\r\n                      <button onClick={() => seterrorMessageCenter(\"\")}\r\n                        type=\"button\"\r\n                        className=\"close_btnCros\"\r\n                      >\r\n                        \r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                  {messageAll && (\r\n                    <div\r\n                      className={`shadow-lg ${errr ? \"error_pop\" : \"success_pop\"\r\n                        }`}\r\n                    >\r\n                      <div className=\"d-flex align-items-center gap-2\">\r\n                        <span className=\"d-block\">{messageAll}</span>\r\n                      </div>\r\n\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"close_btnCros\"\r\n                        onClick={() => setmessageAll(\"\")}\r\n                      >\r\n                        \r\n                      </button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {successMsg && (\r\n                    // <Alertpopupsuccess\r\n                    //   message={successMsg}\r\n                    //   onClose={() => setsuccessMsg(\"\")}\r\n                    // />\r\n                    <DangerAlertPopup\r\n                      message={successMsg}\r\n                      onConfirm={handleConfirm}\r\n                      onCancel={() => {\r\n                        setsuccessMsg(\"\");\r\n                      }}\r\n                    />\r\n                  )}\r\n                  {isLoading && (\r\n                    <div\r\n                      style={{\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n                        zIndex: 9999,\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center'\r\n                      }}\r\n                    >\r\n                      <div\r\n                        style={{\r\n                          display: 'flex',\r\n                          justifyContent: 'center',\r\n                          alignItems: 'center',\r\n                          minHeight: '100vh'\r\n                        }}\r\n                      >\r\n                        <div\r\n                          class=\"spinner-border spinner-border_loader text-success\"\r\n                          style={{ width: '3rem', height: '3rem' }}\r\n                          role=\"status\"\r\n                        >\r\n                          <span className=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                    <div className=\"pb-3 bar_design\">\r\n                      <h4 className=\"h5 mb-0\">\r\n                        {id ? \"Edit Record Round\" : \"Create New Record Round\"}\r\n                      </h4>\r\n                    </div>\r\n                    {/* <div className=\"d-flex gap-2\">\r\n                      <button className=\"close_btn w-fit\">Save Draft</button>\r\n                      <button\r\n                        className=\"global_btn w-fit\"\r\n                        onClick={handleSubmit}\r\n                      >\r\n                        Create Round\r\n                      </button>\r\n                    </div> */}\r\n                  </div>\r\n\r\n                  <div className=\"mb-4 dashboard_card\">\r\n                    <div class=\"progress-container pt-3\">\r\n                      <div class=\"progress-info\">\r\n                        <div class=\"progress-label\">Progress</div>\r\n                        <div class=\"progress-value\">\r\n                          {progressWidth}% Complete\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"progress-bar\">\r\n                        <div\r\n                          class=\"progress-fill\"\r\n                          style={{ width: `${progressWidth}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Section Navigation */}\r\n                  <div className=\"mb-4 \">\r\n                    <div className=\"d-flex flex-wrap gap-2\">\r\n                      {sections.map((section, index) => (\r\n                        <button\r\n                          key={section.id}\r\n                          className={`btn ${activeSection === section.id\r\n                            ? \"select_btn_active\"\r\n                            : \"select_btn\"\r\n                            } rounded-pill`}\r\n\r\n                        >\r\n                          {section.title}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Form Sections */}\r\n                  <form method=\"post\" action=\"javascript:void(0)\">\r\n                    <div className=\"from_quation\">\r\n                      {/* Share Class Section */}\r\n                      {activeSection === \"shareclass\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">{isFirstRound ? \"Round 0 - Company Incorporation\" : \"Share Class\"}</h3>\r\n                          {formData.dateroundclosed && shouldShowAlert(formData.dateroundclosed) && (\r\n                            <div className=\"alert-message text-danger p-3 mb-4 border rounded bg-white\">\r\n                              <strong>Note:</strong> Start by entering your company's original ownership (who owned which shares at registration). Then add future investment rounds. This keeps your cap table accurate and makes future funding easier.\r\n                            </div>\r\n                          )}\r\n                          {isFirstRound && (\r\n                            <div className=\"alert alert-info mb-4\">\r\n                              <strong>Welcome!</strong> Let's start with your company's incorporation details. This will be your Round 0 - the foundation of your cap table.\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"mb-4\">\r\n                            <label className=\"form-label fw-semibold\">\r\n                              Name of Round <span className=\"text-danger fs-5\">*</span>\r\n                              {errors.nameOfRound && (\r\n                                <div className=\"text-danger small mt-1 is-invalid\">\r\n                                  <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                  {errors.nameOfRound}\r\n                                </div>\r\n                              )}\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              placeholder=\"Founding Share Allocation\"\r\n                              value={formData.nameOfRound}\r\n                              onChange={(e) => handleInputChange(\"nameOfRound\", e.target.value)}\r\n                              className={`form-control ${errors.nameOfRound ? \"is-invalid\" : \"\"}`}\r\n                              maxLength={30}\r\n\r\n                            />\r\n                            <div className=\"form-text\">\r\n                              {formData.nameOfRound.length}/30 characters\r\n                            </div>\r\n                          </div>\r\n\r\n                          {isFirstRound && (\r\n                            <div className=\"round-zero-fields\">\r\n                              {/* Founder Allocation Section */}\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Founder Share Allocation <span className=\"text-danger fs-5\">*</span>\r\n                                  {errors.founders && (\r\n                                    <div className=\"text-danger small mt-1\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.founders}\r\n                                    </div>\r\n                                  )}\r\n                                </label>\r\n\r\n                                {foundersData.map((founder, index) => (\r\n                                  <div key={index} className=\"founder-allocation mb-4 p-3 border rounded\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                                      <h6 className=\"mb-0\">Founder {index + 1}</h6>\r\n                                      {founderCount > 1 && (\r\n                                        <button\r\n                                          type=\"button\"\r\n                                          className=\"btn btn-sm btn-outline-danger\"\r\n                                          onClick={() => removeFounder(index)}\r\n                                        >\r\n                                          Remove\r\n                                        </button>\r\n                                      )}\r\n                                    </div>\r\n\r\n                                    <div className=\"row\">\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">\r\n                                          First Name <span className=\"text-danger\">*</span>\r\n                                        </label>\r\n                                        <input\r\n                                          type=\"text\"\r\n                                          className={`form-control ${errors[`founder_${index}_firstName`] ? 'is-invalid' : ''}`}\r\n                                          placeholder=\"First Name\"\r\n                                          value={founder.firstName}\r\n                                          onChange={(e) => {\r\n                                            updateFounderData(index, 'firstName', e.target.value);\r\n                                            // Clear error when user starts typing\r\n                                            if (errors[`founder_${index}_firstName`]) {\r\n                                              setErrors(prev => ({\r\n                                                ...prev,\r\n                                                [`founder_${index}_firstName`]: \"\"\r\n                                              }));\r\n                                            }\r\n                                          }}\r\n                                        />\r\n                                        {errors[`founder_${index}_firstName`] && (\r\n                                          <div className=\"text-danger small mt-1\">\r\n                                            <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                            {errors[`founder_${index}_firstName`]}\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">\r\n                                          Last Name <span className=\"text-danger\">*</span>\r\n                                        </label>\r\n                                        <input\r\n                                          type=\"text\"\r\n                                          className={`form-control ${errors[`founder_${index}_lastName`] ? 'is-invalid' : ''}`}\r\n                                          placeholder=\"Last Name\"\r\n                                          value={founder.lastName}\r\n                                          onChange={(e) => {\r\n                                            updateFounderData(index, 'lastName', e.target.value);\r\n                                            // Clear error when user starts typing\r\n                                            if (errors[`founder_${index}_lastName`]) {\r\n                                              setErrors(prev => ({\r\n                                                ...prev,\r\n                                                [`founder_${index}_lastName`]: \"\"\r\n                                              }));\r\n                                            }\r\n                                          }}\r\n                                        />\r\n                                        {errors[`founder_${index}_lastName`] && (\r\n                                          <div className=\"text-danger small mt-1\">\r\n                                            <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                            {errors[`founder_${index}_lastName`]}\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">\r\n                                          Email <span className=\"text-danger\">*</span>\r\n                                        </label>\r\n                                        <input\r\n                                          type=\"email\"\r\n                                          className={`form-control ${errors[`founder_${index}_email`] ? 'is-invalid' : ''}`}\r\n                                          placeholder=\"Email\"\r\n                                          value={founder.email}\r\n                                          onChange={(e) => {\r\n                                            updateFounderData(index, 'email', e.target.value);\r\n                                            // Clear error when user starts typing\r\n                                            if (errors[`founder_${index}_email`]) {\r\n                                              setErrors(prev => ({\r\n                                                ...prev,\r\n                                                [`founder_${index}_email`]: \"\"\r\n                                              }));\r\n                                            }\r\n                                          }}\r\n                                        />\r\n                                        {errors[`founder_${index}_email`] && (\r\n                                          <div className=\"text-danger small mt-1\">\r\n                                            <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                            {errors[`founder_${index}_email`]}\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">\r\n                                          Phone\r\n                                        </label>\r\n                                        <input\r\n                                          type=\"tel\"\r\n                                          className=\"form-control\"\r\n                                          placeholder=\"Phone\"\r\n                                          value={founder.phone}\r\n                                          onChange={(e) => updateFounderData(index, 'phone', e.target.value)}\r\n                                        />\r\n                                      </div>\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">\r\n                                          Shares Allocated <span className=\"text-danger\">*</span>\r\n                                        </label>\r\n                                        <NumericFormat\r\n                                          className={`form-control ${errors[`founder_${index}_shares`] ? 'is-invalid' : ''}`}\r\n                                          placeholder=\"e.g., 500\"\r\n                                          value={founder.shares || ''}\r\n                                          onValueChange={(values) => {\r\n                                            updateFounderData(index, 'shares', values.value);\r\n                                            if (errors[`founder_${index}_shares`]) {\r\n                                              setErrors(prev => ({\r\n                                                ...prev,\r\n                                                [`founder_${index}_shares`]: \"\"\r\n                                              }));\r\n                                            }\r\n                                          }}\r\n                                          thousandSeparator={true}\r\n\r\n                                          allowNegative={false}\r\n                                          decimalScale={2}\r\n                                          fixedDecimalScale={true}\r\n                                        />\r\n                                        {errors[`founder_${index}_shares`] && (\r\n                                          <div className=\"text-danger small mt-1\">\r\n                                            <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                            {errors[`founder_${index}_shares`]}\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">Share Type</label>\r\n                                        <select\r\n                                          className=\"form-control\"\r\n                                          value={founder.shareType}\r\n                                          onChange={(e) => updateFounderData(index, 'shareType', e.target.value)}\r\n                                        >\r\n                                          <option value=\"common\">Common Shares</option>\r\n                                          <option value=\"preferred\">Preferred Shares</option>\r\n                                          <option value=\"other\">Other</option>\r\n                                        </select>\r\n                                      </div>\r\n\r\n                                      {/* Custom Share Type Input - NEW */}\r\n                                      {founder.shareType === 'other' && (\r\n                                        <div className=\"col-md-6 mb-3\">\r\n                                          <label className=\"form-label\">Specify Share Type</label>\r\n                                          <input\r\n                                            type=\"text\"\r\n                                            className=\"form-control\"\r\n                                            placeholder=\"Enter custom share type\"\r\n                                            value={founder.customShareType || ''}\r\n                                            onChange={(e) => updateFounderData(index, 'customShareType', e.target.value)}\r\n                                          />\r\n                                        </div>\r\n                                      )}\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">Share Class</label>\r\n                                        <select\r\n                                          className=\"form-control\"\r\n                                          value={founder.shareClass}\r\n                                          onChange={(e) => updateFounderData(index, 'shareClass', e.target.value)}\r\n                                        >\r\n                                          <option value=\"Class A\">Class A</option>\r\n                                          <option value=\"Class B\">Class B</option>\r\n                                          <option value=\"Class C\">Class C</option>\r\n\r\n                                        </select>\r\n                                      </div>\r\n\r\n                                      {/* Custom Share Class Input */}\r\n                                      {founder.shareClass === 'other' && (\r\n                                        <div className=\"col-md-3 mb-3\">\r\n                                          <label className=\"form-label\">Specify Share Class</label>\r\n                                          <input\r\n                                            type=\"text\"\r\n                                            className=\"form-control\"\r\n                                            placeholder=\"Enter custom share class\"\r\n                                            value={founder.customShareClass || ''}\r\n                                            onChange={(e) => updateFounderData(index, 'customShareClass', e.target.value)}\r\n                                          />\r\n                                        </div>\r\n                                      )}\r\n\r\n                                      <div className=\"col-md-3 mb-3\">\r\n                                        <label className=\"form-label\">Voting Rights</label>\r\n                                        <select\r\n                                          className=\"form-control\"\r\n                                          value={founder.voting}\r\n                                          onChange={(e) => updateFounderData(index, 'voting', e.target.value)}\r\n                                        >\r\n                                          <option value=\"voting\">Voting</option>\r\n                                          <option value=\"non-voting\">Non-Voting</option>\r\n                                        </select>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                ))}\r\n\r\n                                <button\r\n                                  type=\"button\"\r\n                                  className=\"btn btn-outline-primary btn-sm\"\r\n                                  onClick={addFounder}\r\n                                >\r\n                                  + Add Another Founder\r\n                                </button>\r\n                              </div>\r\n\r\n                              {/* Currency and Price Per Share */}\r\n                              <div className=\"row\">\r\n                                <div className=\"col-md-6 mb-4\">\r\n                                  <label className=\"form-label fw-semibold\">\r\n                                    Currency <span className=\"text-danger fs-5\">*</span>\r\n                                    {errors.currency && (\r\n                                      <div className=\"text-danger small mt-1\">\r\n                                        <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                        {errors.currency}\r\n                                      </div>\r\n                                    )}\r\n                                  </label>\r\n                                  <select\r\n                                    className={`form-control ${errors.currency ? 'is-invalid' : ''}`}\r\n                                    value={formData.currency}\r\n                                    onChange={(e) => {\r\n                                      handleInputChange(\"currency\", e.target.value);\r\n                                      if (errors.currency) {\r\n                                        setErrors(prev => ({ ...prev, currency: \"\" }));\r\n                                      }\r\n                                    }}\r\n                                  >\r\n                                    <option value=\"\">-- Select Currency --</option>\r\n                                    {countrySymbolList.map((item) => (\r\n                                      <option\r\n                                        key={item.id}\r\n                                        value={`${item.currency_code} ${item.currency_symbol}`}\r\n                                      >\r\n                                        {item.currency_code} {item.currency_symbol}\r\n                                      </option>\r\n                                    ))}\r\n                                  </select>\r\n                                </div>\r\n\r\n                                <div className=\"col-md-6 mb-4\">\r\n                                  <label className=\"form-label fw-semibold\">\r\n                                    Price Per Share at Incorporation\r\n                                    {formData.currency && ` (${formData.currency.split(' ')[1]})`}\r\n                                    <span className=\"text-danger fs-5\">*</span>\r\n                                    {errors.pricePerShare && (\r\n                                      <div className=\"text-danger small mt-1\">\r\n                                        <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                        {errors.pricePerShare}\r\n                                      </div>\r\n                                    )}\r\n                                  </label>\r\n                                  <input\r\n                                    type=\"number\"\r\n                                    step=\"0.001\"\r\n                                    className={`form-control ${errors.pricePerShare ? 'is-invalid' : ''}`}\r\n                                    placeholder={`e.g., 0.001 ${formData.currency ? formData.currency.split(' ')[1] : ''}`}\r\n                                    value={formData.pricePerShare || ''}\r\n                                    onChange={(e) => {\r\n                                      handleInputChange(\"pricePerShare\", e.target.value);\r\n                                      if (errors.pricePerShare) {\r\n                                        setErrors(prev => ({ ...prev, pricePerShare: \"\" }));\r\n                                      }\r\n                                    }}\r\n                                  />\r\n                                  <div className=\"form-text\">\r\n                                    This is the par value from your incorporation documents\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Round 0 Calculations Display */}\r\n                              <div className=\"calculation-results p-3 bg-light rounded mb-4\">\r\n                                <h6>Round 0 Calculations</h6>\r\n                                <div className=\"row\">\r\n                                  <div className=\"col-md-4\">\r\n                                    <strong>Total Shares:</strong> {calculateTotalShares().toLocaleString()}\r\n                                  </div>\r\n                                  <div className=\"col-md-4\">\r\n                                    <strong>Total Value:</strong> {formData.currency ? formData.currency.split(' ')[1] : '$'}{calculateTotalValue()}\r\n                                  </div>\r\n                                  <div className=\"col-md-4\">\r\n                                    <strong>Founder Count:</strong> {founderCount}\r\n                                  </div>\r\n                                </div>\r\n\r\n                                {/* Ownership Breakdown */}\r\n                                {calculateTotalShares() > 0 && (\r\n                                  <div className=\"mt-3\">\r\n                                    <strong>Ownership Breakdown:</strong>\r\n                                    <ul className=\"mb-0 mt-2\">\r\n                                      {calculateOwnershipPercentages().map((item, index) => (\r\n                                        <li key={index}>\r\n                                          {item.founder}: {item.percentage}%\r\n                                        </li>\r\n                                      ))}\r\n                                    </ul>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n\r\n                              {/* Founder Details Table */}\r\n                              {calculateTotalShares() > 0 && (\r\n                                <div className=\"mt-3\">\r\n                                  <strong>Founder Details:</strong>\r\n                                  <div className=\"table-responsive mt-2\">\r\n                                    <table className=\"table table-sm table-bordered\">\r\n                                      <thead>\r\n                                        <tr>\r\n                                          <th>Founder</th>\r\n                                          <th>Number of Shares</th>\r\n                                          <th>Price Per Share</th>\r\n                                          <th>Ownership %</th>\r\n                                          <th>Share Type</th>\r\n                                          <th>Share Class</th>\r\n                                          <th>Voting Rights</th>\r\n                                          <th>Value</th>\r\n                                        </tr>\r\n                                      </thead>\r\n                                      <tbody>\r\n                                        {foundersData.map((founder, index) => {\r\n                                          const shares = parseInt(founder.shares) || 0;\r\n                                          const percentage = calculateTotalShares() > 0\r\n                                            ? ((shares / calculateTotalShares()) * 100).toFixed(1)\r\n                                            : '0.0';\r\n\r\n                                          // Display share type - show custom if available\r\n                                          const displayShareType = founder.shareType === 'other' && founder.customShareType\r\n                                            ? founder.customShareType\r\n                                            : (founder.shareType === 'common' ? 'Common' : 'Preferred');\r\n\r\n                                          // Display share class - show custom if available\r\n                                          const displayShareClass = founder.customShareClass\r\n                                            ? founder.customShareClass\r\n                                            : (founder.shareClass || 'Class A');\r\n\r\n                                          return (\r\n                                            <tr key={index}>\r\n                                              <td>{founder.firstName} {founder.lastName}</td>\r\n                                              <td>{shares.toLocaleString()}</td>\r\n                                              <td>\r\n                                                {formData.currency ? formData.currency.split(' ')[1] : '$'}\r\n                                                {formData.pricePerShare || '0.00'}\r\n                                              </td>\r\n                                              <td>{percentage}%</td>\r\n                                              <td>{displayShareType}</td>\r\n                                              <td>{displayShareClass}</td>\r\n                                              <td>{founder.voting === 'voting' ? 'Voting' : 'Non-Voting'}</td>\r\n                                              <td>{formData.currency ? formData.currency.split(' ')[1] : '$'}{calculateFounderValue(shares)}</td>\r\n                                            </tr>\r\n                                          );\r\n                                        })}\r\n                                        {/* Total Row */}\r\n                                        <tr className=\"table-secondary fw-bold\">\r\n                                          <td colSpan=\"2\">Total</td>\r\n                                          <td>{formData.currency ? formData.currency.split(' ')[1] : '$'}{formData.pricePerShare || '0.00'}</td>\r\n                                          <td>100%</td>\r\n                                          <td colSpan=\"3\"></td>\r\n                                          <td>{formData.currency ? formData.currency.split(' ')[1] : '$'}{calculateTotalValue()}</td>\r\n                                        </tr>\r\n                                      </tbody>\r\n                                    </table>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Share Class Options for Round 1+ */}\r\n                          {/* Share Class Options for Round 1+ */}\r\n                          {!isFirstRound && (\r\n                            <div className=\"mb-4\">\r\n                              <label className=\"form-label fw-semibold\">\r\n                                Funding Rounds <span className=\"text-danger fs-5\">*</span>\r\n                                {errors.shareClassType && (\r\n                                  <div className=\"text-danger small mt-1 is-invalid\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.shareClassType}\r\n                                  </div>\r\n                                )}\r\n                              </label>\r\n\r\n                              <select\r\n                                className={`form-control ${errors.shareClassType ? \"is-invalid\" : \"\"}`}\r\n                                value={selected}\r\n                                onChange={(e) => {\r\n                                  const value = e.target.value;\r\n                                  if (value && value !== \"default\") {\r\n                                    console.log(allowedRounds.includes(value))\r\n                                    // Validation check\r\n                                    if (allowedRounds && !allowedRounds.includes(value)) {\r\n                                      seterrorMessageCenter(` ${value} is not available!\\n\\nAvailable rounds: ${allowedRounds.join(\", \")}`);\r\n                                      setTimeout(() => {\r\n\r\n                                        seterrorMessageCenter(\"\");\r\n\r\n                                      }, 3500);\r\n                                      return;\r\n                                    } else {\r\n                                      seterrorMessageCenter(\"\");\r\n                                    }\r\n\r\n                                    setSelected(value);\r\n                                    handleInputChange(\r\n                                      \"shareClassType\",\r\n                                      value === \"OTHER\" ? formData.shareclassother : value\r\n                                    );\r\n                                  } else {\r\n                                    seterrorMessageCenter(\"\");\r\n                                  }\r\n                                }}\r\n                                disabled={!allowedRounds} // Disable while loading\r\n                              >\r\n                                {/* Loading State */}\r\n                                {!allowedRounds && (\r\n                                  <option value=\"default\" disabled>Loading rounds...</option>\r\n                                )}\r\n\r\n                                {/* Loaded State */}\r\n                                {allowedRounds && (\r\n                                  <>\r\n                                    <option value=\"default\" disabled>\r\n                                      {allowedRounds.length === 0\r\n                                        ? \"No rounds available\"\r\n                                        : \"-- Select Funding Round --\"}\r\n                                    </option>\r\n\r\n                                    {/* Always show all options, backend will validate */}\r\n                                    <optgroup label=\"Seed Rounds\">\r\n                                      <option value=\"Pre-Seed\">Pre-Seed</option>\r\n                                      <option value=\"Seed\">Seed</option>\r\n                                      <option value=\"Post-Seed\">Post-Seed</option>\r\n                                    </optgroup>\r\n\r\n                                    <optgroup label=\"Series Rounds\">\r\n                                      <option value=\"Series A\">Series A</option>\r\n                                      <option value=\"Series A Extension\">Series A Extension</option>\r\n                                      <option value=\"Series B\">Series B</option>\r\n                                      <option value=\"Series B Extension\">Series B Extension</option>\r\n                                      <option value=\"Series C\">Series C</option>\r\n                                      <option value=\"Series C Extension\">Series C Extension</option>\r\n                                      <option value=\"Series D\">Series D</option>\r\n                                      <option value=\"Series D Extension\">Series D Extension</option>\r\n                                    </optgroup>\r\n\r\n                                    <optgroup label=\"Other Rounds\">\r\n                                      <option value=\"Bridge Round\">Bridge Round</option>\r\n                                      <option value=\"Advisor Shares\">Advisor Shares</option>\r\n                                      <option value=\"OTHER\">OTHER</option>\r\n                                    </optgroup>\r\n                                  </>\r\n                                )}\r\n                              </select>\r\n                              {errors.shareClassType && (\r\n                                <div className=\"text-danger small mt-1\">\r\n                                  <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                  {errors.shareClassType}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Conditional Field for OTHER option */}\r\n                          {!isFirstRound && selected === \"OTHER\" && (\r\n                            <div className=\"mb-4\">\r\n                              <label className=\"form-label fw-semibold\">\r\n                                Custom Share Class Name\r\n                              </label>\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"Enter custom share class name\"\r\n                                value={formData.shareclassother}\r\n                                onChange={(e) => handleInputChange(\"shareclassother\", e.target.value)}\r\n                                className={`form-control ${errors.shareclassother ? \"is-invalid\" : \"\"}`}\r\n                                maxLength={30}\r\n                              />\r\n                              <div className=\"form-text\">\r\n                                {formData.shareclassother.length}/30 characters\r\n                              </div>\r\n                              {errors.shareclassother && (\r\n                                <div className=\"text-danger small\">\r\n                                  <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                  {errors.shareclassother}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Conditional Field for OTHER option (only for Round 1+) */}\r\n\r\n\r\n                          {/* Next Button with Validation */}\r\n                          <div className=\"d-flex justify-content-end\">\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                const newErrors = {};\r\n\r\n                                // Common validation for both rounds\r\n                                if (!formData.nameOfRound.trim()) {\r\n                                  newErrors.nameOfRound = \"This field is required\";\r\n                                }\r\n\r\n                                if (isFirstRound) {\r\n                                  // ROUND 0 VALIDATION\r\n\r\n                                  // Validate price per share\r\n                                  if (!formData.pricePerShare || parseFloat(formData.pricePerShare) <= 0) {\r\n                                    newErrors.pricePerShare = \"Valid price per share is required\";\r\n                                  }\r\n\r\n                                  // Validate currency\r\n                                  if (!formData.currency || formData.currency.trim() === \"\") {\r\n                                    newErrors.currency = \"Currency selection is required\";\r\n                                  }\r\n\r\n                                  // Validate founder allocations\r\n                                  let hasFounderShares = false;\r\n                                  let totalShares = 0;\r\n                                  let hasValidShares = false;\r\n\r\n                                  foundersData.forEach((founder, index) => {\r\n                                    const shares = parseInt(founder.shares) || 0;\r\n\r\n                                    // Validate first name\r\n                                    if (!founder.firstName || founder.firstName.trim() === \"\") {\r\n                                      newErrors[`founder_${index}_firstName`] = \"First name is required\";\r\n                                    }\r\n\r\n                                    // Validate last name\r\n                                    if (!founder.lastName || founder.lastName.trim() === \"\") {\r\n                                      newErrors[`founder_${index}_lastName`] = \"Last name is required\";\r\n                                    }\r\n\r\n                                    // Validate email\r\n                                    if (!founder.email || founder.email.trim() === \"\") {\r\n                                      newErrors[`founder_${index}_email`] = \"Email is required\";\r\n                                    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(founder.email)) {\r\n                                      newErrors[`founder_${index}_email`] = \"Please enter a valid email address\";\r\n                                    }\r\n\r\n                                    // Validate shares\r\n                                    if (!founder.shares || founder.shares.trim() === \"\") {\r\n                                      newErrors[`founder_${index}_shares`] = \"Shares allocated is required\";\r\n                                    } else if (shares <= 0) {\r\n                                      newErrors[`founder_${index}_shares`] = \"Shares must be greater than 0\";\r\n                                    } else if (isNaN(shares)) {\r\n                                      newErrors[`founder_${index}_shares`] = \"Please enter a valid number\";\r\n                                    } else {\r\n                                      hasFounderShares = true;\r\n                                      totalShares += shares;\r\n                                      hasValidShares = true;\r\n                                    }\r\n\r\n                                    // Validate custom share type if \"other\" is selected\r\n                                    if (founder.shareType === 'other' && (!founder.customShareType || founder.customShareType.trim() === \"\")) {\r\n                                      newErrors[`founder_${index}_customShareType`] = \"Please specify the share type\";\r\n                                    }\r\n\r\n                                    // Validate custom share class if \"other\" is selected\r\n                                    if (founder.shareClass === 'other' && (!founder.customShareClass || founder.customShareClass.trim() === \"\")) {\r\n                                      newErrors[`founder_${index}_customShareClass`] = \"Please specify the share class\";\r\n                                    }\r\n                                  });\r\n\r\n                                  // Check if at least one founder has shares\r\n                                  if (!hasFounderShares) {\r\n                                    newErrors.founders = \"At least one founder must have shares allocated\";\r\n                                  }\r\n\r\n                                  // Check if total shares is zero\r\n                                  if (totalShares === 0 && hasValidShares) {\r\n                                    newErrors.founders = \"Total shares must be greater than 0\";\r\n                                  }\r\n\r\n                                  // Check if all founders have valid share allocations\r\n                                  const allFoundersHaveShares = foundersData.every(founder => {\r\n                                    const shares = parseInt(founder.shares) || 0;\r\n                                    return shares > 0;\r\n                                  });\r\n\r\n                                  if (!allFoundersHaveShares && hasFounderShares) {\r\n                                    newErrors.founders = \"All founders must have shares allocated\";\r\n                                  }\r\n\r\n                                } else {\r\n                                  // ROUND 1+ VALIDATION\r\n                                  if (selected === \"default\") {\r\n                                    newErrors.shareClassType = \"Please select a funding round\";\r\n                                  }\r\n\r\n                                  if (selected === \"OTHER\" && !formData.shareclassother.trim()) {\r\n                                    newErrors.shareclassother = \"This field is required\";\r\n                                  }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\"\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n\r\n                                  // For Round 0, auto-set some values\r\n                                  if (isFirstRound) {\r\n                                    handleInputChange(\"issuedshares\", calculateTotalShares().toString());\r\n                                    handleInputChange(\"roundStatus\", \"CLOSED\");\r\n                                    handleInputChange(\"shareClassType\", \"Common Shares\");\r\n                                    setSelected(\"Founder Shares (Family and Friends)\");\r\n                                  }\r\n\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {/* Investment Instrument Section */}\r\n                      {activeSection === \"instrument\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\"shareclass\", \"description\"]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          {/* ROUND 0 - Skip this section entirely */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"text-center py-5\">\r\n                              <div className=\"alert alert-info\">\r\n                                <strong>Round 0 - No Investment Instrument</strong>\r\n                                <p className=\"mb-0 mt-2\">\r\n                                  This is the incorporation round with founder shares only.\r\n                                  No external investment instruments are involved.\r\n                                </p>\r\n                              </div>\r\n                              <div className=\"d-flex justify-content-between pt-3 border-top gap-2\">\r\n                                <button\r\n                                  className=\"close_btn w-fit\"\r\n                                  onClick={() => navigateToSection('prev')}\r\n                                >\r\n                                  <i className=\"bi bi-arrow-left me-2\"></i>Back\r\n                                </button>\r\n                                <button\r\n                                  className=\"global_btn w-fit\"\r\n                                  onClick={() => navigateToSection('next')}\r\n                                >\r\n                                  Continue to Next Section\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Show instrument selection */\r\n                            <>\r\n                              <h3 className=\"h5 mb-4 text-gray-800\">Investment Instrument</h3>\r\n\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold d-flex align-items-center\">\r\n                                  Select Investment Instrument Type\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div className=\"tooltip-text tool-test-white text-white\" role=\"tooltip\">\r\n                                      <strong>Description:</strong> The type of equity issued.\r\n                                      Common classes include Common Stock for founders/employees\r\n                                      and Preferred shares for investors.\r\n                                    </div>\r\n                                  </span>\r\n                                  <span className=\"text-danger fs-5 ms-1\">*</span>\r\n                                  {errors.instrumentType && (\r\n                                    <span className=\"text-danger small ms-2\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.instrumentType}\r\n                                    </span>\r\n                                  )}\r\n                                </label>\r\n\r\n                                {/* Instrument Selection */}\r\n                                <div className=\"row mt-3\">\r\n                                  {instrumentOptions.map((opt) => (\r\n                                    <div key={opt.value} className=\"col-md-6 mb-3\">\r\n                                      <div\r\n                                        className={`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${formData.instrumentType === opt.value ? \"bg-light\" : \"border-gray-300\"\r\n                                          } ${errors.instrumentType ? \"border-danger\" : \"\"}`}\r\n                                        onClick={() => {\r\n                                          handleInputChange(\"instrumentType\", opt.value);\r\n\r\n                                          //  NEW: Agar Preferred Equity nahi hai, toh liquidation preferences clear karo\r\n                                          if (opt.value !== \"Preferred Equity\") {\r\n                                            handleInputChange(\"liquidation\", []);\r\n                                            handleInputChange(\"liquidationpreferences\", \"\");\r\n                                            handleInputChange(\"liquidationOther\", \"\");\r\n                                          }\r\n\r\n                                          if (opt.value !== \"OTHER\") handleInputChange(\"customInstrument\", \"\");\r\n                                          if (errors.instrumentType || errors.customInstrument) {\r\n                                            setErrors((prev) => ({\r\n                                              ...prev,\r\n                                              instrumentType: \"\",\r\n                                              customInstrument: \"\",\r\n                                            }));\r\n                                          }\r\n                                        }}\r\n                                      >\r\n                                        <div className=\"form-check\">\r\n                                          <input\r\n                                            type=\"radio\"\r\n                                            name=\"instrumentType\"\r\n                                            value={opt.value}\r\n                                            checked={formData.instrumentType === opt.value}\r\n                                            onChange={() => {\r\n                                              handleInputChange(\"instrumentType\", opt.value);\r\n\r\n                                              //  NEW: Agar Preferred Equity nahi hai, toh liquidation preferences clear karo\r\n                                              if (opt.value !== \"Preferred Equity\") {\r\n                                                handleInputChange(\"liquidation\", []);\r\n                                                handleInputChange(\"liquidationpreferences\", \"\");\r\n                                                handleInputChange(\"liquidationOther\", \"\");\r\n                                              }\r\n\r\n                                              if (opt.value !== \"OTHER\") handleInputChange(\"customInstrument\", \"\");\r\n                                              if (errors.instrumentType || errors.customInstrument) {\r\n                                                setErrors((prev) => ({\r\n                                                  ...prev,\r\n                                                  instrumentType: \"\",\r\n                                                  customInstrument: \"\",\r\n                                                }));\r\n                                              }\r\n                                            }}\r\n                                            className=\"form-check-input\"\r\n                                          />\r\n                                          <label className=\"form-check-label fw-medium\">\r\n                                            {opt.label}\r\n                                          </label>\r\n                                        </div>\r\n                                        <p className=\"text-muted small mb-0 mt-2\">\r\n                                          {opt.description}\r\n                                        </p>\r\n                                      </div>\r\n                                    </div>\r\n                                  ))}\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Instrument Specific Details */}\r\n                              {/* {formData.instrumentType === \"Common Stock\" && (\r\n                                <div className=\"mt-3 p-3 border rounded bg-light\">\r\n                                  <h5>Common Stock Details</h5>\r\n                                  <label className=\"form-label\">\r\n                                    Company Valuation <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <input\r\n                                    type=\"number\"\r\n                                    className={`form-control mb-3 ${errors.common_stock_valuation ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.common_stock_valuation || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"common_stock_valuation\", e.target.value)}\r\n                                    placeholder=\"Enter company valuation\"\r\n                                  />\r\n                                  {errors.common_stock_valuation && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.common_stock_valuation}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <div className=\"form-check mb-3\">\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      className=\"form-check-input\"\r\n                                      id=\"hasWarrants\"\r\n                                      checked={formData.hasWarrants || false}\r\n                                      onChange={(e) => handleInputChange(\"hasWarrants\", e.target.checked)}\r\n                                    />\r\n                                    <label className=\"form-check-label\" htmlFor=\"hasWarrants\">\r\n                                      Add Warrants (optional)\r\n                                    </label>\r\n                                  </div>\r\n\r\n                                  {formData.hasWarrants && (\r\n                                    <>\r\n                                      <label className=\"form-label\">Exercise Price (Strike Price)</label>\r\n                                      <input\r\n                                        type=\"number\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.exercisePrice || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"exercisePrice\", e.target.value)}\r\n                                        placeholder=\"Enter exercise price\"\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Expiration Date</label>\r\n                                      <input\r\n                                        type=\"date\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.expirationDate || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"expirationDate\", e.target.value)}\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Warrant Ratio</label>\r\n                                      <input\r\n                                        type=\"text\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.warrantRatio || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"warrantRatio\", e.target.value)}\r\n                                        placeholder=\"e.g., 1:1\"\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Type of Warrant</label>\r\n                                      <select\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.warrantType || \"CALL\"}\r\n                                        onChange={(e) => handleInputChange(\"warrantType\", e.target.value)}\r\n                                      >\r\n                                        <option value=\"CALL\">Call Warrant (buy shares)</option>\r\n                                        <option value=\"PUT\">Put Warrant (sell shares)</option>\r\n                                      </select>\r\n                                    </>\r\n                                  )}\r\n                                </div>\r\n                              )} */}\r\n\r\n                              {formData.instrumentType === \"test\" && (\r\n                                <div className=\"mt-3 p-3 border rounded bg-light\">\r\n                                  <h5>Preferred Equity Details</h5>\r\n\r\n                                  {/* ========== WARRANT SECTION ========== */}\r\n                                  <div className=\"border-top pt-3 mt-3\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                                      <h6 className=\"mb-0\">Warrant Details (Optional)</h6>\r\n                                      <div className=\"form-check form-switch\">\r\n                                        <input\r\n                                          type=\"checkbox\"\r\n                                          className=\"form-check-input\"\r\n                                          id=\"hasWarrants_preferred\"\r\n                                          checked={formData.hasWarrants_preferred || false}\r\n                                          onChange={(e) => {\r\n                                            const checked = e.target.checked;\r\n                                            handleInputChange(\"hasWarrants_preferred\", checked);\r\n\r\n                                            // Reset warrant fields if unchecked\r\n                                            if (!checked) {\r\n                                              handleInputChange(\"warrant_coverage_percentage\", \"\");\r\n                                              handleInputChange(\"warrant_exercise_type\", \"next_round_adjusted\");\r\n                                              handleInputChange(\"warrant_adjustment_percent\", \"\");\r\n                                              handleInputChange(\"warrant_adjustment_direction\", \"decrease\");\r\n                                              handleInputChange(\"expirationDate_preferred\", \"\");\r\n                                              handleInputChange(\"warrant_notes\", \"\");\r\n                                            }\r\n                                          }}\r\n                                        />\r\n                                        <label className=\"form-check-label\" htmlFor=\"hasWarrants_preferred\">\r\n                                          Include Warrants with this investment\r\n                                        </label>\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    {formData.hasWarrants_preferred && (\r\n                                      <>\r\n                                        {/* Alert - Important Info */}\r\n                                        <div className=\"alert alert-info mb-4\">\r\n                                          <i className=\"bi bi-info-circle me-2\"></i>\r\n                                          <strong>About Warrants:</strong> Warrants will be exercised in the next priced equity round.\r\n                                          Exercise price and shares will be calculated automatically at that time.\r\n                                        </div>\r\n\r\n                                        {/*  WARRANT COVERAGE PERCENTAGE */}\r\n                                        <div className=\"row mb-4\">\r\n                                          <div className=\"col-md-6\">\r\n                                            <label className=\"form-label\">\r\n                                              Warrant Coverage Percentage (%)\r\n                                              <span className=\"text-danger ms-1\">*</span>\r\n                                              <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                                <img\r\n                                                  className=\"blackdark\"\r\n                                                  width=\"15\"\r\n                                                  height=\"15\"\r\n                                                  src=\"/assets/user/images/question.png\"\r\n                                                  alt=\"Tip\"\r\n                                                />\r\n                                                <div className=\"tooltip-text tool-test-white text-white\" role=\"tooltip\">\r\n                                                  <strong>What it is:</strong> Percentage of new shares issued in the NEXT priced round that will be allocated as warrant shares.\r\n                                                  <br /><br />\r\n                                                  <strong>Example:</strong> If Series B issues 50,000 new shares and warrant coverage is 20%, then 10,000 warrant shares will be created.\r\n                                                </div>\r\n                                              </span>\r\n                                            </label>\r\n                                            <div className=\"input-group\">\r\n                                              <input\r\n                                                type=\"number\"\r\n                                                className={`form-control ${errors.warrant_coverage_percentage ? \"is-invalid\" : \"\"}`}\r\n                                                value={formData.warrant_coverage_percentage || \"\"}\r\n                                                onChange={(e) => {\r\n                                                  handleInputChange(\"warrant_coverage_percentage\", e.target.value);\r\n                                                  if (errors.warrant_coverage_percentage) {\r\n                                                    setErrors(prev => ({ ...prev, warrant_coverage_percentage: \"\" }));\r\n                                                  }\r\n                                                }}\r\n                                                placeholder=\"e.g., 20\"\r\n                                                min=\"0\"\r\n                                                max=\"100\"\r\n                                                step=\"0.1\"\r\n                                              />\r\n                                              <span className=\"input-group-text\">%</span>\r\n                                            </div>\r\n                                            {errors.warrant_coverage_percentage && (\r\n                                              <div className=\"text-danger small mt-1\">\r\n                                                <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                                {errors.warrant_coverage_percentage}\r\n                                              </div>\r\n                                            )}\r\n                                            <small className=\"text-muted d-block mt-1\">\r\n                                              Percentage of next round's new shares that become warrant shares\r\n                                            </small>\r\n                                          </div>\r\n                                        </div>\r\n\r\n                                        {/*  WARRANT EXERCISE TYPE */}\r\n                                        <div className=\"row mb-4\">\r\n                                          <div className=\"col-md-12\">\r\n                                            <label className=\"form-label\">\r\n                                              Warrant Exercise Price Method\r\n                                              <span className=\"text-danger ms-1\">*</span>\r\n                                            </label>\r\n                                            <div className=\"border rounded p-3 bg-white\">\r\n                                              {/* Option 1: Fixed Price (Disabled as per client requirements) */}\r\n                                              <div className=\"form-check mb-3 opacity-50\">\r\n                                                <input\r\n                                                  className=\"form-check-input\"\r\n                                                  type=\"radio\"\r\n                                                  name=\"warrant_exercise_type\"\r\n                                                  id=\"exerciseTypeFixed\"\r\n                                                  value=\"fixed\"\r\n                                                  disabled\r\n                                                  checked={formData.warrant_exercise_type === \"fixed\"}\r\n                                                />\r\n                                                <label className=\"form-check-label\" htmlFor=\"exerciseTypeFixed\">\r\n                                                  <strong>Fixed Price</strong> (Not available)\r\n                                                  <div className=\"small text-muted\">\r\n                                                    Exercise at a predetermined fixed price - Not supported per client requirements\r\n                                                  </div>\r\n                                                </label>\r\n                                              </div>\r\n\r\n                                              {/* Option 2: Next Round Price (No Adjustment) */}\r\n                                              <div className=\"form-check mb-3\">\r\n                                                <input\r\n                                                  className=\"form-check-input\"\r\n                                                  type=\"radio\"\r\n                                                  name=\"warrant_exercise_type\"\r\n                                                  id=\"exerciseTypeNextRound\"\r\n                                                  value=\"next_round\"\r\n                                                  checked={formData.warrant_exercise_type === \"next_round\"}\r\n                                                  onChange={(e) => {\r\n                                                    handleInputChange(\"warrant_exercise_type\", e.target.value);\r\n                                                    // Clear adjustment fields\r\n                                                    handleInputChange(\"warrant_adjustment_percent\", \"\");\r\n                                                    if (errors.warrant_exercise_type) {\r\n                                                      setErrors(prev => ({ ...prev, warrant_exercise_type: \"\" }));\r\n                                                    }\r\n                                                  }}\r\n                                                />\r\n                                                <label className=\"form-check-label\" htmlFor=\"exerciseTypeNextRound\">\r\n                                                  <strong>Next Priced Round Price</strong> (No Adjustment)\r\n                                                  <div className=\"small text-muted\">\r\n                                                    Exercise at the exact share price of the next priced equity round\r\n                                                  </div>\r\n                                                </label>\r\n                                              </div>\r\n\r\n                                              {/* Option 3: Next Round Price with Adjustment (DEFAULT) */}\r\n                                              <div className=\"form-check\">\r\n                                                <input\r\n                                                  className=\"form-check-input\"\r\n                                                  type=\"radio\"\r\n                                                  name=\"warrant_exercise_type\"\r\n                                                  id=\"exerciseTypeAdjusted\"\r\n                                                  value=\"next_round_adjusted\"\r\n                                                  checked={formData.warrant_exercise_type === \"next_round_adjusted\" || !formData.warrant_exercise_type}\r\n                                                  onChange={(e) => {\r\n                                                    handleInputChange(\"warrant_exercise_type\", e.target.value);\r\n                                                    if (errors.warrant_exercise_type) {\r\n                                                      setErrors(prev => ({ ...prev, warrant_exercise_type: \"\" }));\r\n                                                    }\r\n                                                  }}\r\n                                                />\r\n                                                <label className=\"form-check-label\" htmlFor=\"exerciseTypeAdjusted\">\r\n                                                  <strong>Next Priced Round Price  Adjustment</strong> (Recommended)\r\n                                                  <div className=\"small text-muted\">\r\n                                                    Exercise at next round price, adjusted by a percentage increase or decrease\r\n                                                  </div>\r\n                                                </label>\r\n                                              </div>\r\n                                            </div>\r\n\r\n                                            {errors.warrant_exercise_type && (\r\n                                              <div className=\"text-danger small mt-1\">\r\n                                                <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                                {errors.warrant_exercise_type}\r\n                                              </div>\r\n                                            )}\r\n                                          </div>\r\n                                        </div>\r\n\r\n                                        {/*  ADJUSTMENT PERCENTAGE (Only if adjusted type selected) */}\r\n                                        {formData.warrant_exercise_type === \"next_round_adjusted\" && (\r\n                                          <div className=\"row mb-4\">\r\n                                            <div className=\"col-md-6\">\r\n                                              <label className=\"form-label\">\r\n                                                Adjustment Direction & Percentage\r\n                                                <span className=\"text-danger ms-1\">*</span>\r\n                                              </label>\r\n                                              <div className=\"input-group\">\r\n                                                <select\r\n                                                  className={`form-select ${errors.warrant_adjustment_direction ? \"is-invalid\" : \"\"}`}\r\n                                                  style={{ maxWidth: \"140px\" }}\r\n                                                  value={formData.warrant_adjustment_direction || \"decrease\"}\r\n                                                  onChange={(e) => {\r\n                                                    handleInputChange(\"warrant_adjustment_direction\", e.target.value);\r\n                                                    if (errors.warrant_adjustment_direction) {\r\n                                                      setErrors(prev => ({ ...prev, warrant_adjustment_direction: \"\" }));\r\n                                                    }\r\n                                                  }}\r\n                                                >\r\n                                                  <option value=\"decrease\">Decrease by</option>\r\n                                                  <option value=\"increase\">Increase by</option>\r\n                                                </select>\r\n                                                <input\r\n                                                  type=\"number\"\r\n                                                  className={`form-control ${errors.warrant_adjustment_percent ? \"is-invalid\" : \"\"}`}\r\n                                                  value={formData.warrant_adjustment_percent || \"\"}\r\n                                                  onChange={(e) => {\r\n                                                    handleInputChange(\"warrant_adjustment_percent\", e.target.value);\r\n                                                    if (errors.warrant_adjustment_percent) {\r\n                                                      setErrors(prev => ({ ...prev, warrant_adjustment_percent: \"\" }));\r\n                                                    }\r\n                                                  }}\r\n                                                  placeholder=\"e.g., 20\"\r\n                                                  min=\"0\"\r\n                                                  max=\"100\"\r\n                                                  step=\"0.1\"\r\n                                                />\r\n                                                <span className=\"input-group-text\">%</span>\r\n                                              </div>\r\n                                              {(errors.warrant_adjustment_direction || errors.warrant_adjustment_percent) && (\r\n                                                <div className=\"text-danger small mt-1\">\r\n                                                  <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                                  {errors.warrant_adjustment_direction || errors.warrant_adjustment_percent}\r\n                                                </div>\r\n                                              )}\r\n                                              <small className=\"text-muted d-block mt-1\">\r\n                                                Adjust the next round's share price by this percentage\r\n                                              </small>\r\n                                            </div>\r\n\r\n                                            {/* Example Calculation */}\r\n                                            <div className=\"col-md-6\">\r\n                                              <label className=\"form-label\">Example Calculation</label>\r\n                                              <div className=\"form-control bg-light\">\r\n                                                {formData.warrant_adjustment_percent ? (\r\n                                                  <small>\r\n                                                    If next round price = <strong>$10.00</strong><br />\r\n                                                    Adjustment = <strong>{formData.warrant_adjustment_percent}%</strong> {formData.warrant_adjustment_direction}\r\n                                                    <br />\r\n                                                    <strong> Exercise price = ${\r\n                                                      formData.warrant_adjustment_direction === \"decrease\"\r\n                                                        ? (10 * (1 - formData.warrant_adjustment_percent / 100)).toFixed(2)\r\n                                                        : (10 * (1 + formData.warrant_adjustment_percent / 100)).toFixed(2)\r\n                                                    }</strong>\r\n                                                  </small>\r\n                                                ) : (\r\n                                                  <small className=\"text-muted\">Enter adjustment % to see example</small>\r\n                                                )}\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                        )}\r\n\r\n                                        {/*  EXPIRATION DATE */}\r\n                                        <div className=\"row mb-4\">\r\n                                          <div className=\"col-md-6\">\r\n                                            <label className=\"form-label\">\r\n                                              Warrant Expiration Date (Optional)\r\n                                            </label>\r\n                                            <input\r\n                                              type=\"date\"\r\n                                              className=\"form-control\"\r\n                                              value={formData.expirationDate_preferred || \"\"}\r\n                                              onChange={(e) => handleInputChange(\"expirationDate_preferred\", e.target.value)}\r\n                                            />\r\n                                            <small className=\"text-muted d-block mt-1\">\r\n                                              If not specified, warrants will expire in 10 years from issuance\r\n                                            </small>\r\n                                          </div>\r\n                                        </div>\r\n\r\n                                        {/*  WARRANT NOTES */}\r\n                                        <div className=\"row mb-4\">\r\n                                          <div className=\"col-md-12\">\r\n                                            <label className=\"form-label\">Additional Warrant Terms (Optional)</label>\r\n                                            <textarea\r\n                                              className=\"form-control\"\r\n                                              rows=\"3\"\r\n                                              value={formData.warrant_notes || \"\"}\r\n                                              onChange={(e) => handleInputChange(\"warrant_notes\", e.target.value)}\r\n                                              placeholder=\"Enter any additional terms or conditions for these warrants...\"\r\n                                            />\r\n                                            <small className=\"text-muted d-block mt-1\">\r\n                                              Any special conditions, vesting schedules, or restrictions\r\n                                            </small>\r\n                                          </div>\r\n                                        </div>\r\n\r\n                                        {/*  WARRANT SUMMARY */}\r\n                                        <div className=\"alert alert-success\">\r\n                                          <h6 className=\"fw-bold mb-2\">\r\n                                            <i className=\"bi bi-check-circle me-2\"></i>\r\n                                            Warrant Terms Summary\r\n                                          </h6>\r\n                                          <ul className=\"mb-0 small\">\r\n                                            <li>\r\n                                              <strong>Coverage:</strong> {formData.warrant_coverage_percentage || \"___\"}% of next round's new shares\r\n                                            </li>\r\n                                            <li>\r\n                                              <strong>Exercise Method:</strong>{\" \"}\r\n                                              {formData.warrant_exercise_type === \"next_round\"\r\n                                                ? \"At next priced round price (no adjustment)\"\r\n                                                : formData.warrant_exercise_type === \"next_round_adjusted\"\r\n                                                  ? `At next priced round price ${formData.warrant_adjustment_direction === \"decrease\" ? \"minus\" : \"plus\"} ${formData.warrant_adjustment_percent || \"___\"}%`\r\n                                                  : \"Not selected\"}\r\n                                            </li>\r\n                                            <li>\r\n                                              <strong>Exercise Timing:</strong> Warrants will be exercised automatically in the next priced equity round\r\n                                            </li>\r\n                                            <li>\r\n                                              <strong>Share Calculation:</strong> Number of warrant shares will be calculated when next round closes\r\n                                            </li>\r\n                                            <li>\r\n                                              <strong>Dilution Effect:</strong> Warrant exercise will dilute all existing shareholders proportionally\r\n                                            </li>\r\n                                          </ul>\r\n                                        </div>\r\n\r\n                                        {/* Important Note */}\r\n                                        <div className=\"alert alert-warning\">\r\n                                          <strong> Important:</strong> The exact number of warrant shares and exercise price will be calculated automatically when the next priced equity round is created. This ensures accurate pricing based on the actual next round terms.\r\n                                        </div>\r\n                                      </>\r\n                                    )}\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n\r\n                              {formData.instrumentType === \"Safe\" && (\r\n                                <div className=\"mt-3 p-3 border rounded bg-light\">\r\n                                  <h5>SAFE Details</h5>\r\n                                  <label className=\"form-label\">\r\n                                    Valuation Cap <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <NumericFormat\r\n                                    className={`form-control mb-3 ${errors.valuationCap ? \"is-invalid\" : \"\"}`}\r\n                                    placeholder=\"Enter valuation cap\"\r\n                                    value={formData.valuationCap || \"\"}\r\n                                    thousandSeparator={true}\r\n                                    allowNegative={false}\r\n                                    decimalScale={2}\r\n                                    fixedDecimalScale={true}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"valuationCap\", values.value);\r\n\r\n                                      if (errors.valuationCap) {\r\n                                        setErrors(prev => ({\r\n                                          ...prev,\r\n                                          valuationCap: \"\"\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                  />\r\n\r\n                                  {errors.valuationCap && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.valuationCap}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <label className=\"form-label\">\r\n                                    Conversion Discount: (%) <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <NumericFormat\r\n                                    decimalScale={2}        // 2 decimal places\r\n                                    fixedDecimalScale       // hamesha .00 show kare\r\n                                    allowNegative={false}   // negative values allow nahi\r\n                                    placeholder=\"Enter Conversion Discount: (10-25%)\"\r\n                                    value={formData.discountRate || \"\"}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"discountRate\", values.value);\r\n\r\n                                      if (errors.discountRate) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          discountRate: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                    className={`form-control mb-3 ${errors.discountRate ? \"is-invalid\" : \"\"}`}\r\n                                  />\r\n\r\n                                  {errors.discountRate && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.discountRate}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* <label className=\"form-label\">\r\n                                    SAFE Type <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <div className=\"form-check mb-2\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      className=\"form-check-input\"\r\n                                      id=\"preMoney\"\r\n                                      name=\"safeType\"\r\n                                      value=\"PRE_MONEY\"\r\n                                      checked={formData.safeType === \"PRE_MONEY\"}\r\n                                      onChange={(e) => handleInputChange(\"safeType\", e.target.value)}\r\n                                    />\r\n                                    <label className=\"form-check-label\" htmlFor=\"preMoney\">\r\n                                      Pre-Money SAFE\r\n                                    </label>\r\n                                  </div>\r\n                                  <div className=\"form-check mb-3\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      className=\"form-check-input\"\r\n                                      id=\"postMoney\"\r\n                                      name=\"safeType\"\r\n                                      value=\"POST_MONEY\"\r\n                                      checked={formData.safeType === \"POST_MONEY\"}\r\n                                      onChange={(e) => handleInputChange(\"safeType\", e.target.value)}\r\n                                    />\r\n                                    <label className=\"form-check-label\" htmlFor=\"postMoney\">\r\n                                      Post-Money SAFE\r\n                                    </label>\r\n                                  </div> */}\r\n                                  {/* {errors.safeType && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.safeType}\r\n                                    </div>\r\n                                  )} */}\r\n                                </div>\r\n                              )}\r\n\r\n                              {formData.instrumentType === \"Convertible Note\" && (\r\n                                <div className=\"mt-3 p-3 border rounded bg-light\">\r\n                                  <h5>Convertible Note Details</h5>\r\n                                  <label className=\"form-label\">\r\n                                    Valuation Cap <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <NumericFormat\r\n                                    thousandSeparator\r\n                                    decimalScale={2}\r\n                                    fixedDecimalScale\r\n                                    allowNegative={false}\r\n                                    placeholder=\"Enter valuation cap\"\r\n                                    value={formData.valuationCap_note || \"\"}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"valuationCap_note\", values.value);\r\n\r\n                                      if (errors.valuationCap_note) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          valuationCap_note: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                    className={`form-control mb-3 ${errors.valuationCap_note ? \"is-invalid\" : \"\"}`}\r\n                                  />\r\n\r\n\r\n                                  {errors.valuationCap_note && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.valuationCap_note}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <label className=\"form-label\">\r\n                                    Conversion Discount  (%) <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <NumericFormat\r\n                                    decimalScale={2}        // 2 decimal places\r\n                                    fixedDecimalScale       // hamesha .00 show kare\r\n                                    allowNegative={false}   // negative values block\r\n                                    placeholder=\"Enter Conversion Discount (1030%)\"\r\n                                    value={formData.discountRate_note || \"\"}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"discountRate_note\", values.value);\r\n\r\n                                      if (errors.discountRate_note) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          discountRate_note: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                    className={`form-control mb-3 ${errors.discountRate_note ? \"is-invalid\" : \"\"}`}\r\n                                  />\r\n\r\n                                  {errors.discountRate_note && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.discountRate_note}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <label className=\"form-label\">Maturity Date</label>\r\n                                  <input\r\n                                    type=\"date\"\r\n                                    className={`form-control mb-3 ${errors.maturityDate ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.maturityDate || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"maturityDate\", e.target.value)}\r\n                                  />\r\n                                  {errors.maturityDate && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.maturityDate}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <label className=\"form-label\">Interest Rate (%)</label>\r\n                                  <NumericFormat\r\n                                    thousandSeparator\r\n                                    decimalScale={2}      // 2 decimal places\r\n                                    fixedDecimalScale     // hamesha 2 decimal dikhaye\r\n                                    allowNegative={false} // negative values allow nahi\r\n                                    placeholder=\"Enter annual interest rate\"\r\n                                    value={formData.interestRate_note || \"\"}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"interestRate_note\", values.value);\r\n\r\n                                      if (errors.interestRate_note) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          interestRate_note: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                    className={`form-control mb-3 ${errors.interestRate_note ? \"is-invalid\" : \"\"}`}\r\n                                  />\r\n\r\n                                  {errors.interestRate_note && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.interestRate_note}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* <label className=\"form-label\">\r\n                                    Convertible Trigger <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <select\r\n                                    className={`form-control mb-3 ${errors.convertibleTrigger ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.convertibleTrigger || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"convertibleTrigger\", e.target.value)}\r\n                                  >\r\n                                    <option value=\"\">Select trigger event</option>\r\n                                    <option value=\"QUALIFIED_FINANCING\">Qualified Equity Financing</option>\r\n                                    <option value=\"ACQUISITION_IPO\">Acquisition or IPO</option>\r\n                                    <option value=\"MATURITY_DATE\">Reaching Maturity Date</option>\r\n                                  </select>\r\n                                  {errors.convertibleTrigger && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.convertibleTrigger}\r\n                                    </div>\r\n                                  )} */}\r\n                                </div>\r\n                              )}\r\n\r\n                              {formData.instrumentType === \"Venture/Bank DEBT\" && (\r\n                                <div className=\"mt-3 p-3 border rounded bg-light\">\r\n                                  <h5>Venture/Bank Debt Details</h5>\r\n                                  <label className=\"form-label\">\r\n                                    Interest Rate (%) <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <input\r\n                                    type=\"number\"\r\n                                    className={`form-control mb-3 ${errors.interestRate ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.interestRate || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"interestRate\", e.target.value)}\r\n                                    placeholder=\"Enter interest rate\"\r\n                                  />\r\n                                  {errors.interestRate && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.interestRate}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <label className=\"form-label\">\r\n                                    Repayment Schedule (months) <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                  </label>\r\n                                  <input\r\n                                    type=\"number\"\r\n                                    className={`form-control mb-3 ${errors.repaymentSchedule ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.repaymentSchedule || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"repaymentSchedule\", e.target.value)}\r\n                                    placeholder=\"Enter repayment schedule in months\"\r\n                                  />\r\n                                  {errors.repaymentSchedule && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.repaymentSchedule}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  <div className=\"form-check mb-3\">\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      className=\"form-check-input\"\r\n                                      id=\"hasWarrants_Bank\"\r\n                                      checked={formData.hasWarrants_Bank || false}\r\n                                      onChange={(e) => handleInputChange(\"hasWarrants_Bank\", e.target.checked)}\r\n                                    />\r\n                                    <label className=\"form-check-label\" htmlFor=\"hasWarrants_Bank\">\r\n                                      Add Warrants (optional)\r\n                                    </label>\r\n                                  </div>\r\n\r\n                                  {formData.hasWarrants_Bank && (\r\n                                    <>\r\n                                      <label className=\"form-label\">Exercise Price (Strike Price)</label>\r\n                                      <input\r\n                                        type=\"number\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.exercisePrice_bank || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"exercisePrice_bank\", e.target.value)}\r\n                                        placeholder=\"Enter exercise price\"\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Expiration Date</label>\r\n                                      <input\r\n                                        type=\"date\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.exercisedate_bank || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"exercisedate_bank\", e.target.value)}\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Warrant Ratio</label>\r\n                                      <input\r\n                                        type=\"text\"\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.warrantRatio_bank || \"\"}\r\n                                        onChange={(e) => handleInputChange(\"warrantRatio_bank\", e.target.value)}\r\n                                        placeholder=\"e.g., 1:1\"\r\n                                      />\r\n\r\n                                      <label className=\"form-label\">Type of Warrant</label>\r\n                                      <select\r\n                                        className=\"form-control mb-3\"\r\n                                        value={formData.warrantType_bank || \"CALL\"}\r\n                                        onChange={(e) => handleInputChange(\"warrantType_bank\", e.target.value)}\r\n                                      >\r\n                                        <option value=\"CALL\">Call Warrant (buy shares)</option>\r\n                                        <option value=\"PUT\">Put Warrant (sell shares)</option>\r\n                                      </select>\r\n                                    </>\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Conditional OTHER input */}\r\n                              {formData.instrumentType === \"OTHER\" && (\r\n                                <div className=\"mb-4\">\r\n                                  <label className=\"form-label fw-semibold\">\r\n                                    Custom Investment Instrument Name\r\n                                    <span className=\"text-danger fs-5 ms-1\">*</span>\r\n                                  </label>\r\n                                  <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter custom investment instrument name\"\r\n                                    value={formData.customInstrument || \"\"}\r\n                                    onChange={(e) => handleInputChange(\"customInstrument\", e.target.value)}\r\n                                    className={`form-control ${errors.customInstrument ? \"is-invalid\" : \"\"}`}\r\n                                    maxLength={30}\r\n                                  />\r\n                                  <div className=\"form-text\">\r\n                                    {formData.customInstrument ? formData.customInstrument.length : 0}/30 characters\r\n                                  </div>\r\n                                  {errors.customInstrument && (\r\n                                    <div className=\"text-danger small\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.customInstrument}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Navigation buttons */}\r\n                              <div className=\"d-flex justify-content-between pt-3 border-top gap-2\">\r\n                                <button\r\n                                  className=\"close_btn w-fit\"\r\n                                  onClick={() => navigateToSection('prev')}\r\n                                >\r\n                                  <i className=\"bi bi-arrow-left me-2\"></i>Back\r\n                                </button>\r\n                                <button\r\n                                  className=\"global_btn w-fit\"\r\n                                  onClick={() => {\r\n                                    const newErrors = {};\r\n\r\n                                    // Validate instrument type\r\n                                    if (!formData.instrumentType) {\r\n                                      newErrors.instrumentType = \"Please select an investment instrument type\";\r\n                                    }\r\n\r\n                                    if (formData.instrumentType === \"OTHER\") {\r\n                                      if (!formData.customInstrument) {\r\n                                        newErrors.customInstrument = \"This field is required\";\r\n                                      }\r\n                                    }\r\n\r\n                                    // Conditional validations per instrument\r\n                                    switch (formData.instrumentType) {\r\n                                      case \"Preferred Equity\":\r\n                                        //  WARRANT VALIDATION (only if warrants are enabled)\r\n                                        // if (formData.hasWarrants_preferred) {\r\n\r\n                                        //   if (!formData.warrant_coverage_percentage || formData.warrant_coverage_percentage <= 0) {\r\n                                        //     newErrors.warrant_coverage_percentage = \"Warrant coverage percentage is required and must be greater than 0\";\r\n                                        //   } else if (formData.warrant_coverage_percentage > 100) {\r\n                                        //     newErrors.warrant_coverage_percentage = \"Warrant coverage cannot exceed 100%\";\r\n                                        //   }\r\n\r\n\r\n                                        //   if (!formData.warrant_exercise_type) {\r\n                                        //     newErrors.warrant_exercise_type = \"Please select a warrant exercise method\";\r\n                                        //   }\r\n\r\n\r\n                                        //   if (formData.warrant_exercise_type === \"next_round_adjusted\") {\r\n                                        //     if (!formData.warrant_adjustment_percent || formData.warrant_adjustment_percent <= 0) {\r\n                                        //       newErrors.warrant_adjustment_percent = \"Adjustment percentage is required when using adjusted exercise price\";\r\n                                        //     } else if (formData.warrant_adjustment_percent > 100) {\r\n                                        //       newErrors.warrant_adjustment_percent = \"Adjustment percentage cannot exceed 100%\";\r\n                                        //     }\r\n\r\n                                        //     if (!formData.warrant_adjustment_direction) {\r\n                                        //       newErrors.warrant_adjustment_direction = \"Please select increase or decrease\";\r\n                                        //     }\r\n                                        //   }\r\n                                        // }\r\n                                        break;\r\n\r\n                                      case \"Safe\":\r\n                                        if (formData.instrumentType === \"Safe\") {\r\n                                          if (!formData.valuationCap) newErrors.valuationCap = \"This field is required\";\r\n                                          if (!formData.discountRate) newErrors.discountRate = \"This field is required\";\r\n                                        }\r\n                                        break;\r\n\r\n                                      case \"Convertible Note\":\r\n                                        if (formData.instrumentType === \"Convertible Note\") {\r\n                                          if (!formData.valuationCap_note) newErrors.valuationCap_note = \"This field is required\";\r\n                                          if (!formData.discountRate_note) newErrors.discountRate_note = \"This field is required\";\r\n                                          if (!formData.maturityDate) newErrors.maturityDate = \"This field is required\";\r\n                                          if (!formData.interestRate_note) newErrors.interestRate_note = \"This field is required\";\r\n                                        }\r\n                                        break;\r\n\r\n                                      case \"Venture/Bank DEBT\":\r\n                                        if (!formData.repaymentSchedule) newErrors.repaymentSchedule = \"This field is required\";\r\n                                        if (!formData.interestRate) newErrors.interestRate = \"This field is required\";\r\n                                        break;\r\n\r\n                                      default:\r\n                                        break;\r\n                                    }\r\n\r\n                                    if (Object.keys(newErrors).length === 0) {\r\n                                      setErrors({});\r\n                                      navigateToSection('next');\r\n                                    } else {\r\n                                      setErrors(newErrors);\r\n                                      setTimeout(() => {\r\n                                        const firstErrorElement = document.querySelector(\".is-invalid\");\r\n                                        if (firstErrorElement) {\r\n                                          firstErrorElement.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n                                        }\r\n                                      }, 100);\r\n                                    }\r\n                                  }}\r\n                                >\r\n                                  Save and Continue\r\n                                </button>\r\n                              </div>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      {/* Description Section */}\r\n                      {activeSection === \"description\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          {/* Show previous section data */}\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <div className=\"mb-4\">\r\n                            <label className=\"form-label fw-semibold\">\r\n                              Description{\" \"}\r\n                              <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                <img\r\n                                  className=\"blackdark\"\r\n                                  width=\"15\"\r\n                                  height=\"15\"\r\n                                  src=\"/assets/user/images/question.png\"\r\n                                  alt=\"Tip\"\r\n                                />\r\n                                <div\r\n                                  className=\"tooltip-text tool-test-white text-white\"\r\n                                  role=\"tooltip\"\r\n                                >\r\n                                  <div className=\"d-flex flex-column gap-2\">\r\n                                    <p> <strong>What it is:</strong> A strategic\r\n                                      summary that links the equity class to its\r\n                                      purpose, issuance context, and recipient\r\n                                      group.</p>\r\n                                    <p><strong>Why it matters:</strong> Investors use\r\n                                      this to understand the logic behind each\r\n                                      class, e.g. who holds it, under what\r\n                                      conditions it was granted.</p>\r\n                                    <div className=\"d-flex flex-column gap-1\">\r\n                                      <p> <strong>How to fill it:</strong> Detail the\r\n                                        rationale and stakeholders behind issuance.\r\n                                        Think of this as the why behind the class.\r\n                                        For example:</p>\r\n                                      <ul>\r\n                                        <li>\r\n                                          <p> Reserved for key hires under Employee\r\n                                            Stock Option Pool</p>\r\n                                        </li>\r\n                                        <li>\r\n                                          <p> Issued to seed investors during SAFE\r\n                                            conversion in 2022</p>\r\n                                        </li>\r\n                                        <li>\r\n                                          <p> Created for strategic Gulf partner\r\n                                            with board observer rights</p>\r\n                                        </li>\r\n                                      </ul>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </span>\r\n                              <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                            </label>\r\n                            <textarea\r\n                              placeholder=\"Enter the strategic description of your round...\"\r\n                              className={`textarea_input ${errors.description ? \"is-invalid\" : \"\"\r\n                                }`}\r\n                              rows=\"6\"\r\n                              value={formData.description}\r\n                              onChange={(e) => {\r\n                                handleInputChange(\r\n                                  \"description\",\r\n                                  e.target.value\r\n                                );\r\n                                if (errors.description)\r\n                                  setErrors((prev) => ({\r\n                                    ...prev,\r\n                                    description: \"\",\r\n                                  }));\r\n                              }}\r\n                            />\r\n                            {errors.description && (\r\n                              <div className=\"text-danger small mt-1\">\r\n                                <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                {errors.description}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n\r\n                          <div className=\"d-flex justify-content-between pt-3 w-100 border-top gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              <i className=\"bi bi-arrow-left me-2\"></i>Back\r\n                            </button>\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                if (!formData.description) {\r\n                                  setErrors({\r\n                                    ...errors,\r\n                                    description: \"This field is required\",\r\n                                  });\r\n                                } else {\r\n                                  setErrors({ ...errors, description: \"\" });\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n\r\n\r\n                      {/* Round Size Section */}\r\n                      {activeSection === \"roundsize\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">\r\n                            {isFirstRound ? \"Round 0 - Company Valuation\" : \"Round Size\"}\r\n                          </h3>\r\n\r\n                          {/* ROUND 0 - Show different content */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"round-zero-content\">\r\n                              <div className=\"alert alert-info mb-4\">\r\n                                <strong>Round 0 Information:</strong> This is your company's incorporation round.\r\n                                The valuation is based on the share allocation and price per share from your incorporation documents.\r\n                              </div>\r\n\r\n                              {/* Round 0 Valuation Display */}\r\n                              <div className=\"calculation-results p-4 border rounded bg-light mb-4\">\r\n                                <h5>Round 0 - Incorporation Valuation</h5>\r\n                                <div className=\"row\">\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Total Shares Issued:</strong> {calculateTotalShares().toLocaleString()}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Price Per Share:</strong> ${formData.pricePerShare || '0.00'}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Total Company Value:</strong> ${calculateTotalValue()}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Number of Founders:</strong> {founderCount}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                {/* Note about Round 0 valuation */}\r\n                                <div className=\"alert alert-warning mt-3 mb-0\">\r\n                                  <small>\r\n                                    <strong>Note:</strong> This valuation is for incorporation purposes only and will not carry over to future investment rounds.\r\n                                    Each subsequent round will calculate its own price per share based on investment size and pre-money valuation.\r\n                                  </small>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Round 0 specific information */}\r\n                              <div className=\"mt-4 p-3 bg-light rounded\">\r\n                                <h6>About Round 0 Valuation:</h6>\r\n                                <ul className=\"mb-0\">\r\n                                  <li>Based on incorporation documents and initial share allocation</li>\r\n                                  <li>Price per share is the par value from your incorporation</li>\r\n                                  <li>This valuation represents the initial capital contribution by founders</li>\r\n                                  <li>Future rounds will calculate price per share based on investment and valuation inputs</li>\r\n                                </ul>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Show original round size fields */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"row align-items-start\">\r\n                                {/* Investment Amount */}\r\n                                <div className=\"col-md-5 mb-4\">\r\n                                  <label className=\"form-label fw-semibold\">\r\n                                    Investment Amount{\" \"}({CurrDisplay})\r\n                                    <span className=\"text-danger fs-5 ms-1\">*</span>\r\n                                  </label>\r\n                                  <NumericFormat\r\n                                    thousandSeparator={true}\r\n                                    decimalScale={2}\r\n                                    fixedDecimalScale={true}\r\n                                    allowNegative={false}\r\n                                    placeholder=\"Enter amount\"\r\n                                    value={formData.roundsize}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"roundsize\", values.value);\r\n                                      if (errors.roundsize) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          roundsize: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                    className={`textarea_input ${errors.roundsize ? \"is-invalid\" : \"\"}`}\r\n                                  />\r\n                                  {errors.roundsize && (\r\n                                    <div className=\"text-danger small mt-1\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.roundsize}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n\r\n                                {/* Currency */}\r\n                                <div className=\"col-md-2 mb-4\">\r\n                                  <label className=\"form-label fw-semibold\">\r\n                                    Currency <span className=\"text-danger fs-5 ms-1\">*</span>\r\n                                  </label>\r\n                                  <select\r\n                                    className={`textarea_input ${errors.currency ? \"is-invalid\" : \"\"}`}\r\n                                    value={formData.currency}\r\n                                    onChange={(e) => {\r\n                                      handleInputChange(\"currency\", e.target.value);\r\n                                      if (errors.currency) {\r\n                                        setErrors((prev) => ({\r\n                                          ...prev,\r\n                                          currency: \"\",\r\n                                        }));\r\n                                      }\r\n                                    }}\r\n                                  >\r\n                                    <option value=\"\">-- Select Currency --</option>\r\n                                    {countrySymbolList.map((item) => (\r\n                                      <option\r\n                                        key={item.id}\r\n                                        value={`${item.currency_code} ${item.currency_symbol}`}\r\n                                      >\r\n                                        {item.currency_code} {item.currency_symbol}\r\n                                      </option>\r\n                                    ))}\r\n                                  </select>\r\n                                  {errors.currency && (\r\n                                    <div className=\"text-danger small mt-1\">\r\n                                      <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                      {errors.currency}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                                {/*  Correct Condition */}\r\n                                {/* {\r\n                                  !selected?.includes(\"Series\") &&\r\n                                  formData.instrumentType !== 'Safe' &&\r\n                                  formData.instrumentType !== 'Convertible Note' && formData.instrumentType !== 'Preferred Equity' && (\r\n                                    <div className=\"col-md-5 mb-4\">\r\n                                      <label className=\"form-label fw-semibold\">\r\n                                        Investor Post-Money Ownership(%)\r\n                                      </label>\r\n                                      <NumericFormat\r\n                                        thousandSeparator={true}\r\n                                        decimalScale={2}\r\n                                        fixedDecimalScale={true}\r\n                                        disabled\r\n                                        allowNegative={false}\r\n                                        placeholder=\"Enter investor post-money ownership\"\r\n                                        value={formData.investorPostMoney || \"\"}\r\n                                        onValueChange={(values) => {\r\n                                          handleInputChange(\"investorPostMoney\", values.value);\r\n                                          if (errors.investorPostMoney) {\r\n                                            setErrors((prev) => ({\r\n                                              ...prev,\r\n                                              investorPostMoney: \"\",\r\n                                            }));\r\n                                          }\r\n                                        }}\r\n                                        className={`form-control ${errors.investorPostMoney ? \"is-invalid\" : \"\"}`}\r\n                                      />\r\n                                      {errors.investorPostMoney && (\r\n                                        <div className=\"text-danger small mt-1\">\r\n                                          <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                          {errors.investorPostMoney}\r\n                                        </div>\r\n                                      )}\r\n                                    </div>\r\n                                  )\r\n                                } */}\r\n\r\n\r\n\r\n                                <div className=\"col-md-6 mb-4\">\r\n                                  <label className=\"form-label fw-semibold\"> {(formData.instrumentType === \"Safe\" || formData.instrumentType === \"Convertible Note\") ? \"Company Valuation\" : \"Pre-Money Valuation\"} {\" \"} ({CurrDisplay})</label>\r\n                                  <NumericFormat\r\n                                    thousandSeparator\r\n                                    decimalScale={2}\r\n                                    fixedDecimalScale\r\n                                    allowNegative={false}\r\n                                    placeholder=\"Enter pre-money valuation\"\r\n                                    value={formData.pre_money}\r\n                                    onValueChange={(values) => {\r\n                                      handleInputChange(\"pre_money\", values.value);\r\n                                      setFormData((prev) => ({\r\n                                        ...prev,\r\n                                        isPostEntered: false,\r\n                                      }));\r\n                                    }}\r\n                                    className=\"textarea_input\"\r\n                                  />\r\n                                </div>\r\n\r\n\r\n\r\n                                {(\r\n\r\n                                  // Case 2: instrumentType 'Convertible Note' AND shareClassType is Seed/Pre-Seed/Post-Seed\r\n                                  (formData.instrumentType !== 'Safe' || formData.instrumentType !== 'Convertible Note') &&\r\n\r\n                                  // Case 3: instrumentType 'Convertible Note' AND selected includes \"Series\"\r\n                                  ((formData.instrumentType === \"OTHER\") || (formData.instrumentType === \"Common Stock\") || (formData.instrumentType === \"Preferred Equity\"))\r\n                                ) && (\r\n                                    <div className=\"col-md-6 mb-4\">\r\n                                      <label className=\"form-label fw-semibold\">Post-Money Valuation{\" \"}({CurrDisplay})</label>\r\n                                      <NumericFormat\r\n                                        thousandSeparator\r\n                                        decimalScale={2}\r\n                                        disabled\r\n                                        fixedDecimalScale\r\n                                        allowNegative={false}\r\n                                        placeholder=\"Enter post-money valuation\"\r\n                                        value={formData.post_money}\r\n                                        onValueChange={(values) => {\r\n                                          handleInputChange(\"post_money\", values.value);\r\n                                          setFormData((prev) => ({\r\n                                            ...prev,\r\n                                            isPostEntered: true,\r\n                                          }));\r\n                                        }}\r\n                                        className=\"textarea_input\"\r\n                                      />\r\n                                    </div>\r\n                                  )}\r\n\r\n                                {/* Option Pool Percentage */}\r\n                                <div className=\"row\">\r\n                                  {(\r\n                                    (\r\n                                      formData.instrumentType === \"Common Stock\") || (\r\n                                      formData.instrumentType === \"Preferred Equity\") ||\r\n                                    (\r\n                                      formData.instrumentType === \"Safe\") || (formData.instrumentType === \"OTHER\") || (\r\n                                      formData.instrumentType === \"Convertible Note\")\r\n                                  ) && (\r\n\r\n                                      <div className=\"col-md-6 mb-4\">\r\n                                        <label className=\"form-label fw-semibold\">\r\n                                          Pre-Money Option Pool (%)\r\n\r\n                                          <i\r\n                                            className=\"bi bi-info-circle text-muted ms-1\"\r\n                                            title={\r\n                                              formData.instrumentType === 'Common Stock' || formData.instrumentType === 'Preferred Equity'\r\n                                                ? \"Carried over from previous round - This is the existing option pool percentage before Series A investment\"\r\n                                                : \"Percentage of equity reserved for employees before this round\"\r\n                                            }\r\n                                          ></i>\r\n                                        </label>\r\n\r\n                                        {formData.instrumentType === 'Common Stock' || formData.instrumentType === \"Preferred Equity\" ? (\r\n\r\n                                          <>\r\n                                            <NumericFormat\r\n                                              thousandSeparator={true}\r\n                                              decimalScale={2}\r\n                                              fixedDecimalScale={true}\r\n                                              allowNegative={false}\r\n                                              placeholder=\"Enter option pool % (e.g. 10)\"\r\n                                              value={formData.optionPoolPercent}\r\n\r\n                                              onValueChange={(values) => {\r\n                                                handleInputChange(\"optionPoolPercent\", values.floatValue);\r\n                                              }}\r\n                                              className=\"textarea_input\"\r\n                                            />\r\n                                          </>\r\n                                        ) : (\r\n                                          // EDITABLE for Seed rounds\r\n                                          <>\r\n                                            <NumericFormat\r\n                                              thousandSeparator={true}\r\n                                              decimalScale={2}\r\n                                              fixedDecimalScale={true}\r\n                                              allowNegative={false}\r\n                                              placeholder=\"Enter option pool % (e.g. 10)\"\r\n                                              value={formData.optionPoolPercent}\r\n                                              onValueChange={(values) => {\r\n                                                handleInputChange(\"optionPoolPercent\", values.floatValue);\r\n                                              }}\r\n                                              className=\"textarea_input\"\r\n                                            />\r\n                                            {/* <small className=\"text-muted d-block mt-1\">\r\n                                              Option pool percentage before investment (Pre-Money)\r\n                                            </small> */}\r\n                                          </>\r\n                                        )}\r\n                                      </div>\r\n\r\n\r\n\r\n\r\n\r\n                                    )}\r\n                                  <div className=\"col-md-6 mb-4\">\r\n                                    <label className=\"form-label fw-semibold\">\r\n                                      Post-Money Option Pool Target (%)\r\n\r\n\r\n                                      <i\r\n                                        className=\"bi bi-info-circle text-muted ms-1\"\r\n                                        title=\"Target percentage of equity reserved for employees after this investment round. If higher than existing pool, additional shares will be created.\"\r\n                                      ></i>\r\n                                    </label>\r\n\r\n                                    <NumericFormat\r\n                                      suffix=\"%\"\r\n                                      decimalScale={2}\r\n                                      fixedDecimalScale\r\n                                      allowNegative={false}\r\n                                      placeholder=\"Enter target pool % (e.g. 20)\"\r\n                                      value={formData.optionPoolPercent_post}\r\n                                      onValueChange={(values) => {\r\n                                        handleInputChange(\"optionPoolPercent_post\", values.value);\r\n                                      }}\r\n                                      className=\"textarea_input\"\r\n                                    />\r\n                                    {errors.optionPoolPercent_post && (\r\n                                      <div className=\"text-danger small mt-1\">\r\n                                        <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                        {errors.optionPoolPercent_post}\r\n                                      </div>\r\n                                    )}\r\n\r\n                                    <small className=\"text-muted d-block mt-1\">\r\n                                      Target option pool percentage after investment (Post-Money)\r\n                                    </small>\r\n\r\n\r\n                                    {formData.optionPoolPercent && formData.optionPoolPercent_post && (\r\n                                      <>\r\n                                        {(formData.instrumentType !== 'Safe' && formData.instrumentType !== 'Convertible Note' && formData.instrumentType !== \"Preferred Equity\") && (\r\n                                          <div className=\"mt-2\">\r\n                                            {parseFloat(formData.optionPoolPercent_post) > parseFloat(formData.optionPoolPercent) ? (\r\n                                              <div className=\"alert alert-warning py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                                <i className=\"bi bi-exclamation-triangle-fill me-2\"></i>\r\n                                                <strong>Top-up needed:</strong> Expanding pool from {formData.optionPoolPercent}% to {formData.optionPoolPercent_post}%\r\n                                                <br />\r\n                                                {/* <small className=\"text-muted\">\r\n                                                      Additional option shares will be created\r\n                                                      {calculatedValues?.newOptionShares > 0 && (\r\n                                                        <> (+{calculatedValues.newOptionShares.toLocaleString()} shares)</>\r\n                                                      )}\r\n                                                    </small> */}\r\n                                              </div>\r\n                                            ) : parseFloat(formData.optionPoolPercent_post) === parseFloat(formData.optionPoolPercent) ? (\r\n                                              <div className=\"alert alert-info py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                                <i className=\"bi bi-info-circle-fill me-2\"></i>\r\n                                                <strong>No change:</strong> Maintaining {formData.optionPoolPercent}% pool\r\n                                              </div>\r\n                                            ) : (\r\n                                              <div className=\"alert alert-success py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                                <i className=\"bi bi-check-circle-fill me-2\"></i>\r\n                                                <strong>No top-up needed:</strong> Existing {formData.optionPoolPercent}% pool is sufficient\r\n                                                <br />\r\n                                                <small className=\"text-muted\">\r\n                                                  No additional option shares will be created\r\n                                                </small>\r\n                                              </div>\r\n                                            )}\r\n                                          </div>\r\n                                        )}\r\n                                      </>\r\n                                    )}\r\n                                  </div>\r\n                                  {/* {formData.shareClassType === \"Post-Seed\" || formData.shareClassType === \"Pre-Seed\" || (formData.shareClassType === \"Seed\" && formData.instrumentType === 'Common Stock') && (\r\n                                    <div className=\"col-md-6 mb-4\">\r\n                                      <label className=\"form-label fw-semibold\">\r\n                                        Post-Money Option Pool Targets (%)\r\n                                        <span className=\"text-danger ms-1\">*</span>\r\n                                        <i\r\n                                          className=\"bi bi-info-circle text-muted ms-1\"\r\n                                          title=\"Target percentage of equity reserved for employees after this investment round. If higher than existing pool, additional shares will be created.\"\r\n                                        ></i>\r\n                                      </label>\r\n\r\n                                      <NumericFormat\r\n                                        suffix=\"%\"\r\n                                        decimalScale={2}\r\n                                        fixedDecimalScale\r\n                                        allowNegative={false}\r\n                                        placeholder=\"Enter target pool % (e.g. 20)\"\r\n                                        value={formData.optionPoolPercent_post}\r\n                                        onValueChange={(values) => {\r\n                                          handleInputChange(\"optionPoolPercent_post\", values.value);\r\n                                        }}\r\n                                        className=\"textarea_input\"\r\n                                      />\r\n\r\n                                      <small className=\"text-muted d-block mt-1\">\r\n                                        Target option pool percentage after investment (Post-Money)\r\n                                      </small>\r\n                                      {errors.optionPoolPercent_post && (\r\n                                        <div className=\"text-danger small mt-1\">\r\n                                          <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                          {errors.optionPoolPercent_post}\r\n                                        </div>\r\n                                      )}\r\n                                      {formData.optionPoolPercent && formData.optionPoolPercent_post && (\r\n                                        <div className=\"mt-2\">\r\n                                          {parseFloat(formData.optionPoolPercent_post) > parseFloat(formData.optionPoolPercent) ? (\r\n                                            <div className=\"alert alert-warning py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                              <i className=\"bi bi-exclamation-triangle-fill me-2\"></i>\r\n                                              <strong>Top-up needed:</strong> Expanding pool from {formData.optionPoolPercent}% to {formData.optionPoolPercent_post}%\r\n                                              <br />\r\n                                              <small className=\"text-muted\">\r\n                                                Additional option shares will be created\r\n                                                {calculatedValues?.newOptionShares > 0 && (\r\n                                                  <> (+{calculatedValues.newOptionShares.toLocaleString()} shares)</>\r\n                                                )}\r\n                                              </small>\r\n                                            </div>\r\n                                          ) : parseFloat(formData.optionPoolPercent_post) === parseFloat(formData.optionPoolPercent) ? (\r\n                                            <div className=\"alert alert-info py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                              <i className=\"bi bi-info-circle-fill me-2\"></i>\r\n                                              <strong>No change:</strong> Maintaining {formData.optionPoolPercent}% pool\r\n                                            </div>\r\n                                          ) : (\r\n                                            <div className=\"alert alert-success py-2 mb-0\" style={{ fontSize: '0.85em' }}>\r\n                                              <i className=\"bi bi-check-circle-fill me-2\"></i>\r\n                                              <strong>No top-up needed:</strong> Existing {formData.optionPoolPercent}% pool is sufficient\r\n                                              <br />\r\n                                              <small className=\"text-muted\">\r\n                                                No additional option shares will be created\r\n                                              </small>\r\n                                            </div>\r\n                                          )}\r\n                                        </div>\r\n                                      )}\r\n                                    </div>\r\n                                  )} */}\r\n                                </div>\r\n\r\n\r\n                                {(() => {\r\n                                  const isSafe = formData.instrumentType === 'Safe';\r\n                                  const isCommon = formData.instrumentType === 'Common Stock';\r\n                                  const isConvertibleNote = formData.instrumentType === 'Convertible Note';\r\n                                  const isSeedType = [\"Seed\", \"Pre-Seed\", \"Post-Seed\"].includes(formData.shareClassType);\r\n                                  const isSeriesType = selected?.includes(\"Series\");\r\n\r\n                                  // Hide if any of these conditions are true\r\n                                  const shouldHide =\r\n                                    (isCommon) ||\r\n                                    (isSafe && isSeedType) ||     // Safe + Series types\r\n                                    (isSafe && isSeriesType) ||\r\n                                    (isConvertibleNote && isSeriesType) ||\r\n                                    (isConvertibleNote && isSeedType) || (formData.instrumentType === 'Preferred Equity'); // Convertible Note + Series types\r\n\r\n                                  return !shouldHide && (\r\n                                    <div className=\"col-md-6 mb-4\">\r\n                                      <label className=\"form-label fw-semibold\">\r\n                                        Total Shares Issued in this Round{\" \"}\r\n                                        <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                          <img\r\n                                            className=\"blackdark\"\r\n                                            width=\"15\"\r\n                                            height=\"15\"\r\n                                            src=\"/assets/user/images/question.png\"\r\n                                            alt=\"Tip\"\r\n                                          />\r\n                                          <div className=\"tooltip-text tool-test-white text-white\" role=\"tooltip\">\r\n                                            The number of shares in an early-stage company represents the total units of\r\n                                            ownership authorized, issued, or outstanding across the cap table...\r\n                                          </div>\r\n                                        </span>\r\n                                      </label>\r\n                                      <NumericFormat\r\n                                        thousandSeparator={true}\r\n                                        decimalScale={2}\r\n                                        fixedDecimalScale={true}\r\n                                        allowNegative={false}\r\n                                        placeholder=\"Enter # of shares\"\r\n                                        value={formData.issuedshares}\r\n                                        onValueChange={(values) => {\r\n                                          handleInputChange(\"issuedshares\", values.value);\r\n                                          if (errors.issuedshares) {\r\n                                            setErrors((prev) => ({ ...prev, issuedshares: \"\" }));\r\n                                          }\r\n                                        }}\r\n                                        className=\"textarea_input\"\r\n                                      />\r\n                                    </div>\r\n                                  );\r\n                                })()}\r\n\r\n\r\n\r\n\r\n                              </div>\r\n\r\n\r\n\r\n                            </div>\r\n\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                // Validate before proceeding\r\n                                const newErrors = {};\r\n\r\n                                if (isFirstRound) {\r\n                                  // ROUND 0 VALIDATION - No validation needed for round size in Round 0\r\n                                  // Round 0 doesn't have traditional round size, it's calculated from share allocation\r\n                                } else {\r\n                                  // OTHER ROUNDS VALIDATION\r\n                                  if (!formData.roundsize || formData.roundsize.trim() === \"\") {\r\n                                    newErrors.roundsize = \"Round amount is required\";\r\n                                  } else if (parseFloat(formData.roundsize) <= 0) {\r\n                                    newErrors.roundsize = \"Round amount must be greater than 0\";\r\n                                  }\r\n\r\n                                  if (!formData.currency || formData.currency.trim() === \"\") {\r\n                                    newErrors.currency = \"Currency selection is required\";\r\n                                  }\r\n\r\n                                  //  CONDITIONAL VALIDATION FOR POST-MONEY OPTION POOL\r\n                                  const isSeriesSafe = selected?.includes(\"Series\") && (formData.instrumentType === 'Safe');\r\n                                  const isSeriesConvertible = selected?.includes(\"Series\") && formData.instrumentType === 'Convertible Note';\r\n                                  const isSeedCommonStock = formData.instrumentType === 'Preferred Equity' || formData.instrumentType === 'Common Stock';\r\n\r\n                                  // Only require Post-Money Option Pool for these two conditions\r\n                                  // if ((isSeedCommonStock) &&\r\n                                  //   (!formData.optionPoolPercent_post || formData.optionPoolPercent_post.trim() === \"\")) {\r\n                                  //   newErrors.optionPoolPercent_post = \"Post-Money Option Pool Target is required\";\r\n                                  // }\r\n\r\n\r\n                                  // if (formData.optionPoolPercent_post && formData.optionPoolPercent_post.trim() !== \"\") {\r\n                                  //   const poolPercent = parseFloat(formData.optionPoolPercent_post);\r\n                                  //   if (isNaN(poolPercent) || poolPercent < 0 || poolPercent > 100) {\r\n                                  //     newErrors.optionPoolPercent_post = \"Please enter a valid percentage between 0 and 100\";\r\n                                  //   }\r\n                                  // }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Additional sections would follow the same pattern */}\r\n                      {/* Issued Shares Section */}\r\n                      {activeSection === \"issuedshares\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">\r\n                            {isFirstRound ? \"Round 0 - Share Allocation Summary\" : \"\"}\r\n                          </h3>\r\n\r\n                          {/* ROUND 0 - Show different content */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"round-zero-summary\">\r\n                              <div className=\"alert alert-info mb-4\">\r\n                                <strong>Round 0 Summary</strong> - This is your company's incorporation round.\r\n                                The shares have already been allocated to founders in the previous section.\r\n                              </div>\r\n\r\n                              {/* Display Round 0 Calculations */}\r\n                              <div className=\"calculation-results p-4 border rounded bg-light\">\r\n                                <h5>Round 0 - Incorporation Summary</h5>\r\n                                <div className=\"row\">\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Total Shares Issued:</strong> {calculateTotalShares().toLocaleString()}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Price Per Share:</strong> {formData.currency ? formData.currency.split(' ')[1] : '$'}{formData.pricePerShare || '0.00'}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Total Company Value:</strong> {formData.currency ? formData.currency.split(' ')[1] : '$'}{calculateTotalValue()}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Currency:</strong> {formData.currency || 'CAD $'}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Number of Founders:</strong> {founderCount}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Round Status:</strong> <span className=\"text-success\">COMPLETED</span>\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Round Type:</strong> Incorporation Round\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Round Date:</strong> {formatCurrentDate(RoundData.created_at)}\r\n                                    </div>\r\n                                    <div className=\"mb-3\">\r\n                                      <strong>Date of Incorporation:</strong> {formatIncorporationDate(RoundData.year_registration)}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                {/* Founder Ownership Breakdown */}\r\n\r\n\r\n                                {/* Additional Statistics */}\r\n                                {calculateTotalShares() > 0 && (\r\n                                  <div className=\"mt-4 p-3 bg-white rounded border\">\r\n\r\n                                    <div className=\"row text-center\">\r\n\r\n                                      <div className=\"col-md-4\">\r\n                                        <small className=\"text-muted\">Largest Ownership</small>\r\n                                        <div className=\"fw-bold\">\r\n                                          {Math.max(...foundersData.map(f => {\r\n                                            const shares = parseInt(f.shares) || 0;\r\n                                            return calculateTotalShares() > 0 ? (shares / calculateTotalShares()) * 100 : 0;\r\n                                          })).toFixed(1)}%\r\n                                        </div>\r\n                                      </div>\r\n                                      <div className=\"col-md-4\">\r\n                                        <small className=\"text-muted\">Smallest Ownership</small>\r\n                                        <div className=\"fw-bold\">\r\n                                          {Math.min(...foundersData.map(f => {\r\n                                            const shares = parseInt(f.shares) || 0;\r\n                                            return calculateTotalShares() > 0 ? (shares / calculateTotalShares()) * 100 : 0;\r\n                                          })).toFixed(1)}%\r\n                                        </div>\r\n                                      </div>\r\n                                      <div className=\"col-md-4\">\r\n                                        <small className=\"text-muted\">Founders</small>\r\n                                        <div className=\"fw-bold\">\r\n                                          {foundersData.filter(f => f.voting === 'voting').length} / {founderCount}\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n\r\n                              {/* Round 0 specific information */}\r\n                              <div className=\"mt-4 p-3 bg-light rounded\">\r\n                                <h6>About Round 0 (Incorporation Round):</h6>\r\n                                <ul className=\"mb-0\">\r\n                                  <li>This round represents the initial share allocation at company incorporation</li>\r\n                                  <li>Shares are allocated to founders based on the incorporation documents</li>\r\n                                  <li>Round 0 is automatically considered \"COMPLETED\" as it happens at company formation</li>\r\n                                  <li>This forms the foundation of your cap table for future investment rounds</li>\r\n                                  <li>The valuation shown is for incorporation purposes only and will not carry over to future rounds</li>\r\n                                  <li>Each subsequent investment round will calculate its own price per share</li>\r\n                                </ul>\r\n                              </div>\r\n\r\n                              {/* Important Notes */}\r\n                              <div className=\"alert alert-warning mt-3\">\r\n                                <strong>Important:</strong> This Round 0 data will serve as the foundation for your cap table.\r\n                                Make sure all information is accurate before proceeding.\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* REGULAR INVESTMENT ROUND - Show original fields */\r\n                            <div className=\"row\">\r\n\r\n                              <div className=\"col-md-12 mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Is this round closed or active?{\" \"}\r\n                                  <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                </label>\r\n\r\n                                {/* Radio buttons */}\r\n                                <div className=\"form-check\">\r\n                                  <input\r\n                                    className=\"form-check-input\"\r\n                                    type=\"radio\"\r\n                                    name=\"roundStatus\"\r\n                                    id=\"roundClosed\"\r\n                                    value=\"CLOSED\"\r\n                                    checked={formData.roundStatus === \"CLOSED\"}\r\n                                    onChange={(e) => handleInputChange(\"roundStatus\", e.target.value)}\r\n                                  />\r\n                                  <label className=\"form-check-label\" htmlFor=\"roundClosed\">\r\n                                    CLOSED\r\n                                  </label>\r\n                                </div>\r\n                                <div className=\"form-check mb-3\">\r\n                                  <input\r\n                                    className=\"form-check-input\"\r\n                                    type=\"radio\"\r\n                                    name=\"roundStatus\"\r\n                                    id=\"roundActive\"\r\n                                    value=\"ACTIVE\"\r\n                                    checked={formData.roundStatus === \"ACTIVE\"}\r\n                                    onChange={(e) => handleInputChange(\"roundStatus\", e.target.value)}\r\n                                  />\r\n                                  <label className=\"form-check-label\" htmlFor=\"roundActive\">\r\n                                    ACTIVE\r\n                                  </label>\r\n                                </div>\r\n\r\n                                {errors.roundStatus && (\r\n                                  <div className=\"text-danger small\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.roundStatus}\r\n                                  </div>\r\n                                )}\r\n\r\n                                {/* Conditional rendering if CLOSED */}\r\n                                {formData.roundStatus === \"CLOSED\" && (\r\n                                  <>\r\n                                    <label className=\"form-label fw-semibold\">\r\n                                      Date Round Closed{\" \"}\r\n                                      <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                    </label>\r\n                                    <input\r\n                                      type=\"text\"\r\n                                      placeholder=\"MM/DD/YYYY\"\r\n                                      value={formData.dateroundclosed || \"\"}\r\n                                      onChange={(e) => {\r\n                                        handleInputChange(\"dateroundclosed\", e.target.value);\r\n                                        if (errors.dateroundclosed) {\r\n                                          setErrors((prev) => ({ ...prev, dateroundclosed: \"\" }));\r\n                                        }\r\n                                      }}\r\n                                      className={`form-control ${errors.dateroundclosed ? \"is-invalid\" : \"\"}`}\r\n                                    />\r\n                                    {errors.dateroundclosed && (\r\n                                      <div className=\"text-danger small mt-1\">\r\n                                        <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                        {errors.dateroundclosed}\r\n                                      </div>\r\n                                    )}\r\n                                    <div className=\"form-text mb-3\">Calendar: MM / DD / YYYY</div>\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                // For Round 0, no validation needed for these fields\r\n                                if (isFirstRound) {\r\n                                  navigateToSection('next');\r\n                                  return;\r\n                                }\r\n\r\n                                // Original validation for investment rounds\r\n                                const newErrors = {};\r\n\r\n                                // Validate round status selection\r\n                                if (!formData.roundStatus) {\r\n                                  newErrors.roundStatus = \"Please select CLOSED or ACTIVE\";\r\n                                }\r\n\r\n                                // Validate dateroundclosed only if CLOSED\r\n                                if (formData.roundStatus === \"CLOSED\") {\r\n                                  const dateRegex = /^(0[1-9]|1[0-2])\\/(0[1-9]|[12]\\d|3[01])\\/\\d{4}$/; // MM/DD/YYYY\r\n                                  const inputValue = formData.dateroundclosed;\r\n\r\n                                  if (!inputValue) {\r\n                                    newErrors.dateroundclosed = \"This field is required\";\r\n                                  } else if (!dateRegex.test(inputValue)) {\r\n                                    newErrors.dateroundclosed = \"Enter a valid date (MM/DD/YYYY)\";\r\n                                  } else {\r\n                                    const [month, day, year] = inputValue.split(\"/\").map(Number);\r\n                                    const inputDate = new Date(year, month - 1, day);\r\n                                    const today = new Date();\r\n                                    today.setHours(0, 0, 0, 0);\r\n\r\n                                    if (inputDate < today) {\r\n                                      newErrors.dateroundclosed = \"Date cannot be in the past\";\r\n                                    }\r\n                                  }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid, .border-danger\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Placeholder for remaining sections - would implement similarly */}\r\n                      {activeSection === \"rights\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">\r\n                            {isFirstRound ? \"Round 0 - Founder Rights & Preferences\" : \"Rights Associated with this Share Class\"}\r\n                          </h3>\r\n\r\n                          {/* ROUND 0 - Founder Rights */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"round-zero-content\">\r\n                              <div className=\"alert alert-info mb-4\">\r\n                                <strong>Round 0 Information:</strong> These are the rights and preferences for founder shares as per your incorporation documents.\r\n                              </div>\r\n\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Founder Share Rights & Preferences{\" \"}\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <strong>For Round 0 (Founder Shares):</strong> Describe the rights and preferences\r\n                                      for founder shares as outlined in your incorporation documents. This typically includes\r\n                                      voting rights, dividend preferences, transfer restrictions, and any special founder protections.\r\n                                      <br />\r\n                                      <strong>Common Founder Rights:</strong>\r\n                                       Full voting rights on major company decisions\r\n                                      <br /> Right to receive dividends if declared\r\n                                      <br /> Pre-emptive rights to maintain ownership percentage\r\n                                      <br /> Founder vesting schedules (if applicable)\r\n                                      <br /> Transfer restrictions and right of first refusal\r\n                                    </div>\r\n                                  </span>\r\n                                </label>\r\n                                <textarea\r\n                                  placeholder=\"Describe the rights and preferences for founder shares as per incorporation documents (e.g., voting rights, dividend preferences, transfer restrictions)\"\r\n                                  className=\"textarea_input\"\r\n                                  rows=\"4\"\r\n                                  value={formData.rights}\r\n                                  onChange={(e) => handleInputChange(\"rights\", e.target.value)}\r\n                                />\r\n                                <div className=\"form-text\">\r\n                                  Example: \"Founders hold common shares with full voting rights, pre-emptive rights to maintain ownership percentage, and standard transfer restrictions as per the shareholders agreement.\"\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Common Founder Rights Information */}\r\n                              <div className=\"common-rights-info p-3 bg-light rounded mb-4\">\r\n                                <h6>Common Founder Rights in Round 0:</h6>\r\n                                <ul className=\"mb-0 small\">\r\n                                  <li><strong>Voting Rights:</strong> Typically full voting rights on major decisions</li>\r\n                                  <li><strong>Dividend Rights:</strong> Right to receive dividends if company declares them</li>\r\n                                  <li><strong>Pre-emptive Rights:</strong> Right to participate in future rounds to maintain ownership</li>\r\n                                  <li><strong>Transfer Restrictions:</strong> Limitations on selling shares without board approval</li>\r\n                                  <li><strong>Founder Vesting:</strong> Shares may be subject to vesting schedule</li>\r\n                                </ul>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Investor Rights */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Rights Associated with this Share Class{\" \"}\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <div className=\"d-flex flex-column gap-3\">\r\n                                        <p><strong>What it is:</strong> Specifies the negotiated powers and entitlements that\r\n                                          holders of this class enjoy  it's the fine print investors care about.</p>\r\n                                        <p> <strong>Why it matters:</strong> This defines control dynamics, dividend rights, conversion\r\n                                          triggers, redemption clauses, anti-dilution, etc. It's the architecture of deal terms.</p>\r\n                                        <div className=\"d-flex flex-column gap-2\">\r\n                                          <p><strong>How to fill it:</strong> Reference exact clauses from investor agreements (term\r\n                                            sheets or subscription documents) and simplify into readable but accurate summaries.</p>\r\n                                          <ul>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Non-cumulative dividends at 6% annually\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Non-cumulative dividends at 6% annually\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Automatic conversion on qualified financing &gt;$5M\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Protective provisions for mergers, board expansion, and budget approvals\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Anti-dilution protection (full-ratchet or weighted-average)\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Redemption rights after 5 years\r\n                                              </p>\r\n                                            </li>\r\n                                            <li>\r\n                                              <p>\r\n                                                 Pre-emptive rights for future rounds\r\n                                              </p>\r\n                                            </li>\r\n                                          </ul>\r\n                                        </div>\r\n                                      </div>\r\n\r\n\r\n                                    </div>\r\n                                  </span>\r\n                                  <span className=\"text-danger fs-5 ms-1\">*</span>\r\n                                </label>\r\n                                <textarea\r\n                                  placeholder=\"Describe the rights and preferences for this share class (e.g., dividend rights, conversion triggers, protective provisions)\"\r\n                                  className={`textarea_input ${errors.rights ? \"is-invalid\" : \"\"}`}\r\n                                  rows=\"4\"\r\n                                  value={formData.rights}\r\n                                  onChange={(e) => {\r\n                                    handleInputChange(\"rights\", e.target.value);\r\n                                    if (errors.rights) {\r\n                                      setErrors((prev) => ({\r\n                                        ...prev,\r\n                                        rights: \"\",\r\n                                      }));\r\n                                    }\r\n                                  }}\r\n                                />\r\n                                {errors.rights && (\r\n                                  <div className=\"text-danger small mt-1\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.rights}\r\n                                  </div>\r\n                                )}\r\n                                <div className=\"form-text\">\r\n                                  Be specific about dividend preferences, conversion rights, protective provisions, and any special rights.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Common Investor Rights Information */}\r\n                              {/* <div className=\"common-rights-info p-3 bg-light rounded mb-4\">\r\n                                <h6>Common Investor Rights in Investment Rounds:</h6>\r\n                                <ul className=\"mb-0 small\">\r\n                                  <li><strong>Dividend Preferences:</strong> Cumulative/non-cumulative, participation rights</li>\r\n                                  <li><strong>Conversion Rights:</strong> Automatic or voluntary conversion triggers</li>\r\n                                  <li><strong>Protective Provisions:</strong> Veto rights on major decisions</li>\r\n                                  <li><strong>Anti-dilution:</strong> Full-ratchet or weighted-average protection</li>\r\n                                  <li><strong>Liquidation Preference:</strong> Multiple and participation rights</li>\r\n                                  <li><strong>Redemption Rights:</strong> Option to sell back shares after certain period</li>\r\n                                </ul>\r\n                              </div> */}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                // Validate before proceeding\r\n                                const newErrors = {};\r\n\r\n                                if (isFirstRound) {\r\n                                  // ROUND 0 VALIDATION - Rights are optional for founder shares\r\n                                  // No validation needed, can be empty\r\n                                } else {\r\n                                  // OTHER ROUNDS VALIDATION - Rights are important for investors\r\n                                  if (!formData.rights || formData.rights.trim() === \"\") {\r\n                                    newErrors.rights = \"Please describe the rights associated with this share class\";\r\n                                  } else if (formData.rights.trim().length < 10) {\r\n                                    newErrors.rights = \"Please provide more detailed description of rights\";\r\n                                  }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n\r\n                                  // Navigate to appropriate next section\r\n                                  if (isFirstRound) {\r\n                                    navigateToSection('next'); // Skip liquidation for Round 0\r\n                                  } else {\r\n                                    navigateToSection('next');\r\n                                  }\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {activeSection === \"liquidation\" && !isFirstRound && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                              \"rights\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">Liquidation Preference</h3>\r\n\r\n                          {/* ROUND 0 - Skip this section entirely */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"text-center py-5\">\r\n                              <div className=\"alert alert-info\">\r\n                                <strong>Round 0 - No Liquidation Preference</strong>\r\n                                <p className=\"mb-0 mt-2\">\r\n                                  This is the incorporation round with founder shares only.\r\n                                  Liquidation preferences typically apply to investor rounds only.\r\n                                </p>\r\n                              </div>\r\n                              <div className=\"mt-4\">\r\n                                <button\r\n                                  className=\"global_btn\"\r\n                                  onClick={() => navigateToSection('next')}\r\n                                >\r\n                                  Continue to Next Section\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Show liquidation preference fields */\r\n                            <>\r\n                              {/* Liquidation Preferences Section - Only for Preferred Equity */}\r\n                              {formData.instrumentType === \"Preferred Equity\" && (\r\n                                <div className=\"investment-round-content\">\r\n                                  <div className=\"mb-4\">\r\n                                    <label className=\"form-label fw-semibold\">\r\n                                      Liquidation Preference Details{\" \"}\r\n                                      <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                        <img\r\n                                          className=\"blackdark\"\r\n                                          width=\"15\"\r\n                                          height=\"15\"\r\n                                          src=\"/assets/user/images/question.png\"\r\n                                          alt=\"Tip\"\r\n                                        />\r\n                                        <div\r\n                                          className=\"tooltip-text tool-test-white text-white\"\r\n                                          role=\"tooltip\"\r\n                                        >\r\n                                          <strong>Note from Meeting:</strong> Liquidation preferences only apply to Preferred Stock in priced rounds.\r\n                                          <br />\r\n                                          <strong>For SAFEs/Convertible Notes:</strong> They get liquidation preferences ONLY when they convert to Preferred Stock.\r\n                                          <br />\r\n                                          <strong>For Common Stock/Venture Debt:</strong> No liquidation preferences apply.\r\n                                        </div>\r\n                                      </span>\r\n                                    </label>\r\n                                    <textarea\r\n                                      placeholder=\"Describe the liquidation preference terms (e.g., 1x non-participating preference, senior to common shares)\"\r\n                                      className=\"textarea_input\"\r\n                                      rows=\"4\"\r\n                                      value={formData.liquidationpreferences}\r\n                                      onChange={(e) =>\r\n                                        handleInputChange(\"liquidationpreferences\", e.target.value)\r\n                                      }\r\n                                    />\r\n                                    <div className=\"form-text\">\r\n                                      Example: \"Investors receive 1x liquidation preference, non-participating, pari passu with other preferred shares.\"\r\n                                      <br />\r\n                                      <small className=\"text-muted\">\r\n                                        <i>Note: This section only appears for Preferred Equity rounds as per meeting guidelines.</i>\r\n                                      </small>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                  {/* Rest of your liquidation preferences UI remains same */}\r\n                                  <div className=\"row mt-3\">\r\n                                    <div className=\"col-md-6\">\r\n                                      {/* Multiple Preferences Component */}\r\n                                      <div className=\"liquidation-group mb-4\">\r\n                                        <h6 className=\"fw-semibold mb-3 border-bottom pb-2\">Preference Multiple</h6>\r\n                                        <div className=\"row\">\r\n                                          {liquidationOptions.multiplePreferences.map((opt) => (\r\n                                            <div key={opt.value} className=\"col-12 mb-3\">\r\n                                              <div\r\n                                                className={`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${formData?.liquidation?.includes(opt.value)\r\n                                                  ? \"bg-light border-primary\"\r\n                                                  : \"border-gray-300\"\r\n                                                  } ${errors.liquidation ? \"is-invalid\" : \"\"}`}\r\n                                                onClick={() => {\r\n                                                  let updatedSelection = [...(formData?.liquidation || [])];\r\n\r\n                                                  // Remove ALL participation rights when selecting a multiple preference\r\n                                                  const allParticipationRights = liquidationOptions.participationRights\r\n                                                    .map(o => o.value);\r\n\r\n                                                  // Remove all participation rights\r\n                                                  updatedSelection = updatedSelection.filter(v => !allParticipationRights.includes(v));\r\n\r\n                                                  // Remove other multiple preferences when one is selected\r\n                                                  const otherMultiples = liquidationOptions.multiplePreferences\r\n                                                    .map(o => o.value)\r\n                                                    .filter(v => v !== opt.value);\r\n\r\n                                                  updatedSelection = updatedSelection.filter(v => !otherMultiples.includes(v));\r\n\r\n                                                  // Remove N/A and OTHER if selecting a preference\r\n                                                  updatedSelection = updatedSelection.filter(v => v !== \"N/A\" && v !== \"OTHER\");\r\n\r\n                                                  if (updatedSelection.includes(opt.value)) {\r\n                                                    updatedSelection = updatedSelection.filter(v => v !== opt.value);\r\n                                                  } else {\r\n                                                    updatedSelection.push(opt.value);\r\n                                                  }\r\n\r\n                                                  handleInputChange(\"liquidation\", updatedSelection);\r\n\r\n                                                  if (errors.liquidation) {\r\n                                                    setErrors((prev) => ({\r\n                                                      ...prev,\r\n                                                      liquidation: \"\",\r\n                                                    }));\r\n                                                  }\r\n                                                }}\r\n                                              >\r\n                                                <div className=\"form-check\">\r\n                                                  <input\r\n                                                    type=\"radio\"\r\n                                                    name=\"multiplePreference\"\r\n                                                    value={opt.value}\r\n                                                    checked={formData?.liquidation?.includes(opt.value) || false}\r\n                                                    onChange={() => { }}\r\n                                                    className=\"form-check-input\"\r\n                                                  />\r\n                                                  <label className=\"form-check-label fw-medium\">\r\n                                                    {opt.label}\r\n                                                  </label>\r\n                                                </div>\r\n                                                <p className=\"text-muted small mb-0 mt-2\">\r\n                                                  {opt.description}\r\n                                                </p>\r\n                                              </div>\r\n                                            </div>\r\n                                          ))}\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"col-md-6\">\r\n                                      {/* Participation Rights Component */}\r\n                                      <div className=\"liquidation-group mb-4\">\r\n                                        <h6 className=\"fw-semibold mb-3 border-bottom pb-2\">Participation Rights</h6>\r\n                                        <div className=\"row\">\r\n                                          {liquidationOptions.participationRights.map((opt) => (\r\n                                            <div key={opt.value} className=\"col-12 mb-3\">\r\n                                              <div\r\n                                                className={`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${formData?.liquidation?.includes(opt.value)\r\n                                                  ? \"bg-light border-primary\"\r\n                                                  : \"border-gray-300\"\r\n                                                  } ${errors.liquidation ? \"is-invalid\" : \"\"}`}\r\n                                                onClick={() => {\r\n                                                  let updatedSelection = [...(formData?.liquidation || [])];\r\n\r\n                                                  if (opt.value === \"N/A\") {\r\n                                                    updatedSelection = [\"N/A\"];\r\n                                                  } else {\r\n                                                    // Remove ALL multiple preferences when selecting a participation right\r\n                                                    const allMultiples = liquidationOptions.multiplePreferences\r\n                                                      .map(o => o.value);\r\n\r\n                                                    // Remove all multiple preferences\r\n                                                    updatedSelection = updatedSelection.filter(v => !allMultiples.includes(v));\r\n\r\n                                                    // Remove N/A and OTHER if selecting participation right\r\n                                                    updatedSelection = updatedSelection.filter(v => v !== \"N/A\" && v !== \"OTHER\");\r\n\r\n                                                    // For participation rights, allow multiple selection except for N/A\r\n                                                    if (updatedSelection.includes(opt.value)) {\r\n                                                      updatedSelection = updatedSelection.filter(v => v !== opt.value);\r\n                                                    } else {\r\n                                                      updatedSelection.push(opt.value);\r\n                                                    }\r\n                                                  }\r\n\r\n                                                  handleInputChange(\"liquidation\", updatedSelection);\r\n\r\n                                                  if (errors.liquidation) {\r\n                                                    setErrors((prev) => ({\r\n                                                      ...prev,\r\n                                                      liquidation: \"\",\r\n                                                    }));\r\n                                                  }\r\n                                                }}\r\n                                              >\r\n                                                <div className=\"form-check\">\r\n                                                  <input\r\n                                                    type=\"checkbox\"\r\n                                                    name=\"participationRights\"\r\n                                                    value={opt.value}\r\n                                                    checked={formData?.liquidation?.includes(opt.value) || false}\r\n                                                    onChange={() => { }}\r\n                                                    className=\"form-check-input\"\r\n                                                  />\r\n                                                  <label className=\"form-check-label fw-medium\">\r\n                                                    {opt.label}\r\n                                                  </label>\r\n                                                </div>\r\n                                                <p className=\"text-muted small mb-0 mt-2\">\r\n                                                  {opt.description}\r\n                                                </p>\r\n                                              </div>\r\n                                            </div>\r\n                                          ))}\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    {/* Rest of the code remains same... */}\r\n                                  </div>\r\n\r\n                                  {/* Liquidation Preference Information */}\r\n                                  <div className=\"alert alert-info mt-4\">\r\n                                    <strong>Understanding Liquidation Preferences (For Preferred Equity Only):</strong>\r\n                                    <ul className=\"mb-0 mt-2 small\">\r\n                                      <li><strong>Applies to:</strong> Preferred Stock only (not Common Stock, SAFEs, or Venture Debt)</li>\r\n                                      <li><strong>SAFE/Convertible Notes:</strong> Get preferences only when they convert to Preferred Stock</li>\r\n                                      <li><strong>1x Preference:</strong> Basic protection - get investment back first</li>\r\n                                      <li><strong>Multiple Preference:</strong> Get 2x, 3x, etc. of investment back first</li>\r\n                                      <li><strong>Participating:</strong> Get preference amount AND share remaining proceeds</li>\r\n                                      <li><strong>Non-Participating:</strong> Choose between preference OR converting to common shares</li>\r\n                                      <li><strong>Capped Participating:</strong> Participation stops at a certain multiple</li>\r\n                                    </ul>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                            </>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                // For Round 0, skip validation and navigate directly\r\n                                if (isFirstRound) {\r\n                                  navigateToSection('next');\r\n                                  return;\r\n                                }\r\n\r\n                                // Validate before proceeding for other rounds\r\n                                const newErrors = {};\r\n\r\n                                // Check if at least one liquidation option is selected\r\n                                // if (formData.liquidation.length === 0) {\r\n                                //   newErrors.liquidation = \"Please select a liquidation preference type\";\r\n                                // }\r\n\r\n                                // // Check if OTHER is selected but the text input is empty\r\n                                // if (formData.liquidation.includes(\"OTHER\")) {\r\n                                //   if (!formData.liquidationOther || !formData.liquidationOther.trim()) {\r\n                                //     newErrors.liquidationOther = \"This field is required\";\r\n                                //   }\r\n                                // }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to the first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid, .border-danger\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  // Clear errors if validation passes\r\n                                  setErrors({});\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n\r\n                      {activeSection === \"voting\" && !isFirstRound && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                              \"rights\",\r\n                              \"liquidation\",\r\n                              \"convertible\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">\r\n                            {isFirstRound ? \"Round 0 - Founder Voting Rights\" : \"Shareholders Voting Rights\"}\r\n                          </h3>\r\n\r\n                          {/* ROUND 0 - Founder Voting Rights */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"round-zero-content\">\r\n                              <div className=\"alert alert-info mb-4\">\r\n                                <strong>Round 0 Information:</strong> Founder shares typically have voting rights as per your incorporation documents.\r\n                              </div>\r\n\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Do Founder Shares Have Voting Rights?{\" \"}\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <strong>For Round 0 (Founder Shares):</strong> Indicate whether founder shares\r\n                                      carry voting rights for company decisions, board appointments, and major corporate actions.\r\n                                      <br />\r\n                                      <strong>Common Founder Voting Rights:</strong>\r\n                                      <br /> <strong>Yes:</strong> Founders can vote on major company decisions\r\n                                      <br /> <strong>No:</strong> Founders have non-voting shares (rare for founders)\r\n                                      <br />\r\n                                      <strong>Typical Scenario:</strong> Most founder shares have full voting rights\r\n                                      allowing participation in key decisions like:\r\n                                      <br /> Board of directors elections\r\n                                      <br /> Major corporate transactions\r\n                                      <br /> Approval of future funding rounds\r\n                                      <br /> Changes to company bylaws\r\n                                    </div>\r\n                                  </span>\r\n                                </label>\r\n                                <div className=\"d-flex gap-3\">\r\n                                  <div className=\"form-check\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      name=\"voting\"\r\n                                      value=\"Yes\"\r\n                                      checked={formData.voting === \"Yes\"}\r\n                                      onChange={() => {\r\n                                        handleInputChange(\"voting\", \"Yes\");\r\n                                        if (errors.voting) {\r\n                                          setErrors((prev) => ({\r\n                                            ...prev,\r\n                                            voting: \"\",\r\n                                          }));\r\n                                        }\r\n                                      }}\r\n                                      className=\"form-check-input\"\r\n                                    />\r\n                                    <label className=\"form-check-label\">Yes</label>\r\n                                  </div>\r\n                                  <div className=\"form-check\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      name=\"voting\"\r\n                                      value=\"No\"\r\n                                      checked={formData.voting === \"No\"}\r\n                                      onChange={() => {\r\n                                        handleInputChange(\"voting\", \"No\");\r\n                                        if (errors.voting) {\r\n                                          setErrors((prev) => ({\r\n                                            ...prev,\r\n                                            voting: \"\",\r\n                                          }));\r\n                                        }\r\n                                      }}\r\n                                      className=\"form-check-input\"\r\n                                    />\r\n                                    <label className=\"form-check-label\">No</label>\r\n                                  </div>\r\n                                </div>\r\n                                <div className=\"form-text\">\r\n                                  Most founder shares have voting rights. Select \"Yes\" unless your incorporation documents specify non-voting shares.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Founder Voting Details */}\r\n                              {formData.voting === \"Yes\" && (\r\n                                <div className=\"mb-4 p-3 border rounded bg-light\">\r\n                                  <h6>Founder Voting Rights Details</h6>\r\n                                  <div className=\"mb-3\">\r\n                                    <label className=\"form-label\">\r\n                                      Voting Power Distribution\r\n                                    </label>\r\n                                    <div className=\"table-responsive\">\r\n                                      <table className=\"table table-sm table-bordered\">\r\n                                        <thead>\r\n                                          <tr>\r\n                                            <th>Founder</th>\r\n                                            <th>Shares</th>\r\n                                            <th>Voting Power</th>\r\n                                          </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                          {foundersData.map((founder, index) => {\r\n                                            const shares = parseInt(founder.shares) || 0;\r\n                                            const totalShares = calculateTotalShares();\r\n                                            const votingPercentage = totalShares > 0 ? ((shares / totalShares) * 100).toFixed(1) : '0.0';\r\n                                            return (\r\n                                              <tr key={index}>\r\n                                                <td>Founder {index + 1}</td>\r\n                                                <td>{shares.toLocaleString()}</td>\r\n                                                <td>{votingPercentage}%</td>\r\n                                              </tr>\r\n                                            );\r\n                                          })}\r\n                                        </tbody>\r\n                                      </table>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Round 0 Voting Information */}\r\n                              <div className=\"alert alert-warning mt-3\">\r\n                                <strong>About Founder Voting Rights:</strong>\r\n                                <ul className=\"mb-0 mt-2 small\">\r\n                                  <li>Founder voting rights are typically proportional to share ownership</li>\r\n                                  <li>Each share usually equals one vote (one-share-one-vote principle)</li>\r\n                                  <li>Voting rights allow participation in major corporate decisions</li>\r\n                                  <li>Some decisions may require supermajority votes for extra protection</li>\r\n                                </ul>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Investor Voting Rights */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold\">\r\n                                  Shareholders Voting Rights{\" \"}\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <strong>What it is:</strong> Determines how much influence equity holders\r\n                                      wield in company decisions, including board appointments, strategic pivots,\r\n                                      and future fundraising.\r\n                                      <br />\r\n                                      <strong>Why it matters:</strong> Control rights shape governance  founders\r\n                                      often trade economic upside for retaining voting control. Investors may\r\n                                      require protective provisions and veto rights.\r\n                                      <br />\r\n                                      <strong>Investor Voting Scenarios:</strong>\r\n                                      <br /> <strong>Yes:</strong> Investors have voting rights (common for preferred shares)\r\n                                      <br /> <strong>No:</strong> Investors have non-voting shares (rare for equity investors)\r\n                                      <br /> <strong>Protective Provisions:</strong> Veto rights on specific major decisions\r\n                                      <br /> <strong>Board Seats:</strong> Right to appoint board directors\r\n                                    </div>\r\n                                  </span>{\" \"}\r\n                                  <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                </label>\r\n                                <div className=\"d-flex gap-3\">\r\n                                  <div className=\"form-check\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      name=\"voting\"\r\n                                      value=\"Yes\"\r\n                                      checked={formData.voting === \"Yes\"}\r\n                                      onChange={() => {\r\n                                        handleInputChange(\"voting\", \"Yes\");\r\n                                        if (errors.voting) {\r\n                                          setErrors((prev) => ({\r\n                                            ...prev,\r\n                                            voting: \"\",\r\n                                          }));\r\n                                        }\r\n                                      }}\r\n                                      className={`form-check-input ${errors.voting ? \"is-invalid\" : \"\"}`}\r\n                                    />\r\n                                    <label className=\"form-check-label\">Yes</label>\r\n                                  </div>\r\n                                  <div className=\"form-check\">\r\n                                    <input\r\n                                      type=\"radio\"\r\n                                      name=\"voting\"\r\n                                      value=\"No\"\r\n                                      checked={formData.voting === \"No\"}\r\n                                      onChange={() => {\r\n                                        handleInputChange(\"voting\", \"No\");\r\n                                        if (errors.voting) {\r\n                                          setErrors((prev) => ({\r\n                                            ...prev,\r\n                                            voting: \"\",\r\n                                          }));\r\n                                        }\r\n                                      }}\r\n                                      className={`form-check-input ${errors.voting ? \"is-invalid\" : \"\"}`}\r\n                                    />\r\n                                    <label className=\"form-check-label\">No</label>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                {errors.voting && (\r\n                                  <div className=\"text-danger small mt-1\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.voting}\r\n                                  </div>\r\n                                )}\r\n\r\n                                {/* Additional voting details for investment rounds */}\r\n                                {formData.voting === \"Yes\" && (\r\n                                  <div className=\"mt-3 p-3 bg-light rounded\">\r\n                                    <h6>Investor Voting Rights Details</h6>\r\n                                    <div className=\"form-text\">\r\n                                      <strong>Common Investor Voting Rights Include:</strong>\r\n                                      <br />\r\n                                      <div className=\"alert alert-warning p-2 mt-2 mb-2\">\r\n                                        <strong className=\"d-block text-center\">\r\n                                          <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                                          Please connect with your Legal Council and make sure that all your voting rights of this round are included in term sheet as subscription document\r\n                                        </strong>\r\n                                      </div>\r\n                                      <ul className=\"mb-0 mt-2\">\r\n                                        <li>May included Election of board directors</li>\r\n                                        <li>May included Approval of major corporate transactions</li>\r\n                                        <li>May included Changes to company charter or bylaws</li>\r\n                                        <li>May included Issuance of new equity securities</li>\r\n                                        <li>May included Approval of annual budgets</li>\r\n                                      </ul>\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n\r\n                              {/* Investor Voting Information */}\r\n                              {/* <div className=\"alert alert-info mt-3\">\r\n                                <strong>Note about Investor Voting Rights:</strong>\r\n                                <ul className=\"mb-0 mt-2 small\">\r\n                                  <li>Preferred shareholders typically have voting rights on as-converted basis</li>\r\n                                  <li>Some voting matters may require separate class votes</li>\r\n                                  <li>Protective provisions often give veto rights on key decisions</li>\r\n                                  <li>Voting agreements may pool votes for board representation</li>\r\n                                </ul>\r\n                              </div> */}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                const newErrors = {};\r\n\r\n                                if (isFirstRound) {\r\n                                  // ROUND 0 VALIDATION - Voting rights are important but default to \"Yes\"\r\n                                  // No strict validation needed as most founder shares have voting rights\r\n                                  if (!formData.voting) {\r\n                                    // Auto-set to \"Yes\" if not selected (most common case)\r\n                                    handleInputChange(\"voting\", \"Yes\");\r\n                                  }\r\n                                } else {\r\n                                  // OTHER ROUNDS VALIDATION - Voting rights are required for investor shares\r\n                                  if (!formData.voting) {\r\n                                    newErrors.voting = \"Please select Yes or No\";\r\n                                  }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\".is-invalid, .border-danger\");\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n\r\n                                  // Navigate to appropriate next section\r\n                                  if (isFirstRound) {\r\n                                    navigateToSection('next'); // Skip term sheet and subscription for Round 0\r\n                                  } else {\r\n                                    navigateToSection('next');\r\n                                  }\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {activeSection === \"termsheet\" && !isFirstRound && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                              \"rights\",\r\n                              \"liquidation\",\r\n                              \"convertible\",\r\n                              \"voting\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">Investment Documents - Term Sheet</h3>\r\n\r\n                          {/* ROUND 0 - Skip this section entirely */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"text-center py-5\">\r\n                              <div className=\"alert alert-info\">\r\n                                <strong>Round 0 - No Term Sheet Required</strong>\r\n                                <p className=\"mb-0 mt-2\">\r\n                                  This is the incorporation round with founder shares only.\r\n                                  Term sheets are typically used for investor funding rounds.\r\n                                </p>\r\n                              </div>\r\n                              <div className=\"mt-4\">\r\n                                <button\r\n                                  className=\"global_btn\"\r\n                                  onClick={() => navigateToSection('next')}\r\n                                >\r\n                                  Continue to Notes Section\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Show term sheet upload */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold d-flex align-items-center\">\r\n                                  Upload Your Term Sheet(s){\" \"}\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      A term sheet is a non-binding document that sets the stage for an investment\r\n                                      by outlining the essential terms of the deal: valuation, share type, governance\r\n                                      rights, investor protections, and expected post-money ownership. It is the\r\n                                      'strategic handshake' between founders and investors before drafting legal documents.\r\n                                      <br />\r\n                                      <strong>Key Elements in Term Sheets:</strong>\r\n                                       Valuation (pre-money and post-money)\r\n                                      <br /> Investment amount and share price\r\n                                      <br /> Liquidation preferences\r\n                                      <br /> Voting rights and protective provisions\r\n                                      <br /> Board composition\r\n                                      <br /> Anti-dilution provisions\r\n                                      <br /> Dividend preferences\r\n                                    </div>\r\n                                  </span>\r\n                                  <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                </label>\r\n\r\n                                <input\r\n                                  type=\"file\"\r\n                                  multiple\r\n                                  accept=\".pdf,.doc,.docx,.txt\"\r\n                                  onChange={(e) => {\r\n                                    handleInputChange(\r\n                                      \"termsheetFile\",\r\n                                      Array.from(e.target.files)\r\n                                    );\r\n                                    if (errors.termsheetFile) {\r\n                                      setErrors((prev) => ({\r\n                                        ...prev,\r\n                                        termsheetFile: \"\",\r\n                                      }));\r\n                                    }\r\n                                  }}\r\n                                  className={`textarea_input ${errors.termsheetFile ? \"is-invalid\" : \"\"}`}\r\n                                />\r\n\r\n                                {/* Show selected file names */}\r\n                                {formData.termsheetFile && formData.termsheetFile.length > 0 && (\r\n                                  <div className=\"mt-2\">\r\n                                    <strong>Selected Files:</strong>\r\n                                    <ul className=\"small text-muted mt-1 mb-0\">\r\n                                      {formData.termsheetFile.map((file, index) => (\r\n                                        <li key={index}>\r\n                                          <strong>{file.name}</strong>\r\n                                        </li>\r\n                                      ))}\r\n                                    </ul>\r\n                                  </div>\r\n                                )}\r\n\r\n                                {errors.termsheetFile && (\r\n                                  <div className=\"text-danger small mt-1\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.termsheetFile}\r\n                                  </div>\r\n                                )}\r\n\r\n                                <div className=\"form-text\">\r\n                                  Supported formats: PDF, DOC, DOCX, TXT. Maximum file size: 10MB per file.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Term Sheet Information */}\r\n                              {/* <div className=\"alert alert-info mt-3\">\r\n                                <strong>About Term Sheets:</strong>\r\n                                <ul className=\"mb-0 mt-2 small\">\r\n                                  <li>Term sheets are non-binding but set the framework for the deal</li>\r\n                                  <li>They outline key economic and control terms</li>\r\n                                  <li>Typically negotiated between company and lead investor</li>\r\n                                  <li>Forms the basis for legal documentation</li>\r\n                                  <li>Exclusivity periods are common in term sheets</li>\r\n                                </ul>\r\n                              </div> */}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n                                // For Round 0, skip validation and navigate directly to notes\r\n                                if (isFirstRound) {\r\n                                  navigateToSection('next');\r\n                                  return;\r\n                                }\r\n\r\n                                // Validate before proceeding for other rounds\r\n                                const newErrors = {};\r\n\r\n                                if (!formData.termsheetFile || formData.termsheetFile.length === 0) {\r\n                                  newErrors.termsheetFile = \"Please upload at least one term sheet file\";\r\n                                } else {\r\n                                  // Validate file types and sizes\r\n                                  const validExtensions = [\"pdf\", \"doc\", \"docx\", \"txt\"];\r\n                                  const maxSize = 10 * 1024 * 1024; // 10MB\r\n\r\n                                  for (const file of formData.termsheetFile) {\r\n                                    const fileExtension = file.name.split(\".\").pop().toLowerCase();\r\n\r\n                                    //  Validate extension\r\n                                    if (!validExtensions.includes(fileExtension)) {\r\n                                      newErrors.termsheetFile =\r\n                                        \"Invalid file type. Please upload PDF, DOC, DOCX, or TXT files only\";\r\n                                      break;\r\n                                    }\r\n\r\n                                    //  Validate file size\r\n                                    if (file.size > maxSize) {\r\n                                      newErrors.termsheetFile = `File ${file.name} exceeds 10MB size limit`;\r\n                                      break;\r\n                                    }\r\n                                  }\r\n                                }\r\n\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\r\n                                      \".is-invalid, .border-danger\"\r\n                                    );\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {activeSection === \"subscription\" && !isFirstRound && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                              \"rights\",\r\n                              \"liquidation\",\r\n                              \"convertible\",\r\n                              \"voting\",\r\n                              \"termsheet\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">Investment Documents - Subscription</h3>\r\n\r\n                          {/* ROUND 0 - Skip this section entirely */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"text-center py-5\">\r\n                              <div className=\"alert alert-info\">\r\n                                <strong>Round 0 - No Subscription Documents Required</strong>\r\n                                <p className=\"mb-0 mt-2\">\r\n                                  This is the incorporation round with founder shares only.\r\n                                  Subscription documents are used for investor funding rounds.\r\n                                </p>\r\n                              </div>\r\n                              <div className=\"mt-4\">\r\n                                <button\r\n                                  className=\"global_btn\"\r\n                                  onClick={() => navigateToSection('next')}\r\n                                >\r\n                                  Continue to Notes Section\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Show subscription document upload */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold d-flex align-items-center\">\r\n                                  Upload Your Subscription Documents\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <div className=\"d-flex flex-column gap-2\">\r\n                                        <p>\r\n                                          Subscription documents are the formal, legally binding agreements that an investor\r\n                                          signs to purchase equity in a company after a term sheet has been agreed upon.\r\n                                          These include the Subscription Agreement, which outlines how many shares the\r\n                                          investor is buying, at what price, and under what terms.\r\n                                        </p>\r\n                                        <p><strong>Common Subscription Documents:</strong></p>\r\n                                        <p><b>Subscription Agreement:</b> Primary investment contract</p>\r\n                                        <p><b>Shareholders' Agreement:</b> Governance and rights</p>\r\n                                        <p><b>Investor Rights Agreement:</b> Information and registration rights</p>\r\n                                        <p><b>Board Consent:</b> Formal board approval of the round</p>\r\n                                        <p><b>Side Letters:</b> Special terms for specific investors</p>\r\n                                        <p> These documents legally commit the investor to the deal and obligate the company\r\n                                          to issue shares in exchange for capital.</p>\r\n                                      </div>\r\n\r\n\r\n                                    </div>\r\n                                  </span>\r\n                                  <span style={{ color: \"var(--primary)\" }}>*</span>\r\n                                </label>\r\n\r\n                                <input\r\n                                  type=\"file\"\r\n                                  multiple\r\n                                  accept=\".pdf,.doc,.docx,.txt\"\r\n                                  onChange={(e) => {\r\n                                    handleInputChange(\r\n                                      \"subscriptiondocument\",\r\n                                      Array.from(e.target.files)\r\n                                    );\r\n                                    if (errors.subscriptiondocument) {\r\n                                      setErrors((prev) => ({\r\n                                        ...prev,\r\n                                        subscriptiondocument: \"\",\r\n                                      }));\r\n                                    }\r\n                                  }}\r\n                                  className={`textarea_input ${errors.subscriptiondocument ? \"is-invalid\" : \"\"}`}\r\n                                />\r\n\r\n                                {/* Show selected file names */}\r\n                                {formData.subscriptiondocument && formData.subscriptiondocument.length > 0 && (\r\n                                  <div className=\"mt-2\">\r\n                                    <strong>Selected Files:</strong>\r\n                                    <ul className=\"small text-muted mt-1 mb-0\">\r\n                                      {formData.subscriptiondocument.map((file, index) => (\r\n                                        <li key={index}>\r\n                                          <strong>{file.name}</strong>\r\n                                        </li>\r\n                                      ))}\r\n                                    </ul>\r\n                                  </div>\r\n                                )}\r\n\r\n                                {errors.subscriptiondocument && (\r\n                                  <div className=\"text-danger small mt-1\">\r\n                                    <i className=\"bi bi-exclamation-circle me-1\"></i>\r\n                                    {errors.subscriptiondocument}\r\n                                  </div>\r\n                                )}\r\n\r\n                                <div className=\"form-text\">\r\n                                  Upload all relevant subscription documents. Supported formats: PDF, DOC, DOCX, TXT. Maximum file size: 10MB per file.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Subscription Documents Information */}\r\n                              {/* <div className=\"alert alert-info mt-3\">\r\n                                <strong>About Subscription Documents:</strong>\r\n                                <ul className=\"mb-0 mt-2 small\">\r\n                                  <li>These are legally binding contracts that finalize the investment</li>\r\n                                  <li>Typically include representations, warranties, and covenants</li>\r\n                                  <li>Must be signed by both company and investors</li>\r\n                                  <li>Funds are transferred upon execution of these documents</li>\r\n                                  <li>Shares are issued after documents are fully executed</li>\r\n                                </ul>\r\n                              </div> */}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              onClick={() => {\r\n\r\n                                if (isFirstRound) {\r\n                                  navigateToSection('next');\r\n                                  return;\r\n                                }\r\n\r\n\r\n                                const newErrors = {};\r\n\r\n                                if (\r\n                                  !formData.subscriptiondocument ||\r\n                                  formData.subscriptiondocument.length === 0\r\n                                ) {\r\n                                  newErrors.subscriptiondocument =\r\n                                    \"Please upload at least one subscription document\";\r\n                                } else {\r\n                                  // Validate file extensions and sizes safely\r\n                                  const validExtensions = [\"pdf\", \"doc\", \"docx\", \"txt\"];\r\n                                  const maxSize = 10 * 1024 * 1024; // 10MB\r\n\r\n                                  for (const file of formData.subscriptiondocument) {\r\n                                    const fileName = file?.name || \"\";\r\n                                    const fileExtension = fileName.split(\".\").pop()?.toLowerCase() || \"\";\r\n\r\n                                    //  Validate extension instead of MIME type\r\n                                    if (!validExtensions.includes(fileExtension)) {\r\n                                      newErrors.subscriptiondocument =\r\n                                        \"Invalid file type. Please upload PDF, DOC, DOCX, or TXT files only\";\r\n                                      break;\r\n                                    }\r\n\r\n                                    //  Validate file size\r\n                                    if (file.size > maxSize) {\r\n                                      newErrors.subscriptiondocument = `File ${file.name} exceeds 10MB size limit`;\r\n                                      break;\r\n                                    }\r\n                                  }\r\n                                }\r\n\r\n                                //  Handle validation result\r\n                                if (Object.keys(newErrors).length > 0) {\r\n                                  setErrors(newErrors);\r\n\r\n                                  // Scroll to first error\r\n                                  setTimeout(() => {\r\n                                    const firstErrorElement = document.querySelector(\r\n                                      \".is-invalid, .border-danger\"\r\n                                    );\r\n                                    if (firstErrorElement) {\r\n                                      firstErrorElement.scrollIntoView({\r\n                                        behavior: \"smooth\",\r\n                                        block: \"center\",\r\n                                      });\r\n                                    }\r\n                                  }, 100);\r\n                                } else {\r\n                                  setErrors({});\r\n                                  navigateToSection('next');\r\n                                }\r\n                              }}\r\n                            >\r\n                              Save and Continue\r\n                            </button>\r\n\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {activeSection === \"notes\" && (\r\n                        <div className=\"section-content p-4 border rounded-3 shadow-sm bg-white\">\r\n                          <PreviousSection\r\n                            formData={formData}\r\n                            otherText={otherText}\r\n                            selected={selected}\r\n                            visibleFields={[\r\n                              \"shareclass\",\r\n                              \"description\",\r\n                              \"instrument\",\r\n                              \"roundsize\",\r\n                              \"issuedshares\",\r\n                              \"rights\",\r\n                              \"liquidation\",\r\n                              \"convertible\",\r\n                              \"voting\",\r\n                              \"termsheet\",\r\n                              \"subscription\",\r\n                            ]}\r\n                            isFirstRound={isFirstRound}\r\n                            foundersData={foundersData}\r\n                            calculateTotalShares={calculateTotalShares}\r\n                            calculateTotalValue={calculateTotalValue}\r\n                            founderCount={founderCount}\r\n                          />\r\n\r\n                          <h3 className=\"h5 mb-4 text-gray-800\">\r\n                            {isFirstRound ? \"Round 0 - Additional Notes\" : \"General Notes About the Round\"}\r\n                          </h3>\r\n\r\n                          {/* ROUND 0 - Founder Round Notes */}\r\n                          {isFirstRound ? (\r\n                            <div className=\"round-zero-content\">\r\n                              <div className=\"alert alert-info mb-4\">\r\n                                <strong>Round 0 Information:</strong> Add any additional notes about your company's incorporation and founder share allocation.\r\n                              </div>\r\n\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold d-flex align-items-center\">\r\n                                  Incorporation & Founder Notes\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <strong>For Round 0 (Founder Shares):</strong> Add any additional information\r\n                                      about your company's incorporation that wasn't captured in previous sections.\r\n                                      <br />\r\n                                      <strong>What to include:</strong>\r\n                                       Special founder arrangements or vesting schedules\r\n                                      <br /> Notes about the incorporation process or timeline\r\n                                      <br /> Any unique terms from your incorporation documents\r\n                                      <br /> Future plans for the company\r\n                                      <br /> Additional context about founder relationships\r\n                                      <br /> Any restrictions or special conditions on founder shares\r\n                                    </div>\r\n                                  </span>\r\n                                </label>\r\n\r\n                                <textarea\r\n                                  placeholder=\"Enter any additional notes about company incorporation, founder arrangements, or special terms from your incorporation documents...\"\r\n                                  className=\"textarea_input\"\r\n                                  rows=\"6\"\r\n                                  value={formData.generalnotes}\r\n                                  onChange={(e) =>\r\n                                    handleInputChange(\"generalnotes\", e.target.value)\r\n                                  }\r\n                                />\r\n                                <div className=\"form-text\">\r\n                                  This information helps provide context for your company's founding and initial share structure.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Round 0 Summary Display */}\r\n                              <div className=\"calculation-results p-4 border rounded bg-light mb-4\">\r\n                                <h5>Round 0 - Incorporation Summary</h5>\r\n                                <div className=\"row\">\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Total Shares:</strong> {calculateTotalShares().toLocaleString()}\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Price Per Share:</strong> ${formData.pricePerShare || '0.00'}\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Total Value:</strong> ${calculateTotalValue()}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"col-md-6\">\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Founders:</strong> {founderCount}\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Share Type:</strong> Common Shares\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                      <strong>Voting Rights:</strong> {formData.voting === \"Yes\" ? \"Yes\" : \"No\"}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Round 0 Completion Information */}\r\n                              <div className=\"alert alert-success mt-3\">\r\n                                <strong>Ready to Complete Round 0</strong>\r\n                                <p className=\"mb-0 mt-2\">\r\n                                  You've successfully entered all the information for your company's incorporation round.\r\n                                  This will serve as the foundation for your cap table and future investment rounds.\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            /* OTHER ROUNDS - Investment Round Notes */\r\n                            <div className=\"investment-round-content\">\r\n                              <div className=\"mb-4\">\r\n                                <label className=\"form-label fw-semibold d-flex align-items-center\">\r\n                                  General Notes About the Round\r\n                                  <span className=\"tooltip-icon ms-2\" tabIndex={0}>\r\n                                    <img\r\n                                      className=\"blackdark\"\r\n                                      width=\"15\"\r\n                                      height=\"15\"\r\n                                      src=\"/assets/user/images/question.png\"\r\n                                      alt=\"Tip\"\r\n                                    />\r\n                                    <div\r\n                                      className=\"tooltip-text tool-test-white text-white\"\r\n                                      role=\"tooltip\"\r\n                                    >\r\n                                      <strong>For Investment Rounds:</strong> Add any additional information,\r\n                                      context, or special considerations about this funding round that weren't\r\n                                      captured in previous sections.\r\n                                      <br />\r\n                                      <strong>What to include:</strong>\r\n                                       Background on investor negotiations\r\n                                      <br /> Special terms or side agreements\r\n                                      <br /> Timeline and process notes\r\n                                      <br /> Key people involved in the round\r\n                                      <br /> Future plans tied to this funding\r\n                                      <br /> Any unusual or noteworthy aspects of the deal\r\n                                      <br /> Conditions precedent or subsequent\r\n                                    </div>\r\n                                  </span>\r\n                                </label>\r\n\r\n                                <textarea\r\n                                  placeholder=\"Enter any additional notes about the investment round, investor relationships, special terms, or context that would be helpful for future reference...\"\r\n                                  className=\"textarea_input\"\r\n                                  rows=\"6\"\r\n                                  value={formData.generalnotes}\r\n                                  onChange={(e) =>\r\n                                    handleInputChange(\"generalnotes\", e.target.value)\r\n                                  }\r\n                                />\r\n                                <div className=\"form-text\">\r\n                                  These notes will be stored with your round information for future reference and reporting.\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Investment Round Summary Information */}\r\n                              {/* <div className=\"alert alert-info mt-3\">\r\n                                <strong>About Investment Round Notes:</strong>\r\n                                <ul className=\"mb-0 mt-2 small\">\r\n                                  <li>Notes are searchable and can be referenced in future rounds</li>\r\n                                  <li>Include any verbal agreements or understandings not in documents</li>\r\n                                  <li>Document the rationale behind key deal terms</li>\r\n                                  <li>Note any investor relationships or strategic considerations</li>\r\n                                  <li>Record any conditions or milestones tied to the investment</li>\r\n                                </ul>\r\n                              </div> */}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"d-flex justify-content-between gap-2\">\r\n                            <button\r\n                              className=\"close_btn w-fit\"\r\n                              onClick={() => navigateToSection('prev')}\r\n                            >\r\n                              Back\r\n                            </button>\r\n\r\n                            <button\r\n                              className=\"global_btn w-fit\"\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                // For both Round 0 and other rounds, proceed to review\r\n                                // Notes are optional, so no validation needed\r\n                                handleReviewpage();\r\n                              }}\r\n                            >\r\n                              {isFirstRound ? \"Complete Round 0\" : \"Save and Review\"}\r\n                            </button>\r\n                          </div>\r\n\r\n                          {/* Progress indicator for Round 0 */}\r\n                          {isFirstRound && (\r\n                            <div className=\"mt-4 pt-3 border-top\">\r\n                              <div className=\"progress\" style={{ height: \"8px\" }}>\r\n                                <div\r\n                                  className=\"progress-bar bg-success\"\r\n                                  role=\"progressbar\"\r\n                                  style={{ width: \"100%\" }}\r\n                                  aria-valuenow={100}\r\n                                  aria-valuemin={0}\r\n                                  aria-valuemax={100}\r\n                                >\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"d-flex justify-content-between mt-2 small text-muted\">\r\n                                <span>Round 0 Setup</span>\r\n                                <span>100% Complete</span>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Add similar sections for the remaining form fields */}\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </SectionWrapper>\r\n          </div>\r\n        </div >\r\n      </div >\r\n    </Wrapper >\r\n  );\r\n}"],"names":["Recordround","apiUrlRound","API_BASE_URL","apiURLInvestor","countrySymbolList","setCountrysymbollist","useState","CurrencySymbol","setCurrencySymbol","CurrDisplay","setCurrDisplay","errorMsg","seterrorMsg","successMsg","setsuccessMsg","activeSection","setActiveSection","storedUsername","localStorage","getItem","messageAll","setmessageAll","errr","seterrr","userLogin","JSON","parse","id","useParams","ClientIP","setClientIP","CountryName","setCountryName","records","setrecords","navigate","useNavigate","errorMessageCenter","seterrorMessageCenter","errors","setErrors","liquidationOther","nameOfRound","shareClassType","shareclassother","instrumentType","customInstrument","issuedshares","dateroundclosed","liquidation","convertible","convertibleType","voting","termsheetFile","subscriptiondocument","common_stock_valuation","preferred_valuation","valuationCap","discountRate","interestRate","repaymentSchedule","hasWarrants_Bank","valuationCap_note","discountRate_note","maturityDate","interestRate_note","exercisedate_bank","pricePerShare","founders","formData","setFormData","liquidationpreferences","description","roundsize","currency","rights","generalnotes","hasWarrants_preferred","warrant_coverage_percentage","warrant_exercise_type","warrant_adjustment_percent","warrant_adjustment_direction","expirationDate_preferred","warrant_notes","roundStatus","pre_money","post_money","optionPoolPercent","optionPoolPercent_post","existingShares","isPostEntered","investorPostMoney","isCalculationSource","lastUpdatedField","isFirstRound","setIsFirstRound","founderCount","setFounderCount","foundersData","setFoundersData","shares","shareType","apiURLSignature","apiURLAiFile","existingSharesUse","setexistingSharesUse","useEffect","getPreviousFundingRound","handleCheckPayemt","getexistingShares","async","checkData","axios","post","company_id","companies","headers","Accept","data","results","pricePerShareFromDB","parsedFounderData","foundersDataFromDB","totalShares","length","rawFounderData","founder_data","startsWith","endsWith","slice","replace","err","console","error","Array","isArray","parseFloat","totalshares","prev","warn","allowedRounds","setAllowedRounds","previousRounds","setPreviousRounds","log","res","success","_res$data$allowedRoun","blockedRounds","filter","round","includes","selected","setSelected","handleInputChange","message","subscriptionActive","updateAlreadySubmitted","lastUpdateDate","getrecords","generateRes","document","title","getEditrecordlist","Editrecords","setEditrecords","RoundData","setRoundData","getData","round_type","setFirstStepCompleted","instrumentData","instrument_type_data","rawData","updatedFormData","map","file","name","parsed","split","v","trim","field","value","calculateFounderValue","toFixed","otherText","setOtherText","isReviewing","setIsReviewing","fetch","json","ip","country_name","getIP","firstStepCompleted","navigateToSection","direction","currentIndex","sections","findIndex","section","getSections","selectedOption","splice","totalSections","activeIndex","progressWidth","Math","liquidationOptions","multiplePreferences","label","group","participationRights","otherOptions","localeFormat","setLocaleFormat","getallcountrySymbolList","getcountrySymbolLocal","respo","countryCode","setCountryCode","code","country_code","countryData","find","country","currency_symbol","locale","getLocaleFromCountryCode","isLoading","setIsLoading","checkIfFirstRound","hasExistingRounds","roundCount","updateFounderData","index","updated","calculateTotalShares","reduce","total","founder","parseInt","calculateTotalValue","toLocaleString","minimumFractionDigits","maximumFractionDigits","calculateOwnershipPercentages","percentage","previousRoundOptionPool","setPreviousRoundOptionPool","calculatedValues","setCalculatedValues","sharePrice","newSharesIssued","totalPostShares","employeeOptionShares","newOptionShares","existingOptionPoolPercent","postMoneyValuation","investorOwnershipPercent","doc4Action","seriesASafeData","setSeriesASafeData","previousTotalShares","previousFounderShares","previousEmployeeShares","previousSeedInvestment","previousValuationCap","previousDiscountRate","seriesASharePrice","seedOptimalPrice","seedConversionShares","seedConversionValue","seedMOIC","seriesANewShares","seriesANewValue","seriesAMOIC","totalNewShares","totalExcludingOptions","totalSharesAfterPool","postMoneyValuationEquity","foundersPostOwnership","employeesPostOwnership","seedInvestorsPostOwnership","seriesAInvestorsPostOwnership","previousIntrumentType","hasCalculated","seriesConvertibleData","setSeriesConvertibleData","previousRoundSize","previousInterestRate","previousInstrumentType","previousemployeeSharesFromSeed","principalPlusInterest","noteOptimalPrice","noteConversionShares","noteConversionValue","noteMOIC","totalNewSharesBeforeOptions","simplePostMoney","noteInvestorsPostOwnership","autoFillFromPreviousRound","current_round_id","current_instrument_type","toString","isPricedRound","can_autofill","preMoneyPool","previousPostMoneyPool","employee_ownership_percent","lastOptionPoolPost","shouldCalculate","calculateSeriesASafe","isCalculating","preMoney","investmentSize","optionPoolPost","seedDiscountPrice","seedCapPrice","min","employeesExistingPercent","totalSharesIssuedThisRound","setTimeout","calculateSeriesConvertible","seriesAInvestment","employeeSharesFromSeed","noteDiscountPrice","noteCapPrice","pow","totalConversionShares","max","roundSize","investment","targetPoolPercent","priorTotalShares","existingPoolPercent","isCommonStock","needsTopUp","calculationResult","existingPoolShares","calculateCommonStockWithTopUp","totalSharesForTargetPool","newPoolShares","newInvestorShares","totalSharesIssued","calculateCommonStockNoTopUp","postMoney","String","fetchPreviousRoundData","previousRoundData","isSeriesRound","isSeedRound","founderShares","employeeShares","previousSeedInvestorShares","seedInvestment","fetchPreviousRoundForConvertible","previousData","formatCurrentDate","input","date","Date","isNaN","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","padStart","ampm","getSeconds","n","getOrdinal","poolValue","isCollapsed","setIsCollapsed","_jsx","Wrapper","children","className","_jsxs","ModuleSideNav","TopBar","SectionWrapper","Alertpopup","onClose","onClick","type","DangerAlertPopup","onConfirm","formDataToSend","FormData","append","role","founderData","totalValue","ownershipBreakdown","stringify","join","forEach","warrant_status","exercisePrice_bank","warrantRatio_bank","warrantType_bank","createdRoundId","warrantData","roundrecord_id","investor_id","calculated_exercise_price","calculated_warrant_shares","warrant_coverage_amount","issued_date","toISOString","expiration_date","notes","warrantDataUpdate","_err$response","_err$response$data","response","handleSubmit","onCancel","style","position","top","left","width","height","backgroundColor","zIndex","display","justifyContent","alignItems","minHeight","class","method","action","dateStr","monthStr","dayStr","yearStr","shouldShowAlert","placeholder","onChange","e","target","maxLength","_","i","removeFounder","firstName","lastName","email","phone","NumericFormat","onValueChange","values","thousandSeparator","allowNegative","decimalScale","fixedDecimalScale","customShareType","shareClass","customShareClass","addFounder","item","currency_code","step","displayShareType","displayShareClass","colSpan","disabled","_Fragment","newErrors","hasFounderShares","hasValidShares","test","every","Object","keys","firstErrorElement","querySelector","scrollIntoView","behavior","block","PreviousSection","visibleFields","tabIndex","src","alt","opt","checked","htmlFor","maxWidth","rows","color","floatValue","suffix","fontSize","isSafe","isCommon","isConvertibleNote","isSeedType","isSeriesType","created_at","year_registration","f","dateRegex","inputValue","Number","inputDate","today","setHours","_formData$liquidation","_formData$liquidation2","updatedSelection","allParticipationRights","o","otherMultiples","push","_formData$liquidation3","_formData$liquidation4","allMultiples","votingPercentage","multiple","accept","from","files","validExtensions","maxSize","fileExtension","pop","toLowerCase","size","_fileName$split$pop"],"sourceRoot":""}