"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[2590],{72590:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(65043),n=s(58786),o=s(43328),r=s(44710),l=(s(38421),s(53579)),i=s(27836),c=s(45394),d=s(86213),m=s(60184),u=s(74754),p=s(73216),h=s(70579);function b(){const e=(0,p.Zp)(),t=localStorage.getItem("SignatoryLoginData"),[s,b]=(0,a.useState)(!1),f=JSON.parse(t),[x,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)(""),[C,N]=(0,a.useState)(""),[S,k]=(0,a.useState)("");var _="http://localhost:5000/api/user/investor/";document.title="Investor Record Round Confirm";const{id:R}=(0,p.g)();(0,a.useEffect)((()=>{A(),J()}),[]);const A=async()=>{const t={company_id:f.companies[0].id,id:R};try{const s=await d.A.post(_+"checkInvestorRecordround",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});0===s.data.results.length?e("/crm/investorreport"):N(s.data.results[0])}catch(s){console.error("Error generating summary",s)}},[$,D]=(0,a.useState)(!1),[O,I]=(0,a.useState)(""),[z,L]=(0,a.useState)(null),[E,T]=(0,a.useState)(!1),J=async()=>{const e={company_id:f.companies[0].id,id:R};try{const t=await d.A.post(_+"getInvestorReportCapitalRound",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});g(t.data.results)}catch(t){console.error("Error generating summary",t)}},M=[{name:"Share Class (Name of Round)",selector:e=>e.shareClassType+" "+e.nameOfRound,sortable:!0},{name:"Number of Shares",selector:e=>Number(e.roundsize).toLocaleString("en-US"),sortable:!0},{name:"Status of Round",selector:e=>Number(e.issuedshares).toLocaleString("en-US"),sortable:!0},{name:"Date of Report",selector:e=>K(e.created_at),sortable:!0},{name:"Date Viewed",selector:e=>e.date_view?K(e.date_view):"N/A",sortable:!0},{name:"View",cell:e=>(0,h.jsx)("div",{className:"d-flex gap-2",children:(0,h.jsxs)("button",{type:"button",onClick:()=>V(e),rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success fw-bold",title:"View Detail",children:[(0,h.jsx)(m.Ny1,{})," view"]})}),ignoreRowClick:!0,allowOverflow:!0,button:!0},{name:"Actions",cell:e=>(0,h.jsx)("div",{className:"d-flex gap-2",children:"Confirm"===e.report_status?(0,h.jsxs)("span",{className:"text-success fw-bold",title:"Confirmed",children:[(0,h.jsx)(m.CMH,{})," Confirmed"]}):(0,h.jsx)("button",{type:"button",onClick:()=>F(e,"Confirm"),rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success fw-bold",title:"Confirm Report",children:"Confirm"})}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],F=async(e,t)=>{const s={company_id:f.companies[0].id,id:R,dataa:e,types:t};try{const e=await d.A.post(_+"InvestorAuthorizeConfimataion",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});J(),k(e.data.message),setTimeout((()=>{k("")}),3500)}catch(a){console.error("Error generating summary",a)}},V=e=>{b(!0),w(e)},[W,H]=(0,a.useState)(""),Y=x.filter((e=>{const t=W.toLowerCase();return`\n    ${e.nameOfRound||""}\n    ${e.shareClassType||""}\n     ${e.roundsize||""}\n    ${e.issuedshares||""}\n    ${e.description||""}\n    ${e.instrumentType||""}\n    ${e.customInstrument||""}\n    ${e.roundsize||""}\n    ${e.issuedshares||""}\n    ${e.liquidationpreferences||""}\n  `.toLowerCase().includes(t)}));function K(e){const t=new Date(e);if(isNaN(t))return"";const s=t.getDate(),a=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],n=t.getFullYear();return`${a} ${s}${(e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)}, ${n}`}const[U,q]=(0,a.useState)(!1),[G,Z]=(0,a.useState)(!1);let B=[];if(C.kyc_document)if(Array.isArray(C.kyc_document))try{B=JSON.parse(C.kyc_document[0])}catch(Q){B=C.kyc_document}else try{B=JSON.parse(C.kyc_document)}catch(Q){B=[C.kyc_document]}const P="http://localhost:5000/api/upload/investor/inv_"+C.investor_id;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.mO,{children:(0,h.jsx)("div",{className:"fullpage d-block",children:(0,h.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,h.jsx)(r.A,{isCollapsed:U,setIsCollapsed:q}),(0,h.jsxs)("div",{className:"global_view "+(U?"global_view_col":""),children:[(0,h.jsx)(o.A,{}),(0,h.jsx)(l.$K,{className:"d-block p-md-4 p-3",children:(0,h.jsxs)("div",{className:"container-fluid",children:[S&&(0,h.jsx)("p",{className:y?"mt-3 error_pop":"success_pop mt-3",children:S}),(0,h.jsx)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3",children:(0,h.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Investor Report (Capital Round Documents)"})}),(0,h.jsxs)("div",{className:"d-flex flex-column justify-content-between align-items-start tb-box",children:[(0,h.jsx)("style",{children:"\n                        .sc-fGlNzy.ewfgjA.datatb-report {\n                          overflow: visible !important;\n                        }\n                      "}),(0,h.jsx)(n.Ay,{customStyles:{table:{style:{overflow:"visible !important",minWidth:"100%",boxShadow:"0px 3px 12px rgb(0 0 0 / 16%)",borderRadius:"12px"}},headCells:{style:{backgroundColor:"#efefef !important",fontWeight:"600",fontSize:"0.9rem",color:"#000 !important",whiteSpace:"nowrap"}},cells:{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",backgroundColor:"#fff !important"}},rows:{style:{fontSize:"0.8rem",fontWeight:"500","&:hover":{backgroundColor:"#e8f0fe"}},stripedStyle:{backgroundColor:"#f4f6f8"}},pagination:{style:{backgroundColor:"#fafafa",padding:"12px 16px"}}},conditionalRowStyles:[{when:e=>!0,style:{"&:hover":{backgroundColor:"var(--lightRed)"}}}],columns:M,className:"datatb-report",data:Y,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]})})]})]})})}),s&&(0,h.jsx)(u.A,{onClose:()=>b(!1),recordViewData:v}),G&&(0,h.jsx)("div",{className:"main_popup-overlay",children:(0,h.jsxs)(i.EL,{children:[(0,h.jsxs)("div",{className:"d-flex align-items-center gap-3 mb-4 justify-content-between",children:[(0,h.jsx)(i.wt,{children:"View KYC/AML Documentation"}),(0,h.jsx)("button",{type:"button",className:"close_btn_global","aria-label":"Close",onClick:()=>Z(!1),children:(0,h.jsx)(c.LwM,{size:24})})]}),(0,h.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"60vh",overflowY:"auto"},children:B.map(((e,t)=>{const s=`${P}/${e}`;return(e=>/\.(jpg|jpeg|png|gif)$/i.test(e))(e)?(0,h.jsx)("img",{src:s,alt:`Document ${t+1}`,style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",padding:"4px",background:"#f9f9f9"}},t):(0,h.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",style:{margin:"5px"},children:["Open Document ",t+1]},t)}))}),(0,h.jsx)(i.e2,{children:(0,h.jsx)(i.IY,{onClick:()=>Z(!1),className:"close_btn w-fit",children:"Close"})})]})}),$&&(0,h.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:(0,h.jsx)("div",{className:"modal-dialog",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header flex-column align-items-start",children:[(0,h.jsx)("h5",{className:"modal-title mb-0",children:"Reason for Not Confirm"}),(0,h.jsx)("small",{className:"text-muted",children:"(Series C Extension ssss)"}),(0,h.jsx)("button",{type:"button",className:"btn-close position-absolute end-0 me-2",onClick:()=>D(!1)})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"Enter reason...",value:O,onChange:e=>I(e.target.value)})}),(0,h.jsxs)("div",{className:"modal-footer",children:[(0,h.jsx)("button",{className:"btn btn-secondary",onClick:()=>D(!1),children:"Cancel"}),(0,h.jsx)("button",{className:"btn btn-danger",onClick:()=>F(z,"Not Confirm",O),children:"Submit"})]})]})})})]})})}}}]);
//# sourceMappingURL=2590.ccac1518.chunk.js.map