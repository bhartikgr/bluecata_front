"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[3788],{3788:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var a=t(5043),o=t(5475),r=t(5700),n=t(8229),i=t(7035),l=t(6213),c=t(4117),d=t(2862),u=t(4241),p=t(579);const m=e=>{let{refreshRight:s}=e;var r="https://backend.amourette.no/api/profile/";const[n,i]=(0,a.useState)("0"),[m,g]=(0,a.useState)("0"),[h,f]=(0,a.useState)("0"),[x,j]=(0,a.useState)("0"),[v,y]=(0,a.useState)("0"),[_,w]=(0,a.useState)("0"),[N,S]=(0,a.useState)("0"),[b,k]=(0,a.useState)([]),[A,I]=(0,a.useState)([]);(0,a.useEffect)((()=>{console.log("right",s),C(),q(),E()}),[s]),(0,a.useEffect)((()=>{C(),q(),E()}),[]);const C=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalGroups",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;w(t.groupsCount)}catch(a){a.response||a.request}},q=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalEvents",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;S(t.eventsCount)}catch(a){a.response||a.request}},E=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalImages",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;y(t.totalImages)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{O()}),[]);const O=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"getvisitprofile",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;k(t)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{const e=setInterval((async()=>{T(),C(),q(),E(),D(),$()}),1500);return()=>clearInterval(e)}),[]);const T=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{(await l.A.post(r+"gettotalOnline",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data}catch(t){t.response||t.request}};(0,a.useEffect)((()=>{$(),L()}),[]);const $=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id,looking_forr:[]};try{var t=(await l.A.post("https://backend.amourette.no/api/members/getAllMembersPageDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;if(t.length>0){const e=t.filter((e=>"Online"===e.online_user&&"Yes"===e.online_user_active)).length;i(e);const s=new Date,a=new Date(s.getTime()-2592e6);t.length;let o=0;t.forEach((e=>{new Date(e.created_at)>=a&&o++})),j(o)}g(t.length)}catch(a){a.response||a.request}},L=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{var t=(await l.A.post(r+"gettotalMembers",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(t),f(t.memberCount)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{D()}),[]);const D=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{(await l.A.post(r+"gettotalNewMembers",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.last7Days}catch(t){t.response||t.request}},R=e=>{if(!e)return null;const s=e.replace(/Z$/,""),t=u.c9.fromISO(s,{zone:"Europe/Oslo"});if(!t.isValid)return console.error("Invalid Oslo Time:",t.invalidExplanation),"Invalid Date";const a=t.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),o=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(t);const r=u.c9.now().setZone(o),n=a.toFormat("HH:mm"),i=r.diff(a,"minutes").minutes,l=r.diff(a,"hours").hours,c=r.diff(a,"days").days,d=Math.floor(c/7),p=Math.floor(c/30),m=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:p<12?`${p}m ${n}`:`${m}y ${n}`},{t:M}=(0,c.Bd)();return(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,M]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"d-flex flex-column leftbar",children:[(0,p.jsxs)("div",{className:"d-flex flex-column  visitedlast",children:[(0,p.jsx)("h5",{className:"grouptitle mb-3",children:M("RightMenu_LastVisited")}),(0,p.jsx)("div",{className:"d-flex flex-column gap-3 scroll_bar visitscroll",children:0===b.length?(0,p.jsxs)("p",{children:[M("RightMenu_NovisitFound"),"."]}):b.map(((e,s)=>(0,p.jsxs)(o.N_,{to:`/friend/${e.uid}`,className:"d-flex gap-3 align-items-center listoficons",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"userpic ofit rounded-circle overflow-hidden",children:(0,p.jsx)("img",{src:e.profile_image?e.profile_image:t(7123),alt:"userpic"})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsxs)("h4",{children:[(0,p.jsx)("strong",{children:e.username})," "]}),(0,p.jsx)("h6",{children:R(e.date)})]})]},s)))})]}),(0,p.jsx)("hr",{className:"linehr"}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,p.jsx)("h5",{className:"grouptitle mb-3",children:M("RightMenu_Statistics")}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-3 listnumber",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Onlinenow")}),(0,p.jsx)("h4",{children:n})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Newmembers")}),(0,p.jsx)("h4",{children:x})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Images")}),(0,p.jsx)("h4",{children:v})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Groups")}),(0,p.jsx)("h4",{children:_})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Eventsandparties")}),(0,p.jsx)("h4",{children:N})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("h4",{children:M("RightMenu_Membersintotal")}),(0,p.jsx)("h4",{children:m})]})]})]})]})})};var g=t(4295);const h=function(e){let{refresh:s}=e;var r="https://backend.amourette.no/api/members/";const[n,c]=(0,a.useState)([]),[d,m]=(0,a.useState)([]),[h,f]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post(r+"getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));c(e);await x(e)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})()}),[s,d]);const x=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...e,t.id].join(", "),user_id:t.id};try{var o=(await l.A.post("https://backend.amourette.no/api/notifications/getnotificationsdashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;m(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},j=e=>{if(!e)return null;const s=e.replace(/Z$/,""),t=u.c9.fromISO(s,{zone:"Europe/Oslo"});if(!t.isValid)return console.error("Invalid Oslo Time:",t.invalidExplanation),"Invalid Date";const a=t.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),o=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(t);const r=u.c9.now().setZone(o),n=a.toFormat("HH:mm"),i=r.diff(a,"minutes").minutes,l=r.diff(a,"hours").hours,c=r.diff(a,"days").days,d=Math.floor(c/7),p=Math.floor(c/30),m=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:p<12?`${p}m ${n}`:`${m}y ${n}`},[v,y]=(0,a.useState)(!1),[_,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(""),[b,k]=(0,a.useState)([]),[A,I]=(0,a.useState)(""),[C,q]=(0,a.useState)(""),[E,O]=(0,a.useState)("");var T="https://backend.amourette.no/api/members/";(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;f(s),$()}),[]);const $=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await l.A.post(T+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];S(t)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},L=async e=>{console.log(";ll"),I(e),R(e),D(e);let s={id:e,user_id:h.id};try{const e=await l.A.post(T+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];M(),w(t)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},D=async e=>{let s={id:e,user_id:h.id};try{const e=await l.A.post(T+"getGalleryDetailnextprevious",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&O(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&q(e.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},R=async e=>{let s={id:e,user_id:h.id};try{var t=(await l.A.post(r+"getGalleryComments",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;k(t)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},M=()=>{y(!0),document.body.style.overflowY="hidden"};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"d-flex flex-column gap-4 ",children:(0,p.jsx)("div",{className:"d-flex flex-column gap-3",children:0===d.length?(0,p.jsx)("p",{}):(0,p.jsx)("div",{className:"d-flex flex-column gap-3",children:d.map(((e,s)=>{var a,r;return(0,p.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100",children:(0,p.jsx)("div",{className:"d-flex justify-content-between align-items-center h-100 px-2 py-1",children:(0,p.jsx)("div",{className:"flex-grow-1",children:(0,p.jsxs)(o.N_,{to:"/previewimages"===(null===(a=e.link_href)||void 0===a?void 0:a.trim())&&e.post_id&&e.image_url?`/previewimages/${e.post_id}/${encodeURIComponent(e.image_url)}`:(null===(r=e.link_href)||void 0===r?void 0:r.trim())||"#",onClick:s=>{var t;const a=null===(t=e.link_href)||void 0===t?void 0:t.trim();"/allgallery"===a&&e.post_id&&(s.preventDefault(),L(e.post_id)),"/editprofile/viewrequest"===a&&(s.preventDefault(),window.location.href="/editprofile/viewrequest")},className:"d-flex gap-3",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,p.jsx)("img",{src:"Admin"===e.status?t(7123):e.recipient_profile_image||i,alt:"userpic"})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsxs)("h4",{children:["User"===e.status&&(0,p.jsxs)("strong",{children:[e.recipient_name," "]}),"Admin"===e.status&&(0,p.jsx)("strong",{children:"Admin "}),e.message]}),(0,p.jsx)("h5",{children:j(e.date)})]})]},s)})})})}))})})}),(0,p.jsx)(g.d,{isOpen1:v,onClose1:()=>{y(!1),document.body.style.overflowY="auto"},seperateGallerydetail:_,UserDetail:N,LoginData:h,getUserfav:async()=>{L(A)},GalleryCommets:b,getCommentPost:async()=>{L(A)},GalleryIdDetailGet:A,previousId:E,nextId:C,getgallerydetialnext:()=>{L(C)},getgallerydetialprev:()=>{L(E)}})]})};var f=t(686),x=t(3216),j=t(9564),v=t(2074),y=t(184),_=t(4258),w=t(793);const N=e=>{let{isOpen1:s,onClose1:r,children:n,seperateGallerydetail:i,UserDetail:m,LoginData:g,getUserfav:h,GalleryCommets:f,getCommentPost:x,GalleryIdDetailGet:N,galleryData:S,previousId:b,nextId:k,getgallerydetialnext:A,getgallerydetialprev:I,postType:C,postdetail:q,refreshdiv:E}=e;const[O,T]=(0,a.useState)(""),[$,L]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[M,J]=(0,a.useState)(""),G=(0,a.useRef)(null),[P,F]=(0,a.useState)(0),[Z,Y]=(0,a.useState)(i),[H,U]=(0,a.useState)(N),[V,W]=(0,a.useState)(!1),[z,B]=(0,a.useState)(f),{t:K}=(0,c.Bd)(),[Q,X]=(0,a.useState)(""),ee=(0,a.useRef)(null),[se,te]=(0,a.useState)(!1),ae=localStorage.getItem("userLogin"),oe=ae?JSON.parse(ae):null;console.log(Z),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,K]),(0,a.useEffect)((()=>{B(f),Y(i),U(N),G.current&&G.current.scrollIntoView()}),[f,i,N]),(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);let t="";"group"===C?t=String(s.post_id):"gallery"===C?t=String(s.gallery_id):"forum"===C&&(t=String(s.forum_id));const a=String(N),o=g.id;a===t&&("GalleryLike"===s.event&&Y((e=>e.id===s.gallery_id?{...e,total_favourites:s.total_favourites,user_favourited:o===s.user_id?s.user_favourited:e.user_favourited}:e)),"GalleryPost"===s.event&&B((e=>[...e,{user_id:s.user_id,username:s.username,description:s.message,profile_image:s.profile_image,makeImagePrivate:s.makeImagePrivate,date:s.date,lastInsertId:s.lastInsertId}])),"groupComments"===s.event&&B((e=>[...e,{user_id:s.post.user_id,username:s.post.comment_user_username,description:s.post.description,profile_image:s.post.comment_user_profile_image,makeImagePrivate:0,date:s.post.comment_date,lastInsertId:""}])),"ForumComments"===s.event&&B((e=>[...e,{user_id:s.user_id,username:s.username,description:s.description,profile_image:s.profile_image,makeImagePrivate:s.makeImagePrivate,date:s.date,lastInsertId:s.lastInsertId}])))}catch(s){console.error("Failed to parse WebSocket message:",s),console.error("Raw message:",e.data)}},()=>{e.close()}}),[g,N]);var re="https://backend.amourette.no/api/members/";const[ne,ie]=(0,a.useState)(""),[le,ce]=(0,a.useState)(!1),de=e=>{if(!e)return null;const s=e.replace(/Z$/,""),t=u.c9.fromISO(s,{zone:"Europe/Oslo"});if(!t.isValid)return console.error("Invalid Oslo Time:",t.invalidExplanation),"Invalid Date";const a=t.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),o=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(t);const r=u.c9.now().setZone(o),n=a.toFormat("HH:mm"),i=r.diff(a,"minutes").minutes,l=r.diff(a,"hours").hours,c=r.diff(a,"days").days,d=Math.floor(c/7),p=Math.floor(c/30),m=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:p<12?`${p}m ${n}`:`${m}y ${n}`};(0,a.useEffect)((()=>{const e=e=>{"ArrowRight"===e.key?A():"ArrowLeft"===e.key&&I()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[A,I]);const ue=!ne.trim()||V,pe=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"],me=async e=>{if(e.preventDefault&&e.preventDefault(),ce(!0),"forum"===C){let t={description:e.description||e.target.description.value,forum_id:e.gallery_id||e.target.gallery_id.value,user_id:g.id,postType:C};try{await l.A.post(re+"forumscommentSaveDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});ce(!1),ie(""),x(),G.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}if("group"===C){const t="https://backend.amourette.no/api/groups/";let a={comment:e.description||e.target.description.value,post_id:e.gallery_id||e.target.gallery_id.value,user_id:g.id,postType:C};try{await l.A.post(t+"CreateGroupPostCommentDashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});ce(!1),ie(""),x(),G.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}if("gallery"===C){let t={description:e.description||e.target.description.value,gallery_id:e.gallery_id||e.target.gallery_id.value,user_id:g.id,postType:C};try{await l.A.post(re+"GalleryPostSave",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});ce(!1),ie(""),x(),G.current.scrollIntoView({behavior:"smooth"})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}}},[ge,he]=(0,a.useState)(!1),fe=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{fe.current&&!fe.current.contains(e.target)&&he(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&r()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r]);if(!s)return null;const xe=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,id:i.id,post_type:C};try{await l.A.post(re+"deletePostDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});L(!0),T("Post deleted successfully"),R(!1),E(),setTimeout((()=>{r(),L(!1)}),1e3)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&r()},children:[(0,p.jsx)(j.M,{isOpen1:D,onClose1:()=>{R(!1)},message:M,onReturnSent:async()=>{xe()}}),$&&(0,p.jsx)(w.A,{message:O}),(0,p.jsxs)("div",{className:"popup-content col-md-10",children:[(0,p.jsx)("button",{className:"close-button",style:{zIndex:"999"},onClick:r,children:"\xd7 "}),(0,p.jsxs)("div",{className:"usergallery_pop  d-flex flex-column gap-1 h-100",children:[(0,p.jsx)("button",{className:"arrow right",type:"button",onClick:A,children:(0,p.jsx)(y.X6T,{})}),(0,p.jsx)("button",{className:"arrow left",type:"button",onClick:I,children:(0,p.jsx)(y._Jj,{})}),(0,p.jsxs)("div",{className:"row p-2 p-md-4",children:[(0,p.jsx)("div",{className:"col-lg-7",children:(0,p.jsxs)("div",{className:"position-relative",children:[(0,p.jsx)("div",{className:"d-block gallery_im1g ",children:Z.image&&"string"===typeof Z.image?(0,p.jsx)(v.A,{className:"w-100 h-100",url:Z.image}):(0,p.jsx)("p",{children:K("No_avalibale_media")})}),oe.id===Z.user_id&&(0,p.jsx)("div",{className:"flex-shrink-0 posttopbtns",children:(0,p.jsx)("button",{title:"Delete",onClick:()=>{R(!0),J("Are you sure? You want to delete this post")},type:"button",className:"btn redbtn",style:{padding:"0px 0px",textAlign:"center",minWidth:"0px",background:"red",width:"40px",height:"40px",borderRadius:"50px",position:"absolute",top:"10px",right:"15px"},children:(0,p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler textcolor icons-tabler-outline icon-tabler-trash",children:[(0,p.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,p.jsx)("path",{d:"M4 7l16 0"}),(0,p.jsx)("path",{d:"M10 11l0 6"}),(0,p.jsx)("path",{d:"M14 11l0 6"}),(0,p.jsx)("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),(0,p.jsx)("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})})]})}),(0,p.jsx)("div",{className:"col-lg-5",children:(0,p.jsxs)("div",{className:"d-flex h-100 flex-column justify-content-between gap-1",children:[(0,p.jsxs)("div",{className:"d-flex flex-column gap-1 py-3 bordr-bt",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,p.jsx)(o.N_,{to:`/friend/${Z.uid}`,children:Z.username}),(0,p.jsx)("h6",{children:de(Z.date)})]}),(0,p.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,p.jsx)("p",{children:Z&&Z.description&&Z.description.length>150?Z.description.substring(0,150)+"...":(null===Z||void 0===Z?void 0:Z.description)||"No description available"}),(0,p.jsxs)("div",{className:"d-flex align-items-center gap-3 flex-shrink-0",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,p.jsx)("button",{type:"button",onClick:()=>(async(e,s)=>{let t={user_id:g.id,id:e,pertype:s};if(console.log(t),te(!0),"gallery"===s)try{await l.A.post(re+"galleryPostLike",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),te(!1),h("")}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}if("forum"===s){const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,id:e};try{await l.A.post(re+"forumlikepostforumpage",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),h("")}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}if("group"===s){const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,id:e};try{await l.A.post(re+"grouplikepostgrouppage",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),console.log("k"),setTimeout((()=>{h("")}),100)}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}})(Z.id,Z.pertype),className:"liked  fulw j",children:Z.user_favourited?(0,p.jsx)(y.Mbv,{}):(0,p.jsx)(y.sOK,{})}),(0,p.jsx)("p",{className:"likecount",children:Z.total_favourites})]}),(0,p.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,p.jsx)("div",{className:"d-block like_icon",children:(0,p.jsx)("img",{className:"w-100 h-100",src:t(2100),alt:"img"})}),(0,p.jsx)("p",{className:"likecount",children:z.length})]})]})]})]}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,p.jsxs)("ul",{className:"usergallery_msg scroll_bar",children:[0===z.length?(0,p.jsx)("li",{children:K("Nocommentsavailable")}):z.map(((e,s)=>(0,p.jsxs)("li",{className:"gap-3",children:[(0,p.jsx)("div",{className:"profile_img",children:(0,p.jsx)("img",{className:"w-100 h-100",src:1===e.makeImagePrivate?t(7123):e.profile_image?e.profile_image:t(3141),alt:"img"})}),(0,p.jsxs)("div",{className:"comment_text d-flex flex-column gap-1",children:[(0,p.jsx)("h6",{children:e.username})," ",(0,p.jsx)("p",{children:e.description})," "]}),(0,p.jsx)("p",{children:de(e.date)})," "]},s))),(0,p.jsx)("li",{ref:G})]}),(0,p.jsxs)("form",{action:"javascript:void(0)",method:"post",onSubmit:me,children:[V&&(0,p.jsx)("span",{className:"text-danger",style:{fontSize:"14px"},children:K("Your_message_contain")}),(0,p.jsx)("div",{className:"d-flex align-items-center gap-3 w-100 usergallery_from",children:(0,p.jsxs)("div",{className:"comment_input w-100 d-flex align-items-center gap-1",children:[le&&(0,p.jsx)("div",{className:"spinner-border text-success postloader",role:"status",children:(0,p.jsx)("span",{className:"visually-hidden"})}),(0,p.jsx)("input",{type:"hidden",value:i.id,name:"gallery_id"}),(0,p.jsxs)("div",{className:"emoji-container",children:[(0,p.jsx)("button",{type:"button",className:"emoji-button",onClick:()=>he(!ge),children:"\ud83d\ude00"}),ge&&(0,p.jsx)("div",{className:"emoji-picker",ref:fe,style:{position:"absolute",top:"64px"},children:(0,p.jsx)(_.Ay,{onEmojiClick:e=>{ie((s=>s+e.emoji)),he(!1),ee.current&&ee.current.focus()}})})]}),(0,p.jsx)("input",{type:"text",required:!0,ref:ee,name:"description",value:ne,onChange:e=>{const s=e.target.value;ie(s),""===s.trim()&&ie("");const t=pe.some((e=>s.toLowerCase().includes(e.toLowerCase())));W(t)},onKeyDown:e=>{"Enter"===e.key&&""!==ne.trim()&&(e.preventDefault(),me({description:ne,gallery_id:i.id}))},placeholder:`${K("write_a_comment")}`}),(0,p.jsx)("button",{type:"submit",disabled:ue,style:{opacity:1},className:"comment_postbtn",children:K("Post")})]})})]})]})]})})]})]})]})]})})};const S=function(){var e,s;const t=(0,a.useRef)(null),i=(0,a.useRef)(null),[d,g]=((0,x.Zp)(),(0,a.useState)("")),[y,_]=(0,a.useState)(!1),[S,b]=(0,a.useState)(""),[k,A]=(0,a.useState)(""),[I,C]=(0,a.useState)(!0),[q,E]=(0,a.useState)(!1),[O,T]=(0,a.useState)([]),[$,L]=(0,a.useState)(!1),[D,R]=(0,a.useState)([]),[M,J]=(0,a.useState)(""),[G,P]=(0,a.useState)(""),[F,Z]=(0,a.useState)(!1),[Y,H]=(0,a.useState)(""),[U,V]=(0,a.useState)(""),[W,z]=(0,a.useState)(""),[B,K]=(0,a.useState)([]),[Q,X]=(0,a.useState)(""),[ee,se]=(0,a.useState)(""),[te,ae]=(0,a.useState)(0),[oe,re]=(0,a.useState)(!0),[ne,ie]=(0,a.useState)(!1),[le,ce]=(0,a.useState)(""),[de,ue]=(0,a.useState)(""),[pe,me]=(0,a.useState)(null),[ge,he]=(0,a.useState)({index:0,type:""});var fe="https://backend.amourette.no/api/members/";const{t:xe,i18n:je}=(0,c.Bd)(),ve=localStorage.getItem("userLogin"),ye=ve?JSON.parse(ve):null;(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data),t=localStorage.getItem("userLogin"),a=t?JSON.parse(t):null;"Deletegallery"===s.event&&qe(D),"sendfriendRequest"===s.event&&s.user_id===a.id&&I(),"friendrequestacceptnotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.some((e=>e.id===a.id))&&I(),"adminNotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification received for this user:",s.message),I()),"adminEventupdate"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification received for this user update event:",s.message),I()),"adminEventdelete"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),I()),"adminEventPostdelete"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),I()),"adminEventPostCommentEdit"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),I()),"adminGalleryPostUpdate"===s.event&&Array.isArray(s.user_id)&&s.user_id.includes(a.id)&&(console.log("New notification delete event:",s.message),I()),"gallerynotification"===s.event&&Array.isArray(s.user_id)&&s.user_id.some((e=>e.id===a.id))&&(Ce(),C(!0),I())}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[I]),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";je.language!==e&&je.changeLanguage(e)}),[je,xe]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin");null===JSON.parse(e)&&(window.location.href="/login")}),[]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;J(s),_e()}),[]);const _e=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await l.A.post(fe+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];V(t)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},[we,Ne]=(0,a.useState)(!1),[Se,be]=(0,a.useState)(null),ke=e=>{be(Se===e?null:e)},Ae=()=>{be(!1)},Ie=async(e,s)=>{ue(s),P(e),E(!0),g("Are you sure? You want to delete this post")};(0,a.useEffect)((()=>{Ce()}),[]);const Ce=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post(fe+"getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));R(e);await qe(e)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},qe=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...e,t.id].join(", "),user_id:t.id,offset:0};console.log(a);try{var o=(await l.A.post(fe+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(o),T(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},Ee=e=>{if(!e)return null;const s=e.replace(/Z$/,""),t=u.c9.fromISO(s,{zone:"Europe/Oslo"});if(!t.isValid)return console.error("Invalid Oslo Time:",t.invalidExplanation),"Invalid Date";const a=t.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),o=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(t);const r=u.c9.now().setZone(o),n=a.toFormat("HH:mm"),i=r.diff(a,"minutes").minutes,l=r.diff(a,"hours").hours,c=r.diff(a,"days").days,d=Math.floor(c/7),p=Math.floor(c/30),m=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:p<12?`${p}m ${n}`:`${m}y ${n}`},Oe=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,id:G,post_type:de};if(""!==de)try{await l.A.post(fe+"deletePostDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});_(!0),A("Post deleted successfully"),qe(D),E(!1),be(null),setTimeout((()=>{_(!1)}),1e3)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},Te=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";z(e),$e(e,s),he({index:t,type:s}),ce(t),ue(s);let a={id:e,user_id:M.id,post_type:s};try{const e=await l.A.post(fe+"getGalleryGroupforumDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var o=e.data.row[0];Re(),H(o),me(t),H(O[t])}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},$e=async(e,s)=>{const t=localStorage.getItem("userLogin");let a={id:e,user_id:(t?JSON.parse(t):null).id,post_type:s};try{var o=(await l.A.post(fe+"getGalleryCommentsDashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;K(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},[Le,De]=(0,a.useState)(!1),Re=()=>{De(!0),document.body.style.overflowY="hidden"};return(0,a.useEffect)((()=>{if(O.length>0&&O[pe]){const e=O[pe];console.log(de),console.log(pe),console.log(e.id),Te(e.id,de,pe)}}),[pe]),(0,a.useEffect)((()=>{const e=new IntersectionObserver((e=>{e[0].isIntersecting&&oe&&!ne&&(console.log(te),(async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let a={user_ids:[...D,t.id].join(", "),user_id:t.id,offset:e};console.log("Fetching with offset:",e);try{const e=(await l.A.post(fe+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;T((s=>{const t=new Set(s.map((e=>e.id))),a=e.filter((e=>!t.has(e.id)));return a.length>0?ae((e=>e+a.length)):re(!1),[...s,...a]}))}catch(o){o.response?console.error("Server error:",o.response.data):o.request?console.error("No response:",o.request):console.error("Error message:",o.message)}})(te))}),{threshold:1});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}}),[te,oe,ne]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.A,{refreshNotifications:I}),(0,p.jsx)(j.M,{isOpen1:q,onClose1:()=>{E(!1)},message:d,onReturnSent:async()=>{Oe()}}),y&&(0,p.jsx)(w.A,{message:k}),(0,p.jsx)("section",{className:"dashbox d-block",children:(0,p.jsx)("div",{className:"container-lg",children:(0,p.jsxs)("div",{className:"row justify-content-between",children:[(0,p.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar d-none d-lg-block",children:(0,p.jsx)(n.S,{})}),(0,p.jsx)("div",{className:"col-lg-5 col-xl-6",children:(0,p.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,p.jsx)("h1",{className:"grouptitle mb-1",children:xe("Friends_activity")}),0===O.length?(0,p.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100 p-2",children:(0,p.jsx)("h2",{children:xe("No_activity")})}):(0,p.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-2 py-1",children:[(0,p.jsx)("div",{className:"flex-grow-1",children:(0,p.jsxs)(o.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden ssd",children:(0,p.jsx)(o.N_,{to:`/friend/${O[0].user_id}`,target:"_blank",children:O&&O[0]?(0,p.jsx)(v.A,{url:O[0].uimage}):(0,p.jsx)("p",{})})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:["Just now"===Ee(O[0].date)?(0,p.jsxs)(o.N_,{to:`/friend/${O[0].user_id}`,target:"_blank",children:[O[0].username," ",xe("Just_post")]}):(0,p.jsx)(o.N_,{to:`/friend/${O[0].user_id}`,target:"_blank",children:O[0].username}),(0,p.jsxs)("h5",{children:[Ee(O[0].date)," "]})]})]})}),ye.id===O[0].user_id&&(0,p.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,p.jsx)("button",{type:"button",onClick:()=>{Ne(!we)},className:"btnoption",children:(0,p.jsx)(f.aQx,{})}),we&&(0,p.jsxs)("ul",{className:"popup-menu",children:[(0,p.jsx)("li",{onClick:()=>Ie(O[0].id,O[0].pertype),children:xe("Delete")}),(0,p.jsx)("li",{onClick:()=>{Ne(!1)},children:"Cancel"})]})]})]}),(0,p.jsx)(o.N_,{onClick:()=>Te(O[0].id,O[0].pertype,0),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,p.jsx)(v.A,{className:"w-100 h-100",url:O[0].image})})]},0),(0,p.jsx)(h,{refresh:I}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-3",ref:t,children:[0===O.length?(0,p.jsx)("h2",{}):O.slice(1).map(((e,s)=>{const t=Ee(e.date);return(0,p.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 h-100 overflow-hidden ",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center h-100 px-2 py-1",children:[(0,p.jsx)("div",{className:"flex-grow-1",children:(0,p.jsxs)(o.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,p.jsx)(o.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:(0,p.jsx)("img",{src:e.uimage,alt:"userpic"})})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:["Just now"===t?(0,p.jsxs)(o.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:[e.username," ",xe("Justpostedanewphoto")]}):(0,p.jsx)(o.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:e.username}),(0,p.jsx)("h5",{children:t})]})]})}),ye.id===e.user_id&&(0,p.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,p.jsx)("button",{type:"button",onClick:()=>ke(s),onTouchStart:()=>ke(s),className:"btnoption",children:(0,p.jsx)(f.aQx,{})}),Se===s&&(0,p.jsxs)("ul",{className:"popup-menu",children:[(0,p.jsx)("li",{onClick:()=>Ie(e.id,e.pertype),onTouchStart:()=>Ie(e.id,e.pertype),children:xe("Delete")}),(0,p.jsx)("li",{onTouchStart:Ae,onClick:Ae,children:xe("Cancel")})]})]})]}),(0,p.jsx)(o.N_,{onTouchStart:()=>Te(e.id,e.pertype,s+1),onClick:()=>Te(e.id,e.pertype,s+1),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,p.jsx)(v.A,{className:"w-100 h-100",url:e.image})})]},s)})),(0,p.jsx)("div",{ref:i})]})]})}),(0,p.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar d-none d-lg-block",children:(0,p.jsx)(m,{refreshRight:$})})]})})}),(0,p.jsx)(N,{isOpen1:Le,onClose1:()=>{De(!1),document.body.style.overflowY="auto"},seperateGallerydetail:Y,UserDetail:U,LoginData:M,getUserfav:async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let t={id:W,type:ge.type,user_id:s.id};console.log(t);try{const e=await l.A.post(fe+"getGallerlikedislike",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(e.data),e.data.results.length>0){var a;H(e.data.results[0]);const s=null===(a=e.data.results)||void 0===a?void 0:a[0];T((e=>e.map((e=>e.id===s.id?s:e))))}}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},GalleryCommets:B,getCommentPost:async()=>{let e={id:W,type:ge.type};console.log(e,"kk");try{const t=await l.A.post(fe+"getGallerforumgroupcomment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.data.results.length>0){var s;const e=null===(s=t.data.results)||void 0===s?void 0:s[0];T((s=>s.map((s=>s.id===e.id?e:s))))}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},GalleryIdDetailGet:W,previousId:null===(e=O[pe-1])||void 0===e?void 0:e.id,nextId:null===(s=O[pe+1])||void 0===s?void 0:s.id,getgallerydetialnext:()=>{if(pe<O.length-1){const e=pe+1,s=O[e];Te(s.id,s.pertype,e)}},getgallerydetialprev:()=>{if(pe>0){me(pe-1);const e=pe-1,s=O[e];Te(s.id,s.pertype,e)}},postType:de,postdetail:O,refreshdiv:()=>{qe(D)}})]})}}}]);
//# sourceMappingURL=3788.46877757.chunk.js.map