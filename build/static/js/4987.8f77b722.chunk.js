"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[4987],{3733:(e,s,l)=>{l.r(s),l.d(s,{default:()=>S});var a=l(5043),c=l(2754),n=l(6990),t=l(3846),r=l(7613),i=l(6484),o=l(8475),d=(l(7035),l(7671)),m=l(6178),u=l.n(m),x=l(4297),h=(l(4220),l(3396)),p=l(9221),g=l(3216),j=l(2717),f=l(6213),v=l(793),N=l(8908),y=(l(8954),l(4117)),b=l(2862),w=l(579);const S=function(){const[e,s]=(0,a.useState)(0),[l,m]=(0,a.useState)(""),[S,k]=(0,a.useState)(!1),[_,A]=(0,a.useState)(!1),[Y,C]=(0,a.useState)(""),O=(0,g.zy)(),[I,M]=(0,a.useState)(!1),[q,E]=(0,a.useState)(!1),[z,K]=(0,a.useState)(""),[L,J]=(0,a.useState)(""),[P,T]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=localStorage.getItem("paydata"),s=JSON.parse(e);null===s||C(s)}),[]),(0,a.useEffect)((()=>{const e=new URLSearchParams(O.search),s=e.get("session_id"),l=e.get("success"),a=e.get("canceled");console.log(l),l&&s&&(console.log(s),T(s),U(s)),null!==a&&(E(!0),J("Payment cancel, Please try again"),setTimeout((()=>{J(""),E(!1)}),2500))}),[O]);const U=async e=>{const s=localStorage.getItem("userLogin"),l=JSON.parse(s),a=localStorage.getItem("paydata"),c=JSON.parse(a);let n={amount:c.amount,days:c.days,currency:"NOK",user_id:l.id,plan:c.plan,session_id:e,productId:c.productId};try{(await f.A.post("https://backend.amourette.no/api/members/paymentdatasaveafterpay",n,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;M(!0),K("Membership data saved and updated successfully"),setTimeout((()=>{window.location.href="/setting"}),800)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},[D,R]=(0,a.useState)(!1),[B,F]=(0,a.useState)(!1);(0,a.useEffect)((()=>{H()}),[]);const H=async()=>{const e=localStorage.getItem("userLogin");let s={id:JSON.parse(e).id};try{var l=(await f.A.post("https://backend.amourette.no/api/getUserDetailsetting",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;console.log(l),m(l)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},{t:Z}=(0,y.Bd)();return(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),b.A.language!==e&&b.A.changeLanguage(e),console.log(Z("LeftMenu_yourprofile"))}),[b.A,Z]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.A,{}),(0,w.jsxs)("section",{className:"d-block membershipbox gapy",children:[I&&(0,w.jsx)(v.A,{message:z}),q&&(0,w.jsx)(N.A,{message:L}),(0,w.jsx)("div",{className:"container-lg",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsxs)(x.tU,{className:"member-tabs",selectedIndex:e,onSelect:e=>{return 1===(l=e)&&A(!0),2===l&&R(!0),3===l&&F(!0),void s(l);var l},children:[(0,w.jsxs)(x.wb,{children:[(0,w.jsxs)(x.oz,{children:[" ",(0,w.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0",children:(0,w.jsx)("div",{className:"iconmenu fulw",children:(0,w.jsx)("img",{src:t,alt:"userpic"})})}),(0,w.jsx)("div",{className:"flex-grow-1",children:(0,w.jsx)("h4",{children:Z("Membership_and_billing")})})]})]}),(0,w.jsxs)(x.oz,{children:[" ",(0,w.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0",children:(0,w.jsx)("div",{className:"iconmenu fulw",children:(0,w.jsx)("img",{src:r,alt:"userpic"})})}),(0,w.jsx)("div",{className:"flex-grow-1",children:(0,w.jsx)("h4",{children:Z("Preferences")})})]})]}),(0,w.jsxs)(x.oz,{children:[" ",(0,w.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0",children:(0,w.jsx)("div",{className:"iconmenu fulw",children:(0,w.jsx)("img",{src:i,alt:"userpic"})})}),(0,w.jsx)("div",{className:"flex-grow-1",children:(0,w.jsx)("h4",{children:Z("Security")})})]})]}),(0,w.jsxs)(x.oz,{children:[" ",(0,w.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0",children:(0,w.jsx)("div",{className:"iconmenu fulw",children:(0,w.jsx)("img",{src:o,alt:"userpic"})})}),(0,w.jsx)("div",{className:"flex-grow-1",children:(0,w.jsx)("h4",{children:Z("Help_center")})})]})]})]}),(0,w.jsx)(x.Kp,{children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-4 mship",children:[(0,w.jsx)("h1",{className:"shiptitle",children:Z("Your_membership")}),(0,w.jsx)("div",{className:"meuser w-100",children:(0,w.jsxs)("div",{className:"row flex-row-reverse g-4",children:[(0,w.jsx)("div",{className:"col-lg-4 col-xxl-3",children:(0,w.jsx)("div",{className:"usermship ofit",children:(0,w.jsx)("img",{src:l.profile_image,alt:"usrpic"})})}),(0,w.jsx)("div",{className:"col-lg-8 col-xxl-9",children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-5 yourmship",children:[(0,w.jsx)("h5",{children:l.username}),(0,w.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,w.jsxs)("h6",{children:[Z("Membership_type"),": ",(0,w.jsx)("b",{children:l.plan})]}),(0,w.jsxs)("h6",{children:[Z("Member_since"),":"," ",(0,w.jsx)("b",{children:u()(l.start_date).format("YYYY-MM-DD")})]})]}),(0,w.jsx)("div",{className:"d-flex flex-column flex-md-row gap-3 shipbtns",children:(0,w.jsx)("div",{children:(0,w.jsx)("button",{onClick:()=>{k(!0),document.body.style.overflowY="hidden"},type:"button",className:"btn pribtn",children:Z("Upgrade")})})})]})})]})})]})}),(0,w.jsx)(x.Kp,{children:(0,w.jsx)(h.S,{isOpen:_,onClose:()=>{A(!1),document.body.style.overflowY="auto"}})}),(0,w.jsx)(x.Kp,{children:(0,w.jsx)(p.Z,{isOpen:D,onClose:()=>{R(!1),document.body.style.overflowY="auto"}})}),(0,w.jsx)(x.Kp,{children:(0,w.jsx)(j.n,{isOpen:B,onClose:()=>{F(!1),document.body.style.overflowY="auto"}})})]})})})})]}),(0,w.jsx)(n.w,{}),(0,w.jsx)(d.l,{isOpen:S,onClose:()=>{k(!1),document.body.style.overflowY="auto"}})]})}},8954:()=>{}}]);
//# sourceMappingURL=4987.8f77b722.chunk.js.map