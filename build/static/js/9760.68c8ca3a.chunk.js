"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[9760],{9760:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var t=a(5043),l=a(5475),o=a(5700),r=a(6990),n=a(6999),c=a(6982),i=a(3625),d=a(5442),u=a(6213),m=a(4117),p=a(2862),h=a(2425),g=a(2074),x=a(686),j=a(5284),v=a(4282),y=a(793),f=a(1075),N=a(579);function b(){var e="https://backend.amourette.no/api/members/";const[s,b]=(0,t.useState)(""),[S,w]=(0,t.useState)(""),[_,k]=(0,t.useState)(!1),[A,C]=(0,t.useState)(""),[q,E]=(0,t.useState)([]),[R,I]=(0,t.useState)(0),[O,D]=(0,t.useState)(""),[L,M]=(0,t.useState)([]),[T,F]=(0,t.useState)(""),[G,J]=(0,t.useState)(""),[Y,U]=(0,t.useState)(""),[W,$]=(0,t.useState)([]),[B,H]=(0,t.useState)([]),[P,Q]=(0,t.useState)(""),[z,K]=(0,t.useState)([]),[V,X]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(""),[se,ae]=(0,t.useState)(""),[te,le]=(0,t.useState)(!1),[oe,re]=(0,t.useState)(""),[ne,ce]=(0,t.useState)(!1),[ie,de]=(0,t.useState)(""),[ue,me]=(0,t.useState)(""),[pe,he]=(0,t.useState)(!1),ge=e=>{I(e)},[xe,je]=(0,t.useState)(!1),[ve,ye]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;D(s)}),[]),(0,t.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);console.log(s.event);const a=localStorage.getItem("userLogin");a&&JSON.parse(a);"Deletegallery"===s.event&&Ne(q)}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[]),(0,t.useEffect)((()=>{void 0!==O&&fe()}),[O,G]);const fe=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:(s?JSON.parse(s):null).id};try{const s=(await u.A.post(e+"getAllfriends",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));E(s);await Ne(s)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},Ne=async s=>{const a=localStorage.getItem("userLogin");let t={user_ids:[...s,(a?JSON.parse(a):null).id].join(", ")};console.log(t);try{var l=(await u.A.post(e+"getAllgallery",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(l),be(),M(l)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},be=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:(s?JSON.parse(s):null).id};try{const s=await u.A.post(e+"getUserDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data.row.length>0){var t=s.data.row[0];F(t)}}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}},Se=async s=>{J(s),_e(s),we(s);let a={id:s,user_id:O.id};try{const s=await u.A.post(e+"getGalleryDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data.row.length>0){var t=s.data.row[0];ye(!0),document.body.style.overflowY="hidden",U(t)}}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}},we=async s=>{let a={id:s,user_id:O.id};try{const s=await u.A.post(e+"getGalleryDetailnextprevious",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==s.data.next_gallery_id&&X(s.data.next_gallery_id),null!==s.data.previous_gallery_id&&Q(s.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},_e=async s=>{let a={id:s,user_id:O.id};try{var t=(await u.A.post(e+"getGalleryComments",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;$(t)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}};(0,t.useEffect)((()=>{(async()=>{const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null,t=[...q,a.id];t.join(", ");let l={search:B,user_ids:t};console.log(l);try{var o=(await u.A.post(e+"searchfilter",l,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(o),be(),M(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}})()}),[B]);const ke=async e=>{const s=e.target.value;e.target.checked?H((e=>[...e,s])):H((e=>e.filter((e=>e!==s))))},{t:Ae}=(0,m.Bd)();(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),p.A.language!==e&&p.A.changeLanguage(e),console.log(Ae("LeftMenu_yourprofile"))}),[p.A,Ae]);const Ce=e=>{const s=new Date(e),a=new Date;let t=a.getFullYear()-s.getFullYear();const l=a.getMonth()-s.getMonth();return(l<0||0===l&&a.getDate()<s.getDate())&&t--,t},[qe,Ee]=(0,t.useState)(!1),Re=()=>{Ee(!1)},Ie=()=>{ce(!1)};(0,t.useEffect)((()=>{Oe()}),[]);const Oe=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:JSON.parse(s).id};try{const s=await u.A.post(e+"getGalleryallAlbum",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});K(s.data.results)}catch(t){t.response?console.error("Server Response Error:",t.response.data):t.request?console.error("No Response Received:",t.request):console.error("Request Error:",t.message)}},De=z.filter((e=>"Private_visible"!==e.visibility)),[Le,Me]=(0,t.useState)(!1);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.A,{refreshNotifications:_}),pe&&(0,N.jsx)(y.A,{message:ue}),(0,N.jsx)("section",{className:"d-block searchmain gapy",children:(0,N.jsx)("div",{className:"container-lg",children:(0,N.jsxs)("div",{className:"row gy-4",children:[(0,N.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,N.jsx)("h1",{children:Ae("Gallery")}),(0,N.jsx)("div",{className:"filtersearch",children:(0,N.jsx)("form",{action:"",children:(0,N.jsx)("input",{type:"text",value:S,onInput:s=>(async s=>{w(s);let a={search:s,user_ids:[...q,O.id].join(", ")};try{var t=(await u.A.post(e+"getAllgallerySearch",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(t),be(),M(t)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}})(s.target.value),placeholder:Ae("Search_gallery")})})}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,N.jsxs)(l.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,N.jsx)(h.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h4",{children:Ae("Home")})})]}),(0,N.jsxs)(l.N_,{to:"/allgallery",className:"d-flex gap-2 align-items-center filterlist "+(0===R?"active":""),onClick:()=>ge(0),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:i,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:Ae("All_images")})})]}),(0,N.jsxs)(l.N_,{to:"/gallery",className:"d-flex gap-2 align-items-center filterlist "+(1===R?"active":""),onClick:()=>ge(1),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:d,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:Ae("Your_images")})})]}),(0,N.jsx)("div",{className:"newebentbtn d-block",children:(0,N.jsx)("button",{type:"button",onClick:()=>{je(!0),document.body.style.overflowY="hidden"},children:Ae("Upload_new_images")})}),(0,N.jsx)("hr",{className:"linehr"}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,N.jsx)("h6",{children:Ae("Filters")}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,N.jsxs)("div",{className:"listbox d-flex flex-column gap-3",children:[(0,N.jsxs)("label",{className:"cbox",children:[Ae("Men"),(0,N.jsx)("input",{type:"checkbox",name:"labels",onClick:ke,checked:B.includes("Male"),value:"Male"}),(0,N.jsx)("span",{className:"checkmark"})]}),(0,N.jsxs)("label",{className:"cbox",children:[Ae("Women"),(0,N.jsx)("input",{type:"checkbox",name:"labels",onClick:ke,checked:B.includes("Female"),value:"Female"}),(0,N.jsx)("span",{className:"checkmark"})]}),(0,N.jsxs)("label",{className:"cbox",children:[Ae("Couples"),(0,N.jsx)("input",{type:"checkbox",checked:B.includes("Couple"),onClick:ke,name:"labels",value:"Couple"}),(0,N.jsx)("span",{className:"checkmark"})]})]})})]})]})]})}),(0,N.jsx)("div",{className:"col-md-9",children:(0,N.jsx)("div",{className:"row gy-4",children:0===L.length?(0,N.jsx)("div",{className:"col-12 text-center",children:(0,N.jsx)("h2",{children:Ae("No_gallery_found")})}):L.map(((e,s)=>(0,N.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,N.jsxs)("div",{className:"position-relative search_content",children:[(0,N.jsx)("div",{className:"d-block searchimg h-100",onClick:()=>Se(e.id),children:e.image&&"string"===typeof e.image?(0,N.jsx)(g.A,{className:"w-100 h-100 object-fit-cover",url:e.image}):(0,N.jsx)("p",{children:Ae("No_avalibale_media")})}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2 searchgender_main",children:[(0,N.jsx)("div",{className:"d-block searchwomen flex-shrink-0",children:"Couple"===e.gender?(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex searchwomen justify-content-between",children:[(0,N.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}),(0,N.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"})]})}):"Male"===e.gender?(0,N.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}):"Female"===e.gender?(0,N.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"}):null}),(0,N.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,N.jsx)("button",{type:"button",className:"btnoption",onClick:()=>(e=>{Ee(e)})(s),children:(0,N.jsx)(x.aQx,{})}),qe===s&&(0,N.jsxs)("ul",{className:"popup-menu",children:[(0,N.jsx)("li",{onClick:()=>((e,s)=>{ee(e),de(s),ce(!0)})(e.id,e.image),children:Ae("MOve_to")}),(0,N.jsx)("li",{onClick:Re,children:Ae("Cancel")})]})]})]}),(0,N.jsx)("div",{className:"d-flex align-items-start gap-3 justify-content-between px-3 searchusere",children:(0,N.jsxs)("div",{className:"d-flex align-items-start justify-content-between w-100 gap-2",children:[(0,N.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,N.jsx)(l.N_,{className:"unamecolor",target:"_blank",to:`/friend/${e.user_id}`,children:e.username})," ",(0,N.jsx)("p",{children:"Couple"===e.gender?`${Ce(e.birthday_date)} & ${Ce(e.birthday_date_her)},`:e.birthday_date?`${Ce(e.birthday_date)},`:""})]}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2",children:null!==e.location&&(0,N.jsx)("p",{children:e.location})})]})})]})},s)))})})]})})}),(0,N.jsx)(c.E,{isOpen1:ve,onClose1:()=>{ye(!1),document.body.style.overflowY="auto"},seperateGallerydetail:Y,UserDetail:T,LoginData:O,getUserfav:async()=>{Se(G)},GalleryCommets:W,getCommentPost:async()=>{Se(G)},GalleryIdDetailGet:G,previousId:V,nextId:P,getgallerydetialnext:()=>{Se(P)},getgallerydetialprev:()=>{Se(V)}}),(0,N.jsx)(n.j,{isOpen:xe,onClose:()=>{je(!1),document.body.style.overflowY="auto"},LoginData:O,notification:async()=>{k((e=>!e))},visibleAlbums:De}),(0,N.jsx)(f.x,{isOpen:Le,onClose:()=>{Me(!1),document.body.style.overflowY="auto"},LoginData:O,closepopup11:async()=>{Me(!1),document.body.style.overflowY="auto"}}),(0,N.jsx)(r.w,{}),(0,N.jsxs)(j.A,{show:ne,className:"edit_admin",onHide:Ie,children:[(0,N.jsx)(j.A.Header,{closeButton:!0,children:(0,N.jsxs)(j.A.Title,{className:"textcolor",children:[" ",Ae("Upload")]})}),(0,N.jsx)(j.A.Body,{children:(0,N.jsxs)("form",{onSubmit:async()=>{const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null;let t={file:ie,id:oe,user_id:a.id,galleryIdd:Z};try{const s=await u.A.post(e+"gallerymovetoAlbum",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});he(!0),me(s.data.message),setTimeout((()=>{he(!1),ce(!1)}),1e3)}catch(l){l.response?console.error("Server Response Error:",l.response.data):l.request?console.error("No Response Received:",l.request):console.error("Request Error:",l.message)}},method:"post",action:"javascript:void(0)",children:[(0,N.jsxs)("div",{className:"row g-3",children:[" ",(0,N.jsxs)("div",{className:"col-md-12",children:[(0,N.jsxs)("label",{className:"stextlabel text-dark",children:[Ae("MOve_to")," *"]}),(0,N.jsxs)("select",{required:!0,className:"form-control",onChange:e=>{re(e.target.value)},name:"move_to",children:[(0,N.jsx)("option",{value:"",children:"--Select--"}),De.map(((e,s)=>(0,N.jsx)("option",{value:e.id,children:e.name},s)))]})]})]}),(0,N.jsx)("span",{className:"text-success",children:se}),te&&(0,N.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,N.jsxs)("span",{className:"visually-hidden",children:[Ae("loading"),"..."]})}),(0,N.jsxs)(j.A.Footer,{children:[(0,N.jsx)(v.A,{variant:"secondary",onClick:Ie,children:Ae("Close")}),(0,N.jsx)(v.A,{type:"submit",style:{background:"#6e75a8"},className:"",children:Ae("Move")})]})]})})]})]})}}}]);
//# sourceMappingURL=9760.68c8ca3a.chunk.js.map