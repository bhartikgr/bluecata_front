"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[2590],{72590:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(65043),a=s(58786),o=s(94060),r=s(44710),l=(s(38421),s(53579)),i=s(27836),c=s(45394),d=s(86213),m=s(60184),u=s(74754),p=s(73216),b=s(25581),f=s(70579);function h(){const e=(0,p.Zp)(),t=localStorage.getItem("SignatoryLoginData"),[s,h]=(0,n.useState)(!1),x=JSON.parse(t),[g,y]=(0,n.useState)([]),[j,v]=(0,n.useState)(!1),[w,C]=(0,n.useState)(""),[N,S]=(0,n.useState)(""),[k,_]=(0,n.useState)("");var R=b.J+"api/user/investor/";document.title="Investor Record Round Confirm";const{id:A}=(0,p.g)();(0,n.useEffect)((()=>{$(),M()}),[]);const $=async()=>{const t={company_id:x.companies[0].id,id:A};try{const s=await d.A.post(R+"checkInvestorRecordround",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});0===s.data.results.length?e("/crm/investorreport"):S(s.data.results[0])}catch(s){console.error("Error generating summary",s)}},[D,O]=(0,n.useState)(!1),[I,z]=(0,n.useState)(""),[J,L]=(0,n.useState)(null),[E,T]=(0,n.useState)(!1),M=async()=>{const e={company_id:x.companies[0].id,id:A};try{const t=await d.A.post(R+"getInvestorReportCapitalRound",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});y(t.data.results)}catch(t){console.error("Error generating summary",t)}},F=[{name:"Share Class (Name of Round)",selector:e=>e.shareClassType+" "+e.nameOfRound,sortable:!0},{name:"Number of Shares",selector:e=>Number(e.roundsize).toLocaleString("en-US"),sortable:!0},{name:"Status of Round",selector:e=>Number(e.issuedshares).toLocaleString("en-US"),sortable:!0},{name:"Date of Report",selector:e=>U(e.created_at),sortable:!0},{name:"Date Viewed",selector:e=>e.date_view?U(e.date_view):"N/A",sortable:!0},{name:"View",cell:e=>(0,f.jsx)("div",{className:"d-flex gap-2",children:(0,f.jsxs)("button",{type:"button",onClick:()=>W(e),rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success fw-bold",title:"View Detail",children:[(0,f.jsx)(m.Ny1,{})," view"]})}),ignoreRowClick:!0,allowOverflow:!0,button:!0},{name:"Actions",cell:e=>(0,f.jsx)("div",{className:"d-flex gap-2",children:"Confirm"===e.report_status?(0,f.jsxs)("span",{className:"text-success fw-bold",title:"Confirmed",children:[(0,f.jsx)(m.CMH,{})," Confirmed"]}):(0,f.jsx)("button",{type:"button",onClick:()=>V(e,"Confirm"),rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success fw-bold",title:"Confirm Report",children:"Confirm"})}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],V=async(e,t)=>{const s={company_id:x.companies[0].id,id:A,dataa:e,types:t};try{const e=await d.A.post(R+"InvestorAuthorizeConfimataion",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});M(),_(e.data.message),setTimeout((()=>{_("")}),3500)}catch(n){console.error("Error generating summary",n)}},W=e=>{h(!0),C(e)},[H,Y]=(0,n.useState)(""),K=g.filter((e=>{const t=H.toLowerCase();return`\n    ${e.nameOfRound||""}\n    ${e.shareClassType||""}\n     ${e.roundsize||""}\n    ${e.issuedshares||""}\n    ${e.description||""}\n    ${e.instrumentType||""}\n    ${e.customInstrument||""}\n    ${e.roundsize||""}\n    ${e.issuedshares||""}\n    ${e.liquidationpreferences||""}\n  `.toLowerCase().includes(t)}));function U(e){const t=new Date(e);if(isNaN(t))return"";const s=t.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a=t.getFullYear();return`${n} ${s}${(e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)}, ${a}`}const[q,G]=(0,n.useState)(!1),[Z,B]=(0,n.useState)(!1);let P=[];if(N.kyc_document)if(Array.isArray(N.kyc_document))try{P=JSON.parse(N.kyc_document[0])}catch(X){P=N.kyc_document}else try{P=JSON.parse(N.kyc_document)}catch(X){P=[N.kyc_document]}const Q=b.J+"api/upload/investor/inv_"+N.investor_id;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.mO,{children:(0,f.jsx)("div",{className:"fullpage d-block",children:(0,f.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,f.jsx)(r.A,{isCollapsed:q,setIsCollapsed:G}),(0,f.jsxs)("div",{className:"global_view "+(q?"global_view_col":""),children:[(0,f.jsx)(o.A,{}),(0,f.jsx)(l.$K,{className:"d-block p-md-4 p-3",children:(0,f.jsxs)("div",{className:"container-fluid",children:[k&&(0,f.jsx)("p",{className:j?"mt-3 error_pop":"success_pop mt-3",children:k}),(0,f.jsx)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3",children:(0,f.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Investor Report (Capital Round Documents)"})}),(0,f.jsxs)("div",{className:"d-flex flex-column justify-content-between align-items-start tb-box",children:[(0,f.jsx)("style",{children:"\n                        .sc-fGlNzy.ewfgjA.datatb-report {\n                          overflow: visible !important;\n                        }\n                      "}),(0,f.jsx)(a.Ay,{customStyles:{table:{style:{overflow:"visible !important",minWidth:"100%",boxShadow:"0px 3px 12px rgb(0 0 0 / 16%)",borderRadius:"12px"}},headCells:{style:{backgroundColor:"#efefef !important",fontWeight:"600",fontSize:"0.9rem",color:"#000 !important",whiteSpace:"nowrap"}},cells:{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",backgroundColor:"#fff !important"}},rows:{style:{fontSize:"0.8rem",fontWeight:"500","&:hover":{backgroundColor:"#e8f0fe"}},stripedStyle:{backgroundColor:"#f4f6f8"}},pagination:{style:{backgroundColor:"#fafafa",padding:"12px 16px"}}},conditionalRowStyles:[{when:e=>!0,style:{"&:hover":{backgroundColor:"var(--lightRed)"}}}],columns:F,className:"datatb-report",data:K,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]})})]})]})})}),s&&(0,f.jsx)(u.A,{onClose:()=>h(!1),recordViewData:w}),Z&&(0,f.jsx)("div",{className:"main_popup-overlay",children:(0,f.jsxs)(i.EL,{children:[(0,f.jsxs)("div",{className:"d-flex align-items-center gap-3 mb-4 justify-content-between",children:[(0,f.jsx)(i.wt,{children:"View KYC/AML Documentation"}),(0,f.jsx)("button",{type:"button",className:"close_btn_global","aria-label":"Close",onClick:()=>B(!1),children:(0,f.jsx)(c.LwM,{size:24})})]}),(0,f.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"60vh",overflowY:"auto"},children:P.map(((e,t)=>{const s=`${Q}/${e}`;return(e=>/\.(jpg|jpeg|png|gif)$/i.test(e))(e)?(0,f.jsx)("img",{src:s,alt:`Document ${t+1}`,style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",padding:"4px",background:"#f9f9f9"}},t):(0,f.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",style:{margin:"5px"},children:["Open Document ",t+1]},t)}))}),(0,f.jsx)(i.e2,{children:(0,f.jsx)(i.IY,{onClick:()=>B(!1),className:"close_btn w-fit",children:"Close"})})]})}),D&&(0,f.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:(0,f.jsx)("div",{className:"modal-dialog",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header flex-column align-items-start",children:[(0,f.jsx)("h5",{className:"modal-title mb-0",children:"Reason for Not Confirm"}),(0,f.jsx)("small",{className:"text-muted",children:"(Series C Extension ssss)"}),(0,f.jsx)("button",{type:"button",className:"btn-close position-absolute end-0 me-2",onClick:()=>O(!1)})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"Enter reason...",value:I,onChange:e=>z(e.target.value)})}),(0,f.jsxs)("div",{className:"modal-footer",children:[(0,f.jsx)("button",{className:"btn btn-secondary",onClick:()=>O(!1),children:"Cancel"}),(0,f.jsx)("button",{className:"btn btn-danger",onClick:()=>V(J,"Not Confirm",I),children:"Submit"})]})]})})})]})})}}}]);
//# sourceMappingURL=2590.8488fee7.chunk.js.map