"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[1929],{1929:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var l=a(65043),r=a(94060),n=a(44710),t=(a(38421),a(53579)),d=a(86213),c=a(73216),i=a(25581),o=a(17304),h=a(6058),m=a(70579);function x(){var e,s;const a=(0,c.Zp)(),o=localStorage.getItem("SignatoryLoginData"),x=JSON.parse(o),u=i.J+"api/user/capitalround/";document.title="Round Cap Table";const{id:j}=(0,c.g)(),[p,b]=(0,l.useState)(null),[N,v]=(0,l.useState)(null),[g,f]=(0,l.useState)(!0),[y,w]=(0,l.useState)(null),[S,P]=(0,l.useState)(!1);(0,l.useEffect)((()=>{T()}),[j]);const T=async()=>{f(!0),w(null);let e={company_id:x.companies[0].id,round_id:j};try{const s=await d.A.post(u+"getRoundCapTableSingleRecord",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log(s.data.capTable),s.data.success?(b(s.data.capTable),v(s.data.round)):w(s.data.message||"Failed to load cap table")}catch(l){var s,a;w((null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Error loading cap table data"),console.error("Error:",l)}finally{f(!1)}},I=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";const a=(null===s||void 0===s?void 0:s.trim().split(" ")[0])||"USD",l=["USD","CAD","EUR","GBP","INR","AUD","JPY"].includes(a.toUpperCase())?a.toUpperCase():"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:l,minimumFractionDigits:2}).format(e||0)}catch(y){return`${l} ${parseFloat(e||0).toFixed(2)}`}},C=e=>new Intl.NumberFormat("en-US").format(e||0),O=e=>`${(e||0).toFixed(2)}%`,k=e=>{let{chartData:s}=e;return(0,m.jsx)("div",{style:{height:"300px"},children:(0,m.jsx)(h.yP,{data:s,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Fully Diluted Ownership %"}},scales:{y:{beginAtZero:!0,max:100}}}})})};return(0,m.jsx)(t.mO,{children:(0,m.jsx)("div",{className:"fullpage d-block",children:(0,m.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,m.jsx)(n.A,{isCollapsed:S,setIsCollapsed:P}),(0,m.jsxs)("div",{className:"global_view "+(S?"global_view_col":""),children:[(0,m.jsx)(r.A,{}),(0,m.jsx)(t.$K,{className:"d-block p-md-4 p-3",children:(0,m.jsxs)("div",{className:"container-fluid",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,m.jsx)("h2",{children:"Capitalization Table"}),(0,m.jsx)("button",{className:"btn btn-secondary",onClick:()=>a(-1),children:"Back to Rounds"})]}),g&&(0,m.jsxs)("div",{className:"text-center py-5",children:[(0,m.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,m.jsx)("p",{className:"mt-3",children:"Loading cap table data..."})]}),y&&(0,m.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,m.jsx)("strong",{children:"Error:"})," ",y]}),!g&&!y&&p&&(0,m.jsx)(m.Fragment,{children:null!==(e=p.round_type)&&void 0!==e&&e.includes("Round 0")||null!==(s=p.round_type)&&void 0!==s&&s.includes("Incorporation")?p?p.error?(0,m.jsxs)("div",{className:"alert alert-danger",children:[(0,m.jsx)("h5",{children:"Data Error"}),(0,m.jsx)("p",{children:p.error}),(0,m.jsx)("p",{className:"mb-0",children:"Please check Round 0 data structure. Founder allocation data is required."})]}):(0,m.jsx)("div",{className:"cap-table-section",children:(0,m.jsxs)("div",{className:"card mb-4",children:[(0,m.jsxs)("div",{className:"card-header bg-primary text-white",children:[(0,m.jsx)("h4",{className:"mb-0",children:p.roundType}),(0,m.jsx)("small",{className:"opacity-75",children:"Company Incorporation - Founder Shares Allocation"})]}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("h5",{className:"mb-3",children:"Platform Inputs"}),(0,m.jsxs)("div",{className:"row mb-4",children:[(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Founder Share Allocation"}),(0,m.jsxs)("h6",{children:[p.calculations.founderCount," Founders"]})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Share Types"}),(0,m.jsx)("h6",{children:"Common Shares"})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Price Per Share"}),(0,m.jsx)("h6",{children:I(p.calculations.sharePrice,p.currency)})]})})]}),(0,m.jsx)("h5",{className:"mb-3",children:"Platform Outputs"}),(0,m.jsxs)("div",{className:"row mb-4",children:[(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-success text-white",children:[(0,m.jsx)("small",{children:"Total Shares Issued"}),(0,m.jsx)("h5",{children:C(p.calculations.totalSharesIssued)})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-info text-white",children:[(0,m.jsx)("small",{children:"Total Company Value"}),(0,m.jsx)("h5",{children:I(p.calculations.totalValue,p.currency)})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-warning text-dark",children:[(0,m.jsx)("small",{children:"Founder Count"}),(0,m.jsx)("h5",{children:p.calculations.founderCount})]})})]}),(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)(k,{chartData:p.chartData})}),(0,m.jsx)("h5",{className:"mt-4 mb-3",children:"Founder Share Allocation"}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table table-striped table-hover",children:[(0,m.jsx)("thead",{className:"table-dark",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Founder"}),(0,m.jsx)("th",{children:"Share Type"}),(0,m.jsx)("th",{children:"Voting Rights"}),(0,m.jsx)("th",{className:"text-end",children:"Shares"}),(0,m.jsx)("th",{className:"text-end",children:"Ownership %"}),(0,m.jsx)("th",{className:"text-end",children:"Value"})]})}),(0,m.jsxs)("tbody",{children:[p.shareholders.map(((e,s)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsxs)("strong",{children:["F",s+1]})}),(0,m.jsx)("td",{children:(0,m.jsxs)("span",{className:"badge bg-secondary text-capitalize",children:[e.shareType||"common"," shares"]})}),(0,m.jsx)("td",{children:(0,m.jsx)("span",{className:"badge "+("voting"===e.votingRights?"bg-success":"bg-warning"),children:"voting"===e.votingRights?"Voting":"Non-Voting"})}),(0,m.jsx)("td",{className:"text-end",children:C(e.shares)}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("span",{className:"badge bg-info",children:O(e.ownership)})}),(0,m.jsx)("td",{className:"text-end",children:I(e.value,p.currency)})]},s))),(0,m.jsxs)("tr",{className:"table-secondary fw-bold",children:[(0,m.jsx)("td",{colSpan:"3",children:"TOTAL"}),(0,m.jsx)("td",{className:"text-end",children:C(p.calculations.totalSharesIssued)}),(0,m.jsx)("td",{className:"text-end",children:O(100)}),(0,m.jsx)("td",{className:"text-end",children:I(p.calculations.totalValue,p.currency)})]})]})]})}),(0,m.jsxs)("div",{className:"row mt-4",children:[(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"alert alert-info",children:[(0,m.jsx)("h6",{className:"alert-heading",children:"\ud83d\udcca Platform Inputs"}),(0,m.jsxs)("ul",{className:"mb-0 small",children:[(0,m.jsx)("li",{children:"Number of shares issued to each founder"}),(0,m.jsx)("li",{children:"Type of shares as per incorporation documents"}),(0,m.jsx)("li",{children:"Price per share as per incorporation"})]})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"alert alert-success",children:[(0,m.jsx)("h6",{className:"alert-heading",children:"\ud83d\udcc8 Platform Outputs"}),(0,m.jsxs)("ul",{className:"mb-0 small",children:[(0,m.jsx)("li",{children:"Total number of shares issued"}),(0,m.jsx)("li",{children:"Ownership % based on shares issued"}),(0,m.jsx)("li",{children:"Total company value at incorporation"})]})]})})]}),(0,m.jsxs)("div",{className:"alert alert-warning mt-3",children:[(0,m.jsx)("h6",{className:"alert-heading",children:"\u26a0\ufe0f Important Note"}),(0,m.jsx)("p",{className:"mb-2 small",children:(0,m.jsxs)("strong",{children:["Total shares (",C(p.calculations.totalSharesIssued),") will carry forward to Round 1."]})}),(0,m.jsx)("p",{className:"mb-0 small",children:(0,m.jsxs)("strong",{children:["Price per share (",I(p.calculations.sharePrice,p.currency),") and company valuation (",I(p.calculations.totalValue,p.currency),") will NOT carry over to investment rounds."]})})]})]})]})}):null:(()=>{if(!p||!p.calculations)return null;const e=p.calculations,s=p.currency||"USD";return p.error?(0,m.jsxs)("div",{className:"alert alert-danger",children:[(0,m.jsx)("h5",{children:"Calculation Error"}),(0,m.jsx)("p",{children:p.error}),(0,m.jsx)("p",{className:"mb-0",children:"Please ensure the investment round has valid Investment Size and Pre-Money Valuation."})]}):(0,m.jsx)("div",{className:"cap-table-section",children:(0,m.jsxs)("div",{className:"card mb-4",children:[(0,m.jsxs)("div",{className:"card-header bg-success text-white",children:[(0,m.jsx)("h4",{className:"mb-0",children:p.roundType}),(0,m.jsx)("small",{className:"opacity-75",children:"Investment Round - Cap Table Calculations"})]}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("h5",{className:"mb-3",children:"Platform Inputs"}),(0,m.jsxs)("div",{className:"row mb-4",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Investment Size"}),(0,m.jsx)("h5",{children:I(e.investmentSize,s)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Pre-Money Valuation"}),(0,m.jsx)("h5",{children:I(e.preMoneyValuation,s)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Option Pool %"}),(0,m.jsx)("h5",{children:O(e.optionPoolPercent)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-light",children:[(0,m.jsx)("small",{className:"text-muted",children:"Liquidation Multiple"}),(0,m.jsxs)("h5",{children:[e.liquidationMultiple,"X"]})]})})]}),(0,m.jsx)("h5",{className:"mb-3",children:"Platform Outputs"}),(0,m.jsxs)("div",{className:"row mb-4",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-primary text-white",children:[(0,m.jsx)("small",{children:"Post-Money Valuation"}),(0,m.jsx)("h5",{children:I(e.postMoneyValuation,s)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-info text-white",children:[(0,m.jsx)("small",{children:"Investor Ownership %"}),(0,m.jsx)("h5",{children:O(e.investorOwnershipPercent)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-warning text-dark",children:[(0,m.jsx)("small",{children:"Share Price"}),(0,m.jsx)("h5",{children:I(e.sharePrice,s)})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded bg-success text-white",children:[(0,m.jsx)("small",{children:"New Shares Issued"}),(0,m.jsx)("h5",{children:C(e.newShares)})]})})]}),(0,m.jsx)("h5",{className:"mb-3",children:"Share Breakdown"}),(0,m.jsxs)("div",{className:"row mb-4",children:[(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded",children:[(0,m.jsx)("small",{className:"text-muted",children:"Round 0 Total Shares"}),(0,m.jsx)("h6",{children:C(e.roundZeroTotalShares)})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded",children:[(0,m.jsx)("small",{className:"text-muted",children:"Option Pool Shares"}),(0,m.jsx)("h6",{children:C(e.optionPoolShares)})]})}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"info-box p-3 border rounded",children:[(0,m.jsx)("small",{className:"text-muted",children:"Post-Investment Total"}),(0,m.jsx)("h6",{children:C(e.postInvestmentTotalShares)})]})})]}),(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)(k,{chartData:p.chartData})}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("h5",{className:"mb-3",children:"Pre-Investment Cap Table"}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table table-sm table-striped",children:[(0,m.jsx)("thead",{className:"table-dark",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Shareholder"}),(0,m.jsx)("th",{className:"text-end",children:"Shares"}),(0,m.jsx)("th",{className:"text-end",children:"Ownership %"})]})}),(0,m.jsxs)("tbody",{children:[p.shareholders.filter((e=>"Investor"!==e.type)).map(((e,s)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)("small",{children:e.name})}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("small",{children:C(e.shares)})}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("span",{className:"badge bg-secondary",children:O(e.preInvestmentOwnership||e.ownership)})})]},s))),(0,m.jsxs)("tr",{className:"table-secondary fw-bold",children:[(0,m.jsx)("td",{children:"TOTAL"}),(0,m.jsx)("td",{className:"text-end",children:C(e.preSeedTotalShares)}),(0,m.jsx)("td",{className:"text-end",children:O(100)})]})]})]})}),(0,m.jsx)("div",{className:"alert alert-info mt-2",children:(0,m.jsxs)("small",{children:[(0,m.jsx)("strong",{children:"Pre-Money Valuation:"})," ",I(e.preMoneyValuation,s)]})})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("h5",{className:"mb-3",children:"Post-Investment Cap Table"}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table table-sm table-striped",children:[(0,m.jsx)("thead",{className:"table-dark",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Shareholder"}),(0,m.jsx)("th",{className:"text-end",children:"Shares"}),(0,m.jsx)("th",{className:"text-end",children:"Ownership %"}),(0,m.jsx)("th",{className:"text-end",children:"Value"})]})}),(0,m.jsxs)("tbody",{children:[p.shareholders.map(((e,a)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsxs)("small",{children:[e.name,"Investor"===e.type&&(0,m.jsx)("span",{className:"badge bg-success ms-1",children:"New"})]})}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("small",{children:C(e.shares)})}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("span",{className:"badge "+("Founder"===e.type?"bg-primary":"Options Pool"===e.type?"bg-warning":"bg-success"),children:O(e.ownership)})}),(0,m.jsx)("td",{className:"text-end",children:(0,m.jsx)("small",{children:I(e.value,s)})})]},a))),(0,m.jsxs)("tr",{className:"table-secondary fw-bold",children:[(0,m.jsx)("td",{children:"TOTAL"}),(0,m.jsx)("td",{className:"text-end",children:C(e.postInvestmentTotalShares)}),(0,m.jsx)("td",{className:"text-end",children:O(100)}),(0,m.jsx)("td",{className:"text-end",children:I(e.postMoneyValuation,s)})]})]})]})}),(0,m.jsx)("div",{className:"alert alert-success mt-2",children:(0,m.jsxs)("small",{children:[(0,m.jsx)("strong",{children:"Post-Money Valuation:"})," ",I(e.postMoneyValuation,s)]})})]})]})]})]})})})()}),!g&&!y&&!p&&(0,m.jsx)("div",{className:"alert alert-warning",role:"alert",children:"No cap table data available for this round."})]})})]})]})})})}o.t1.register(o.PP,o.kc,o.E8,o.hE,o.m_,o.s$)},6058:(e,s,a)=>{a.d(s,{Fq:()=>u,yP:()=>x});var l=a(65043),r=a(17304);const n="label";function t(e,s){"function"===typeof e?e(s):e&&(e.current=s)}function d(e,s){e.labels=s}function c(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const l=[];e.datasets=s.map((s=>{const r=e.datasets.find((e=>e[a]===s[a]));return r&&s.data&&!l.includes(r)?(l.push(r),Object.assign(r,s),r):{...s}}))}function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const a={labels:[],datasets:[]};return d(a,e.labels),c(a,e.datasets,s),a}function o(e,s){const{height:a=150,width:n=300,redraw:o=!1,datasetIdKey:h,type:m,data:x,options:u,plugins:j=[],fallbackContent:p,updateMode:b,...N}=e,v=(0,l.useRef)(null),g=(0,l.useRef)(null),f=()=>{v.current&&(g.current=new r.t1(v.current,{type:m,data:i(x,h),options:u&&{...u},plugins:j}),t(s,g.current))},y=()=>{t(s,null),g.current&&(g.current.destroy(),g.current=null)};return(0,l.useEffect)((()=>{!o&&g.current&&u&&function(e,s){const a=e.options;a&&s&&Object.assign(a,s)}(g.current,u)}),[o,u]),(0,l.useEffect)((()=>{!o&&g.current&&d(g.current.config.data,x.labels)}),[o,x.labels]),(0,l.useEffect)((()=>{!o&&g.current&&x.datasets&&c(g.current.config.data,x.datasets,h)}),[o,x.datasets]),(0,l.useEffect)((()=>{g.current&&(o?(y(),setTimeout(f)):g.current.update(b))}),[o,u,x.labels,x.datasets,b]),(0,l.useEffect)((()=>{g.current&&(y(),setTimeout(f))}),[m]),(0,l.useEffect)((()=>(f(),()=>y())),[]),l.createElement("canvas",{ref:v,role:"img",height:a,width:n,...N},p)}const h=(0,l.forwardRef)(o);function m(e,s){return r.t1.register(s),(0,l.forwardRef)(((s,a)=>l.createElement(h,{...s,ref:a,type:e})))}const x=m("bar",r.A6),u=m("pie",r.P$)}}]);
//# sourceMappingURL=1929.3b0c9b90.chunk.js.map