{"version":3,"file":"static/js/1929.bdaf8c31.chunk.js","mappings":"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","sources":["pages/User/Investor/RecordRoundCaptable.jsx","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TopBar from \"../../../components/Users/TopBar\";\r\nimport ModuleSideNav from \"../../../components/Users/ModuleSideNav.jsx\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  SectionWrapper,\r\n  Wrapper,\r\n} from \"../../../components/Styles/MainHeadStyles.js\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { API_BASE_URL } from \"../../../config/config.js\";\r\n\r\n\r\nimport { Pie, Bar } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement // Pie chart   add \r\n} from 'chart.js';\r\n\r\n//  Register all required components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement // Pie chart  \r\n);\r\nexport default function RecordRoundCaptable() {\r\n  const navigate = useNavigate();\r\n  const storedUsername = localStorage.getItem(\"SignatoryLoginData\");\r\n  const userLogin = JSON.parse(storedUsername);\r\n  const API_URL_CAPTABLE = API_BASE_URL + \"api/user/capitalround/\";\r\n  document.title = \"Round Cap Table\";\r\n  const { id } = useParams();\r\n\r\n  const [capTableData, setCapTableData] = useState(null);\r\n  const [roundData, setRoundData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isCollapsed, setIsCollapsed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    getCapTableData();\r\n  }, [id]);\r\n\r\n  const getCapTableData = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    let formData = {\r\n      company_id: userLogin.companies[0].id,\r\n      round_id: id,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        API_URL_CAPTABLE + \"getRoundCapTableSingleRecord\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (res.data.success) {\r\n        setCapTableData(res.data.capTable);\r\n        setRoundData(res.data.round);\r\n      } else {\r\n        setError(res.data.message || \"Failed to load cap table\");\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Error loading cap table data\");\r\n      console.error(\"Error:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const formatCurrency = (amount, currency = \"USD\") => {\r\n    // Clean currency code - remove spaces and symbols\r\n    const cleanCurrency = currency?.trim().split(\" \")[0] || \"USD\";\r\n\r\n    // Valid currency codes\r\n    const validCurrencies = [\"USD\", \"CAD\", \"EUR\", \"GBP\", \"INR\", \"AUD\", \"JPY\"];\r\n    const currencyCode = validCurrencies.includes(cleanCurrency.toUpperCase())\r\n      ? cleanCurrency.toUpperCase()\r\n      : \"USD\";\r\n\r\n    try {\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 2,\r\n      }).format(amount || 0);\r\n    } catch (error) {\r\n      // Fallback if currency is still invalid\r\n      return `${currencyCode} ${parseFloat(amount || 0).toFixed(2)}`;\r\n    }\r\n  };\r\n  const formatCurrencyPricePerShare = (amount = 0, currency = \"USD\") => {\r\n    // Clean currency code - remove spaces and symbols\r\n    const cleanCurrency = currency?.trim().split(\" \")[0] || \"USD\";\r\n\r\n    // Valid currency codes\r\n    const validCurrencies = [\"USD\", \"CAD\", \"EUR\", \"GBP\", \"INR\", \"AUD\", \"JPY\"];\r\n    const currencyCode = validCurrencies.includes(cleanCurrency.toUpperCase())\r\n      ? cleanCurrency.toUpperCase()\r\n      : \"USD\";\r\n\r\n    try {\r\n      // Parse amount to ensure it's a number\r\n      const numAmount = parseFloat(amount) || 0;\r\n\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 3, // Always show 3 decimal places\r\n        maximumFractionDigits: 3, // Exactly 3 decimal places, not more\r\n      }).format(numAmount);\r\n    } catch (error) {\r\n      // Fallback if currency is still invalid\r\n      return `${currencyCode} ${(parseFloat(amount) || 0).toFixed(3)}`;\r\n    }\r\n  };\r\n  const formatPriceThreeDecimal = (amount = 0) => {\r\n    try {\r\n      // Parse amount to ensure it's a number\r\n      const numAmount = parseFloat(amount) || 0;\r\n\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        minimumFractionDigits: 3, // Always show 3 decimal places\r\n        maximumFractionDigits: 3, // Exactly 3 decimal places\r\n      }).format(numAmount);\r\n    } catch (error) {\r\n      // Fallback\r\n      return (parseFloat(amount) || 0).toFixed(3);\r\n    }\r\n  };\r\n\r\n  const formatNumber = (num) => {\r\n    return new Intl.NumberFormat(\"en-US\").format(num || 0);\r\n  };\r\n\r\n  const formatPercentage = (percent) => {\r\n    // Convert to number if it's a string\r\n    const num = typeof percent === 'string' ? parseFloat(percent) : Number(percent);\r\n    return `${(!isNaN(num) ? num : 0).toFixed(2)}%`;\r\n  };\r\n  const RoundCapChart = ({ chartData }) => {\r\n    const options = {\r\n      responsive: true,\r\n      plugins: {\r\n        legend: { display: false },\r\n        title: { display: true, text: \"Fully Diluted Ownership %\" },\r\n      },\r\n      scales: {\r\n        y: { beginAtZero: true, max: 100 },\r\n      },\r\n    };\r\n\r\n    return (\r\n      <div style={{ height: \"300px\" }}>\r\n        <Bar data={chartData} options={options} />\r\n      </div>\r\n    );\r\n  };\r\n  const renderRoundZeroTable = () => {\r\n    if (!capTableData) return null;\r\n\r\n    // Check for error in Round 0 data\r\n    if (capTableData.error) {\r\n      return (\r\n        <div className=\"alert alert-danger\">\r\n          <h5>Data Error</h5>\r\n          <p>{capTableData.error}</p>\r\n          <p className=\"mb-0\">\r\n            Please check Round 0 data structure. Founder allocation data is required.\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small className=\"opacity-75\">Company Incorporation - Founder Shares Allocation</small>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* Platform Inputs Summary */}\r\n            <h5 className=\"mb-3\">Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Founder Share Allocation</small>\r\n                  <h6>{capTableData.calculations.founderCount} Founders</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Share Types</small>\r\n                  <h6>Common Shares</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Price Per Share</small>\r\n                  <h6>{formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Platform Outputs */}\r\n            <h5 className=\"mb-3\">Platform Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Total Shares Issued</small>\r\n                  <h5>{formatNumber(capTableData.calculations.totalSharesIssued)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Total Company Value</small>\r\n                  <h5>{formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>Founder Count</small>\r\n                  <h5>{capTableData.calculations.founderCount}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ownership Chart */}\r\n            <div className=\"mb-4\">\r\n              <RoundCapChart chartData={capTableData.chartData} />\r\n            </div>\r\n\r\n            {/* Founder Share Allocation Table - CLIENT EXAMPLE  according */}\r\n            <h5 className=\"mt-4 mb-3\">Founder Share Allocation</h5>\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-striped table-hover\">\r\n                <thead className=\"table-dark\">\r\n                  <tr>\r\n                    <th>Founder Name</th>\r\n                    <th>Email</th>\r\n                    <th>Phone</th>\r\n                    <th>Share Type</th>\r\n                    <th>Share Class</th>\r\n                    <th>Voting Rights</th>\r\n                    <th className=\"text-end\">Numbers of Shares</th>\r\n                    <th className=\"text-end\">Price Per Share</th>\r\n                    <th className=\"text-end\">Ownership %</th>\r\n                    <th className=\"text-end\">Value</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {capTableData.shareholders.map((sh, idx) => (\r\n                    <tr key={idx}>\r\n                      <td>\r\n                        <strong>\r\n                          {sh.firstName && sh.lastName ?\r\n                            `${sh.firstName} ${sh.lastName}` :\r\n                            `Founder ${idx + 1}`\r\n                          }\r\n                        </strong>\r\n                      </td>\r\n                      <td>\r\n                        {sh.email ? (\r\n                          <a href={`mailto:${sh.email}`} className=\"text-decoration-none\">\r\n                            {sh.email}\r\n                          </a>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {sh.phone ? (\r\n                          <a href={`tel:${sh.phone}`} className=\"text-decoration-none\">\r\n                            {sh.phone}\r\n                          </a>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <span className=\"badge bg-secondary text-capitalize\">\r\n                          {sh.shareType === 'common' ? 'Common Shares' :\r\n                            sh.shareType === 'preferred' ? 'Preferred Shares' :\r\n                              sh.shareType === 'other' && sh.customShareType ? sh.customShareType :\r\n                                'Common Shares'}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <span className=\"badge bg-light text-dark border\">\r\n                          {sh.shareClass === 'other' && sh.customShareClass ?\r\n                            sh.customShareClass :\r\n                            sh.shareClass || 'Class A'}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <span className={`badge ${sh.votingRights === 'voting' ? 'bg-success' : 'bg-warning'}`}>\r\n                          {sh.votingRights === 'voting' ? 'Voting' : 'Non-Voting'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-end\">{formatNumber(sh.shares)}</td>\r\n                      <td className=\"text-end\">\r\n                        {formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}\r\n                      </td>\r\n                      <td className=\"text-end\">\r\n                        <span className=\"badge bg-danger\" style={{ fontSize: '16px' }}>\r\n                          {formatPercentage(sh.ownership)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-end\">\r\n                        {formatCurrency(sh.value, capTableData.currency)}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n\r\n                  {/* Total Row */}\r\n                  <tr className=\"table-secondary fw-bold\">\r\n                    <td colSpan=\"6\">TOTAL</td>\r\n                    <td className=\"text-end\">\r\n                      {formatNumber(capTableData.calculations.totalSharesIssued)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatPercentage(100)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Additional Summary Information */}\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted\">Total Founders</h6>\r\n                    <h4 className=\"text-primary\">{capTableData.shareholders.length}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted\">Total Shares</h6>\r\n                    <h4 className=\"text-success\">{formatNumber(capTableData.calculations.totalSharesIssued)}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted\">Price Per Share</h6>\r\n                    <h4 className=\"text-info\">\r\n                      {formatCurrencyPricePerShare(\r\n                        capTableData.calculations.sharePrice,\r\n                        capTableData.currency\r\n                      )}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted\">Total Value</h6>\r\n                    <h4 className=\"text-warning\">\r\n                      {formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-info\">\r\n                  <h6 className=\"alert-heading\"> Platform Inputs</h6>\r\n                  <ul className=\"mb-0 small\">\r\n                    <li>Number of shares issued to each founder</li>\r\n                    <li>Type of shares as per incorporation documents</li>\r\n                    <li>Price per share as per incorporation</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-success\">\r\n                  <h6 className=\"alert-heading\"> Platform Outputs</h6>\r\n                  <ul className=\"mb-0 small\">\r\n                    <li>Total number of shares issued</li>\r\n                    <li>Ownership % based on shares issued</li>\r\n                    <li>Total company value at incorporation</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Carry Over Information - CLIENT REQUIREMENTS  according */}\r\n            <div className=\"alert alert-warning mt-3\">\r\n              <h6 className=\"alert-heading\"> Important Note</h6>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Total shares ({formatNumber(capTableData.calculations.totalSharesIssued)}) will carry forward to Round 1.</strong>\r\n              </p>\r\n              <p className=\"mb-0 small\">\r\n                <strong>Price per share ({formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}) and company valuation ({formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}) will NOT carry over to investment rounds.</strong>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSeedRoundTable = () => {\r\n\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    if (capTableData.error) {\r\n      return (\r\n        <div className=\"alert alert-danger\">\r\n          <h5>Calculation Error</h5>\r\n          <p>{capTableData.error}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Check if this is a Convertible Note round\r\n    const isConvertibleNote = capTableData.isConvertibleNoteRound ||\r\n      capTableData.instrumentType === \"Convertible Note\";\r\n\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-success text-white\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small className=\"opacity-75\">\r\n              {isConvertibleNote ? \"Convertible Note Round - Cap Table Calculations\" : \"Seed Round - Cap Table Calculations\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* Platform Inputs */}\r\n            <h5 className=\"mb-3\">Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(calc.preMoneyValuation, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Option Pool %</small>\r\n                  <h5>{formatPercentage(calc.optionPoolPercent)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Round Type</small>\r\n                  <h5>{isConvertibleNote ? \"Convertible Note\" : \"Equity Round\"}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Convertible Note Specific Inputs */}\r\n            {isConvertibleNote && calc.valuationCap && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                    <small className=\"text-white\">Valuation Cap</small>\r\n                    <h6>{formatCurrency(calc.valuationCap, currency)}</h6>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                    <small>Discount Rate</small>\r\n                    <h6>{formatPercentage(calc.discountRate)}</h6>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                    <small>Interest Rate</small>\r\n                    <h6>{formatPercentage(calc.interestRate)}</h6>\r\n                  </div>\r\n                </div>\r\n                {/* <div className=\"col-md-3\">\r\n                  <div className=\"info-box p-3 border rounded bg-dark text-white\">\r\n                    <small>Conversion Trigger</small>\r\n                    <h6>{calc.convertibleTrigger || \"QUALIFIED_FINANCING\"}</h6>\r\n                  </div>\r\n                </div> */}\r\n              </div>\r\n            )}\r\n\r\n            {/* Platform Outputs */}\r\n            <h5 className=\"mb-3\">Platform Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-primary text-white\">\r\n                  <small>Post-Money Valuation</small>\r\n                  <h6>{formatCurrency(calc.postMoneyValuation, currency)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Post-Investment # Shares</small>\r\n                  <h6>{formatNumber(calc.postInvestmentTotalShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>New Shares Issued</small>\r\n                  <h6>{formatPriceThreeDecimal(calc.newShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>\r\n                    {isConvertibleNote ? \"Theoretical Share Price\" : \"Share Price\"}\r\n                  </small>\r\n                  <h6>{formatCurrencyPricePerShare(calc.sharePrice, currency)}</h6>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Conditional Investor Ownership Display */}\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                  <small>\r\n                    {isConvertibleNote ? \"Note Investment\" : \"Investor Ownership\"}\r\n                  </small>\r\n                  <h6>\r\n                    {isConvertibleNote\r\n                      ? formatCurrency(calc.totalNoteInvestment || 0, currency)\r\n                      : formatPercentage(calc.investorOwnershipPercent)\r\n                    }\r\n                  </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-dark text-white\">\r\n                  <small>Option Pool</small>\r\n                  <h6>{formatNumber(calc.optionPoolShares)} shares</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Available for Investment Display */}\r\n            {isConvertibleNote && calc.availableForInvestment > 0 && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"alert alert-danger\">\r\n                    <h6 className=\"alert-heading\"> Available for Investment</h6>\r\n                    <p className=\"mb-0\">\r\n                      <strong>{formatCurrency(calc.availableForInvestment, currency)}</strong> remaining in this convertible note round.\r\n                      {calc.totalNoteInvestment > 0 && (\r\n                        <span> ({formatCurrency(calc.totalNoteInvestment, currency)} already committed)</span>\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Ownership Chart */}\r\n            <div className=\"mb-4\">\r\n              <RoundCapChart chartData={capTableData.chartData} />\r\n            </div>\r\n\r\n            {/* ========== PRE-SEED CAP TABLE ========== */}\r\n            <div className=\"row mb-5\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header bg-primary text-white\">\r\n                    <h5 className=\"mb-0\">Pre-Seed Cap Table</h5>\r\n                    <small>(# shares, Ownership %, Currency Value)</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered table-hover\">\r\n                        <thead className=\"table-dark\">\r\n                          <tr>\r\n                            <th>Shareholder</th>\r\n                            <th className=\"text-center\">Contact Info</th>\r\n                            <th className=\"text-center\">Common Shares</th>\r\n                            <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                            <th className=\"text-center\">Currency Value</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {capTableData.preSeedShareholders && capTableData.preSeedShareholders.length > 0 ? (\r\n                            capTableData.preSeedShareholders.map((sh, idx) => (\r\n                              <tr key={idx}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className=\"text-danger\">{sh.name}</strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small fw-bold text-dark\">{sh.fullName}</div>\r\n                                    )}\r\n                                    {sh.type === \"Founder\" && (\r\n                                      <span className=\"badge bg-success mt-1\">Founder</span>\r\n                                    )}\r\n                                    {sh.type === \"Options Pool\" && (\r\n                                      <span className=\"badge bg-warning text-dark mt-1\">Option Pool</span>\r\n                                    )}\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"text-muted mb-1\">\r\n                                       {sh.email}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.phone && sh.phone !== \"-\" && (\r\n                                    <div className=\"text-muted\">\r\n                                       {sh.phone}\r\n                                    </div>\r\n                                  )}\r\n                                  {(!sh.email || sh.email === \"-\") && (!sh.phone || sh.phone === \"-\") && (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-danger\" : \"bg-warning text-white\"}`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))\r\n                          ) : (\r\n                            <tr>\r\n                              <td colSpan=\"5\" className=\"text-center text-danger\">\r\n                                <strong> No shareholders data available</strong>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* TOTAL ROW */}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td colSpan=\"2\">TOTAL</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.preSeedTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                            <td className=\"text-center\">{formatCurrency(calc.preMoneyValuation, currency)}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    {/* Summary Cards */}\r\n                    <div className=\"row mt-3\">\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-info mb-0\">\r\n                          <strong>Total Founders Ownership:</strong> {formatPercentage(\r\n                            (capTableData.preSeedShareholders || [])\r\n                              .filter(sh => sh.type === \"Founder\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-warning mb-0\">\r\n                          <strong>Employee Ownership:</strong> {formatPercentage(\r\n                            (capTableData.preSeedShareholders || [])\r\n                              .filter(sh => sh.type === \"Options Pool\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-success mb-0\">\r\n                          <strong>Total Pre-Seed Value:</strong> {formatCurrency(calc.preMoneyValuation, currency)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ========== POST-SEED CAP TABLE ========== */}\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header bg-success text-white\">\r\n                    <h5 className=\"mb-0\">Post-Seed Cap Table</h5>\r\n                    <small>(# shares, Ownership %, Currency Value)</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered table-hover\">\r\n                        <thead className=\"table-dark\">\r\n                          <tr>\r\n                            <th>Shareholder</th>\r\n                            <th className=\"text-center\">Contact Info</th>\r\n                            <th className=\"text-center\">Common Shares</th>\r\n                            <th className=\"text-center\">New Shares</th>\r\n                            <th className=\"text-center\">Total Shares</th>\r\n                            <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                            <th className=\"text-center\">Currency Value</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {capTableData.shareholders && capTableData.shareholders.length > 0 ? (\r\n                            capTableData.shareholders.map((sh, idx) => (\r\n                              <tr key={idx}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className=\"text-danger\">{sh.name}</strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small fw-bold text-dark\">{sh.fullName}</div>\r\n                                    )}\r\n                                    {/* Type badges for all shareholder types */}\r\n                                    {sh.type === \"Investor\" && (\r\n                                      <span className=\"badge bg-success mt-1\">\r\n                                        {sh.isGeneric ? \"\" : \"Investor\"}\r\n                                        {sh.isConvertibleNote && \" (Convertible Note)\"}\r\n                                      </span>\r\n                                    )}\r\n                                    {sh.type === \"Founder\" && (\r\n                                      <span className=\"badge bg-primary mt-1\">Founder</span>\r\n                                    )}\r\n                                    {sh.type === \"Options Pool\" && (\r\n                                      <span className=\"badge bg-warning text-dark mt-1\">Option Pool</span>\r\n                                    )}\r\n                                    {sh.type === \"Available\" && (\r\n                                      <span className=\"badge bg-danger mt-1\">Available for Investment</span>\r\n                                    )}\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {/* Hide contact info for Available for Investment */}\r\n                                  {sh.type !== \"Available\" && sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"text-muted mb-1\">\r\n                                       {sh.email}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.type !== \"Available\" && sh.phone && sh.phone !== \"-\" && (\r\n                                    <div className=\"text-muted\">\r\n                                       {sh.phone}\r\n                                    </div>\r\n                                  )}\r\n                                  {(sh.type === \"Available\" || !sh.email || sh.email === \"-\") &&\r\n                                    (!sh.phone || sh.phone === \"-\") && (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.type === \"Founder\" || sh.type === \"Options Pool\" ? (\r\n                                    <strong>{formatNumber(sh.shares)}</strong>\r\n                                  ) : (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.newShares > 0 ? (\r\n                                    <span className=\"badge bg-warning text-dark\">\r\n                                      {formatNumber(sh.newShares)}\r\n                                    </span>\r\n                                  ) : (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-danger\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                      sh.type === \"Available\" ? \"bg-danger\" :\r\n                                        \"bg-success\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n\r\n                                  {/* Investment amount for Available for Investment */}\r\n                                  {sh.type === \"Available\" && sh.investmentAmount > 0 && (\r\n                                    <div className=\"small text-success\">\r\n                                      Available: {formatCurrency(sh.investmentAmount, currency)}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* Investment amount for investors */}\r\n                                  {/* {sh.type === \"Investor\" && sh.investmentAmount && sh.investmentAmount > 0 && (\r\n                                    <div className=\"small text-success\">\r\n                                      Invested: {formatCurrency(sh.investmentAmount, currency)}\r\n                                    </div>\r\n                                  )} */}\r\n\r\n                                  {/* Note for convertible note investors */}\r\n                                  {sh.type === \"Investor\" && sh.isConvertibleNote && (\r\n                                    <div className=\"small text-muted\">\r\n                                      Convertible Note - 0 shares issued\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                              </tr>\r\n                            ))\r\n                          ) : (\r\n                            <tr>\r\n                              <td colSpan=\"7\" className=\"text-center text-danger\">\r\n                                <strong> No shareholders data available</strong>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* TOTAL ROW */}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td colSpan=\"2\">TOTAL</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.preSeedTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.newShares)}</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.postInvestmentTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                            <td className=\"text-center\">{formatCurrency(calc.postMoneyValuation, currency)}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    {/* Summary Cards */}\r\n                    <div className=\"row mt-3\">\r\n                      <div className=\"col-md-6\">\r\n                        <div className=\"alert alert-primary mb-0\">\r\n                          <strong>Total Founders:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Founder\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-6\">\r\n                        <div className=\"alert alert-warning mb-0\">\r\n                          <strong>Option Pool:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Options Pool\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n                    <div className=\"row mt-3\">\r\n\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-success mb-0\">\r\n                          <strong>Investors:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Investor\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      {/* Available for Investment Summary */}\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-danger mb-0\">\r\n                          <strong>Available:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Available\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-info mb-0\">\r\n                          <strong>Post-Money Value:</strong> {formatCurrency(calc.postMoneyValuation, currency)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n\r\n                    {/* Formula Verification */}\r\n                    <div className=\"alert alert-dark mt-3\">\r\n                      <h6 className=\"alert-heading\"> Formula</h6>\r\n                      <div className=\"row small\">\r\n                        <div className=\"col-md-4\">\r\n                          <strong>Post-Money Valuation:</strong><br />\r\n                          {formatCurrency(calc.investmentSize, currency)} + {formatCurrency(calc.preMoneyValuation, currency)} = {formatCurrency(calc.postMoneyValuation, currency)}\r\n                        </div>\r\n\r\n                        {/* Conditional Formulas based on Round Type */}\r\n                        {isConvertibleNote ? (\r\n                          <>\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Convertible Note Investment:</strong><br />\r\n                              Confirmed: {formatCurrency(calc.totalNoteInvestment || 0, currency)}<br />\r\n                              Available: {formatCurrency(calc.availableForInvestment || 0, currency)}\r\n                            </div>\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Theoretical Share Price:</strong><br />\r\n                              {formatCurrencyPricePerShare(calc.preMoneyValuation, currency)}  {formatNumber(calc.preSeedTotalShares)} = {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Investor Ownership:</strong><br />\r\n                              {formatCurrency(calc.investmentSize, currency)}  {formatCurrency(calc.postMoneyValuation, currency)} = {formatPercentage(calc.investorOwnershipPercent)}\r\n                            </div>\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Share Price:</strong><br />\r\n                              {calc.newShares > 0 ? (\r\n                                <>\r\n                                  {formatCurrency(calc.investmentSize, currency)}  {formatNumber(calc.newShares)} = {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                                </>\r\n                              ) : (\r\n                                \"No new shares issued\"\r\n                              )}\r\n                            </div>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Convertible Note Specific Information */}\r\n                      {isConvertibleNote && (\r\n                        <div className=\"mt-2 p-2 bg-warning text-dark rounded\">\r\n                          <strong> Convertible Note Round:</strong> No shares issued immediately.\r\n                          {calc.discountRate > 0 && ` Conversion will happen at next qualified financing round with ${formatPercentage(calc.discountRate)} discount`}\r\n                          {calc.valuationCap > 0 && ` and ${formatCurrency(calc.valuationCap, currency)} valuation cap.`}\r\n                          {calc.interestRate > 0 && ` Interest rate: ${formatPercentage(calc.interestRate)}.`}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSAFERoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    //  FIX 1: Need BOTH Pre-Seed and Post-Seed tables\r\n    const preSeedTable = capTableData.preSeedCapTable;\r\n    const postSeedTable = capTableData.postSeedCapTable;\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small>{roundname} Investment with Option Pool</small>\r\n          </div>\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== PLATFORM INPUTS ===== */}\r\n            <h5 className=\"mb-3\"> Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Company Value</small>\r\n                  <h5>{formatCurrency(calc.companyValue, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Valuation Cap</small>\r\n                  <h5>{formatCurrency(calc.valuationCap, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Discount Rate</small>\r\n                  <h5>{formatPercentage(calc.discountRate)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Pre-Seed Option Pool %</small>\r\n                  <h5>{formatPercentage(calc.optionPoolPercent)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Round 0 Total Shares</small>\r\n                  <h5>{formatNumber(calc.roundZeroTotalShares)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>Employee Shares Created</small>\r\n                  <h5>{formatNumber(calc.employeeShares)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CALCULATION FORMULA BOX ===== */}\r\n            <div className=\"alert alert-info mb-4\">\r\n              <h6 className=\"alert-heading\"> Employee Pool Calculation</h6>\r\n              <p className=\"mb-1\">\r\n                <strong>Formula:</strong> Employee Shares = Total Founder Shares  (1 - Pool %)  Pool %\r\n              </p>\r\n              <p className=\"mb-0\">\r\n                <strong>Calculation:</strong> {formatNumber(calc.roundZeroTotalShares)}  (1 - {formatPercentage(calc.optionPoolPercent)})  {formatPercentage(calc.optionPoolPercent)}\r\n                = <span className=\"badge bg-warning text-dark\">{formatNumber(calc.employeeShares)} shares</span>\r\n              </p>\r\n            </div>\r\n\r\n            {/*  IMPORTANT: SAFE Notes Explanation */}\r\n            <div className=\"alert alert-warning mb-4\">\r\n              <h6 className=\"alert-heading\"> SAFE Notes - NO SHARES ISSUED YET</h6>\r\n              <p className=\"mb-2\">\r\n                <strong>Important:</strong> SAFE (Simple Agreement for Future Equity) notes are <u>NOT converted into shares</u> during this round.\r\n              </p>\r\n              <ul className=\"mb-2\">\r\n                <li>SAFE investors have invested <strong>{formatCurrency(calc.investmentSize, currency)}</strong></li>\r\n                <li>They will receive <strong>0 shares</strong> in this round</li>\r\n                <li>Conversion happens at the <strong>next priced equity round</strong> (Series A)</li>\r\n              </ul>\r\n              <p className=\"mb-0\">\r\n                <strong>Conversion Price (at Series A):</strong> LOWER of:\r\n                <br /> Series A price  (1 - {formatPercentage(calc.discountRate)})\r\n                <br /> Valuation Cap  Total Shares\r\n              </p>\r\n            </div>\r\n\r\n            {/* ===== PRE-SEED CAP TABLE ===== */}\r\n            {preSeedTable && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-primary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-Seed Round 1</h5>\r\n                      <small>{preSeedTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Management</th>\r\n                              <th className=\"text-center\">Contact Info</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\">Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preSeedTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={sh.type === \"Options Pool\" ? \"table-warning\" : \"\"}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className={\r\n                                      sh.type === \"Founder\" ? \"text-primary\" :\r\n                                        sh.type === \"Options Pool\" ? \"text-warning\" : \"text-info\"\r\n                                    }>\r\n                                      {sh.name}\r\n                                    </strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                    )}\r\n                                    <span className={`badge mt-1 ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-info\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" ? (\r\n                                    <div className=\"text-muted\"> {sh.email}</div>\r\n                                  ) : <span className=\"text-muted\">-</span>}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                    {formatNumber(sh.newShares)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-secondary\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(preSeedTable.totalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(preSeedTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}\r\n                              </td>\r\n                              <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                              <td className=\"text-center\">{formatCurrency(preSeedTable.totalValue, currency)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Breakdown */}\r\n                      <div className=\"row mt-3\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary mb-0\">\r\n                            <strong>Total Founders Ownership:</strong> {formatPercentage(\r\n                              preSeedTable.shareholders\r\n                                .filter(sh => sh.type === \"Founder\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-warning mb-0\">\r\n                            <strong>Employee Pool Ownership:</strong> {formatPercentage(\r\n                              preSeedTable.shareholders\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-SEED CAP TABLE ===== */}\r\n            {postSeedTable && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-success\">\r\n                    <div className=\"card-header bg-success text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Post-Seed Round 1</h5>\r\n                      <small>{postSeedTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n\r\n                      {/* Highlight Box */}\r\n                      <div className=\"alert alert-info mb-3\">\r\n                        <strong> Key Point:</strong> Since SAFE notes do NOT convert to shares in this round,\r\n                        the total number of shares remains <strong>{formatNumber(postSeedTable.totalShares)}</strong>\r\n                        (same as Pre-Seed). SAFE investors are listed with 0 shares.\r\n                      </div>\r\n\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Contact Info</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\">Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postSeedTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={\r\n                                sh.type === \"Options Pool\" ? \"table-warning\" :\r\n                                  sh.type === \"SAFE Investor\" ? \"table-info\" : \"\"\r\n                              }>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className={\r\n                                      sh.type === \"Founder\" ? \"text-primary\" :\r\n                                        sh.type === \"Options Pool\" ? \"text-warning\" :\r\n                                          sh.type === \"SAFE Investor\" ? \"text-info\" : \"text-dark\"\r\n                                    }>\r\n                                      {sh.name}\r\n                                    </strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                    )}\r\n                                    <span className={`badge mt-1 ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"SAFE Investor\" ? \"bg-info\" : \"bg-secondary\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" ? (\r\n                                    <div className=\"text-muted\"> {sh.email}</div>\r\n                                  ) : <span className=\"text-muted\">-</span>}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                  {sh.type === \"SAFE Investor\" && (\r\n                                    <div className=\"small text-danger fw-bold mt-1\">\r\n                                       Not converted\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                    {formatNumber(sh.newShares)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-primary\">{formatNumber(sh.shares + sh.newShares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                      sh.type === \"SAFE Investor\" ? \"bg-info\" : \"bg-secondary\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                  {sh.investmentAmount > 0 && (\r\n                                    <div className=\"small text-success mt-1\">\r\n                                       SAFE: {formatCurrency(sh.investmentAmount, currency)}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.note && (\r\n                                    <div className=\"small text-muted mt-1\">{sh.note}</div>\r\n                                  )}\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-success fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(postSeedTable.totalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(postSeedTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}\r\n                              </td>\r\n                              <td className=\"text-center\">{formatNumber(postSeedTable.totalShares)}</td>\r\n                              <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                              <td className=\"text-center\">{formatCurrency(postSeedTable.totalValue, currency)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row mt-4\">\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"alert alert-primary mb-0\">\r\n                            <small>Total Founders Ownership</small>\r\n                            <h5 className=\"mb-0\">{formatPercentage(\r\n                              postSeedTable.shareholders\r\n                                .filter(sh => sh.type === \"Founder\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}</h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"alert alert-warning mb-0\">\r\n                            <small>Employee Pool</small>\r\n                            <h5 className=\"mb-0\">{formatPercentage(\r\n                              postSeedTable.shareholders\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}</h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"alert alert-info mb-0\">\r\n                            <small>SAFE Investment (Not Converted)</small>\r\n                            <h5 className=\"mb-0\">{formatCurrency(postSeedTable.safeInvestment || 0, currency)}</h5>\r\n                            <small className=\"text-muted\">{postSeedTable.safeInvestorCount || 0} investors</small>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== PLATFORM OUTPUTS SUMMARY ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\"> Platform Outputs Summary</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6 className=\"text-primary\">Pre-Seed Round 1</h6>\r\n                    <ul className=\"list-unstyled\">\r\n                      <li> Total Shares: <strong>{formatNumber(calc.totalSharesPreSeed)}</strong></li>\r\n                      <li> Founder Shares: <strong>{formatNumber(calc.roundZeroTotalShares)}</strong></li>\r\n                      <li> Employee Shares: <strong>{formatNumber(calc.employeeShares)}</strong></li>\r\n                      <li> Total Value: <strong>{formatCurrency(calc.companyValue, currency)}</strong></li>\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <h6 className=\"text-success\">Post-Seed Round 1</h6>\r\n                    <ul className=\"list-unstyled\">\r\n                      <li> Total Shares: <strong>{formatNumber(calc.totalSharesPostSeed)}</strong> (Same as Pre-Seed)</li>\r\n                      <li> SAFE Investment: <strong>{formatCurrency(calc.investmentSize, currency)}</strong></li>\r\n                      <li> SAFE Shares: <strong className=\"text-danger\">0</strong> (Not converted)</li>\r\n                      <li> Total Value: <strong>{formatCurrency(calc.companyValue, currency)}</strong></li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Conversion Info */}\r\n            {capTableData.conversionInfo && (\r\n              <div className=\"alert alert-secondary mt-4\">\r\n                <h6 className=\"alert-heading\"> {capTableData.conversionInfo.note}</h6>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-4\">\r\n                    <small className=\"text-muted\">Conversion Trigger</small>\r\n                    <div><strong>{capTableData.conversionInfo.conversionTrigger}</strong></div>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <small className=\"text-muted\">Valuation Cap</small>\r\n                    <div><strong>{formatCurrency(capTableData.conversionInfo.valuationCap, currency)}</strong></div>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <small className=\"text-muted\">Discount Rate</small>\r\n                    <div><strong>{formatPercentage(capTableData.conversionInfo.discountRate)}</strong></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const rendePreferredRoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    console.log(\"Cap Table Data:\", capTableData);\r\n    const calc = capTableData.calculations;\r\n    const inputs = capTableData.inputs || {};\r\n    const preTable = capTableData.preSeedCapTable;\r\n    const postTable = capTableData.postSeedCapTable;\r\n\r\n    //  Determine instrument types\r\n    const hasMultipleConvertibles = capTableData.hasMultipleConvertibles ||\r\n      (capTableData.convertibleCount && capTableData.convertibleCount > 1);\r\n    const hasSAFE = capTableData.isSAFERound ||\r\n      (capTableData.conversionDetails && capTableData.conversionDetails.some(cd => cd.type === \"Safe\"));\r\n    const hasConvertibleNote = capTableData.isConvertibleNoteRound ||\r\n      (capTableData.conversionDetails && capTableData.conversionDetails.some(cd => cd.type === \"Convertible Note\"));\r\n\r\n    const isSeriesA = capTableData.isSeriesA ||\r\n      (capTableData.shareClassType || \"\").toLowerCase().includes(\"series\");\r\n\r\n    //  Calculate CORRECT values (even if backend is wrong)\r\n    const correctedSeedCapPrice = calc.valuationCap / calc.totalSharesPreSeed;\r\n    const correctedSeedOptimalPrice = Math.min(calc.seedDiscountPrice, correctedSeedCapPrice);\r\n    const hasCalculationErrors =\r\n      Math.abs(calc.seedCapPrice - correctedSeedCapPrice) > 0.01 ||\r\n      Math.abs(calc.seedOptimalPrice - correctedSeedOptimalPrice) > 0.01;\r\n\r\n    // Helper functions\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-US').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n\r\n    const formatCurrencyTwoDecimals = (value) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2\r\n      }).format(value || 0);\r\n    };\r\n\r\n    const liquidationPref = capTableData.liquidationPreference || {};\r\n    const liquidationCalc = capTableData.liquidationCalculations || {};\r\n\r\n    // Get ownership summary\r\n    const getOwnershipSummary = (shareholders, totalShares) => {\r\n      if (!shareholders || !totalShares) return {\r\n        founders: 0,\r\n        employees: 0,\r\n        seedInvestors: 0,\r\n        seriesAInvestors: 0\r\n      };\r\n\r\n      let founders = 0;\r\n      let employees = 0;\r\n      let seedInvestors = 0;\r\n      let seriesAInvestors = 0;\r\n\r\n      shareholders.forEach(sh => {\r\n        const ownership = (sh.shares / totalShares) * 100;\r\n        if (sh.type === \"Founder\") founders += ownership;\r\n        else if (sh.type === \"Options Pool\" || sh.type.includes(\"Employee\")) employees += ownership;\r\n        else if (sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\") || sh.type.includes(\"Convertible\")) seedInvestors += ownership;\r\n        else if (sh.type === \"Series A Investor\" || sh.type === \"Preferred Equity Investor\") seriesAInvestors += ownership;\r\n      });\r\n\r\n      return {\r\n        founders: founders.toFixed(1),\r\n        employees: employees.toFixed(1),\r\n        seedInvestors: seedInvestors.toFixed(1),\r\n        seriesAInvestors: seriesAInvestors.toFixed(1)\r\n      };\r\n    };\r\n\r\n    const preOwnership = getOwnershipSummary(preTable?.shareholders, preTable?.totalShares);\r\n    const postOwnership = getOwnershipSummary(postTable?.shareholders, postTable?.totalShares);\r\n\r\n    const roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className={`card-header ${isSeriesA ? 'bg-primary' : 'bg-success'} text-white`}>\r\n            <h4 className=\"mb-0\">{capTableData.roundType || \"Series A Round\"}</h4>\r\n            <small>\r\n              {isSeriesA ? roundname : \"Investment Round\"}\r\n              {hasSAFE && \" with SAFE Conversion\"}\r\n              {hasConvertibleNote && \" with Convertible Note Conversion\"}\r\n              {hasMultipleConvertibles && \" (Multiple Convertible Instruments)\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== CALCULATION ERROR WARNING ===== */}\r\n            {hasCalculationErrors && (\r\n              <div className=\"alert alert-danger mb-4\">\r\n                <h5 className=\"alert-heading\"> Calculation Errors Detected</h5>\r\n                <p className=\"mb-2\">Backend calculations don't match document formulas:</p>\r\n                <ul className=\"mb-0\">\r\n                  <li>\r\n                    <strong>Seed Cap Price:</strong> {formatCurrency(calc.seedCapPrice)}\r\n                    (Should be: {formatCurrency(correctedSeedCapPrice)})\r\n                  </li>\r\n                  <li>\r\n                    <strong>Seed Optimal Price:</strong> {formatCurrency(calc.seedOptimalPrice)}\r\n                    (Should be: {formatCurrency(correctedSeedOptimalPrice)} = MIN({formatCurrency(calc.seedDiscountPrice)}, {formatCurrency(correctedSeedCapPrice)}))\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== INPUT PARAMETERS ===== */}\r\n            <h5 className=\"mb-3\"> {capTableData.roundType}</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(inputs.preMoneyValuation || calc.preMoneyValuation)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">{capTableData.shareClassType} Investment</small>\r\n                  <h5>{formatCurrency(inputs.seriesAInvestment || calc.seriesAInvestment)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Founder Shares (Round 0)</small>\r\n                  <h5>{formatNumber(inputs.roundZeroShares || calc.roundZeroTotalShares)}</h5>\r\n                  <small>{inputs.founderCount || 0} founder(s)</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CONVERTIBLE INSTRUMENTS SECTION ===== */}\r\n            {(hasSAFE || hasConvertibleNote) && calc.seedInvestment > 0 && (\r\n              <>\r\n                <div className=\"row mb-4\">\r\n                  {hasSAFE && (\r\n                    <div className=\"col-md-4\">\r\n                      <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                        <small>Seed SAFE Investment</small>\r\n                        <h5>{formatCurrency(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1))}</h5>\r\n                        <small>From SAFE round</small>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {hasConvertibleNote && (\r\n                    <div className=\"col-md-4\">\r\n                      <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                        <small>Convertible Note Investment</small>\r\n                        <h5>{formatCurrency(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1))}</h5>\r\n                        <small>From Convertible Note round</small>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"col-md-4\">\r\n                    <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                      <small>Valuation Cap</small>\r\n                      <h5>{formatCurrency(calc.valuationCap)}</h5>\r\n                      <small>From terms</small>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* CONVERSION CALCULATIONS */}\r\n                {calc.sharePrice > 0 && (\r\n                  <div className=\"alert alert-success mb-4\">\r\n                    <h6 className=\"alert-heading\">\r\n                      {hasMultipleConvertibles ? ' SAFE + Convertible Note Conversion Calculations' : ' Conversion Calculations'}\r\n                    </h6>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6\">\r\n                        <p><strong>1. {capTableData.shareClassType} Share Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.preMoneyValuation)}  {formatNumber(calc.totalSharesPreSeed)} =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrency(calc.sharePrice)}</span>\r\n                        </p>\r\n\r\n                        <p><strong>2. Seed Discount Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.sharePrice)}  (1 - {calc.discountRate / 100}) =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrency(calc.seedDiscountPrice)}</span>\r\n                        </p>\r\n\r\n                        <p><strong>3. Seed Cap Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.valuationCap)}  {formatNumber(calc.totalSharesPreSeed)} =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrencyTwoDecimals(correctedSeedCapPrice)}</span>\r\n                          {hasCalculationErrors && (\r\n                            <span className=\"text-danger ms-2\">(Backend: {formatCurrency(calc.seedCapPrice)})</span>\r\n                          )}\r\n                        </p>\r\n                      </div>\r\n\r\n                      <div className=\"col-md-6\">\r\n                        <p><strong>4. Optimal Price (Lower of the two):</strong></p>\r\n                        <p className=\"small\">\r\n                          MIN({formatCurrency(calc.seedDiscountPrice)}, {formatCurrency(correctedSeedCapPrice)}) =\r\n                          <span className=\"fw-bold ms-2 text-success\">{formatCurrency(correctedSeedOptimalPrice)}</span>\r\n                          {hasCalculationErrors && (\r\n                            <span className=\"text-danger ms-2\">(Backend: {formatCurrency(calc.seedOptimalPrice)})</span>\r\n                          )}\r\n                        </p>\r\n\r\n                        {hasSAFE && (\r\n                          <>\r\n                            <p><strong>5. SAFE Conversion Shares:</strong></p>\r\n                            <p className=\"small\">\r\n                              {formatCurrency(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1))}  {formatCurrency(correctedSeedOptimalPrice)} =\r\n                              <span className=\"fw-bold ms-2\">\r\n                                {formatNumber(Math.round(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1) / correctedSeedOptimalPrice))} shares\r\n                              </span>\r\n                            </p>\r\n                          </>\r\n                        )}\r\n\r\n                        {hasConvertibleNote && (\r\n                          <>\r\n                            <p><strong>6. Convertible Note Conversion:</strong></p>\r\n                            <p className=\"small\">\r\n                              Principal + Interest: {formatCurrency(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1))}  (1 + {calc.interestRate / 100})\r\n                            </p>\r\n                            <p className=\"small\">\r\n                              Convertible shares = {formatCurrency(Math.round(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1) * Math.pow(1 + calc.interestRate / 100, 2)))}  {formatCurrency(8.64)}*\r\n                            </p>\r\n                            <p className=\"small text-muted\">*Note: Convertible Notes use 20% discount as per document</p>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* MOIC Information */}\r\n                    <div className=\"mt-3 p-2 bg-white rounded border\">\r\n                      <p className=\"mb-1\"><strong>MOIC (Multiple on Invested Capital):</strong></p>\r\n                      <p className=\"mb-0 small\">\r\n                        Seed Investors: <strong>{calc.seedMOIC}</strong>\r\n                        ({formatCurrency(calc.seedConversionValue)} value / {formatCurrency(calc.seedInvestment)} investment)\r\n                        {calc.seriesAMOIC && calc.seriesAMOIC !== \"0X\" && (\r\n                          <> | {capTableData.shareClassType} Investors: <strong>{calc.seriesAMOIC}</strong></>\r\n                        )}\r\n                      </p>\r\n                      {hasCalculationErrors && (\r\n                        <p className=\"mb-0 small text-danger mt-1\">\r\n                           MOIC may be incorrect due to calculation errors above\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* ===== OPTION POOL CALCULATION ===== */}\r\n            {calc.newOptionShares > 0 && (\r\n              <div className=\"alert alert-info mb-4\">\r\n                <h6 className=\"alert-heading\"> Option Pool Calculation</h6>\r\n                <p className=\"mb-2 small\">\r\n                  <strong>Formula (Document):</strong> Total Post Shares = (Founders + Converted Investors + {capTableData.shareClassType} Investors)  (1 - Target Option Pool %)\r\n                </p>\r\n                <p className=\"mb-2 small\">\r\n                  <strong>Step 1 - Total excluding option:</strong>\r\n                  <br />\r\n                  Founders: {formatNumber(calc.roundZeroTotalShares)}<br />\r\n                  + Converted Investors: {formatNumber(calc.seedConversionShares)}<br />\r\n                  + {capTableData.shareClassType}: {formatNumber(calc.seriesAShares)}<br />\r\n                  = {formatNumber(calc.roundZeroTotalShares + calc.seedConversionShares + calc.seriesAShares)} shares\r\n                </p>\r\n                <p className=\"mb-2 small\">\r\n                  <strong>Step 2 - Calculate total with pool:</strong>\r\n                  <br />\r\n                  {formatNumber(calc.roundZeroTotalShares + calc.seedConversionShares + calc.seriesAShares)}  (1 - {calc.targetOptionPoolPercent / 100})<br />\r\n                  = {formatNumber(Math.round((calc.roundZeroTotalShares + calc.seedConversionShares + calc.seriesAShares) / (1 - calc.targetOptionPoolPercent / 100)))} total shares\r\n                </p>\r\n                <p className=\"mb-0 small\">\r\n                  <strong>Step 3 - New option shares needed:</strong>\r\n                  <br />\r\n                  Total shares - (Founders + Converted + {capTableData.shareClassType}) - Existing employee shares<br />\r\n                  = {formatNumber(calc.newOptionShares)} new option shares to reach {formatPercentage(calc.targetOptionPoolPercent)} target pool\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== PRE-INVESTMENT CAP TABLE ===== */}\r\n            {preTable && preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-secondary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-{capTableData.shareClassType} Round</h5>\r\n                      <small>{preTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Existing Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preTable.shareholders.map((sh, idx) => {\r\n                              const hasNewShares = sh.newShares > 0;\r\n                              const totalShares = sh.shares;\r\n                              const existingShares = totalShares - (sh.newShares || 0);\r\n\r\n                              return (\r\n                                <tr key={idx} className={\r\n                                  sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"table-warning\" :\r\n                                    sh.type === \"Founder\" ? \"\" : \"table-light\"\r\n                                }>\r\n                                  <td>\r\n                                    <div>\r\n                                      <strong>{sh.name || sh.fullName}</strong>\r\n                                      {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" : \"bg-info\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(existingShares)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {hasNewShares ? (\r\n                                      <strong className=\"text-success\">+{formatNumber(sh.newShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(totalShares)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className=\"badge bg-dark\">\r\n                                      {formatPercentage(sh.ownership || ((totalShares / preTable.totalShares) * 100))}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value)}</strong>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(preTable.totalShares -\r\n                                  preTable.shareholders.reduce((sum, sh) => sum + (sh.newShares || 0), 0)\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(\r\n                                  preTable.shareholders.reduce((sum, sh) => sum + (sh.newShares || 0), 0)\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">{formatNumber(preTable.totalShares)}</td>\r\n                              <td className=\"text-center\">100%</td>\r\n                              <td className=\"text-center\">{formatCurrency(preTable.totalValue)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-INVESTMENT CAP TABLE ===== */}\r\n            {postTable && postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-primary\">\r\n                    <div className=\"card-header bg-primary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Post-{capTableData.shareClassType} Round</h5>\r\n                      <small>{postTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value</th>\r\n                              {(hasSAFE || hasConvertibleNote) && <th className=\"text-center\">Investment / Conversion</th>}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postTable.shareholders.map((sh, idx) => (\r\n                              sh.isTotal ? (\r\n                                <tr key={idx} className=\"table-primary fw-bold\">\r\n                                  <td colSpan=\"2\"><strong>TOTAL</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.commonShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.newShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.totalShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>100%</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatCurrency(sh.value)}</strong></td>\r\n                                  {(hasSAFE || hasConvertibleNote) && (\r\n                                    <td className=\"text-center\">\r\n                                      <strong>{formatCurrency(sh.investmentAmount || calc.seedInvestment + calc.seriesAInvestment)}</strong>\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              ) : (\r\n                                <tr key={idx} className={\r\n                                  sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"table-warning\" :\r\n                                    sh.type === \"SAFE Investor\" || (sh.type && sh.type.includes(\"Safe\")) ? \"table-info\" :\r\n                                      sh.type === \"Convertible Note Investor\" || (sh.type && sh.type.includes(\"Convertible\")) ? \"table-info\" :\r\n                                        sh.type === \"Series A Investor\" || sh.type === \"Preferred Equity Investor\" ? \"table-primary\" : \"\"\r\n                                }>\r\n                                  <td>\r\n                                    <strong>{sh.name || sh.fullName}</strong>\r\n                                    {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"SAFE Investor\" || (sh.type && sh.type.includes(\"Safe\")) ? \"bg-info\" :\r\n                                          sh.type === \"Convertible Note Investor\" || (sh.type && sh.type.includes(\"Convertible\")) ? \"bg-info\" :\r\n                                            sh.type === \"Series A Investor\" || sh.type === \"Preferred Equity Investor\" ? \"bg-success\" : \"bg-secondary\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.commonShares > 0 ? (\r\n                                      <strong>{formatNumber(sh.commonShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.newShares > 0 ? (\r\n                                      <strong className=\"text-success\">{formatNumber(sh.newShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(sh.totalShares || sh.shares)}</strong>\r\n                                    {sh.breakdown && (\r\n                                      <div className=\"small text-muted\">\r\n                                        {sh.breakdown.existingShares > 0 && (\r\n                                          <div>{formatNumber(sh.breakdown.existingShares)} existing</div>\r\n                                        )}\r\n                                        {sh.breakdown.newShares > 0 && (\r\n                                          <div>+{formatNumber(sh.breakdown.newShares)} new</div>\r\n                                        )}\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-dark\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\") ? \"bg-info\" :\r\n                                          sh.type === \"Series A Investor\" ? \"bg-success\" : \"bg-secondary\"\r\n                                      }`}>\r\n                                      {formatPercentage(sh.ownership || ((sh.totalShares || sh.shares) / postTable.totalShares) * 100)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value)}</strong>\r\n                                  </td>\r\n                                  {(hasSAFE || hasConvertibleNote) && (\r\n                                    <td className=\"text-center\">\r\n                                      {sh.investmentAmount ? (\r\n                                        <div>\r\n                                          <div className=\"fw-bold\">{formatCurrency(sh.investmentAmount)}</div>\r\n                                          {sh.conversionPrice && (\r\n                                            <div className=\"small\">\r\n                                              @ {formatCurrency(sh.conversionPrice)}/share\r\n                                            </div>\r\n                                          )}\r\n                                          {sh.moic && sh.moic !== \"0X\" && (\r\n                                            <div className=\"small text-success\">\r\n                                              MOIC: {sh.moic}\r\n                                            </div>\r\n                                          )}\r\n                                          {sh.note && sh.note.includes(\"interest\") && (\r\n                                            <div className=\"small text-info\">\r\n                                              {sh.note}\r\n                                            </div>\r\n                                          )}\r\n                                        </div>\r\n                                      ) : (\r\n                                        <span className=\"text-muted\">-</span>\r\n                                      )}\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              )\r\n                            ))}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Final Summary */}\r\n                      <div className=\"row mt-4\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-success\">\r\n                            <h6 className=\"mb-2\">Final Ownership Distribution</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Founders:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(postOwnership.founders)}</div>\r\n                              <div className=\"col-6\">Employees:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(postOwnership.employees)}</div>\r\n                              {(hasSAFE || hasConvertibleNote) && (\r\n                                <>\r\n                                  <div className=\"col-6\">Seed Investors:</div>\r\n                                  <div className=\"col-6 text-end\">{formatPercentage(postOwnership.seedInvestors)}</div>\r\n                                  <div className=\"col-6\">{capTableData.shareClassType} Investors:</div>\r\n                                  <div className=\"col-6 text-end\">{formatPercentage(postOwnership.seriesAInvestors)}</div>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary\">\r\n                            <h6 className=\"mb-2\">Financial Summary</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Post-Money Valuation:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.finalPostMoneyValuation)}</div>\r\n                              <div className=\"col-6\">Total Investment:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.seedInvestment + calc.seriesAInvestment)}</div>\r\n                              <div className=\"col-6\">Total Shares:</div>\r\n                              <div className=\"col-6 text-end\">{formatNumber(calc.totalSharesPostSeed)}</div>\r\n                              <div className=\"col-6\">Share Price:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.sharePrice)}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== LIQUIDATION PREFERENCE ===== */}\r\n            {liquidationPref && liquidationPref.type && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-warning\">\r\n                    <div className=\"card-header bg-warning text-dark\">\r\n                      <h5 className=\"mb-0\"> Liquidation Preference</h5>\r\n                      <small>Type: {liquidationPref.label} ({liquidationPref.type})</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      {/* Liquidation Type Information */}\r\n                      <div className=\"row mb-4\">\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"info-box p-3 border rounded bg-warning\">\r\n                            <small className=\"text-dark\">Preference Type</small>\r\n                            <h5 className=\"text-dark\">{liquidationPref.label}</h5>\r\n                            <small className=\"text-dark\">Code: {liquidationPref.type}</small>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                            <small>Liquidation Multiple</small>\r\n                            <h5>{liquidationCalc.preferredLiquidationMultiple || 1}x</h5>\r\n                            <small>Investment multiple</small>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"info-box p-3 border rounded bg-danger text-white\">\r\n                            <small>Participating Cap</small>\r\n                            <h5>{liquidationCalc.participatingCap || 0}x</h5>\r\n                            <small>\r\n                              {liquidationPref.type === 3\r\n                                ? `${liquidationCalc.participatingCap || 2}x cap applies`\r\n                                : \"No cap\"}\r\n                            </small>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Exit Scenarios Table */}\r\n                      {liquidationCalc.exitScenarios && liquidationCalc.exitScenarios.length > 0 && (\r\n                        <div className=\"mt-4\">\r\n                          <h6 className=\"mb-3\"> Liquidation Distribution - Different Exit Scenarios</h6>\r\n                          <div className=\"table-responsive\">\r\n                            <table className=\"table table-bordered table-hover\">\r\n                              <thead className=\"table-warning\">\r\n                                <tr>\r\n                                  <th>Exit Scenario</th>\r\n                                  <th className=\"text-center\">Exit Value</th>\r\n                                  <th className=\"text-center bg-primary text-white\">{capTableData.shareClassType}</th>\r\n                                  <th className=\"text-center bg-info text-white\">Seed</th>\r\n                                  <th className=\"text-center bg-success text-white\">Founders</th>\r\n                                  <th className=\"text-center bg-secondary text-white\">Option Pool</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {liquidationCalc.exitScenarios.map((scenario, idx) => {\r\n                                  const totalSeriesA = scenario.seriesAPreferredAmount + scenario.seriesAParticipationAmount;\r\n                                  const totalSeed = scenario.seedPreferredAmount + scenario.seedParticipationAmount;\r\n\r\n                                  return (\r\n                                    <tr key={idx}>\r\n                                      <td>\r\n                                        <strong>{scenario.label || `Scenario ${idx + 1}`}</strong>\r\n                                        <div className=\"small text-muted\">{scenario.liquidationLabel}</div>\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <strong>{formatCurrency(scenario.exitValue)}</strong>\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <div className=\"fw-bold\">{formatCurrency(totalSeriesA)}</div>\r\n                                        <div className=\"small\">\r\n                                          {scenario.seriesAPreferredAmount > 0 && (\r\n                                            <div>Pref: {formatCurrency(scenario.seriesAPreferredAmount)}</div>\r\n                                          )}\r\n                                          {scenario.seriesAParticipationAmount > 0 && (\r\n                                            <div>Participation: {formatCurrency(scenario.seriesAParticipationAmount)}</div>\r\n                                          )}\r\n                                        </div>\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <div className=\"fw-bold\">{formatCurrency(totalSeed)}</div>\r\n                                        <div className=\"small\">\r\n                                          {scenario.seedPreferredAmount > 0 && (\r\n                                            <div>Pref: {formatCurrency(scenario.seedPreferredAmount)}</div>\r\n                                          )}\r\n                                          {scenario.seedParticipationAmount > 0 && (\r\n                                            <div>Participation: {formatCurrency(scenario.seedParticipationAmount)}</div>\r\n                                          )}\r\n                                        </div>\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <strong>{formatCurrency(scenario.founderAmount)}</strong>\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <strong>{formatCurrency(scenario.optionPoolAmount)}</strong>\r\n                                      </td>\r\n                                    </tr>\r\n                                  );\r\n                                })}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== SUMMARY ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\"> Round Summary</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Key Outcomes:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li> Total capital raised: <strong>{formatCurrency(calc.seedInvestment + calc.seriesAInvestment)}</strong></li>\r\n                      <li> Post-money valuation: <strong>{formatCurrency(calc.finalPostMoneyValuation)}</strong></li>\r\n                      <li> Total shares outstanding: <strong>{formatNumber(calc.totalSharesPostSeed)}</strong></li>\r\n                      <li> Share price: <strong>{formatCurrency(calc.sharePrice)}</strong></li>\r\n                      {hasSAFE && (\r\n                        <li> SAFE conversion completed: <strong>{formatNumber(Math.round(calc.seedInvestment / (hasMultipleConvertibles ? 2 : 1) / correctedSeedOptimalPrice))} shares</strong></li>\r\n                      )}\r\n                      {hasConvertibleNote && (\r\n                        <li> Convertible Note conversion completed: <strong>{formatNumber(16000)}+ shares with interest</strong></li>\r\n                      )}\r\n                      {calc.newOptionShares > 0 && (\r\n                        <li> Option pool: <strong>{formatNumber(calc.newOptionShares)} new shares added</strong></li>\r\n                      )}\r\n                      {hasCalculationErrors && (\r\n                        <li className=\"text-danger\"> Note: Some calculations may need correction</li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Next Steps:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      {hasSAFE && <li> SAFE notes converted to shares</li>}\r\n                      {hasConvertibleNote && <li> Convertible Notes converted to shares</li>}\r\n                      <li> New {capTableData.shareClassType} investors onboarded</li>\r\n                      <li> Update cap table with new shareholders</li>\r\n                      <li> Issue share certificates</li>\r\n                      <li> Prepare for next funding round</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n\r\n  const renderCommonStockCaptable = () => {\r\n    if (!capTableData || !capTableData.calculations || !capTableData.success) {\r\n      return (\r\n        <div className=\"alert alert-warning\">\r\n          <h5>No Cap Table Data Available</h5>\r\n          <p>Please calculate the Common Stock round first.</p>\r\n          {capTableData?.error && (\r\n            <div className=\"alert alert-danger mt-2\">\r\n              <strong>Error:</strong> {capTableData.error}\r\n              {capTableData.details && (\r\n                <pre className=\"small mt-2\">{JSON.stringify(capTableData.details, null, 2)}</pre>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const calc = capTableData.calculations;\r\n    const financialSummary = capTableData.financialSummary || {};\r\n    const currency = capTableData.currency || \"USD\";\r\n    const isCommonStock = capTableData.isCommonStock || true;\r\n    const isPostMoneyOptionPool = capTableData.isPostMoneyOptionPool || calc.needsExpansion;\r\n\r\n    // Get cap tables\r\n    const preTable = capTableData.preInvestmentCapTable || {};\r\n    const postTable = capTableData.postInvestmentCapTable || {};\r\n\r\n    const roundname = capTableData.shareClassType ?\r\n      `${capTableData.instrumentType} ${capTableData.shareClassType}` :\r\n      capTableData.instrumentType || \"Common Stock\";\r\n\r\n    // Helper functions\r\n    const formatCurrency = (amount, curr = currency) => {\r\n      if (!amount && amount !== 0) return \"-\";\r\n      const currencyCode = curr.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0\r\n      }).format(amount);\r\n    };\r\n\r\n    const formatCurrencyPricePerShare = (amount, curr = currency) => {\r\n      if (!amount && amount !== 0) return \"-\";\r\n      const currencyCode = curr.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 4\r\n      }).format(amount);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      if (!num && num !== 0) return \"-\";\r\n      return new Intl.NumberFormat('en-US').format(Math.round(num));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      if (!percent && percent !== 0) return \"-\";\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : percent;\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-info text-white\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType || \"Common Stock Round\"}</h4>\r\n            <small className=\"opacity-75\">\r\n              {roundname} {isPostMoneyOptionPool ? \"with Option Pool Expansion\" : \"\"}\r\n            </small>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/* ===== INPUT PARAMETERS ===== */}\r\n            <h5 className=\"mb-3\"> {roundname} Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Amount</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(calc.preMoneyValuation, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Existing Option Pool</small>\r\n                  <h5>{formatPercentage(calc.existingOptionPoolPercent)}</h5>\r\n                  <small className=\"text-muted\">{formatNumber(calc.existingOptionPoolShares)} shares</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Target Option Pool</small>\r\n                  <h5>{formatPercentage(calc.targetOptionPoolPercent)}</h5>\r\n                  <small>Post-investment target</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CALCULATED OUTPUTS ===== */}\r\n            <h5 className=\"mb-3\"> Calculated Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-primary text-white\">\r\n                  <small>Post-Money Valuation</small>\r\n                  <h6>{formatCurrency(calc.postMoneyValuation, currency)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Share Price</small>\r\n                  <h6>{formatCurrencyPricePerShare(calc.sharePrice, currency)}</h6>\r\n                  <small className=\"opacity-75\">per share</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>New Investment Shares</small>\r\n                  <h6>{formatNumber(calc.newInvestmentShares)}</h6>\r\n                  <small className=\"opacity-75\">for investors</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Option Pool Expansion</small>\r\n                  <h6>{formatNumber(calc.additionalOptionPoolShares)}</h6>\r\n                  <small className=\"opacity-75\">additional shares</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-dark text-white\">\r\n                  <small>Total New Shares</small>\r\n                  <h6>{formatNumber(calc.totalNewShares)}</h6>\r\n                  <small className=\"opacity-75\">in this round</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                  <small>Investor Ownership</small>\r\n                  <h6>{formatPercentage(calc.investorOwnershipPercent)}</h6>\r\n                  <small className=\"opacity-75\">of company</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== DETAILED BREAKDOWN ===== */}\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-info\">\r\n                  <h6 className=\"alert-heading\"> Shares Breakdown</h6>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-6\">\r\n                      <div className=\"mb-2\">\r\n                        <strong>Existing Shares:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(calc.preInvestmentTotalShares)}</div>\r\n                      </div>\r\n                      <div className=\"mb-2\">\r\n                        <strong>New Investment Shares:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(calc.newInvestmentShares)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <div className=\"mb-2\">\r\n                        <strong>Additional Option Shares:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(calc.additionalOptionPoolShares)}</div>\r\n                      </div>\r\n                      <div className=\"mb-2\">\r\n                        <strong>Total After Round:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(calc.postInvestmentTotalShares)}</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-warning\">\r\n                  <h6 className=\"alert-heading\"> Option Pool Summary</h6>\r\n                  <div className=\"mb-2\">\r\n                    <strong>Before Round:</strong> {formatNumber(calc.existingOptionPoolShares)} shares\r\n                    ({formatPercentage(calc.existingOptionPoolPercent)})\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    <strong>Additional Created:</strong> {formatNumber(calc.additionalOptionPoolShares)} shares\r\n                    {isPostMoneyOptionPool && \" (to reach target)\"}\r\n                  </div>\r\n                  <hr />\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <strong>Final Option Pool:</strong>\r\n                    <strong>\r\n                      {formatNumber(calc.totalOptionPoolShares)} shares\r\n                      ({formatPercentage(calc.targetOptionPoolPercent)})\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== PRE-INVESTMENT CAP TABLE ===== */}\r\n            {preTable && preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-secondary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares Before {roundname}</h5>\r\n                      <small>{preTable.message || `Pre-Money Valuation: ${formatCurrency(calc.preMoneyValuation, currency)}`}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value ({currency})</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={\r\n                                sh.type === \"Options Pool\" ? \"table-warning\" :\r\n                                  sh.type === \"Founder\" ? \"\" : \"table-light\"\r\n                              }>\r\n                                <td>\r\n                                  <strong>{sh.name}</strong>\r\n                                  {sh.source && (\r\n                                    <div className=\"small text-muted\">{sh.source}</div>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                      sh.type === \"Investor\" ? \"bg-success\" : \"bg-secondary\"\r\n                                    }`}>\r\n                                    {sh.type}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className=\"badge bg-dark\">\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(preTable.totalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">100%</span>\r\n                              </td>\r\n                              <td className=\"text-center\">{formatCurrency(preTable.totalValue, currency)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-INVESTMENT CAP TABLE ===== */}\r\n            {postTable && postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-success\">\r\n                    <div className=\"card-header bg-success text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares After {roundname}</h5>\r\n                      <small>{postTable.message || `Post-Money Valuation: ${formatCurrency(calc.postMoneyValuation, currency)}`}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Existing Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value ({currency})</th>\r\n                              <th className=\"text-center\">Investment</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postTable.shareholders.map((sh, idx) => {\r\n                              const isExisting = sh.isExisting;\r\n                              const existingShares = isExisting ? sh.shares - (sh.newShares || 0) : 0;\r\n                              const newShares = sh.newShares || 0;\r\n                              const totalShares = sh.shares;\r\n\r\n                              return (\r\n                                <tr key={idx} className={\r\n                                  sh.type === \"Options Pool\" ? \"table-warning\" :\r\n                                    sh.type === \"Founder\" ? \"\" :\r\n                                      sh.type === \"Investor\" && sh.originalType === \"Common Stock Investor\" ? \"table-success\" :\r\n                                        \"table-light\"\r\n                                }>\r\n                                  <td>\r\n                                    <strong>{sh.name}</strong>\r\n                                    {sh.source && (\r\n                                      <div className=\"small text-muted\">{sh.source}</div>\r\n                                    )}\r\n                                    {sh.email && (\r\n                                      <div className=\"small text-muted\"> {sh.email}</div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                        sh.originalType === \"Common Stock Investor\" ? \"bg-success\" :\r\n                                          sh.originalType === \"Preferred Investor\" ? \"bg-info\" :\r\n                                            \"bg-secondary\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                      {sh.originalType === \"Common Stock Investor\" && \" (New)\"}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {existingShares > 0 ? (\r\n                                      <strong>{formatNumber(existingShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {newShares > 0 ? (\r\n                                      <span className=\"badge bg-success\">+{formatNumber(newShares)}</span>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(totalShares)}</strong>\r\n                                    {sh.breakdown && (\r\n                                      <div className=\"small text-muted\">\r\n                                        {sh.breakdown.existingShares > 0 && (\r\n                                          <div>{formatNumber(sh.breakdown.existingShares)} existing</div>\r\n                                        )}\r\n                                        {sh.breakdown.newShares > 0 && (\r\n                                          <div>+{formatNumber(sh.breakdown.newShares)} new</div>\r\n                                        )}\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-dark\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                        sh.originalType === \"Common Stock Investor\" ? \"bg-success\" :\r\n                                          \"bg-secondary\"\r\n                                      }`}>\r\n                                      {formatPercentage(sh.ownership)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.investmentAmount ? (\r\n                                      <div>\r\n                                        <strong>{formatCurrency(sh.investmentAmount, currency)}</strong>\r\n                                        {sh.sharePrice && (\r\n                                          <div className=\"small\">\r\n                                            @ {formatCurrency(sh.sharePrice, currency)}/share\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-success fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(calc.preInvestmentTotalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-success\">+{formatNumber(calc.totalNewShares)}</span>\r\n                              </td>\r\n                              <td className=\"text-center\">{formatNumber(calc.postInvestmentTotalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">100%</span>\r\n                              </td>\r\n                              <td className=\"text-center\">{formatCurrency(calc.postMoneyValuation, currency)}</td>\r\n                              <td className=\"text-center\">{formatCurrency(calc.investmentSize, currency)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row mt-4\">\r\n                        <div className=\"col-md-3\">\r\n                          <div className=\"alert alert-primary mb-0\">\r\n                            <h6 className=\"alert-heading\">Founders</h6>\r\n                            <div className=\"h4\">{formatPercentage(\r\n                              (postTable.shareholders || [])\r\n                                .filter(sh => sh.type === \"Founder\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}</div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                          <div className=\"alert alert-warning mb-0\">\r\n                            <h6 className=\"alert-heading\">Option Pool</h6>\r\n                            <div className=\"h4\">{formatPercentage(\r\n                              (postTable.shareholders || [])\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}</div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                          <div className=\"alert alert-success mb-0\">\r\n                            <h6 className=\"alert-heading\">New Investors</h6>\r\n                            <div className=\"h4\">{formatPercentage(calc.investorOwnershipPercent)}</div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                          <div className=\"alert alert-info mb-0\">\r\n                            <h6 className=\"alert-heading\">Existing Investors</h6>\r\n                            <div className=\"h4\">{formatPercentage(\r\n                              100 - calc.investorOwnershipPercent -\r\n                              ((postTable.shareholders || [])\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0))\r\n                            )}</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* ===== COMMON STOCK CALCULATION FORMULAS ===== */}\r\n                      <div className=\"alert alert-dark mt-4\">\r\n                        <h6 className=\"alert-heading\"> Common Stock Calculation Formulas</h6>\r\n\r\n                        {isPostMoneyOptionPool ? (\r\n                          // WITH OPTION POOL EXPANSION\r\n                          <>\r\n                            <div className=\"mb-3\">\r\n                              <strong className=\"badge bg-warning text-dark\">Option Pool Expansion Calculation</strong>\r\n                            </div>\r\n\r\n                            <div className=\"row small mb-3\">\r\n                              <div className=\"col-md-6\">\r\n                                <strong>1. Share Price:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Pre-Money  Existing Shares<br />\r\n                                  {formatCurrency(calc.preMoneyValuation, currency)}  {formatNumber(calc.preInvestmentTotalShares)}\r\n                                  = {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                                </code>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                                <strong>2. New Investment Shares:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Investment  Share Price<br />\r\n                                  {formatCurrency(calc.investmentSize, currency)}  {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                                  = {formatNumber(calc.newInvestmentShares)} shares\r\n                                </code>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"row small mb-3\">\r\n                              <div className=\"col-md-6\">\r\n                                <strong>3. Non-Option Shares (Founders + Investors):</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  (Existing - Existing Pool) + New Investment<br />\r\n                                  ({formatNumber(calc.preInvestmentTotalShares)} - {formatNumber(calc.existingOptionPoolShares)}) + {formatNumber(calc.newInvestmentShares)}\r\n                                  = {formatNumber(calc.preInvestmentTotalShares - calc.existingOptionPoolShares + calc.newInvestmentShares)} shares\r\n                                </code>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                                <strong>4. Total Shares After Round:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Non-Option  (1 - Target Pool%)<br />\r\n                                  {formatNumber(calc.preInvestmentTotalShares - calc.existingOptionPoolShares + calc.newInvestmentShares)}  (1 - {calc.targetOptionPoolPercent / 100})\r\n                                  = {formatNumber(calc.postInvestmentTotalShares)} shares\r\n                                </code>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"row small mb-3\">\r\n                              <div className=\"col-md-6\">\r\n                                <strong>5. Required Option Pool:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Total After  Target Pool%<br />\r\n                                  {formatNumber(calc.postInvestmentTotalShares)}  {calc.targetOptionPoolPercent / 100}\r\n                                  = {formatNumber(calc.totalOptionPoolShares)} shares\r\n                                </code>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                                <strong>6. Additional Option Shares:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Required - Existing Pool<br />\r\n                                  {formatNumber(calc.totalOptionPoolShares)} - {formatNumber(calc.existingOptionPoolShares)}\r\n                                  = {formatNumber(calc.additionalOptionPoolShares)} shares\r\n                                </code>\r\n                              </div>\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          // WITHOUT OPTION POOL EXPANSION\r\n                          <>\r\n                            <div className=\"mb-3\">\r\n                              <strong className=\"badge bg-success\">Simple Common Stock Calculation</strong>\r\n                            </div>\r\n\r\n                            <div className=\"row small mb-3\">\r\n                              <div className=\"col-md-6\">\r\n                                <strong>1. Share Price:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Pre-Money  Existing Shares<br />\r\n                                  {formatCurrency(calc.preMoneyValuation, currency)}  {formatNumber(calc.preInvestmentTotalShares)}\r\n                                  = {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                                </code>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                                <strong>2. New Investment Shares:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Investment  Share Price<br />\r\n                                  {formatCurrency(calc.investmentSize, currency)}  {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                                  = {formatNumber(calc.newInvestmentShares)} shares\r\n                                </code>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"row small mb-3\">\r\n                              <div className=\"col-md-6\">\r\n                                <strong>3. Post-Money Valuation:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Investment + Pre-Money<br />\r\n                                  {formatCurrency(calc.investmentSize, currency)} + {formatCurrency(calc.preMoneyValuation, currency)}\r\n                                  = {formatCurrency(calc.postMoneyValuation, currency)}\r\n                                </code>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                                <strong>4. Investor Ownership:</strong><br />\r\n                                <code className=\"bg-light p-1 rounded\">\r\n                                  Investment  Post-Money<br />\r\n                                  {formatCurrency(calc.investmentSize, currency)}  {formatCurrency(calc.postMoneyValuation, currency)}\r\n                                  = {formatPercentage(calc.investorOwnershipPercent)}\r\n                                </code>\r\n                              </div>\r\n                            </div>\r\n                          </>\r\n                        )}\r\n\r\n\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const PreferredEquityCapTable = ({ capTableData }) => {\r\n    if (!capTableData || !capTableData.calculations) {\r\n      return (\r\n        <div className=\"alert alert-warning\">\r\n          <h5> No Data Available</h5>\r\n          <p>Cap table data is not available for this round.</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    //  FIXED: Check if warrants are exercised or pending\r\n    const hasExercisedWarrants = capTableData.hasExercisedWarrants || false;\r\n    const hasPendingWarrants = capTableData.hasPendingWarrants || false;\r\n    const pendingWarrantShares = calc.pendingWarrantShares || 0;\r\n\r\n    // Get data from backend response structure\r\n    const postCapTable = capTableData.postSeriesACapTable || {};\r\n    const postSeriesAShareholders = postCapTable.shareholders || [];\r\n    const totalPostSharesAfterWarrants = postCapTable.totalSharesAfterWarrants || 0;\r\n\r\n    //  FIXED: Calculate actual totals from shareholders data\r\n    const totalFounderShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Founder\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalOptionShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Options Pool\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalSeedInvestorShares = postSeriesAShareholders\r\n      .filter(sh => sh.originalType === \"Seed Investor\" || sh.type === \"Investor\" && sh.name.includes(\"Seed\"))\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalSeriesAShares = postSeriesAShareholders\r\n      .filter(sh => sh.originalType === \"Series A Investor\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalWarrantShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Warrant\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    //  FIXED: Calculate ownership percentages\r\n    const founderOwnership = (totalFounderShares / totalPostSharesAfterWarrants) * 100;\r\n    const optionPoolOwnership = (totalOptionShares / totalPostSharesAfterWarrants) * 100;\r\n    const seedInvestorOwnership = (totalSeedInvestorShares / totalPostSharesAfterWarrants) * 100;\r\n    const seriesAOwnership = (totalSeriesAShares / totalPostSharesAfterWarrants) * 100;\r\n    const warrantOwnership = (totalWarrantShares / totalPostSharesAfterWarrants) * 100;\r\n\r\n    //  FIXED: Get correct share price\r\n    const sharePrice = calc.sharePrice || 0;\r\n\r\n    // Calculate pre-money shares properly\r\n    const preMoneyShares = totalPostSharesAfterWarrants - calc.seriesAShares;\r\n    const preMoneyValuation = preMoneyShares * sharePrice;\r\n\r\n    //  FIXED: Format numbers\r\n\r\n\r\n\r\n\r\n    return (\r\n      <div className=\"container-fluid py-4\" style={{ backgroundColor: '#f8f9fa' }}>\r\n        {/* Header */}\r\n        <div className=\"card mb-4 shadow\">\r\n          <div className=\"card-header text-white\" style={{ backgroundColor: '#6f42c1' }}>\r\n            <h3 className=\"mb-0\"> {capTableData.roundType || \"Preferred Equity Round\"}</h3>\r\n            <small className=\"opacity-75\">\r\n              {capTableData.hasConversions && \"Includes Convertible Instruments\"}\r\n              {hasPendingWarrants && \" | Has Pending Warrants\"}\r\n              {hasExercisedWarrants && \" | Includes Exercised Warrants\"}\r\n            </small>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/* Investment Overview */}\r\n            <h5 className=\"mb-3 text-primary\"> Investment Overview</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded\" style={{ backgroundColor: '#e3f2fd' }}>\r\n                  <small className=\"text-muted d-block\">Investment Amount</small>\r\n                  <h5 className=\"mb-0\">{formatCurrency(calc.investmentSize)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded\" style={{ backgroundColor: '#f3e5f5' }}>\r\n                  <small className=\"text-muted d-block\">Pre-Money Valuation</small>\r\n                  <h5 className=\"mb-0\">{formatCurrency(preMoneyValuation)}</h5>\r\n                  <small className=\"text-muted\">\r\n                    {formatNumber(preMoneyShares)} shares  {formatCurrencyPricePerShare(sharePrice)}\r\n                  </small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded\" style={{ backgroundColor: '#e8f5e9' }}>\r\n                  <small className=\"text-muted d-block\">Post-Money Valuation</small>\r\n                  <h5 className=\"mb-0\">{formatCurrency(calc.postMoneyValuation)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded\" style={{ backgroundColor: '#fff3e0' }}>\r\n                  <small className=\"text-muted d-block\">Share Price</small>\r\n                  <h5 className=\"mb-0\">{formatCurrencyPricePerShare(sharePrice)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Key Metrics */}\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded bg-white\">\r\n                  <small className=\"text-muted d-block\">Series A Shares</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(calc.seriesAShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded bg-white\">\r\n                  <small className=\"text-muted d-block\">Converted Shares (Seed)</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(calc.convertibleNoteShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded bg-white\">\r\n                  <small className=\"text-muted d-block\">Option Pool</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(totalOptionShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded bg-white\">\r\n                  <small className=\"text-muted d-block\">Total Shares</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(totalPostSharesAfterWarrants)}</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  FIXED: Warrants Section */}\r\n            {capTableData.hasWarrants && (\r\n              <div className=\"alert alert-info mb-4\">\r\n                <h6 className=\"alert-heading\">\r\n                  {hasExercisedWarrants ? \" Warrants Exercised\" : \" Pending Warrants\"}\r\n                </h6>\r\n                {capTableData.warrants && capTableData.warrants.length > 0 ? (\r\n                  <div>\r\n                    {capTableData.warrants.map((warrant, idx) => (\r\n                      <div key={idx} className=\"mb-2\">\r\n                        <strong>Warrant #{idx + 1}:</strong> {warrant.coveragePercent}% coverage |\r\n                        Exercise Price: {formatCurrencyPricePerShare(warrant.calculatedExercisePrice)} |\r\n                        Potential Shares: {formatNumber(warrant.potentialShares)} |\r\n                        Status: <span className={`badge ${warrant.status === 'exercised' ? 'bg-success' : 'bg-warning'}`}>\r\n                          {warrant.status}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n\r\n                    {hasExercisedWarrants && (\r\n                      <div className=\"mt-2\">\r\n                        <strong>Exercised Warrants Total:</strong> {formatNumber(calc.exercisedWarrantShares)} shares |\r\n                        Value: {formatCurrency(calc.warrantValue)}\r\n                      </div>\r\n                    )}\r\n\r\n                    {hasPendingWarrants && (\r\n                      <div className=\"mt-2 text-warning\">\r\n                        <strong> Pending Warrants:</strong> {formatNumber(pendingWarrantShares)} shares\r\n                        ({formatPercentage((pendingWarrantShares / totalPostSharesAfterWarrants) * 100)} potential dilution)\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <p>No warrant details available</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Convertible Note Conversion Details */}\r\n            {calc.convertibleNoteShares > 0 && (\r\n              <div className=\"alert alert-success mb-4\">\r\n                <h6 className=\"alert-heading\"> Convertible Note Conversion</h6>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Converted Shares:</strong><br />\r\n                    {formatNumber(calc.convertibleNoteShares)}\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Current Value:</strong><br />\r\n                    {formatCurrency(calc.convertibleNoteValue)}\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Ownership:</strong><br />\r\n                    {formatPercentage(seedInvestorOwnership)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* POST-INVESTMENT CAP TABLE */}\r\n            <div className=\"card shadow-sm mb-4\">\r\n              <div className=\"card-header bg-success text-white\">\r\n                <h5 className=\"mb-0\"> Post-{capTableData.roundType} Cap Table</h5>\r\n                <small>\r\n                  After Investment | Post-Money: {formatCurrency(calc.postMoneyValuation)} |\r\n                  Total Shares: {formatNumber(totalPostSharesAfterWarrants)}\r\n                </small>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-bordered table-hover\">\r\n                    <thead style={{ backgroundColor: '#343a40', color: 'white' }}>\r\n                      <tr>\r\n                        <th>Shareholder</th>\r\n                        <th className=\"text-center\">Type</th>\r\n                        <th className=\"text-center\">Shares</th>\r\n                        <th className=\"text-center\">Ownership %</th>\r\n                        <th className=\"text-center\">Value ({currency})</th>\r\n                        <th className=\"text-center\">Notes</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {postSeriesAShareholders.length > 0 ? (\r\n                        postSeriesAShareholders.map((sh, idx) => {\r\n                          //  FIXED: Calculate ownership properly\r\n                          const ownership = (sh.shares / totalPostSharesAfterWarrants) * 100;\r\n                          const value = sh.shares * sharePrice;\r\n\r\n                          return (\r\n                            <tr key={idx}>\r\n                              <td>\r\n                                <strong>{sh.name}</strong>\r\n                                {sh.fullName && sh.fullName !== sh.name && (\r\n                                  <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                )}\r\n                                {sh.email && sh.email !== \"-\" && (\r\n                                  <div className=\"small\"> {sh.email}</div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                  sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                    sh.type === \"Warrant\" ? \"bg-secondary\" :\r\n                                      sh.type === \"Potential Dilution\" ? \"bg-info\" :\r\n                                        sh.originalType === \"Seed Investor\" ? \"bg-info\" :\r\n                                          \"bg-danger\"\r\n                                  }`}>\r\n                                  {sh.type === \"Potential Dilution\" ? \"Pending Warrants\" : (sh.originalType || sh.type)}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(sh.shares)}</strong>\r\n                                {sh.type === \"Potential Dilution\" && sh.pendingShares && (\r\n                                  <div className=\"small text-warning\">\r\n                                    (Potential: {formatNumber(sh.pendingShares)})\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">\r\n                                  {formatPercentage(ownership)}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatCurrency(value)}</strong>\r\n                                {sh.investmentAmount && sh.investmentAmount > 0 && (\r\n                                  <div className=\"small text-success\">\r\n                                     Invested: {formatCurrency(sh.investmentAmount)}\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {sh.note && (\r\n                                  <small className=\"text-muted\">{sh.note}</small>\r\n                                )}\r\n                                {sh.exercisePrice && sh.exercisePrice > 0 && (\r\n                                  <div className=\"small\">\r\n                                    Exercise: {formatCurrencyPricePerShare(sh.exercisePrice)}\r\n                                  </div>\r\n                                )}\r\n                                {sh.moic && (\r\n                                  <div className=\"small text-success\">MOIC: {sh.moic}x</div>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" className=\"text-center text-muted\">\r\n                            No shareholder data available\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n\r\n                      {/* TOTAL ROW */}\r\n                      <tr style={{ backgroundColor: '#e9ecef', fontWeight: 'bold' }}>\r\n                        <td>TOTAL</td>\r\n                        <td className=\"text-center\"></td>\r\n                        <td className=\"text-center\">{formatNumber(totalPostSharesAfterWarrants)}</td>\r\n                        <td className=\"text-center\">\r\n                          <span className=\"badge bg-dark\">100.00%</span>\r\n                        </td>\r\n                        <td className=\"text-center\">{formatCurrency(calc.postMoneyValuation)}</td>\r\n                        <td className=\"text-center\"></td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                {/* Post-Investment Summary */}\r\n                <div className=\"row mt-3\">\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-primary mb-2\">\r\n                      <strong>Founders:</strong> {formatPercentage(founderOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalFounderShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-warning mb-2\">\r\n                      <strong>Employee Pool:</strong> {formatPercentage(optionPoolOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalOptionShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-info mb-2\">\r\n                      <strong>Seed Investors:</strong> {formatPercentage(seedInvestorOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalSeedInvestorShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-danger mb-2\">\r\n                      <strong>Series A Investors:</strong> {formatPercentage(seriesAOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalSeriesAShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {hasExercisedWarrants && warrantOwnership > 0 && (\r\n                    <div className=\"col-md-3\">\r\n                      <div className=\"alert alert-secondary mb-2\">\r\n                        <strong>Warrant Holders:</strong> {formatPercentage(warrantOwnership)}\r\n                        <div className=\"small\">\r\n                          {formatNumber(totalWarrantShares)} shares\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {hasPendingWarrants && (\r\n                    <div className=\"col-md-3\">\r\n                      <div className=\"alert alert-warning mb-2\">\r\n                        <strong>Pending Warrants:</strong> {formatPercentage(\r\n                          (pendingWarrantShares / totalPostSharesAfterWarrants) * 100\r\n                        )}\r\n                        <div className=\"small\">\r\n                          Potential: {formatNumber(pendingWarrantShares)} shares\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* CALCULATION FORMULAS */}\r\n            <div className=\"alert alert-dark\">\r\n              <h6 className=\"alert-heading\"> Calculation Formulas</h6>\r\n              <div className=\"row small\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <strong>1. Share Price:</strong><br />\r\n                  <code className=\"d-block p-2 bg-light rounded\">\r\n                    Pre-Money Valuation  Pre-Money Shares<br />\r\n                    {formatCurrency(preMoneyValuation)}  {formatNumber(preMoneyShares)}\r\n                    = {formatCurrencyPricePerShare(sharePrice)}\r\n                  </code>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <strong>2. Series A Shares:</strong><br />\r\n                  <code className=\"d-block p-2 bg-light rounded\">\r\n                    Investment  Share Price<br />\r\n                    {formatCurrency(calc.investmentSize)}  {formatCurrencyPricePerShare(sharePrice)}\r\n                    = {formatNumber(calc.seriesAShares)}\r\n                  </code>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <strong>3. Post-Money Valuation:</strong><br />\r\n                  <code className=\"d-block p-2 bg-light rounded\">\r\n                    Total Shares  Share Price<br />\r\n                    {formatNumber(totalPostSharesAfterWarrants)}  {formatCurrencyPricePerShare(sharePrice)}\r\n                    = {formatCurrency(calc.postMoneyValuation)}\r\n                  </code>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <strong>4. Warrant Shares:</strong><br />\r\n                  <code className=\"d-block p-2 bg-light rounded\">\r\n                    Series A Shares  Warrant Coverage %<br />\r\n                    {formatNumber(calc.seriesAShares)}  {capTableData.warrants?.[0]?.coveragePercent || 0}%\r\n                    = {formatNumber(calc.seriesAShares * (capTableData.warrants?.[0]?.coveragePercent || 0) / 100)}\r\n                  </code>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const renderConvertibleNoteRoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    console.log(\"Convertible Note Data:\", capTableData);\r\n    const calc = capTableData.calculations;\r\n    const preTable = capTableData.preSeedCapTable;\r\n    const postTable = capTableData.postSeedCapTable;\r\n\r\n    // Helper functions\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-US').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType || \"Convertible Note Round\"}</h4>\r\n            <small>{roundname} - Convertible Notes (NO SHARES ISSUED)</small>\r\n          </div>\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== INPUT PARAMETERS SECTION ===== */}\r\n            <h5 className=\"mb-3\"> Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Company Value (Input #1)</small>\r\n                  <h5>{formatCurrency(calc.companyValue)}</h5>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size (Input #2 & #4)</small>\r\n                  <h5>{formatCurrency(calc.investmentSize)}</h5>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Conversion Discount (Input #3)</small>\r\n                  <h5>{calc.discountRate}%</h5>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Valuation Cap</small>\r\n                  <h5>{formatCurrency(calc.valuationCap)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Pre-Seed Option Pool % (Input #5)</small>\r\n                  <h5>{calc.optionPoolPercent}%</h5>\r\n                  <small>{formatNumber(calc.employeeShares)} employee shares created</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small>Interest Rate</small>\r\n                  <h5>{calc.interestRate}%</h5>\r\n                  <small>Annual interest on convertible notes</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small>Round 0 Founder Shares</small>\r\n                  <h5>{formatNumber(calc.roundZeroTotalShares)}</h5>\r\n                  <small>Total shares from incorporation</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CALCULATION DETAILS ===== */}\r\n            <div className=\"alert alert-info mb-4\">\r\n              <h6 className=\"alert-heading\"> Employee Pool Calculation</h6>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Formula:</strong> Employee Shares = Total Founder Shares  (1 - Pool %)  Pool %\r\n              </p>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Calculation:</strong> {formatNumber(calc.roundZeroTotalShares)}  (1 - {calc.optionPoolPercent / 100})  {calc.optionPoolPercent / 100} = {formatNumber(calc.employeeShares)} shares\r\n              </p>\r\n              <p className=\"mb-0 small\">\r\n                <strong>Total Shares:</strong> {formatNumber(calc.roundZeroTotalShares)} (founders) + {formatNumber(calc.employeeShares)} (employees) = {formatNumber(calc.totalSharesPreSeed)} shares\r\n              </p>\r\n            </div>\r\n\r\n            {/*  IMPORTANT NOTE - NO SHARES ISSUED */}\r\n            <div className=\"alert alert-warning mb-4\">\r\n              <h6 className=\"alert-heading\"> CONVERTIBLE NOTES - NO SHARES ISSUED YET</h6>\r\n              <p className=\"mb-0\">\r\n                <strong>Important:</strong> Convertible notes are <strong>NOT converted into shares</strong> during this round.\r\n                <br />\r\n                Convertible note investors have invested {formatCurrency(calc.totalConfirmedInvestment || calc.investmentSize)} but receive <strong>0 shares</strong> in this round.\r\n                <br />\r\n                Conversion happens at the next priced equity round (Series A).\r\n              </p>\r\n            </div>\r\n\r\n            {/* ===== PRE-SEED CAP TABLE ===== */}\r\n            {preTable && preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-secondary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-Seed Round 1 (Output #3)</h5>\r\n                      <small>Before Convertible Note investment (with {calc.optionPoolPercent}% option pool)</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Management</th>\r\n                              <th>Contact Info</th>\r\n                              <th>Common Shares</th>\r\n                              <th>New Shares</th>\r\n                              <th>Fully Diluted Ownership %</th>\r\n                              <th>Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={\r\n                                sh.type === \"Options Pool\" ? \"table-warning\" :\r\n                                  sh.type === \"Founder\" ? \"\" : \"table-light\"\r\n                              }>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong>{sh.name || sh.fullName}</strong>\r\n                                    <div className=\"small\">{sh.note || sh.type}</div>\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  {sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"small\">\r\n                                       {sh.email}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.voting && (\r\n                                    <div className=\"small\">\r\n                                      {sh.voting === \"voting\" ? \" Voting\" : \" Non-voting\"}\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n\r\n                                  <span className=\"text-muted\">0</span>\r\n\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className=\"badge bg-dark\">\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(preTable.totalShares)}</td>\r\n                              <td className=\"text-center\">{formatNumber(0)}</td>\r\n                              <td className=\"text-center\">100%</td>\r\n                              <td className=\"text-center\">{formatCurrency(preTable.totalValue)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row mt-3\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-info mb-0\">\r\n                            <h6 className=\"mb-2\">Ownership Summary (Pre-Investment)</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Founders:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(calc.totalFoundersOwnership)}</div>\r\n                              <div className=\"col-6\">Employees:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(calc.totalEmployeeOwnership)}</div>\r\n                              <div className=\"col-6\">Convertible Note Investors:</div>\r\n                              <div className=\"col-6 text-end\">0%</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-light mb-0\">\r\n                            <h6 className=\"mb-2\">Financial Summary</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Company Value:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.companyValue)}</div>\r\n                              <div className=\"col-6\">Share Price:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.sharePrice)}</div>\r\n                              <div className=\"col-6\">Total Shares:</div>\r\n                              <div className=\"col-6 text-end\">{formatNumber(calc.totalSharesPreSeed)}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-SEED CAP TABLE ===== */}\r\n            {postTable && postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-warning\">\r\n                    <div className=\"card-header bg-warning text-dark\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Post-Seed Round 1 (Output #4)</h5>\r\n                      <small>After Convertible Note investment - Notes have NOT converted yet</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <p className=\"text-center mb-4\">\r\n                        <strong> Key Point:</strong> Since Convertible notes do NOT convert to shares in this round,\r\n                        the total number of shares remains {formatNumber(postTable.totalShares)} (same as Pre-Seed).\r\n                        Convertible note investors are listed with 0 shares.\r\n                      </p>\r\n\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th>Contact Info</th>\r\n                              <th>Common Shares</th>\r\n                              <th>New Shares</th>\r\n                              <th>Total Shares</th>\r\n                              <th>Fully Diluted Ownership %</th>\r\n                              <th>Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={\r\n                                sh.type === \"Options Pool\" ? \"table-warning\" :\r\n                                  sh.type === \"Convertible Note Investor\" ? \"table-info\" :\r\n                                    sh.type === \"Available Investment\" ? \"table-danger\" :\r\n                                      sh.type === \"Founder\" ? \"\" : \"table-light\"\r\n                              }>\r\n                                <td>\r\n                                  <strong>{sh.name || sh.fullName}</strong>\r\n                                  {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                                  {sh.isConvertibleNote && (\r\n                                    <div className=\"small text-info\">\r\n                                       Convertible Note Investor\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.isAvailable && (\r\n                                    <div className=\"small text-danger\">\r\n                                       Available for investment\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                                <td>\r\n                                  {sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"small\"> {sh.email}</div>\r\n                                  )}\r\n                                  {sh.voting && (\r\n                                    <div className=\"small\">\r\n                                      {sh.voting === \"voting\" ? \" Voting\" : \" Non-voting\"}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.investmentAmount > 0 && (\r\n                                    <div className=\"small fw-bold\">\r\n                                       {formatCurrency(sh.investmentAmount)}\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n\r\n                                  <span className=\"text-muted\">0</span>\r\n\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.shares === 0 ? \"bg-secondary\" : \"bg-dark\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-warning fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(postTable.totalShares)}</td>\r\n                              <td className=\"text-center\">0</td>\r\n                              <td className=\"text-center\">{formatNumber(postTable.totalShares)}</td>\r\n                              <td className=\"text-center\">100%</td>\r\n                              <td className=\"text-center\">{formatCurrency(postTable.totalValue)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Investment Summary */}\r\n                      <div className=\"row mt-4\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-warning\">\r\n                            <h6 className=\"mb-2\">Investment Summary</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Total Convertible Note Investment:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.totalConfirmedInvestment)}</div>\r\n                              <div className=\"col-6\">Available for Investment:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.availableForInvestment)}</div>\r\n                              <div className=\"col-6\">Number of Investors:</div>\r\n                              <div className=\"col-6 text-end\">{calc.investorCount}</div>\r\n                              <div className=\"col-6\">Shares Issued to Investors:</div>\r\n                              <div className=\"col-6 text-end\">0</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary\">\r\n                            <h6 className=\"mb-2\">Platform Outputs Summary</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Post-Money Valuation (Output #1):</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.postMoneyValuation)}</div>\r\n                              <div className=\"col-6\">Post-Investment Shares (Output #2):</div>\r\n                              <div className=\"col-6 text-end\">{formatNumber(calc.postInvestmentShares)}</div>\r\n                              <div className=\"col-6\">Total Shares (No Change):</div>\r\n                              <div className=\"col-6 text-end\">{formatNumber(postTable.totalShares)}</div>\r\n                              <div className=\"col-6\">Total Value:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(postTable.totalValue)}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== CONVERSION DETAILS ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\">  Convertible Notes will convert at next priced equity round</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Conversion Terms:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li><strong>Conversion Trigger:</strong> Next priced equity financing (Series A)</li>\r\n                      <li><strong>Valuation Cap:</strong> {formatCurrency(calc.valuationCap)}</li>\r\n                      <li><strong>Discount Rate:</strong> {calc.discountRate}%</li>\r\n                      <li><strong>Interest Rate:</strong> {calc.interestRate}% per annum</li>\r\n                      <li><strong>Conversion Price:</strong> Lower of (Series A price  discount) OR (Cap  Total Shares)</li>\r\n                    </ul>\r\n                  </div>\r\n\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Next Steps:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li> Convertible notes issued (0 shares)</li>\r\n                      <li> Investment received: {formatCurrency(calc.totalConfirmedInvestment)}</li>\r\n                      <li> Prepare for Series A priced round</li>\r\n                      <li> Convertible notes will automatically convert</li>\r\n                      <li> Update cap table after conversion</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const renderConvertibleNoteSeriesRoundTable = () => {\r\n\r\n\r\n    if (!capTableData) {\r\n      return <div className=\"alert alert-warning\">No data available</div>;\r\n    }\r\n\r\n    //  Extract data\r\n    const calc = capTableData.calculations || {};\r\n    const preTable = capTableData.preSeedCapTable || {};\r\n    const postTable = capTableData.postSeedCapTable || {};\r\n\r\n    console.log(\"Post Table Shareholders:\", calc.sharePrice);\r\n\r\n    //  Helper functions\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"CAD\";\r\n      const currencyCode = currency.split(' ')[0] || 'CAD';\r\n\r\n      // For small amounts (< 1000), show 2 decimal places\r\n      if (Math.abs(amount) < 1000) {\r\n        return new Intl.NumberFormat('en-CA', {\r\n          style: 'currency',\r\n          currency: currencyCode,\r\n          minimumFractionDigits: 2,\r\n          maximumFractionDigits: 2\r\n        }).format(amount || 0);\r\n      }\r\n\r\n      // For larger amounts, no decimal places\r\n      return new Intl.NumberFormat('en-CA', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-CA').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n\r\n    //  Prepare chart data\r\n    const prepareChartData = () => {\r\n      if (!postTable.shareholders || postTable.shareholders.length === 0) {\r\n        return null;\r\n      }\r\n\r\n      const labels = postTable.shareholders.map(sh => sh.name || \"Shareholder\");\r\n      const data = postTable.shareholders.map(sh => parseFloat(sh.ownership) || 0);\r\n      const backgroundColors = postTable.shareholders.map(sh => {\r\n        if (sh.type?.includes(\"Founder\")) return '#4e73df';\r\n        if (sh.type?.includes(\"Option\")) return '#f6c23e';\r\n        if (sh.type?.includes(\"Convertible\") || sh.type?.includes(\"Seed\")) return '#1cc88a';\r\n        if (sh.type?.includes(\"Series\")) return '#36b9cc';\r\n        return '#858796';\r\n      });\r\n\r\n      return {\r\n        labels,\r\n        datasets: [{\r\n          data,\r\n          backgroundColor: backgroundColors,\r\n          borderColor: '#fff',\r\n          borderWidth: 1\r\n        }]\r\n      };\r\n    };\r\n\r\n    const chartData = prepareChartData();\r\n\r\n    //  Chart options\r\n    const chartOptions = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      plugins: {\r\n        legend: {\r\n          position: 'right',\r\n          labels: {\r\n            padding: 20,\r\n            usePointStyle: true,\r\n          }\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Post-Series A Ownership Distribution',\r\n          font: {\r\n            size: 16\r\n          }\r\n        },\r\n        tooltip: {\r\n          callbacks: {\r\n            label: function (context) {\r\n              const label = context.label || '';\r\n              const value = context.parsed || 0;\r\n              return `${label}: ${value.toFixed(1)}%`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    //  Calculate current shares from pre-table for comparison\r\n    const getPreSharesForShareholder = (name) => {\r\n      if (!preTable.shareholders) return 0;\r\n      const shareholder = preTable.shareholders.find(sh =>\r\n        sh.name.includes(name) || name.includes(sh.name)\r\n      );\r\n      return shareholder ? shareholder.shares : 0;\r\n    };\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h4 className=\"mb-0\"> {roundname} with Convertible Note Conversion</h4>\r\n            <small>{capTableData.message || \"Convertible Note conversion completed\"}</small>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/*  CHART SECTION */}\r\n            {chartData ? (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                      <h6 className=\"mb-0\">Ownership Distribution (Pie Chart)</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div style={{ height: '300px' }}>\r\n                        {(() => {\r\n                          try {\r\n                            return <Pie data={chartData} options={chartOptions} />;\r\n                          } catch (e) {\r\n                            return <Bar data={chartData} options={chartOptions} />;\r\n                          }\r\n                        })()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                      <h6 className=\"mb-0\">Ownership Breakdown</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <ul className=\"list-group\">\r\n                        {postTable.shareholders.map((sh, idx) => (\r\n                          <li key={idx} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                            <span>\r\n                              <strong>{sh.name}</strong>\r\n                              <small className=\"text-muted ms-2\">{sh.type}</small>\r\n                            </span>\r\n                            <span className=\"badge bg-primary rounded-pill\">\r\n                              {formatPercentage(sh.ownership)}\r\n                            </span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"alert alert-warning mb-4\">\r\n                No shareholder data available for chart\r\n              </div>\r\n            )}\r\n\r\n            {/*  CONVERTIBLE NOTE CONVERSION DETAILS */}\r\n            <div className=\"alert alert-success mb-4\">\r\n              <h6 className=\"mb-2\"> Convertible Note Conversion</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Original Investment:</strong> {formatCurrency(calc.seedInvestment || 0)}</p>\r\n                  <p><strong>Interest Rate:</strong> {calc.interestRate || '0'}%</p>\r\n                  <p><strong>Discount Rate:</strong> {calc.discountRate || '0'}%</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Valuation Cap:</strong> {formatCurrency(calc.valuationCap || 0)}</p>\r\n                  <p><strong>Years Between Rounds:</strong> {calc.yearsBetweenRounds || 2}</p>\r\n                  <p><strong>Principal + Interest:</strong> {formatCurrency(calc.principalPlusInterest || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Shares Converted:</strong> {formatNumber(calc.seedConversionShares || 0)}</p>\r\n                  <p><strong>Conversion Value:</strong> {formatCurrency(calc.seedConversionValue || 0)}</p>\r\n                  <p><strong>MOIC:</strong> <strong className=\"text-success\">{calc.seedMOIC || \"0X\"}</strong></p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  SERIES A INVESTMENT DETAILS */}\r\n            <div className=\"alert alert-primary mb-4\">\r\n              <h6 className=\"mb-2\"> Series A Investment</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Investment Amount:</strong> {formatCurrency(calc.seriesAInvestment || 0)}</p>\r\n                  <p><strong>Shares Purchased:</strong> {formatNumber(calc.seriesAShares || 0)}</p>\r\n                  <p><strong>Share Price:</strong> {formatCurrency(calc.sharePrice || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Investment Value:</strong> {formatCurrency(calc.seriesAValue || 0)}</p>\r\n                  <p><strong>MOIC:</strong> <strong>{calc.seriesAMOIC || \"0X\"}</strong></p>\r\n                  <p><strong>Pre-Money Valuation:</strong> {formatCurrency(calc.preMoneyValuation || 0)}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  PRE-SERIES A CAP TABLE */}\r\n            {preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-secondary text-white\">\r\n                  <h5 className=\"mb-0\"> Pre-Series A Cap Table</h5>\r\n                  <small>Total Shares: {formatNumber(preTable.totalShares || 0)} | Total Value: {formatCurrency(preTable.totalValue || 0)}</small>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table table-bordered table-hover\">\r\n                      <thead className=\"table-dark\">\r\n                        <tr>\r\n                          <th>Shareholder</th>\r\n                          <th className=\"text-center\">Type</th>\r\n                          <th className=\"text-center\">Shares</th>\r\n                          <th className=\"text-center\">Ownership %</th>\r\n                          <th className=\"text-center\">Value</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {preTable.shareholders.map((sh, idx) => (\r\n                          <tr key={idx}>\r\n                            <td>\r\n                              <strong>{sh.name || `Shareholder ${idx + 1}`}</strong>\r\n                              {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <span className={`badge ${sh.type?.includes(\"Founder\") ? \"bg-primary\" :\r\n                                sh.type?.includes(\"Option\") ? \"bg-warning text-dark\" :\r\n                                  \"bg-info\"\r\n                                }`}>\r\n                                {sh.type || \"Shareholder\"}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <strong>{formatNumber(sh.shares || 0)}</strong>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <span className=\"badge bg-dark\">\r\n                                {formatPercentage(sh.ownership || 0)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <strong>{formatCurrency(sh.value || 0)}</strong>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        <tr className=\"table-secondary fw-bold\">\r\n                          <td colSpan=\"2\">TOTAL</td>\r\n                          <td className=\"text-center\">{formatNumber(preTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">100%</td>\r\n                          <td className=\"text-center\">{formatCurrency(preTable.totalValue || 0)}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*  POST-SERIES A CAP TABLE WITH 3 COLUMNS */}\r\n            {postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-primary text-white\">\r\n                  <h5 className=\"mb-0\"> Post-Series A Cap Table</h5>\r\n                  <small>Total Shares: {formatNumber(postTable.totalShares || 0)} | Total Value: {formatCurrency(postTable.totalValue || 0)}</small>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table table-bordered table-hover\">\r\n                      <thead className=\"table-dark\">\r\n                        <tr>\r\n                          <th>Shareholder</th>\r\n                          <th className=\"text-center\">Type</th>\r\n                          <th className=\"text-center\">Shares</th>\r\n                          <th className=\"text-center\">New Shares</th>\r\n                          <th className=\"text-center\">Total Shares</th>\r\n                          <th className=\"text-center\">Ownership %</th>\r\n                          <th className=\"text-center\">Value</th>\r\n                          <th className=\"text-center\">Investment Details</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {postTable.shareholders.map((sh, idx) => {\r\n                          // Calculate current shares from pre-table\r\n                          const preShares = getPreSharesForShareholder(sh.name);\r\n                          const newShares = sh.newShares || (sh.shares - preShares);\r\n                          const totalShares = sh.shares;\r\n\r\n                          return (\r\n                            <tr key={idx}>\r\n                              <td>\r\n                                <strong>{sh.name || `Shareholder ${idx + 1}`}</strong>\r\n                                {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className={`badge ${sh.type?.includes(\"Founder\") ? \"bg-primary\" :\r\n                                  sh.type?.includes(\"Option\") ? \"bg-warning text-dark\" :\r\n                                    sh.type?.includes(\"Convertible\") || sh.type?.includes(\"Seed\") ? \"bg-info\" :\r\n                                      sh.type?.includes(\"Series\") ? \"bg-success\" :\r\n                                        \"bg-secondary\"\r\n                                  }`}>\r\n                                  {sh.type || \"Shareholder\"}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(preShares)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {newShares > 0 ? (\r\n                                  <div className=\"text-success fw-bold\">\r\n                                    +{formatNumber(newShares)}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"text-muted\">0</span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(totalShares)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">\r\n                                  {formatPercentage(sh.ownership || 0)}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatCurrency(sh.value || 0)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {sh.conversionPrice ? (\r\n                                  <div className=\"small\">\r\n                                    @ {formatCurrency(sh.conversionPrice)}/share\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                    {sh.principalPlusInterest && (\r\n                                      <div className=\"text-info\">Principal + Interest: {formatCurrency(sh.principalPlusInterest)}</div>\r\n                                    )}\r\n                                  </div>\r\n                                ) : sh.investment ? (\r\n                                  <div className=\"small\">\r\n                                    Invested: {formatCurrency(sh.investment)}\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                  </div>\r\n                                ) : sh.originalInvestment ? (\r\n                                  <div className=\"small\">\r\n                                    Original: {formatCurrency(sh.originalInvestment)}\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"text-muted\">-</span>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                        <tr className=\"table-primary fw-bold\">\r\n                          <td colSpan=\"2\">TOTAL</td>\r\n                          <td className=\"text-center\">{formatNumber(preTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">{formatNumber(calc.newSharesIssued || 0)}</td>\r\n                          <td className=\"text-center\">{formatNumber(postTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">100%</td>\r\n                          <td className=\"text-center\">{formatCurrency(postTable.totalValue || 0)}</td>\r\n                          <td className=\"text-center\">\r\n                            {formatCurrency((calc.seedInvestment || 0) + (calc.seriesAInvestment || 0))}\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n\r\n                  {/*  SUMMARY OF NEW SHARES */}\r\n                  <div className=\"alert alert-info mt-3\">\r\n                    <h6> New Shares Summary</h6>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Convertible Note Conversion:</strong> {formatNumber(calc.seedConversionShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Series A Investment:</strong> {formatNumber(calc.seriesAShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>New Option Pool:</strong> {formatNumber(calc.newOptionShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Total New Shares:</strong> {formatNumber(calc.newSharesIssued || 0)} shares</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*  FINAL SUMMARY */}\r\n            <div className=\"alert alert-info\">\r\n              <h6> Final Summary</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Pre-Money Valuation:</strong> {formatCurrency(calc.preMoneyValuation || 0)}</p>\r\n                  <p><strong>Post-Money Valuation:</strong> {formatCurrency(calc.postMoneyValuation || 0)}</p>\r\n                  <p><strong>Valuation Increase:</strong> {\r\n                    (((calc.postMoneyValuation || 0) - (calc.preMoneyValuation || 0)) /\r\n                      (calc.preMoneyValuation || 1) * 100).toFixed(1)}%\r\n                  </p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Total Capital Raised:</strong> {\r\n                    formatCurrency((calc.seedInvestment || 0) + (calc.seriesAInvestment || 0))\r\n                  }</p>\r\n                  <p><strong>Share Price:</strong> {formatCurrency(calc.sharePrice || 0)}</p>\r\n                  <p><strong>Total Shares Outstanding:</strong> {formatNumber(postTable.totalShares || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>New Shares Issued:</strong> {formatNumber(calc.newSharesIssued || 0)}</p>\r\n                  <p><strong>Option Pool Created:</strong> {formatNumber(calc.newOptionShares || 0)} shares</p>\r\n                  <p><strong>Existing Option Pool:</strong> {formatNumber(calc.employeeSharesSeedRound || 0)} shares</p>\r\n                </div>\r\n              </div>\r\n\r\n              {/*  NEW: Ownership Summary Section */}\r\n              <div className=\"row mt-3\">\r\n                <div className=\"col-md-12\">\r\n                  <h6> Ownership Distribution</h6>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Total Founders Ownership:</strong> {\r\n                        (() => {\r\n                          // Calculate total founders shares from postSeedShareholders\r\n                          const founders = postTable.shareholders?.filter(s => s.type === \"Founder\") || [];\r\n                          const totalFounderShares = founders.reduce((sum, f) => sum + (f.shares || 0), 0);\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const founderPercentage = (totalFounderShares / totalPostShares * 100).toFixed(1);\r\n                          return `${founderPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Employee Option Pool:</strong> {\r\n                        (() => {\r\n                          const optionPool = postTable.shareholders?.find(s => s.type === \"Options Pool\") || {};\r\n                          const optionShares = optionPool.shares || 0;\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const optionPercentage = (optionShares / totalPostShares * 100).toFixed(1);\r\n                          return `${optionPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Investor Ownership:</strong> {\r\n                        (() => {\r\n                          const investors = postTable.shareholders?.filter(s => s.type === \"Investor\") || [];\r\n                          const totalInvestorShares = investors.reduce((sum, inv) => sum + (inv.shares || 0), 0);\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const investorPercentage = (totalInvestorShares / totalPostShares * 100).toFixed(1);\r\n                          return `${investorPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Fully Diluted Total:</strong> 100%</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"fullpage d-block\">\r\n        <div className=\"d-flex align-items-start gap-0\">\r\n          <ModuleSideNav\r\n            isCollapsed={isCollapsed}\r\n            setIsCollapsed={setIsCollapsed}\r\n          />\r\n          <div\r\n            className={`global_view ${isCollapsed ? \"global_view_col\" : \"\"}`}\r\n          >\r\n            <TopBar />\r\n            <SectionWrapper className=\"d-block p-md-4 p-3\">\r\n              <div className=\"container-fluid\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                  <h2>Capitalization Table</h2>\r\n                  <button\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => navigate(-1)}\r\n                  >\r\n                    Back to Rounds\r\n                  </button>\r\n                </div>\r\n\r\n                {loading && (\r\n                  <div className=\"text-center py-5\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <p className=\"mt-3\">Loading cap table data...</p>\r\n                  </div>\r\n                )}\r\n\r\n                {error && (\r\n                  <div className=\"alert alert-danger\" role=\"alert\">\r\n                    <strong>Error:</strong> {error}\r\n                  </div>\r\n                )}\r\n                {!loading && !error && capTableData && (() => {\r\n                  console.log(capTableData);\r\n                  // Normalize data for consistent checking\r\n                  const roundType = (capTableData.round_type).toLowerCase();\r\n                  const shareClassType = (capTableData.shareClassType).toLowerCase();\r\n                  const instrumentType = (capTableData.instrumentType || '').toLowerCase();\r\n\r\n                  // CONDITION 1: Round 0 / Incorporation (highest priority)\r\n                  if (roundType.includes(\"round 0\") ||\r\n                    roundType.includes(\"incorporation\") ||\r\n                    capTableData.isRoundZero) {\r\n                    return renderRoundZeroTable();\r\n                  }\r\n\r\n                  // CONDITION 2: Preferred Equity (check before Series/Seed)\r\n                  // if (instrumentType === \"preferred equity\" ||\r\n                  //   instrumentType.includes(\"preferred\")) {\r\n                  //   return <PreferredEquityCapTable capTableData={capTableData} />;\r\n                  // }\r\n\r\n                  // CONDITION 3: Series A + SAFE\r\n                  if (\r\n\r\n                    instrumentType === \"preferred equity\") {\r\n\r\n                    return rendePreferredRoundTable();\r\n                  }\r\n\r\n                  // CONDITION 4: Series A (without SAFE)\r\n                  if (instrumentType === 'common stock') {\r\n                    return renderCommonStockCaptable();\r\n                  }\r\n\r\n                  // CONDITION 5: Seed + SAFE\r\n                  if (\r\n                    instrumentType === \"safe\") {\r\n                    return renderSAFERoundTable();\r\n                  }\r\n                  if (\r\n                    instrumentType === \"convertible note\") {\r\n                    return renderConvertibleNoteRoundTable();\r\n                  } else {\r\n                    return renderSeedRoundTable();\r\n                  }\r\n                  // if (shareClassType.includes(\"series\") &&\r\n                  //   instrumentType === \"convertible note\") {\r\n                  //   return renderConvertibleNoteSeriesRoundTable();\r\n                  // } else {\r\n                  //   return renderSeedRoundTable();\r\n                  // }\r\n                  // CONDITION 6: Default - Seed Round (any remaining seed or fallback)\r\n\r\n                })()}\r\n\r\n                {!loading && !error && !capTableData && (\r\n                  <div className=\"alert alert-warning\" role=\"alert\">\r\n                    No cap table data available for this roundsss.\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </SectionWrapper>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n}\r\n","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS<TType, TData, TLabel> | null>(null);\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["RecordRoundCaptable","navigate","useNavigate","storedUsername","localStorage","getItem","userLogin","JSON","parse","API_URL_CAPTABLE","API_BASE_URL","document","title","id","useParams","capTableData","setCapTableData","useState","roundData","setRoundData","loading","setLoading","error","setError","isCollapsed","setIsCollapsed","useEffect","getCapTableData","async","formData","company_id","companies","round_id","res","axios","post","headers","Accept","data","success","capTable","round","message","err","_err$response","_err$response$data","response","console","formatCurrency","amount","currency","arguments","length","undefined","cleanCurrency","trim","split","currencyCode","includes","toUpperCase","Intl","NumberFormat","style","minimumFractionDigits","format","parseFloat","toFixed","formatCurrencyPricePerShare","numAmount","maximumFractionDigits","formatPriceThreeDecimal","formatNumber","num","formatPercentage","percent","Number","isNaN","RoundCapChart","_ref","chartData","_jsx","height","children","Bar","options","responsive","plugins","legend","display","text","scales","y","beginAtZero","max","Wrapper","className","_jsxs","ModuleSideNav","TopBar","SectionWrapper","onClick","role","log","roundType","round_type","toLowerCase","instrumentType","shareClassType","isRoundZero","calculations","founderCount","sharePrice","totalSharesIssued","totalValue","shareholders","map","sh","idx","firstName","lastName","email","href","phone","shareType","customShareType","shareClass","customShareClass","votingRights","shares","fontSize","ownership","value","colSpan","rendePreferredRoundTable","calc","inputs","preTable","preSeedCapTable","postTable","postSeedCapTable","hasMultipleConvertibles","convertibleCount","hasSAFE","isSAFERound","conversionDetails","some","cd","type","hasConvertibleNote","isConvertibleNoteRound","isSeriesA","correctedSeedCapPrice","valuationCap","totalSharesPreSeed","correctedSeedOptimalPrice","Math","min","seedDiscountPrice","hasCalculationErrors","abs","seedCapPrice","seedOptimalPrice","liquidationPref","liquidationPreference","liquidationCalc","liquidationCalculations","getOwnershipSummary","totalShares","founders","employees","seedInvestors","seriesAInvestors","forEach","postOwnership","roundname","preMoneyValuation","seriesAInvestment","roundZeroShares","roundZeroTotalShares","seedInvestment","_Fragment","discountRate","formatCurrencyTwoDecimals","interestRate","pow","seedMOIC","seedConversionValue","seriesAMOIC","newOptionShares","seedConversionShares","seriesAShares","targetOptionPoolPercent","hasNewShares","newShares","existingShares","name","fullName","note","reduce","sum","isTotal","commonShares","investmentAmount","breakdown","conversionPrice","moic","finalPostMoneyValuation","totalSharesPostSeed","label","preferredLiquidationMultiple","participatingCap","exitScenarios","scenario","totalSeriesA","seriesAPreferredAmount","seriesAParticipationAmount","totalSeed","seedPreferredAmount","seedParticipationAmount","liquidationLabel","exitValue","founderAmount","optionPoolAmount","renderCommonStockCaptable","details","stringify","financialSummary","isPostMoneyOptionPool","isCommonStock","needsExpansion","preInvestmentCapTable","postInvestmentCapTable","investmentSize","existingOptionPoolPercent","existingOptionPoolShares","postMoneyValuation","newInvestmentShares","additionalOptionPoolShares","totalNewShares","investorOwnershipPercent","preInvestmentTotalShares","postInvestmentTotalShares","totalOptionPoolShares","source","isExisting","originalType","filter","renderSAFERoundTable","preSeedTable","postSeedTable","companyValue","optionPoolPercent","employeeShares","safeInvestment","safeInvestorCount","conversionInfo","conversionTrigger","renderConvertibleNoteRoundTable","totalConfirmedInvestment","voting","totalFoundersOwnership","totalEmployeeOwnership","isConvertibleNote","isAvailable","availableForInvestment","investorCount","postInvestmentShares","renderSeedRoundTable","totalNoteInvestment","optionPoolShares","preSeedShareholders","preSeedTotalShares","isGeneric","ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","defaultDatasetIdKey","reforwardRef","ref","current","setLabels","currentData","nextLabels","labels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","datasets","nextDataset","currentDataset","find","dataset","push","Object","assign","cloneData","nextData","ChartComponent","props","width","redraw","fallbackContent","updateMode","canvasProps","canvasRef","useRef","chartRef","renderChart","Chart$1","destroyChart","destroy","chart","nextOptions","setOptions","config","setTimeout","update","React","Chart","forwardRef","createTypedChart","registerables","BarController","Pie","PieController"],"sourceRoot":""}