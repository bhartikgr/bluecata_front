{"version":3,"file":"static/js/1929.61017ffe.chunk.js","mappings":"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","sources":["pages/User/Investor/RecordRoundCaptable.jsx","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TopBar from \"../../../components/Users/TopBar\";\r\nimport ModuleSideNav from \"../../../components/Users/ModuleSideNav.jsx\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  SectionWrapper,\r\n  Wrapper,\r\n} from \"../../../components/Styles/MainHeadStyles.js\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { API_BASE_URL } from \"../../../config/config.js\";\r\n\r\n\r\nimport { Pie, Bar } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement // Pie chart   add \r\n} from 'chart.js';\r\n\r\n//  Register all required components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement // Pie chart  \r\n);\r\nexport default function RecordRoundCaptable() {\r\n  const navigate = useNavigate();\r\n  const storedUsername = localStorage.getItem(\"SignatoryLoginData\");\r\n  const userLogin = JSON.parse(storedUsername);\r\n  const API_URL_CAPTABLE = API_BASE_URL + \"api/user/capitalround/\";\r\n  document.title = \"Round Cap Table\";\r\n  const { id } = useParams();\r\n\r\n  const [capTableData, setCapTableData] = useState(null);\r\n  const [roundData, setRoundData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isCollapsed, setIsCollapsed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    getCapTableData();\r\n  }, [id]);\r\n\r\n  const getCapTableData = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    let formData = {\r\n      company_id: userLogin.companies[0].id,\r\n      round_id: id,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        API_URL_CAPTABLE + \"getRoundCapTableSingleRecord\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (res.data.success) {\r\n        setCapTableData(res.data.capTable);\r\n        setRoundData(res.data.round);\r\n      } else {\r\n        setError(res.data.message || \"Failed to load cap table\");\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Error loading cap table data\");\r\n      console.error(\"Error:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const formatCurrency = (amount, currency = \"USD\") => {\r\n    // Clean currency code - remove spaces and symbols\r\n    const cleanCurrency = currency?.trim().split(\" \")[0] || \"USD\";\r\n\r\n    // Valid currency codes\r\n    const validCurrencies = [\"USD\", \"CAD\", \"EUR\", \"GBP\", \"INR\", \"AUD\", \"JPY\"];\r\n    const currencyCode = validCurrencies.includes(cleanCurrency.toUpperCase())\r\n      ? cleanCurrency.toUpperCase()\r\n      : \"USD\";\r\n\r\n    try {\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 2,\r\n      }).format(amount || 0);\r\n    } catch (error) {\r\n      // Fallback if currency is still invalid\r\n      return `${currencyCode} ${parseFloat(amount || 0).toFixed(2)}`;\r\n    }\r\n  };\r\n  const formatCurrencyPricePerShare = (amount = 0, currency = \"USD\") => {\r\n    // Clean currency code - remove spaces and symbols\r\n    const cleanCurrency = currency?.trim().split(\" \")[0] || \"USD\";\r\n\r\n    // Valid currency codes\r\n    const validCurrencies = [\"USD\", \"CAD\", \"EUR\", \"GBP\", \"INR\", \"AUD\", \"JPY\"];\r\n    const currencyCode = validCurrencies.includes(cleanCurrency.toUpperCase())\r\n      ? cleanCurrency.toUpperCase()\r\n      : \"USD\";\r\n\r\n    try {\r\n      // Parse amount to ensure it's a number\r\n      const numAmount = parseFloat(amount) || 0;\r\n\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 3, // Always show 3 decimal places\r\n        maximumFractionDigits: 3, // Exactly 3 decimal places, not more\r\n      }).format(numAmount);\r\n    } catch (error) {\r\n      // Fallback if currency is still invalid\r\n      return `${currencyCode} ${(parseFloat(amount) || 0).toFixed(3)}`;\r\n    }\r\n  };\r\n  const formatPriceThreeDecimal = (amount = 0) => {\r\n    try {\r\n      // Parse amount to ensure it's a number\r\n      const numAmount = parseFloat(amount) || 0;\r\n\r\n      return new Intl.NumberFormat(\"en-US\", {\r\n        minimumFractionDigits: 3, // Always show 3 decimal places\r\n        maximumFractionDigits: 3, // Exactly 3 decimal places\r\n      }).format(numAmount);\r\n    } catch (error) {\r\n      // Fallback\r\n      return (parseFloat(amount) || 0).toFixed(3);\r\n    }\r\n  };\r\n\r\n  const formatNumber = (num) => {\r\n    return new Intl.NumberFormat(\"en-US\").format(num || 0);\r\n  };\r\n\r\n  const formatPercentage = (percent) => {\r\n    // Convert to number if it's a string\r\n    const num = typeof percent === 'string' ? parseFloat(percent) : Number(percent);\r\n    return `${(!isNaN(num) ? num : 0).toFixed(2)}%`;\r\n  };\r\n  const RoundCapChart = ({ chartData }) => {\r\n    const options = {\r\n      responsive: true,\r\n      plugins: {\r\n        legend: { display: false },\r\n        title: { display: true, text: \"Fully Diluted Ownership %\" },\r\n      },\r\n      scales: {\r\n        y: { beginAtZero: true, max: 100 },\r\n      },\r\n    };\r\n\r\n    return (\r\n      <div style={{ height: \"300px\" }}>\r\n        <Bar data={chartData} options={options} />\r\n      </div>\r\n    );\r\n  };\r\n  const renderRoundZeroTable = () => {\r\n    if (!capTableData) return null;\r\n\r\n    // Check for error in Round 0 data\r\n    if (capTableData.error) {\r\n      return (\r\n        <div className=\"alert alert-danger\">\r\n          <h5>Data Error</h5>\r\n          <p>{capTableData.error}</p>\r\n          <p className=\"mb-0\">\r\n            Please check Round 0 data structure. Founder allocation data is required.\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small className=\"opacity-75\">Company Incorporation - Founder Shares Allocation</small>\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/* Platform Inputs Summary */}\r\n            <h5 className=\"mb-3\">Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Founder Share Allocation</small>\r\n                  <h6>{capTableData.calculations.founderCount} Founders</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Share Types</small>\r\n                  <h6>Common Shares</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Price Per Share</small>\r\n                  <h6>{formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Platform Outputs */}\r\n            <h5 className=\"mb-3\">Platform Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Total Shares Issued</small>\r\n                  <h5>{formatNumber(capTableData.calculations.totalSharesIssued)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Total Company Value</small>\r\n                  <h5>{formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>Founder Count</small>\r\n                  <h5>{capTableData.calculations.founderCount}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ownership Chart */}\r\n            <div className=\"mb-4\">\r\n              <RoundCapChart chartData={capTableData.chartData} />\r\n            </div>\r\n\r\n            {/* Founder Share Allocation Table - CLIENT EXAMPLE  according */}\r\n            <h5 className=\"mt-4 mb-3\">Founder Share Allocation</h5>\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-striped table-hover\">\r\n                <thead className=\"table-dark\">\r\n                  <tr>\r\n                    <th>Founder Name</th>\r\n                    <th>Email</th>\r\n                    <th>Phone</th>\r\n                    <th>Share Type</th>\r\n                    <th>Share Class</th>\r\n                    <th>Voting Rights</th>\r\n                    <th className=\"text-end\">Numbers of Shares</th>\r\n                    <th className=\"text-end\">Price Per Share</th>\r\n                    <th className=\"text-end\">Ownership %</th>\r\n                    <th className=\"text-end\">Value</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {capTableData.shareholders.map((sh, idx) => (\r\n                    <tr key={idx}>\r\n                      <td>\r\n                        <strong>\r\n                          {sh.firstName && sh.lastName ?\r\n                            `${sh.firstName} ${sh.lastName}` :\r\n                            `Founder ${idx + 1}`\r\n                          }\r\n                        </strong>\r\n                      </td>\r\n                      <td>\r\n                        {sh.email ? (\r\n                          <a href={`mailto:${sh.email}`} className=\"text-black text-decoration-none\">\r\n                            {sh.email}\r\n                          </a>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {sh.phone ? (\r\n                          <a href={`tel:${sh.phone}`} className=\" text-black text-decoration-none\">\r\n                            {sh.phone}\r\n                          </a>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <span className=\"badge bg-secondary text-capitalize\">\r\n                          {sh.shareType === 'common' ? 'Common Shares' :\r\n                            sh.shareType === 'preferred' ? 'Preferred Shares' :\r\n                              sh.shareType === 'other' && sh.customShareType ? sh.customShareType :\r\n                                'Common Shares'}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <span className=\"badge bg-light text-dark border\">\r\n                          {sh.shareClass === 'other' && sh.customShareClass ?\r\n                            sh.customShareClass :\r\n                            sh.shareClass || 'Class A'}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <span className={`badge ${sh.votingRights === 'voting' ? 'bg-success' : 'bg-warning'}`}>\r\n                          {sh.votingRights === 'voting' ? 'Voting' : 'Non-Voting'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-end\">{formatNumber(sh.shares)}</td>\r\n                      <td className=\"text-end\">\r\n                        {formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}\r\n                      </td>\r\n                      <td className=\"text-end\">\r\n                        <span className=\"badge bg-danger\" style={{ fontSize: '16px' }}>\r\n                          {formatPercentage(sh.ownership)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-end\">\r\n                        {formatCurrency(sh.value, capTableData.currency)}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n\r\n                  {/* Total Row */}\r\n                  <tr className=\"table-secondary fw-bold\">\r\n                    <td colSpan=\"6\">TOTAL</td>\r\n                    <td className=\"text-end\">\r\n                      {formatNumber(capTableData.calculations.totalSharesIssued)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatPercentage(100)}\r\n                    </td>\r\n                    <td className=\"text-end\">\r\n                      {formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Additional Summary Information */}\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted pb-2\">Total Founders</h6>\r\n                    <h4 className=\"text-primary\">{capTableData.shareholders.length}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted pb-2\">Total Shares</h6>\r\n                    <h4 className=\"text-success\">{formatNumber(capTableData.calculations.totalSharesIssued)}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted pb-2\">Price Per Share</h6>\r\n                    <h4 className=\"text-info\">\r\n                      {formatCurrencyPricePerShare(\r\n                        capTableData.calculations.sharePrice,\r\n                        capTableData.currency\r\n                      )}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"card bg-light\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h6 className=\"card-title text-muted pb-2\">Total Value</h6>\r\n                    <h4 className=\"text-warning\">\r\n                      {formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-info\">\r\n                  <h6 className=\"alert-heading pb-2\"> Platform Inputs</h6>\r\n                  <ul className=\"mb-0 small\">\r\n                    <li>Number of shares issued to each founder</li>\r\n                    <li>Type of shares as per incorporation documents</li>\r\n                    <li>Price per share as per incorporation</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-success\">\r\n                  <h6 className=\"alert-heading pb-2\"> Platform Outputs</h6>\r\n                  <ul className=\"mb-0 small\">\r\n                    <li>Total number of shares issued</li>\r\n                    <li>Ownership % based on shares issued</li>\r\n                    <li>Total company value at incorporation</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Carry Over Information - CLIENT REQUIREMENTS  according */}\r\n            <div className=\"alert alert-warning mt-3\">\r\n              <h6 className=\"alert-heading pb-2\"> Important Note</h6>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Total shares ({formatNumber(capTableData.calculations.totalSharesIssued)}) will carry forward to Round 1.</strong>\r\n              </p>\r\n              <p className=\"mb-0 small\">\r\n                <strong>Price per share ({formatCurrencyPricePerShare(capTableData.calculations.sharePrice, capTableData.currency)}) and company valuation ({formatCurrency(capTableData.calculations.totalValue, capTableData.currency)}) will NOT carry over to investment rounds.</strong>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSeedRoundTable = () => {\r\n\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    if (capTableData.error) {\r\n      return (\r\n        <div className=\"alert alert-danger\">\r\n          <h5>Calculation Error</h5>\r\n          <p>{capTableData.error}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Check if this is a Convertible Note round\r\n    const isConvertibleNote = capTableData.isConvertibleNoteRound ||\r\n      capTableData.instrumentType === \"Convertible Note\";\r\n\r\n    // Check if there are warrants\r\n    const hasWarrants = calc.hasWarrants && calc.warrants && calc.warrants.length > 0;\r\n\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-success text-white\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small className=\"opacity-75\">\r\n              {isConvertibleNote ? \"Convertible Note Round - Cap Table Calculations\" : \"Seed Round - Cap Table Calculations\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/* Platform Inputs */}\r\n            <h5 className=\"mb-3\">Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(calc.preMoneyValuation, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Option Pool %</small>\r\n                  <h5>{formatPercentage(calc.optionPoolPercent)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Round Type</small>\r\n                  <h5>{isConvertibleNote ? \"Convertible Note\" : \"Equity Round\"}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Convertible Note Specific Inputs */}\r\n            {isConvertibleNote && calc.valuationCap && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                    <small className=\"text-white\">Valuation Cap</small>\r\n                    <h6>{formatCurrency(calc.valuationCap, currency)}</h6>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                    <small>Discount Rate</small>\r\n                    <h6>{formatPercentage(calc.discountRate)}</h6>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                    <small>Interest Rate</small>\r\n                    <h6>{formatPercentage(calc.interestRate)}</h6>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Platform Outputs */}\r\n            <h5 className=\"mb-3\">Platform Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-primary text-white\">\r\n                  <small>Post-Money Valuation</small>\r\n                  <h6>{formatCurrency(calc.postMoneyValuation, currency)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Post-Investment # Shares</small>\r\n                  <h6>{formatNumber(calc.postInvestmentTotalShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>New Shares Issued</small>\r\n                  <h6>{formatPriceThreeDecimal(calc.newShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>\r\n                    {isConvertibleNote ? \"Theoretical Share Price\" : \"Share Price\"}\r\n                  </small>\r\n                  <h6>{formatCurrencyPricePerShare(calc.sharePrice, currency)}</h6>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Conditional Investor Ownership Display */}\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                  <small>\r\n                    {isConvertibleNote ? \"Note Investment\" : \"Investor Ownership\"}\r\n                  </small>\r\n                  <h6>\r\n                    {isConvertibleNote\r\n                      ? formatCurrency(calc.totalNoteInvestment || 0, currency)\r\n                      : formatPercentage(calc.investorOwnershipPercent)\r\n                    }\r\n                  </h6>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-dark text-white\">\r\n                  <small>Option Pool</small>\r\n                  <h6>{formatNumber(calc.optionPoolShares)} shares</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Available for Investment Display */}\r\n            {isConvertibleNote && calc.availableForInvestment > 0 && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"alert alert-danger\">\r\n                    <h6 className=\"alert-heading\"> Available for Investment</h6>\r\n                    <p className=\"mb-0\">\r\n                      <strong>{formatCurrency(calc.availableForInvestment, currency)}</strong> remaining in this convertible note round.\r\n                      {calc.totalNoteInvestment > 0 && (\r\n                        <span> ({formatCurrency(calc.totalNoteInvestment, currency)} already committed)</span>\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* WARRANT INFORMATION SECTION */}\r\n            {hasWarrants && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-danger\">\r\n                    <div className=\"card-header bg-danger text-white\">\r\n                      <h6 className=\"mb-0\"> Warrants Information (Issued in this Round)</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"row\">\r\n                        {calc.warrants.map((warrant, index) => (\r\n                          <div key={index} className=\"col-md-4 mb-3\">\r\n                            <div className=\"p-3 border rounded bg-light\">\r\n                              <h6 className=\"text-danger\">\r\n                                <i className=\"fas fa-file-contract me-2\"></i>\r\n                                Warrant {index + 1}\r\n                              </h6>\r\n                              <div className=\"small\">\r\n                                <div><strong>Coverage:</strong> {formatPercentage(warrant.coveragePercentage)}</div>\r\n                                <div><strong>Exercise Type:</strong> {warrant.exerciseType}</div>\r\n                                {warrant.adjustmentPercent !== 0 && (\r\n                                  <div>\r\n                                    <strong>Adjustment:</strong> {formatPercentage(warrant.adjustmentPercent)}\r\n                                    {warrant.adjustmentDirection === 'increase' ? ' increase' : ' decrease'}\r\n                                  </div>\r\n                                )}\r\n                                <div><strong>Base Price:</strong> {formatCurrencyPricePerShare(warrant.baseExercisePrice, currency)}</div>\r\n                                <div><strong>Adjusted Price:</strong> {formatCurrencyPricePerShare(warrant.adjustedExercisePrice, currency)}</div>\r\n                                <div><strong>Warrant Shares:</strong> {formatNumber(warrant.warrantShares)}</div>\r\n                                <div><strong>Warrant Value:</strong> {formatCurrency(warrant.warrantValue, currency)}</div>\r\n                                <div><strong>Status:</strong> <span className=\"badge bg-warning text-dark\">{warrant.status}</span></div>\r\n                                <div><strong>Will Exercise:</strong> Next Priced Equity Round</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"alert alert-info mt-2 mb-0\">\r\n                        <small>\r\n                          <i className=\"fas fa-info-circle me-1\"></i>\r\n                          These warrants will be exercisable at the next priced equity round (e.g., Series A).\r\n                          Exercise price will be based on the next round's price per share with specified adjustments.\r\n                          Total warrants: {formatNumber(calc.totalWarrantShares)} shares worth {formatCurrency(calc.totalWarrantValue, currency)}\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Ownership Chart */}\r\n            <div className=\"mb-4\">\r\n              <RoundCapChart chartData={capTableData.chartData} />\r\n            </div>\r\n\r\n            {/* ========== PRE-SEED CAP TABLE ========== */}\r\n            <div className=\"row mb-5\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header bg-primary text-white\">\r\n                    <h5 className=\"mb-0\">Pre-Seed Cap Table</h5>\r\n                    <small>(# shares, Ownership %, Currency Value)</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered table-hover\">\r\n                        <thead className=\"table-dark\">\r\n                          <tr>\r\n                            <th>Shareholder</th>\r\n                            <th className=\"text-center\">Contact Info</th>\r\n                            <th className=\"text-center\">Common Shares</th>\r\n                            <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                            <th className=\"text-center\">Currency Value</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {capTableData.preSeedShareholders && capTableData.preSeedShareholders.length > 0 ? (\r\n                            capTableData.preSeedShareholders.map((sh, idx) => (\r\n                              <tr key={idx}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className=\"text-danger\">{sh.name}</strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small fw-bold text-dark\">{sh.fullName}</div>\r\n                                    )}\r\n                                    {sh.type === \"Founder\" && (\r\n                                      <span className=\"badge bg-success mt-1\">Founder</span>\r\n                                    )}\r\n                                    {sh.type === \"Options Pool\" && (\r\n                                      <span className=\"badge bg-warning text-dark mt-1\">Option Pool</span>\r\n                                    )}\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"text-muted mb-1\">\r\n                                       {sh.email}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.phone && sh.phone !== \"-\" && (\r\n                                    <div className=\"text-muted\">\r\n                                       {sh.phone}\r\n                                    </div>\r\n                                  )}\r\n                                  {(!sh.email || sh.email === \"-\") && (!sh.phone || sh.phone === \"-\") && (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-danger\" : \"bg-warning text-white\"}`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))\r\n                          ) : (\r\n                            <tr>\r\n                              <td colSpan=\"5\" className=\"text-center text-danger\">\r\n                                <strong> No shareholders data available</strong>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* TOTAL ROW */}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td colSpan=\"2\">TOTAL</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.preSeedTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                            <td className=\"text-center\">{formatCurrency(calc.preMoneyValuation, currency)}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    {/* Summary Cards */}\r\n                    <div className=\"row mt-3\">\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-info mb-0\">\r\n                          <strong>Total Founders Ownership:</strong> {formatPercentage(\r\n                            (capTableData.preSeedShareholders || [])\r\n                              .filter(sh => sh.type === \"Founder\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-warning mb-0\">\r\n                          <strong>Employee Ownership:</strong> {formatPercentage(\r\n                            (capTableData.preSeedShareholders || [])\r\n                              .filter(sh => sh.type === \"Options Pool\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-success mb-0\">\r\n                          <strong>Total Pre-Seed Value:</strong> {formatCurrency(calc.preMoneyValuation, currency)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ========== POST-SEED CAP TABLE ========== */}\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header bg-success text-white\">\r\n                    <h5 className=\"mb-0\">Post-Seed Cap Table</h5>\r\n                    <small>(# shares, Ownership %, Currency Value)</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered table-hover\">\r\n                        <thead className=\"table-dark\">\r\n                          <tr>\r\n                            <th>Shareholder</th>\r\n                            <th className=\"text-center\">Contact Info</th>\r\n                            <th className=\"text-center\">Common Shares</th>\r\n                            <th className=\"text-center\">New Shares</th>\r\n                            <th className=\"text-center\">Total Shares</th>\r\n                            <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                            <th className=\"text-center\">Currency Value</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {capTableData.shareholders && capTableData.shareholders.length > 0 ? (\r\n                            capTableData.shareholders.map((sh, idx) => (\r\n                              <tr key={idx}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className=\"text-danger\">{sh.name}</strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small fw-bold text-dark\">{sh.fullName}</div>\r\n                                    )}\r\n                                    {/* Type badges for all shareholder types */}\r\n                                    {sh.type === \"Investor\" && (\r\n                                      <span className=\"badge bg-success mt-1\">\r\n                                        {sh.isGeneric ? \"\" : \"Investor\"}\r\n                                        {sh.isConvertibleNote && \" (Convertible Note)\"}\r\n                                      </span>\r\n                                    )}\r\n                                    {sh.type === \"Founder\" && (\r\n                                      <span className=\"badge bg-primary mt-1\">Founder</span>\r\n                                    )}\r\n                                    {sh.type === \"Options Pool\" && (\r\n                                      <span className=\"badge bg-warning text-dark mt-1\">Option Pool</span>\r\n                                    )}\r\n                                    {sh.type === \"Available\" && (\r\n                                      <span className=\"badge bg-danger mt-1\">Available for Investment</span>\r\n                                    )}\r\n                                    {sh.type === \"Warrants\" && (\r\n                                      <span className=\"badge bg-purple mt-1\">Warrants (Pending)</span>\r\n                                    )}\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {/* Hide contact info for Available for Investment and Warrants */}\r\n                                  {sh.type !== \"Available\" && sh.type !== \"Warrants\" && sh.email && sh.email !== \"-\" && (\r\n                                    <div className=\"text-muted mb-1\">\r\n                                       {sh.email}\r\n                                    </div>\r\n                                  )}\r\n                                  {sh.type !== \"Available\" && sh.type !== \"Warrants\" && sh.phone && sh.phone !== \"-\" && (\r\n                                    <div className=\"text-muted\">\r\n                                       {sh.phone}\r\n                                    </div>\r\n                                  )}\r\n                                  {(sh.type === \"Available\" || sh.type === \"Warrants\" || !sh.email || sh.email === \"-\") &&\r\n                                    (!sh.phone || sh.phone === \"-\") && (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.type === \"Founder\" || sh.type === \"Options Pool\" ? (\r\n                                    <strong>{formatNumber(sh.shares)}</strong>\r\n                                  ) : (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.newShares > 0 ? (\r\n                                    <span className=\"badge bg-warning text-dark\">\r\n                                      {formatNumber(sh.newShares)}\r\n                                    </span>\r\n                                  ) : sh.type === \"Warrants\" ? (\r\n                                    <span className=\"badge bg-purple\">Pending</span>\r\n                                  ) : (\r\n                                    <span className=\"text-muted\">-</span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.type === \"Warrants\" ? (\r\n                                    <>\r\n                                      <strong>0</strong>\r\n                                      <div className=\"small text-info\">({formatNumber(sh.futureShares)} future)</div>\r\n                                    </>\r\n                                  ) : (\r\n                                    <strong>{formatNumber(sh.shares)}</strong>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.type === \"Warrants\" ? (\r\n                                    <span className=\"fSize-16 badge bg-purple\">\r\n                                      {formatPercentage(sh.ownership)}\r\n                                    </span>\r\n                                  ) : (\r\n                                    <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-danger\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"Available\" ? \"bg-danger\" :\r\n                                          \"bg-success\"\r\n                                      }`}>\r\n                                      {formatPercentage(sh.ownership)}\r\n                                    </span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {sh.type === \"Warrants\" ? (\r\n                                    <>\r\n                                      <strong>{formatCurrency(0, currency)}</strong>\r\n                                      <div className=\"small text-info\">({formatCurrency(sh.futureValue, currency)} future)</div>\r\n                                    </>\r\n                                  ) : (\r\n                                    <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                  )}\r\n\r\n                                  {/* Investment amount for Available for Investment */}\r\n                                  {sh.type === \"Available\" && sh.investmentAmount > 0 && (\r\n                                    <div className=\"small text-success\">\r\n                                      Available: {formatCurrency(sh.investmentAmount, currency)}\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* Note for convertible note investors */}\r\n                                  {sh.type === \"Investor\" && sh.isConvertibleNote && (\r\n                                    <div className=\"small text-muted\">\r\n                                      Convertible Note - 0 shares issued\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* Note for warrants */}\r\n                                  {sh.type === \"Warrants\" && (\r\n                                    <div className=\"small text-purple\">\r\n                                      Will exercise in next priced round\r\n                                    </div>\r\n                                  )}\r\n                                </td>\r\n                              </tr>\r\n                            ))\r\n                          ) : (\r\n                            <tr>\r\n                              <td colSpan=\"7\" className=\"text-center text-danger\">\r\n                                <strong> No shareholders data available</strong>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* TOTAL ROW */}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td colSpan=\"2\">TOTAL</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.preSeedTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.newShares)}</td>\r\n                            <td className=\"text-center\">{formatNumber(calc.postInvestmentTotalShares)}</td>\r\n                            <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                            <td className=\"text-center\">{formatCurrency(calc.postMoneyValuation, currency)}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    {/* Summary Cards */}\r\n                    <div className=\"row mt-3\">\r\n                      <div className=\"col-md-3\">\r\n                        <div className=\"alert alert-primary mb-0\">\r\n                          <strong>Total Founders:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Founder\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <div className=\"alert alert-warning mb-0\">\r\n                          <strong>Option Pool:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Options Pool\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <div className=\"alert alert-success mb-0\">\r\n                          <strong>Investors:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Investor\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      {/* Warrant Summary */}\r\n                      {hasWarrants && (\r\n                        <div className=\"col-md-3\">\r\n                          <div className=\"alert alert-purple mb-0\" style={{ backgroundColor: '#6f42c1', color: 'white' }}>\r\n                            <strong>Warrants (Pending):</strong> {formatPercentage(\r\n                              (capTableData.shareholders || [])\r\n                                .filter(sh => sh.type === \"Warrants\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}\r\n                            <div className=\"small\">\r\n                              {formatNumber(calc.totalWarrantShares)} future shares\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"row mt-3\">\r\n                      {/* Available for Investment Summary */}\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-danger mb-0\">\r\n                          <strong>Available:</strong> {formatPercentage(\r\n                            (capTableData.shareholders || [])\r\n                              .filter(sh => sh.type === \"Available\")\r\n                              .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <div className=\"alert alert-info mb-0\">\r\n                          <strong>Post-Money Value:</strong> {formatCurrency(calc.postMoneyValuation, currency)}\r\n                        </div>\r\n                      </div>\r\n                      {hasWarrants && (\r\n                        <div className=\"col-md-4\">\r\n                          <div className=\"alert alert-dark mb-0\">\r\n                            <strong>Warrant Value:</strong> {formatCurrency(calc.totalWarrantValue, currency)}\r\n                            <div className=\"small\">(Future exercise value)</div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Formula Verification */}\r\n                    <div className=\"alert alert-dark mt-3\">\r\n                      <h6 className=\"alert-heading\"> Formula</h6>\r\n                      <div className=\"row small\">\r\n                        <div className=\"col-md-4\">\r\n                          <strong>Post-Money Valuation:</strong><br />\r\n                          {formatCurrency(calc.investmentSize, currency)} + {formatCurrency(calc.preMoneyValuation, currency)} = {formatCurrency(calc.postMoneyValuation, currency)}\r\n                        </div>\r\n\r\n                        {/* Warrant Formula */}\r\n                        {hasWarrants && (\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Warrant Calculation:</strong><br />\r\n                            New Shares: {formatNumber(calc.newShares)}  Coverage % = {formatNumber(calc.totalWarrantShares)} shares<br />\r\n                            Price: {formatCurrencyPricePerShare(calc.sharePrice, currency)} with adjustment\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Conditional Formulas based on Round Type */}\r\n                        {isConvertibleNote ? (\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Theoretical Share Price:</strong><br />\r\n                            {formatCurrencyPricePerShare(calc.preMoneyValuation, currency)}  {formatNumber(calc.preSeedTotalShares)} = {formatCurrencyPricePerShare(calc.sharePrice, currency)}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Investor Ownership:</strong><br />\r\n                            {formatCurrency(calc.investmentSize, currency)}  {formatCurrency(calc.postMoneyValuation, currency)} = {formatPercentage(calc.investorOwnershipPercent)}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Convertible Note Specific Information */}\r\n                      {isConvertibleNote && (\r\n                        <div className=\"mt-2 p-2 bg-warning text-dark rounded\">\r\n                          <strong> Convertible Note Round:</strong> No shares issued immediately.\r\n                          {calc.discountRate > 0 && ` Conversion will happen at next qualified financing round with ${formatPercentage(calc.discountRate)} discount`}\r\n                          {calc.valuationCap > 0 && ` and ${formatCurrency(calc.valuationCap, currency)} valuation cap.`}\r\n                          {calc.interestRate > 0 && ` Interest rate: ${formatPercentage(calc.interestRate)}.`}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Warrant Information */}\r\n                      {hasWarrants && (\r\n                        <div className=\"mt-2 p-2\" style={{ backgroundColor: '#6f42c1', color: 'white', borderRadius: '5px' }}>\r\n                          <strong> Warrant Information:</strong> Warrants will be exercisable at the next priced equity round.\r\n                          Exercise price = Next round price per share {calc.warrants[0].adjustmentPercent !== 0 ?\r\n                            `with ${formatPercentage(calc.warrants[0].adjustmentPercent)} ${calc.warrants[0].adjustmentDirection}` :\r\n                            ''}.\r\n                          {calc.warrants[0].expirationDate && ` Expires: ${calc.warrants[0].expirationDate}`}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSAFERoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n    const roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    // Get warrant data if available\r\n    const warrantData = capTableData.warrantData || {};\r\n    const hasWarrants = warrantData && warrantData.warrants && warrantData.warrants.length > 0;\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h4 className=\"mb-0\">{capTableData.roundType}</h4>\r\n            <small>{roundname} Investment with Option Pool</small>\r\n            {hasWarrants && (\r\n              <span className=\"badge bg-danger ms-2\"> Includes Warrants</span>\r\n            )}\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== PLATFORM INPUTS ===== */}\r\n            <h5 className=\"mb-3\"> Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Company Value</small>\r\n                  <h5>{formatCurrency(calc.companyValue, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Valuation Cap</small>\r\n                  <h5>{formatCurrency(calc.valuationCap, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Discount Rate</small>\r\n                  <h5>{formatPercentage(calc.discountRate)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Warrant Inputs if available */}\r\n            {hasWarrants && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-danger\">\r\n                    <div className=\"card-header bg-danger text-white\">\r\n                      <h6 className=\"mb-0\"> Warrants Information (Issued in this Round)</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"row\">\r\n                        {warrantData.warrants.map((warrant, index) => (\r\n                          <div key={index} className=\"col-md-4 mb-3\">\r\n                            <div className=\"p-3 border rounded bg-light\">\r\n                              <h6 className=\"text-danger\">\r\n                                <i className=\"fas fa-file-contract me-2\"></i>\r\n                                Warrant {index + 1}\r\n                              </h6>\r\n                              <div className=\"small\">\r\n                                <div><strong>Investor:</strong> {warrant.investorName}</div>\r\n                                <div><strong>Coverage:</strong> {formatPercentage(warrant.warrant_coverage_percentage)}</div>\r\n                                <div><strong>Exercise Type:</strong> {warrant.warrant_exercise_type}</div>\r\n                                {warrant.warrant_adjustment_percent !== 0 && (\r\n                                  <div>\r\n                                    <strong>Adjustment:</strong> {formatPercentage(warrant.warrant_adjustment_percent)}\r\n                                    {warrant.warrant_adjustment_direction === 'increase' ? ' increase' : ' decrease'}\r\n                                  </div>\r\n                                )}\r\n                                <div><strong>Status:</strong> <span className=\"badge bg-warning text-dark\">{warrant.warrant_status}</span></div>\r\n                                <div><strong>Will Exercise:</strong> Next Priced Equity Round</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"alert alert-info mt-2 mb-0\">\r\n                        <small>\r\n                          <i className=\"fas fa-info-circle me-1\"></i>\r\n                          These warrants will be exercisable at the next priced equity round (Series A).\r\n                          Exercise price will be based on Series A price with any adjustments specified.\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Pre-Seed Option Pool %</small>\r\n                  <h5>{formatPercentage(calc.optionPoolPercent)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Round 0 Total Shares</small>\r\n                  <h5>{formatNumber(calc.roundZeroTotalShares)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>Employee Shares Created</small>\r\n                  <h5>{formatNumber(calc.employeeShares)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CALCULATION FORMULA BOX ===== */}\r\n            <div className=\"alert alert-info mb-4\">\r\n              <h6 className=\"alert-heading\"> Employee Pool Calculation</h6>\r\n              <p className=\"mb-1\">\r\n                <strong>Formula:</strong> Employee Shares = Total Founder Shares  (1 - Pool %)  Pool %\r\n              </p>\r\n              <p className=\"mb-0\">\r\n                <strong>Calculation:</strong> {formatNumber(calc.roundZeroTotalShares)}  (1 - {formatPercentage(calc.optionPoolPercent)})  {formatPercentage(calc.optionPoolPercent)}\r\n                = <span className=\"badge bg-warning text-dark\">{formatNumber(calc.employeeShares)} shares</span>\r\n              </p>\r\n            </div>\r\n\r\n            {/*  IMPORTANT: SAFE Notes & Warrants Explanation */}\r\n            <div className=\"alert alert-warning mb-4\">\r\n              <h6 className=\"alert-heading\">\r\n                 SAFE Notes - NO SHARES ISSUED YET\r\n                {hasWarrants && \" |  Warrants Issued\"}\r\n              </h6>\r\n              <p className=\"mb-2\">\r\n                <strong>Important:</strong> SAFE (Simple Agreement for Future Equity) notes are <u>NOT converted into shares</u> during this round.\r\n                {hasWarrants && \" Warrants are issued but will only be exercisable at the next priced equity round.\"}\r\n              </p>\r\n              <ul className=\"mb-2\">\r\n                <li>SAFE investors have invested <strong>{formatCurrency(calc.investmentSize, currency)}</strong></li>\r\n                <li>They will receive <strong>0 shares</strong> in this round</li>\r\n                <li>Conversion happens at the <strong>next priced equity round</strong> (Series A)</li>\r\n                {hasWarrants && (\r\n                  <li>Warrants will be exercisable at <strong>Series A round</strong> price with adjustments</li>\r\n                )}\r\n              </ul>\r\n              <p className=\"mb-0\">\r\n                <strong>Conversion Price (at Series A):</strong> LOWER of:\r\n                <br /> Series A price  (1 - {formatPercentage(calc.discountRate)})\r\n                <br /> Valuation Cap  Total Shares\r\n                {hasWarrants && (\r\n                  <>\r\n                    <br />\r\n                    <strong>Warrant Exercise Price (at Series A):</strong>\r\n                    <br /> Series A price {warrantData.warrants[0]?.warrant_adjustment_direction === 'increase' ? 'increased' : 'decreased'} by {formatPercentage(warrantData.warrants[0]?.warrant_adjustment_percent || 0)}\r\n                  </>\r\n                )}\r\n              </p>\r\n            </div>\r\n\r\n            {/* ===== PRE-SEED CAP TABLE ===== */}\r\n            {capTableData.preSeedCapTable && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-primary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-Seed Round 1</h5>\r\n                      <small>{capTableData.preSeedCapTable.message}</small>\r\n                      {hasWarrants && (\r\n                        <div className=\"badge bg-light text-dark ms-2\">\r\n                          <i className=\"fas fa-exclamation-triangle me-1\"></i>\r\n                          Excludes Warrants (not exercisable yet)\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Management</th>\r\n                              <th className=\"text-center\">Contact Info</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\">Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {capTableData.preSeedCapTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={sh.type === \"Options Pool\" ? \"table-warning\" : \"\"}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className={\r\n                                      sh.type === \"Founder\" ? \"text-primary\" :\r\n                                        sh.type === \"Options Pool\" ? \"text-warning\" : \"text-info\"\r\n                                    }>\r\n                                      {sh.name}\r\n                                    </strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                    )}\r\n                                    <span className={`badge mt-1 ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-info\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" ? (\r\n                                    <div className=\"text-muted\"> {sh.email}</div>\r\n                                  ) : <span className=\"text-muted\">-</span>}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                    {formatNumber(sh.newShares)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-secondary\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(capTableData.preSeedCapTable.totalShares)}</td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(capTableData.preSeedCapTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}\r\n                              </td>\r\n                              <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                              <td className=\"text-center\">{formatCurrency(capTableData.preSeedCapTable.totalValue, currency)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Breakdown */}\r\n                      <div className=\"row mt-3\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary mb-0\">\r\n                            <strong>Total Founders Ownership:</strong> {formatPercentage(\r\n                              capTableData.preSeedCapTable.shareholders\r\n                                .filter(sh => sh.type === \"Founder\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-warning mb-0\">\r\n                            <strong>Employee Pool Ownership:</strong> {formatPercentage(\r\n                              capTableData.preSeedCapTable.shareholders\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-SEED CAP TABLE ===== */}\r\n            {capTableData.postSeedCapTable && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-success\">\r\n                    <div className=\"card-header bg-success text-white d-flex justify-content-between align-items-center\">\r\n                      <div>\r\n                        <h5 className=\"mb-0\"> Common Shares at Post-Seed Round 1</h5>\r\n                        <small className=\"opacity-75\">{capTableData.postSeedCapTable.message}</small>\r\n                      </div>\r\n                      {hasWarrants && (\r\n                        <span className=\"badge bg-danger text-white\">\r\n                          <i className=\"fas fa-file-contract me-1\"></i>\r\n                          Warrants issued (not in share count yet)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-body p-0\">\r\n\r\n                      {/* Highlight Box */}\r\n                      <div className=\"alert alert-info m-3\">\r\n                        <strong className=\"d-block mb-2\"> Key Points:</strong>\r\n                        <ul className=\"mb-0 ps-3\">\r\n                          <li>SAFE notes do NOT convert to shares in this round</li>\r\n                          <li>Total shares remain <strong>{formatNumber(capTableData.postSeedCapTable.totalShares)}</strong> (same as Pre-Seed)</li>\r\n                          {hasWarrants && (\r\n                            <li>\r\n                              Warrants issued but will only exercise at next priced round (Series A)\r\n                              <span className=\"badge bg-danger ms-2\">Will dilute in Series A</span>\r\n                            </li>\r\n                          )}\r\n                        </ul>\r\n                      </div>\r\n\r\n                      <div className=\"table-responsive p-3 pt-0\">\r\n                        <table className=\"table table-bordered table-hover mb-0\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th style={{ minWidth: '200px' }}>Shareholder</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Contact Info</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '120px' }}>Common Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '100px' }}>New Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '120px' }}>Total Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Value ({currency})</th>\r\n                              {hasWarrants && <th className=\"text-center\" style={{ minWidth: '150px' }}>Warrants</th>}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {capTableData.postSeedCapTable.shareholders.map((sh, idx) => {\r\n                              // Check if this investor has warrants\r\n                              const investorWarrants = hasWarrants\r\n                                ? warrantData.warrants.filter(w =>\r\n                                  w.investorName === sh.name ||\r\n                                  w.investor_id === sh.investorId\r\n                                )\r\n                                : [];\r\n                              const hasWarrant = investorWarrants.length > 0;\r\n\r\n                              // Determine row class\r\n                              let rowClass = \"\";\r\n                              if (sh.type === \"Options Pool\") {\r\n                                rowClass = \"table-warning\";\r\n                              } else if (sh.type === \"SAFE Investor\") {\r\n                                rowClass = \"table-info\";\r\n                              } else if (hasWarrant) {\r\n                                rowClass = \"table-danger\";\r\n                              }\r\n\r\n                              // Determine text color\r\n                              let textClass = \"text-dark\";\r\n                              if (sh.type === \"Founder\") {\r\n                                textClass = \"text-primary\";\r\n                              } else if (sh.type === \"Options Pool\") {\r\n                                textClass = \"text-warning\";\r\n                              } else if (sh.type === \"SAFE Investor\") {\r\n                                textClass = \"text-info\";\r\n                              } else if (hasWarrant) {\r\n                                textClass = \"text-danger\";\r\n                              }\r\n\r\n                              // Determine badge color\r\n                              let badgeClass = \"bg-secondary\";\r\n                              if (sh.type === \"Founder\") {\r\n                                badgeClass = \"bg-primary\";\r\n                              } else if (sh.type === \"Options Pool\") {\r\n                                badgeClass = \"bg-warning text-dark\";\r\n                              } else if (sh.type === \"SAFE Investor\") {\r\n                                badgeClass = \"bg-info\";\r\n                              } else if (hasWarrant) {\r\n                                badgeClass = \"bg-danger\";\r\n                              }\r\n\r\n                              return (\r\n                                <tr key={idx} className={rowClass}>\r\n                                  <td>\r\n                                    <div className=\"d-flex flex-column\">\r\n                                      <div>\r\n                                        <strong className={textClass}>\r\n                                          {sh.name}\r\n                                          {hasWarrant && (\r\n                                            <i className=\"fas fa-file-contract ms-2\"></i>\r\n                                          )}\r\n                                        </strong>\r\n                                      </div>\r\n                                      {sh.fullName && sh.fullName !== sh.name && (\r\n                                        <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                      )}\r\n                                      <div className=\"mt-1\">\r\n                                        <span className={`badge ${badgeClass} me-1`}>\r\n                                          {sh.type}\r\n                                        </span>\r\n                                        {hasWarrant && (\r\n                                          <span className=\"badge bg-danger\">\r\n                                            Warrant\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                    </div>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    {sh.email && sh.email !== \"-\" ? (\r\n                                      <div className=\"text-truncate\" style={{ maxWidth: '150px' }}>\r\n                                        <small className=\"text-muted\"> {sh.email}</small>\r\n                                      </div>\r\n                                    ) : <span className=\"text-muted\">-</span>}\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                    {sh.type === \"SAFE Investor\" && (\r\n                                      <div className=\"small text-danger fw-bold mt-1\">\r\n                                         Not converted\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                      {formatNumber(sh.newShares)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <strong className=\"text-primary\">{formatNumber(sh.shares + sh.newShares)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <span className={`badge fSize-16 ${badgeClass}`}>\r\n                                      {formatPercentage(sh.ownership)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <div className=\"d-flex flex-column\">\r\n                                      <strong>{formatCurrency(sh.value, currency)}</strong>\r\n                                      {sh.investmentAmount > 0 && (\r\n                                        <div className=\"small text-success mt-1\">\r\n                                           SAFE: {formatCurrency(sh.investmentAmount, currency)}\r\n                                        </div>\r\n                                      )}\r\n                                      {sh.note && (\r\n                                        <div className=\"small text-muted mt-1\">{sh.note}</div>\r\n                                      )}\r\n                                    </div>\r\n                                  </td>\r\n                                  {hasWarrants && (\r\n                                    <td className=\"text-center align-middle\">\r\n                                      {hasWarrant ? (\r\n                                        <div className=\"d-flex flex-column\">\r\n                                          <span className=\"badge bg-danger mb-1\">\r\n                                            {formatPercentage(investorWarrants[0].warrant_coverage_percentage)} Coverage\r\n                                          </span>\r\n                                          <div className=\"small text-muted\">\r\n                                            Exercise at Series A\r\n                                          </div>\r\n                                        </div>\r\n                                      ) : (\r\n                                        <span className=\"text-muted\">-</span>\r\n                                      )}\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              );\r\n                            })}\r\n\r\n                            {/* TOTAL ROW - FIXED COLSPAN */}\r\n                            {/*  SIMPLE FIX */}\r\n                            <tr className=\"table-success fw-bold\">\r\n                              <td colSpan={2}>TOTAL</td> {/* Always colspan=2 for Shareholder + Contact Info */}\r\n                              <td className=\"text-center align-middle\">{formatNumber(capTableData.postSeedCapTable.totalShares)}</td>\r\n                              <td className=\"text-center align-middle\">\r\n                                {formatNumber(capTableData.postSeedCapTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}\r\n                              </td>\r\n                              <td className=\"text-center align-middle\">{formatNumber(capTableData.postSeedCapTable.totalShares)}</td>\r\n                              <td className=\"text-center align-middle\">{formatPercentage(100)}</td>\r\n                              <td className=\"text-center align-middle\">{formatCurrency(capTableData.postSeedCapTable.totalValue, currency)}</td>\r\n                              {hasWarrants ? (\r\n                                <td className=\"text-center align-middle\">\r\n                                  <span className=\"badge bg-danger\">\r\n                                    {warrantData.totalWarrants || 0} Warrants\r\n                                  </span>\r\n                                </td>\r\n                              ) : null /* Don't render anything if no warrants */}\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row m-3 mt-4\">\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-primary h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">Total Founders Ownership</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatPercentage(\r\n                                capTableData.postSeedCapTable.shareholders\r\n                                  .filter(sh => sh.type === \"Founder\")\r\n                                  .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                              )}\r\n                            </h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-warning h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">Employee Pool</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatPercentage(\r\n                                capTableData.postSeedCapTable.shareholders\r\n                                  .filter(sh => sh.type === \"Options Pool\")\r\n                                  .reduce((sum, sh) => sum + sh.ownership, 0)\r\n                              )}\r\n                            </h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-info h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">SAFE Investment (Not Converted)</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatCurrency(capTableData.postSeedCapTable.safeInvestment || 0, currency)}\r\n                            </h5>\r\n                            <small className=\"text-muted\">{capTableData.postSeedCapTable.safeInvestorCount || 0} investors</small>\r\n                          </div>\r\n                        </div>\r\n                        {hasWarrants && (\r\n                          <div className=\"col-md-3 mb-3\">\r\n                            <div className=\"alert alert-danger h-100 mb-0\">\r\n                              <small className=\"d-block mb-1\">Warrants Issued</small>\r\n                              <h5 className=\"mb-0 fw-bold\">{warrantData.warrants.length} Warrant(s)</h5>\r\n                              <small className=\"text-muted d-block\">Will exercise at Series A</small>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Warrant Summary if available */}\r\n                      {hasWarrants && (\r\n                        <div className=\"card border-danger m-3\">\r\n                          <div className=\"card-header bg-danger text-white\">\r\n                            <h6 className=\"mb-0\"> Warrant Details</h6>\r\n                          </div>\r\n                          <div className=\"card-body p-3\">\r\n                            <div className=\"table-responsive\">\r\n                              <table className=\"table table-sm table-bordered mb-0\">\r\n                                <thead className=\"table-dark\">\r\n                                  <tr>\r\n                                    <th style={{ width: '25%' }}>Investor</th>\r\n                                    <th style={{ width: '15%' }}>Coverage %</th>\r\n                                    <th style={{ width: '15%' }}>Exercise Type</th>\r\n                                    <th style={{ width: '15%' }}>Adjustment</th>\r\n                                    <th style={{ width: '15%' }}>Status</th>\r\n                                    <th style={{ width: '25%' }}>Will Exercise</th>\r\n                                  </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                  {warrantData.warrants.map((warrant, index) => (\r\n                                    <tr key={index}>\r\n                                      <td>{warrant.investorName}</td>\r\n                                      <td className=\"text-center\">{formatPercentage(warrant.warrant_coverage_percentage)}</td>\r\n                                      <td className=\"text-center\">{warrant.warrant_exercise_type}</td>\r\n                                      <td className=\"text-center\">\r\n                                        {warrant.warrant_adjustment_percent !== 0\r\n                                          ? `${formatPercentage(warrant.warrant_adjustment_percent)} ${warrant.warrant_adjustment_direction}`\r\n                                          : 'None'\r\n                                        }\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <span className={`badge ${warrant.warrant_status === 'exercised' ? 'bg-success' :\r\n                                          warrant.warrant_status === 'pending' ? 'bg-warning text-dark' :\r\n                                            'bg-secondary'\r\n                                          }`}>\r\n                                          {warrant.warrant_status}\r\n                                        </span>\r\n                                      </td>\r\n                                      <td className=\"text-center\">Next Priced Round (Series A)</td>\r\n                                    </tr>\r\n                                  ))}\r\n                                </tbody>\r\n                              </table>\r\n                            </div>\r\n                            <div className=\"alert alert-info mt-3 mb-0\">\r\n                              <small>\r\n                                <strong>Note:</strong> These warrants will be calculated and exercised at the Series A round.\r\n                                The exact number of warrant shares will be determined based on the Series A price\r\n                                and total new shares issued in that round.\r\n                              </small>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== PLATFORM OUTPUTS SUMMARY ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\"> Platform Outputs Summary</h5>\r\n                {hasWarrants && (\r\n                  <span className=\"badge bg-danger\">Includes Warrants</span>\r\n                )}\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6 className=\"text-primary\">Pre-Seed Round 1</h6>\r\n                    <ul className=\"list-unstyled\">\r\n                      <li> Total Shares: <strong>{formatNumber(calc.totalSharesPreSeed)}</strong></li>\r\n                      <li> Founder Shares: <strong>{formatNumber(calc.roundZeroTotalShares)}</strong></li>\r\n                      <li> Employee Shares: <strong>{formatNumber(calc.employeeShares)}</strong></li>\r\n                      <li> Total Value: <strong>{formatCurrency(calc.companyValue, currency)}</strong></li>\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <h6 className=\"text-success\">Post-Seed Round 1</h6>\r\n                    <ul className=\"list-unstyled\">\r\n                      <li> Total Shares: <strong>{formatNumber(calc.totalSharesPostSeed)}</strong> (Same as Pre-Seed)</li>\r\n                      <li> SAFE Investment: <strong>{formatCurrency(calc.investmentSize, currency)}</strong></li>\r\n                      <li> SAFE Shares: <strong className=\"text-danger\">0</strong> (Not converted)</li>\r\n                      <li> Total Value: <strong>{formatCurrency(calc.companyValue, currency)}</strong></li>\r\n                    </ul>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Conversion Info */}\r\n            {capTableData.conversionInfo && (\r\n              <div className=\"alert alert-secondary mt-4\">\r\n                <h6 className=\"alert-heading\"> {capTableData.conversionInfo.note}</h6>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-3\">\r\n                    <small className=\"text-muted\">Conversion Trigger</small>\r\n                    <div><strong>{capTableData.conversionInfo.conversionTrigger}</strong></div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <small className=\"text-muted\">Valuation Cap</small>\r\n                    <div><strong>{formatCurrency(capTableData.conversionInfo.valuationCap, currency)}</strong></div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <small className=\"text-muted\">Discount Rate</small>\r\n                    <div><strong>{formatPercentage(capTableData.conversionInfo.discountRate)}</strong></div>\r\n                  </div>\r\n                  {hasWarrants && (\r\n                    <div className=\"col-md-3\">\r\n                      <small className=\"text-muted\">Warrants Status</small>\r\n                      <div>\r\n                        <span className=\"badge bg-warning text-dark\">Pending Exercise at Series A</span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const renderSAFESeriesRoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n\r\n    console.log(\"Cap Table Data:\", capTableData);\r\n    const calc = capTableData.calculations;\r\n\r\n    //  Get data from backend response structure\r\n    const preTable = capTableData.preSeedCapTable;\r\n    const postTable = capTableData.postSeedCapTable;\r\n    const inputs = capTableData.inputs || {};\r\n\r\n    //  Determine round type from backend data\r\n    const isSeriesA = capTableData.isSeriesA ||\r\n      (capTableData.shareClassType || \"\").toLowerCase().includes(\"series\");\r\n\r\n    const hasSAFEConversion = capTableData.hasSAFEConversion ||\r\n      (calc.seedConversionShares > 0);\r\n\r\n    // Helper functions\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-US').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n\r\n    //  Calculate ownership percentages\r\n    const getOwnershipSummary = (shareholders, totalShares) => {\r\n      if (!shareholders || !totalShares) return {\r\n        founders: 0,\r\n        employees: 0,\r\n        seedInvestors: 0,\r\n        seriesAInvestors: 0\r\n      };\r\n\r\n      let founders = 0;\r\n      let employees = 0;\r\n      let seedInvestors = 0;\r\n      let seriesAInvestors = 0;\r\n\r\n      shareholders.forEach(sh => {\r\n        const ownership = (sh.shares / totalShares) * 100;\r\n        if (sh.type === \"Founder\") founders += ownership;\r\n        else if (sh.type === \"Options Pool\" || sh.type.includes(\"Employee\")) employees += ownership;\r\n        else if (sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\")) seedInvestors += ownership;\r\n        else if (sh.type === \"Series A Investor\") seriesAInvestors += ownership;\r\n      });\r\n\r\n      return {\r\n        founders: founders.toFixed(1),\r\n        employees: employees.toFixed(1),\r\n        seedInvestors: seedInvestors.toFixed(1),\r\n        seriesAInvestors: seriesAInvestors.toFixed(1)\r\n      };\r\n    };\r\n\r\n    //  Get ownership data\r\n    const preOwnership = getOwnershipSummary(preTable?.shareholders, preTable?.totalShares);\r\n    const postOwnership = getOwnershipSummary(postTable?.shareholders, postTable?.totalShares);\r\n\r\n    //  Debug information\r\n    console.log(\"Calculations:\", {\r\n      seedInvestment: calc.seedInvestment,\r\n      valuationCap: calc.valuationCap,\r\n      discountRate: calc.discountRate,\r\n      sharePrice: calc.sharePrice,\r\n      seedOptimalPrice: calc.seedOptimalPrice,\r\n      seedConversionShares: calc.seedConversionShares,\r\n      seriesAShares: calc.seriesAShares,\r\n      totalPostShares: calc.totalSharesPostSeed\r\n    });\r\n\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n    const formatCurrencyTwoDecimals = (value) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2\r\n      }).format(value || 0);\r\n    }\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className={`card-header ${isSeriesA ? 'bg-primary' : 'bg-success'} text-white`}>\r\n            <h4 className=\"mb-0\">{capTableData.roundType || \"Series A Round\"}</h4>\r\n            <small>\r\n              {isSeriesA ? roundname : \"Investment Round\"}\r\n              {hasSAFEConversion && \" with SAFE Conversion\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== INPUT PARAMETERS SECTION ===== */}\r\n            <h5 className=\"mb-3\"> {capTableData.roundType}</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(inputs.preMoneyValuation || calc.preMoneyValuation)}</h5>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">{capTableData.shareClassType} Investment</small>\r\n                  <h5>{formatCurrency(inputs.seriesAInvestment || calc.seriesAInvestment)}</h5>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Founder Shares (Round 0)</small>\r\n                  <h5>{formatNumber(inputs.roundZeroShares || calc.roundZeroTotalShares)}</h5>\r\n                  <small>{inputs.founderCount || preTable?.shareholders?.filter(sh => sh.type === \"Founder\").length || 0} founder(s)</small>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n\r\n            {/* SAFE CONVERSION SECTION (Only if has SAFE conversion) */}\r\n            {hasSAFEConversion && calc.seedInvestment > 0 && (\r\n              <>\r\n                <div className=\"row mb-4\">\r\n                  <div className=\"col-md-4\">\r\n                    <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                      <small>Seed SAFE Investment</small>\r\n                      <h5>{formatCurrency(calc.seedInvestment)}</h5>\r\n                      <small>From previous SAFE round</small>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                      <small>Valuation Cap</small>\r\n                      <h5>{formatCurrency(calc.valuationCap)}</h5>\r\n                      <small>From SAFE terms</small>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                      <small>Discount Rate</small>\r\n                      <h5>{calc.discountRate}%</h5>\r\n                      <small>From SAFE terms</small>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* SAFE CONVERSION CALCULATIONS */}\r\n                {calc.seedOptimalPrice > 0 && (\r\n                  <div className=\"alert alert-success mb-4\">\r\n                    <h6 className=\"alert-heading\"> SAFE Conversion Calculations</h6>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6\">\r\n                        <p><strong>1. {capTableData.shareClassType} Share Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(inputs.preMoneyValuation || calc.preMoneyValuation)}  {formatNumber(inputs.totalSharesPreSeed || calc.roundZeroTotalShares + calc.employeeSharesSeedRound)} =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrency(calc.sharePrice)}</span>\r\n                        </p>\r\n\r\n                        <p><strong>2. Seed Discount Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.sharePrice)}  (1 - {calc.discountRate / 100}) =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrency(calc.seedDiscountPrice)}</span>\r\n                        </p>\r\n\r\n                        <p><strong>3. Seed Cap Price:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.valuationCap)}  {formatNumber(calc.totalSharesPreSeed)} =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrencyTwoDecimals(calc.valuationCap / calc.totalSharesPreSeed)}</span>\r\n                        </p>\r\n                      </div>\r\n\r\n                      <div className=\"col-md-6\">\r\n                        <p><strong>4. Optimal Price (Lower of the two):</strong></p>\r\n                        <p className=\"small\">\r\n                          MIN({formatCurrency(calc.seedDiscountPrice)}) =\r\n                          <span className=\"fw-bold ms-2 text-success\">{formatCurrency(calc.seedOptimalPrice)}</span>\r\n                        </p>\r\n\r\n                        <p><strong>5. Seed Conversion Shares:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatCurrency(calc.seedInvestment)}  {formatCurrency(calc.seedOptimalPrice)} =\r\n                          <span className=\"fw-bold ms-2\">{formatNumber(calc.seedConversionShares)} shares</span>\r\n                        </p>\r\n\r\n                        <p><strong>6. Seed Conversion Value:</strong></p>\r\n                        <p className=\"small\">\r\n                          {formatNumber(calc.seedConversionShares)}  {formatCurrency(calc.sharePrice)} =\r\n                          <span className=\"fw-bold ms-2\">{formatCurrency(calc.seedConversionValue)}</span>\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* MOIC Information */}\r\n                    <div className=\"mt-3 p-2 bg-white rounded border\">\r\n                      <p className=\"mb-1\"><strong>MOIC (Multiple on Invested Capital):</strong></p>\r\n                      <p className=\"mb-0 small\">\r\n                        Seed Investors: <strong>{calc.seedMOIC}</strong> ({formatCurrency(calc.seedConversionValue)} value / {formatCurrency(calc.seedInvestment)} investment)\r\n                        {calc.seriesAMOIC && calc.seriesAMOIC !== \"0X\" && (\r\n                          <> | {capTableData.shareClassType} Investors: <strong>{calc.seriesAMOIC}</strong></>\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* OPTION POOL SECTION */}\r\n            {/* <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Existing Option Pool</small>\r\n                  <h5>{formatPercentage(calc.existingOptionPoolPercent)}</h5>\r\n                  <small>{formatNumber(calc.employeeSharesSeedRound)} shares</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-primary text-white\">\r\n                  <small className=\"text-white\">Target Option Pool</small>\r\n                  <h5>{formatPercentage(calc.targetOptionPoolPercent)}</h5>\r\n                  <small>Post-investment target</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>New Option Shares</small>\r\n                  <h5>{formatNumber(calc.newOptionShares)}</h5>\r\n                  <small>Top-up required</small>\r\n                </div>\r\n              </div>\r\n            </div> */}\r\n\r\n            {/* OPTION POOL CALCULATION EXPLANATION */}\r\n            {calc.newOptionShares > 0 && (\r\n              <div className=\"alert alert-info mb-4\">\r\n                <h6 className=\"alert-heading\"> Option Pool</h6>\r\n                <p className=\"mb-2 small\">\r\n                  <strong>Formula:</strong> Total Post Shares = (Founders + Seed Investors + {capTableData.shareClassType} Investors)  (1 - Target Option Pool %)\r\n                </p>\r\n                <p className=\"mb-2 small\">\r\n                  <strong>Calculation:</strong>\r\n                  ({formatNumber(inputs.roundZeroShares || calc.roundZeroTotalShares)} + {formatNumber(calc.seedConversionShares)} + {formatNumber(calc.seriesAShares)})  (1 - {calc.targetOptionPoolPercent / 100})\r\n                </p>\r\n                <p className=\"mb-0 small\">\r\n                  <strong>Result:</strong> Need to add {formatNumber(calc.newOptionShares)} new option shares to reach {formatPercentage(calc.targetOptionPoolPercent)} target pool\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== PRE-INVESTMENT CAP TABLE ===== */}\r\n            {/* ===== PRE-INVESTMENT CAP TABLE ===== */}\r\n            {preTable && preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-secondary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-{capTableData.shareClassType} Round</h5>\r\n                      <small>{preTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Existing Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preTable.shareholders.map((sh, idx) => {\r\n                              const hasNewShares = sh.newShares > 0;\r\n                              const totalShares = sh.shares;\r\n                              const existingShares = totalShares - (sh.newShares || 0);\r\n\r\n                              return (\r\n                                <tr key={idx} className={\r\n                                  sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"table-warning\" :\r\n                                    sh.type === \"Founder\" ? \"\" : \"table-light\"\r\n                                }>\r\n                                  <td>\r\n                                    <div>\r\n                                      <strong>{sh.name || sh.fullName}</strong>\r\n                                      {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" : \"bg-info\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(existingShares)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {hasNewShares ? (\r\n                                      <>\r\n                                        <strong className=\"text-success\">+{formatNumber(sh.newShares)}</strong>\r\n\r\n                                      </>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(totalShares)}</strong>\r\n                                    {hasNewShares && (\r\n                                      <div className=\"small text-success\">\r\n                                        {/*  from {formatNumber(existingShares)} */}\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className=\"badge bg-dark\">\r\n                                      {formatPercentage(sh.ownership || ((totalShares / preTable.totalShares) * 100))}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value)}</strong>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(\r\n                                  preTable.shareholders.reduce((sum, sh) => sum + (sh.shares - (sh.newShares || 0)), 0)\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {formatNumber(\r\n                                  preTable.shareholders.reduce((sum, sh) => sum + (sh.newShares || 0), 0)\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">{formatNumber(preTable.totalShares)}</td>\r\n                              <td className=\"text-center\">100%</td>\r\n                              <td className=\"text-center\">{formatCurrency(preTable.totalValue)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-INVESTMENT CAP TABLE ===== */}\r\n            {postTable && postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className={`card border-primary`}>\r\n                    <div className=\"card-header bg-primary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Post-{capTableData.shareClassType} Round</h5>\r\n                      <small>{postTable.message}</small>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Shareholder</th>\r\n                              <th className=\"text-center\">Type</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Total Shares</th>\r\n                              <th className=\"text-center\">Ownership %</th>\r\n                              <th className=\"text-center\">Value</th>\r\n                              {hasSAFEConversion && <th className=\"text-center\">Investment / Conversion Price</th>}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postTable.shareholders.map((sh, idx) => (\r\n                              sh.isTotal ? (\r\n                                // TOTAL ROW - Show at the end\r\n                                <tr key={idx} className=\"table-primary fw-bold\">\r\n                                  <td colSpan=\"2\"><strong>TOTAL</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.commonShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.newShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatNumber(sh.totalShares)}</strong></td>\r\n                                  <td className=\"text-center\"><strong>100%</strong></td>\r\n                                  <td className=\"text-center\"><strong>{formatCurrency(sh.value)}</strong></td>\r\n                                  {hasSAFEConversion && (\r\n                                    <td className=\"text-center\">\r\n                                      <strong>{formatCurrency(postTable.safeInvestment || calc.seedInvestment + calc.seriesAInvestment)}</strong>\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              ) : (\r\n                                // REGULAR ROWS\r\n                                <tr key={idx} className={\r\n                                  sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"table-warning\" :\r\n                                    sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\") ? \"table-info\" :\r\n                                      sh.type === \"Series A Investor\" ? \"table-primary\" : \"\"\r\n                                }>\r\n                                  <td>\r\n                                    <strong>{sh.name || sh.fullName}</strong>\r\n                                    {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\") ? \"bg-info\" :\r\n                                          sh.type === \"Series A Investor\" ? \"bg-success\" : \"bg-secondary\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.commonShares > 0 ? (\r\n                                      <strong>{formatNumber(sh.commonShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.newShares > 0 ? (\r\n                                      <div>\r\n                                        <strong className=\"text-success\">{formatNumber(sh.newShares)}</strong>\r\n                                        {sh.displayText && (\r\n                                          <div className=\"small text-success\">{sh.displayText}</div>\r\n                                        )}\r\n                                      </div>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\">-</span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatNumber(sh.totalShares || sh.shares)}</strong>\r\n                                    {/* Show breakdown for Option Pool if available */}\r\n                                    {sh.breakdown && (\r\n                                      <div className=\"small text-muted\">\r\n                                        {sh.breakdown.existingShares > 0 && (\r\n                                          <div>{formatNumber(sh.breakdown.existingShares)} existing</div>\r\n                                        )}\r\n                                        {sh.breakdown.newShares > 0 && (\r\n                                          <div>+{formatNumber(sh.breakdown.newShares)} new</div>\r\n                                        )}\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-dark\" :\r\n                                      sh.type === \"Options Pool\" || sh.type.includes(\"Employee\") ? \"bg-warning text-dark\" :\r\n                                        sh.type === \"SAFE Investor\" || sh.type.includes(\"Seed\") ? \"bg-info\" :\r\n                                          sh.type === \"Series A Investor\" ? \"bg-success\" : \"bg-secondary\"\r\n                                      }`}>\r\n                                      {formatPercentage(sh.ownership || ((sh.totalShares || sh.shares) / postTable.totalShares) * 100)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value)}</strong>\r\n                                  </td>\r\n                                  {hasSAFEConversion && (\r\n                                    <td className=\"text-center\">\r\n                                      {sh.investmentAmount ? (\r\n                                        <div>\r\n                                          <div className=\"fw-bold\">{formatCurrency(sh.investmentAmount)}</div>\r\n                                          {sh.conversionPrice && (\r\n                                            <div className=\"small\">\r\n                                              @ {formatCurrency(sh.conversionPrice)}/share\r\n                                            </div>\r\n                                          )}\r\n                                          {sh.moic && sh.moic !== \"0X\" && (\r\n                                            <div className=\"small text-success\">\r\n                                              MOIC: {sh.moic}\r\n                                            </div>\r\n                                          )}\r\n                                        </div>\r\n                                      ) : (\r\n                                        <span className=\"text-muted\">-</span>\r\n                                      )}\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              )\r\n                            ))}\r\n\r\n                            {/* OLD TOTAL ROW - Remove if using isTotal flag in data */}\r\n                            {/* <tr className=\"table-primary fw-bold\">\r\n      <td colSpan=\"2\">TOTAL</td>\r\n      <td className=\"text-center\">{formatNumber(postTable.totalShares)}</td>\r\n      <td className=\"text-center\">100%</td>\r\n      <td className=\"text-center\">{formatCurrency(postTable.totalValue)}</td>\r\n      {hasSAFEConversion && <td className=\"text-center\">\r\n        {formatCurrency(postTable.safeInvestment || calc.seedInvestment + calc.seriesAInvestment)}\r\n      </td>}\r\n    </tr> */}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Final Summary */}\r\n                      <div className=\"row mt-4\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-success\">\r\n                            <h6 className=\"mb-2\">Final Ownership Distribution</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Founders:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(postOwnership.founders)}</div>\r\n                              <div className=\"col-6\">Employees:</div>\r\n                              <div className=\"col-6 text-end\">{formatPercentage(postOwnership.employees)}</div>\r\n                              {hasSAFEConversion && (\r\n                                <>\r\n                                  <div className=\"col-6\">Seed Investors:</div>\r\n                                  <div className=\"col-6 text-end\">{formatPercentage(postOwnership.seedInvestors)}</div>\r\n                                  <div className=\"col-6\">Series A Investors:</div>\r\n                                  <div className=\"col-6 text-end\">{formatPercentage(postOwnership.seriesAInvestors)}</div>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary\">\r\n                            <h6 className=\"mb-2\">Financial Summary</h6>\r\n                            <div className=\"row small\">\r\n                              <div className=\"col-6\">Post-Money Valuation:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.finalPostMoneyValuation || postTable.totalValue)}</div>\r\n                              <div className=\"col-6\">Total Investment:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.seedInvestment + calc.seriesAInvestment)}</div>\r\n                              <div className=\"col-6\">Total Shares:</div>\r\n                              <div className=\"col-6 text-end\">{formatNumber(postTable.totalShares)}</div>\r\n                              <div className=\"col-6\">Share Price:</div>\r\n                              <div className=\"col-6 text-end\">{formatCurrency(calc.sharePrice)}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div> */}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== SUMMARY ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\"> Round Summary</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Key Outcomes:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li> Total capital raised: <strong>{formatCurrency(calc.seedInvestment + calc.seriesAInvestment)}</strong></li>\r\n                      <li> Post-money valuation: <strong>{formatCurrency(calc.finalPostMoneyValuation)}</strong></li>\r\n                      <li> Total shares outstanding: <strong>{formatNumber(calc.totalSharesPostSeed)}</strong></li>\r\n                      <li> Share price: <strong>{formatCurrency(calc.sharePrice)}</strong></li>\r\n                      {hasSAFEConversion && calc.seedConversionShares > 0 && (\r\n                        <li> SAFE conversion completed: <strong>{formatNumber(calc.seedConversionShares)} shares @ {formatCurrency(calc.seedOptimalPrice)} each</strong></li>\r\n                      )}\r\n                      {calc.newOptionShares > 0 && (\r\n                        <li> Option pool: <strong>{formatNumber(calc.newOptionShares)} new shares added</strong></li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Next Steps:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li> SAFE notes converted to shares</li>\r\n                      <li> New Series A investors onboarded</li>\r\n                      <li> Update cap table with new shareholders</li>\r\n                      <li> Issue share certificates</li>\r\n                      <li> Prepare for Series B round</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSeriesATableCommon = () => {\r\n    console.log(\" capTableData:\", capTableData); // Debug log\r\n\r\n    //  capTableData  access \r\n    if (!capTableData || !capTableData.calculations) {\r\n      console.log(\" No capTable data available\");\r\n      return (\r\n        <div className=\"alert alert-warning\">\r\n          <h5>No Data Available</h5>\r\n          <p>Cap table calculation data is not available</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    if (capTableData.error) {\r\n      return (\r\n        <div className=\"alert alert-danger\">\r\n          <h5>Calculation Error</h5>\r\n          <p>{capTableData.error}</p>\r\n          {capTableData.details && (\r\n            <pre className=\"small\">{JSON.stringify(capTableData.details, null, 2)}</pre>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    //  DEBUG: Warrant information\r\n\r\n    //  Data access - postSeriesACapTable  shareholders \r\n    const preSeriesAShareholders = capTableData.preSeriesAShareholders || [];\r\n    const postSeriesAShareholders = capTableData.postSeriesACapTable?.shareholders ||\r\n      capTableData.capTable?.shareholders || [];\r\n\r\n    console.log(\" Post-series shareholders:\", postSeriesAShareholders.length);\r\n    console.log(\" Calculations:\", calc);\r\n\r\n    //  Calculate values for frontend display\r\n    const existingOptionPoolPercent = calc.existingOptionPoolPercent || 0;\r\n    const optionPoolPercentPost = calc.optionPoolPercentPost || 20;\r\n    const investorOwnershipPercent = calc.investorOwnershipPercent ||\r\n      ((calc.investmentSize / calc.postMoneyValuation) * 100);\r\n\r\n    const totalSharesBeforeSeriesA = calc.totalSharesBeforeSeriesA ||\r\n      (calc.founderShares + calc.existingEmployeeShares + calc.seedInvestorShares);\r\n\r\n    const totalSharesAfterSeriesA = calc.totalSharesAfterSeriesA ||\r\n      calc.totalSharesAfterPool ||\r\n      capTableData.capTable?.totalShares;\r\n\r\n    const seriesAInvestorShares = calc.seriesAShares || 0;\r\n    const additionalOptionPoolShares = calc.newOptionShares || 0;\r\n    const convertedShares = calc.convertedShares || 0;\r\n    const warrantShares = calc.warrantShares || 0;\r\n\r\n    // Frontend formulas\r\n    const existingOptionPoolShares = calc.existingEmployeeShares || 0;\r\n    const totalOptionPoolShares = existingOptionPoolShares + additionalOptionPoolShares;\r\n    const foundersSeedShares = calc.founderShares || 100000;\r\n    const existingShareholdersPercent = 100 - investorOwnershipPercent - optionPoolPercentPost;\r\n\r\n    const isPostMoneyOptionPool = additionalOptionPoolShares > 0;\r\n\r\n    const roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    //  Chart data\r\n    const chartData = capTableData.chartData ||\r\n      createChartDataFromShareholders(postSeriesAShareholders);\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h4 className=\"mb-0\">{capTableData.roundInfo?.name || \"Series A Round\"}</h4>\r\n            <small className=\"opacity-75\">\r\n              {isPostMoneyOptionPool ? \"Post-Money Option Pool Calculation\" : \"Standard Calculation\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n\r\n          <div className=\"card-body\">\r\n            {/* ========== ROUND SUMMARY SECTION ========== */}\r\n            <div className=\"card mb-4 border-primary\">\r\n              <div className=\"card-header bg-primary text-white\">\r\n                <h5 className=\"mb-0\"> Round Summary</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"summary-box p-3 border rounded\">\r\n                      <small className=\"text-muted d-block\">Post-Money Valuation</small>\r\n                      <h4 className=\"text-primary mb-0\">{formatCurrency(calc.postMoneyValuation, currency)}</h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"summary-box p-3 border rounded\">\r\n                      <small className=\"text-muted d-block\">Share Price</small>\r\n                      <h4 className=\"text-success mb-0\">{formatCurrencyPricePerShare(calc.sharePrice, currency)}</h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"summary-box p-3 border rounded\">\r\n                      <small className=\"text-muted d-block\">Total Shares Post</small>\r\n                      <h4 className=\"text-info mb-0\">{formatNumber(totalSharesAfterSeriesA)}</h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"summary-box p-3 border rounded\">\r\n                      <small className=\"text-muted d-block\">Dilution</small>\r\n                      <h4 className=\"text-warning mb-0\">{formatPercentage(investorOwnershipPercent)}</h4>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* SERIES A INPUTS */}\r\n            <h5 className=\"mb-3\">{roundname} Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Investment Size</small>\r\n                  <h5>{formatCurrency(calc.investmentSize, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                  <h5>{formatCurrency(calc.preMoneyValuation, currency)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Existing Option Pool %</small>\r\n                  <h5>{formatPercentage(existingOptionPoolPercent)}</h5>\r\n                  <small className=\"text-muted\">(Before Series A)</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small className=\"text-muted\">Target Option Pool %</small>\r\n                  <h5 className=\"text-success\">{formatPercentage(optionPoolPercentPost)}</h5>\r\n                  <small className=\"text-success\">(Post-Money Target)</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* SERIES A OUTPUTS */}\r\n            <h5 className=\"mb-3\">Calculated Outputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-primary text-white\">\r\n                  <small>Post-Money Valuation</small>\r\n                  <h6>{formatCurrency(calc.postMoneyValuation, currency)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-success text-white\">\r\n                  <small>Share Price</small>\r\n                  <h6>{formatCurrencyPricePerShare(calc.sharePrice, currency)}</h6>\r\n                  <small className=\"opacity-75\">per share</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Pre-Investment Shares</small>\r\n                  <h6>{formatNumber(totalSharesBeforeSeriesA)}</h6>\r\n                  <small className=\"opacity-75\">Before Series A</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-warning text-dark\">\r\n                  <small>New Shares Issued</small>\r\n                  <h6>{formatNumber(seriesAInvestorShares + additionalOptionPoolShares + convertedShares + warrantShares)}</h6>\r\n                  <small className=\"opacity-75\">Total new shares</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-dark text-white\">\r\n                  <small>Post-Investment Shares</small>\r\n                  <h6>{formatNumber(totalSharesAfterSeriesA)}</h6>\r\n                  <small className=\"opacity-75\">After Series A</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <div className=\"info-box p-3 border rounded bg-secondary text-white\">\r\n                  <small>Investor Ownership</small>\r\n                  <h6>{formatPercentage(investorOwnershipPercent)}</h6>\r\n                  <small className=\"opacity-75\">Series A %</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* NEW SHARES BREAKDOWN */}\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-warning\">\r\n                  <h6 className=\"alert-heading\"> New Shares Breakdown</h6>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-6\">\r\n                      <strong>Series A Investors:</strong>\r\n                      <div className=\"h5 mb-0\">{formatNumber(seriesAInvestorShares)}</div>\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <strong>Option Pool Expansion:</strong>\r\n                      <div className=\"h5 mb-0\">{formatNumber(additionalOptionPoolShares)}</div>\r\n                    </div>\r\n                  </div>\r\n                  {convertedShares > 0 && (\r\n                    <div className=\"row mt-2\">\r\n                      <div className=\"col-12\">\r\n                        <strong>SAFE/Note Conversion:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(convertedShares)}</div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {warrantShares > 0 && (\r\n                    <div className=\"row mt-2\">\r\n                      <div className=\"col-12\">\r\n                        <strong>Warrant Conversion:</strong>\r\n                        <div className=\"h5 mb-0\">{formatNumber(warrantShares)}</div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  <hr />\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <strong>Total New Shares:</strong>\r\n                    <strong>{formatNumber(seriesAInvestorShares + additionalOptionPoolShares + convertedShares + warrantShares)}</strong>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <div className=\"alert alert-info\">\r\n                  <h6 className=\"alert-heading\"> Option Pool Status</h6>\r\n                  <div className=\"mb-2\">\r\n                    <strong>Existing Pool:</strong> {formatNumber(existingOptionPoolShares)} shares\r\n                    ({formatPercentage(existingOptionPoolPercent)})\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    <strong>Additional:</strong> {formatNumber(additionalOptionPoolShares)} shares\r\n                  </div>\r\n                  <hr />\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <strong>Total Pool (Post):</strong>\r\n                    <strong>{formatNumber(totalOptionPoolShares)}\r\n                      ({formatPercentage(optionPoolPercentPost)})</strong>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ========== WARRANT SECTION - EXERCISED ========== */}\r\n            {capTableData.hasExercisedWarrants && (\r\n              <div className=\"alert alert-success mb-4 border-2 border-success\">\r\n                <h6 className=\"alert-heading\"> Warrants Exercised</h6>\r\n                <p className=\"mb-3\">\r\n                  Total warrant shares exercised: <strong>{formatNumber(capTableData.exercisedWarrantShares || 0)}</strong>\r\n                </p>\r\n                {capTableData.warrantDetails && capTableData.warrantDetails.length > 0 ? (\r\n                  <div>\r\n                    {capTableData.warrantDetails\r\n                      .filter(w => w.status === 'already_exercised')\r\n                      .map((warrant, idx) => (\r\n                        <div key={idx} className=\"mb-3 p-3 bg-white rounded border border-success-light\">\r\n                          <div className=\"d-flex justify-content-between align-items-start\">\r\n                            <div className=\"flex-grow-1\">\r\n                              <h6 className=\"mb-1\">\r\n                                <strong>{warrant.investor_name}</strong>\r\n                              </h6>\r\n                              <div className=\"small text-muted mb-2\">\r\n                                <div> From: <strong>{warrant.original_round}</strong> (Original: {warrant.original_instrument})</div>\r\n                                <div> Exercised in: <strong>{warrant.round_name}</strong></div>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-end\">\r\n                              <div className=\"mb-2\">\r\n                                <div className=\"badge bg-success p-2\">\r\n                                  {formatNumber(warrant.warrant_shares)} shares\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"small\">\r\n                                <div className=\"text-muted\">Exercise Price</div>\r\n                                <div className=\"fw-bold text-success\">\r\n                                  {formatCurrencyPricePerShare(warrant.exercise_price, currency)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          {(warrant.coverage_percentage || warrant.adjustment_percent) && (\r\n                            <div className=\"mt-2 pt-2 border-top small text-muted\">\r\n                              <span className=\"badge bg-light text-dark me-2\">\r\n                                Coverage: {warrant.coverage_percentage}%\r\n                              </span>\r\n                              <span className=\"badge bg-light text-dark\">\r\n                                Adjustment: {warrant.adjustment_percent}%\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-muted small\">No warrant details available</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ========== WARRANT SECTION - PENDING ========== */}\r\n            {capTableData.hasPendingWarrants && (\r\n              <div className=\"alert alert-warning mb-4 border-2 border-warning\">\r\n                <h6 className=\"alert-heading\"> Pending Warrants</h6>\r\n                <p className=\"mb-3\">\r\n                  Total pending warrant shares: <strong>{formatNumber(capTableData.pendingWarrantShares || 0)}</strong>\r\n                </p>\r\n                {capTableData.warrantDetails && capTableData.warrantDetails.length > 0 ? (\r\n                  <div>\r\n                    {capTableData.warrantDetails\r\n                      .filter(w => w.status !== 'already_exercised')\r\n                      .map((warrant, idx) => (\r\n                        <div key={idx} className=\"mb-3 p-3 bg-white rounded border border-warning-light\">\r\n                          <div className=\"d-flex justify-content-between align-items-start\">\r\n                            <div className=\"flex-grow-1\">\r\n                              <h6 className=\"mb-1\">\r\n                                <strong>{warrant.investor_name}</strong>\r\n                              </h6>\r\n                              <div className=\"small text-muted\">\r\n                                <div> From: <strong>{warrant.original_round}</strong></div>\r\n                                <div> Status: <strong className=\"text-warning\">Pending Exercise</strong></div>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-end\">\r\n                              <div className=\"mb-2\">\r\n                                <div className=\"badge bg-warning text-dark p-2\">\r\n                                  {formatNumber(warrant.warrant_shares)} shares\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"small\">\r\n                                <div className=\"text-muted\">Exercise Price</div>\r\n                                <div className=\"fw-bold text-warning\">\r\n                                  {formatCurrencyPricePerShare(warrant.exercise_price, currency)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-muted small\">No pending warrant details available</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* OWNERSHIP CHART */}\r\n            <div className=\"mb-4\">\r\n              {chartData ? (\r\n                <RoundCapChart chartData={chartData} />\r\n              ) : (\r\n                <div className=\"alert alert-info\">\r\n                  <h6>Chart data not available</h6>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* ========== POST-SERIES A CAP TABLE WITH ENHANCED DISPLAY ========== */}\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header bg-success text-white\">\r\n                    <h5 className=\"mb-0\"> Post-Series A Cap Table</h5>\r\n                    <small>After Series A Investment | Post-Money Valuation: {formatCurrency(calc.postMoneyValuation, currency)}</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered table-hover\">\r\n                        <thead className=\"table-dark\">\r\n                          <tr>\r\n                            <th style={{ minWidth: '150px' }}>Shareholder</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '100px' }}>Type</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '100px' }}>Pre-Series Shares</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '100px' }}>New Shares</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '100px' }}>Total Shares</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '120px' }}>Ownership %</th>\r\n                            <th className=\"text-center\" style={{ minWidth: '120px' }}>Value ({currency})</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {postSeriesAShareholders.length > 0 ? (\r\n                            postSeriesAShareholders.map((sh, idx) => {\r\n                              // Determine if this shareholder gets new shares\r\n                              let newShares = 0;\r\n                              if (sh.type === \"Options Pool\" && additionalOptionPoolShares > 0) {\r\n                                newShares = additionalOptionPoolShares;\r\n                              } else if (sh.type === \"Investor\" && sh.originalType === \"Series A Investor\") {\r\n                                newShares = seriesAInvestorShares;\r\n                              } else if (sh.originalType === \"Convertible Investor\") {\r\n                                newShares = convertedShares;\r\n                              } else if (sh.type === \"Warrant Holder\") {\r\n                                newShares = warrantShares > 0 ? warrantShares : sh.shares;\r\n                              }\r\n\r\n                              const existingShares = Math.max(0, sh.shares - newShares);\r\n\r\n                              return (\r\n                                <tr key={idx} className={sh.type === \"Warrant Holder\" ? \"table-light\" : \"\"}>\r\n                                  <td>\r\n                                    <strong>{sh.name}</strong>\r\n                                    {sh.source && (\r\n                                      <div className=\"small text-muted\">Source: {sh.source}</div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {sh.type === \"Founder\" && (\r\n                                      <span className=\"badge bg-primary\">Founder</span>\r\n                                    )}\r\n                                    {sh.type === \"Options Pool\" && (\r\n                                      <span className=\"badge bg-warning text-dark\">\r\n                                        {newShares > 0 ? \"Option Pool \" : \"Option Pool\"}\r\n                                      </span>\r\n                                    )}\r\n                                    {sh.type === \"Investor\" && (\r\n                                      <span className={`badge ${sh.originalType === \"Seed Investor\" ? \"bg-info\" :\r\n                                        sh.originalType === \"Convertible Investor\" ? \"bg-secondary\" :\r\n                                          \"bg-danger\"}`}>\r\n                                        {sh.originalType === \"Seed Investor\" ? \"Seed Investor\" :\r\n                                          sh.originalType === \"Convertible Investor\" ? \"SAFE/Note\" :\r\n                                            \"Series A\"}\r\n                                      </span>\r\n                                    )}\r\n                                    {sh.type === \"Warrant Holder\" && (\r\n                                      <span className=\"badge bg-dark\"> Warrant</span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {existingShares > 0 ? (\r\n                                      <strong>{formatNumber(existingShares)}</strong>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    {newShares > 0 ? (\r\n                                      <span className=\"badge bg-success text-white\">\r\n                                        +{formatNumber(newShares)}\r\n                                      </span>\r\n                                    ) : (\r\n                                      <span className=\"text-muted\"></span>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong className={sh.type === \"Warrant Holder\" ? \"text-danger\" : \"\"}>\r\n                                      {formatNumber(sh.shares)}\r\n                                    </strong>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                        sh.originalType === \"Seed Investor\" ? \"bg-info\" :\r\n                                          sh.originalType === \"Convertible Investor\" ? \"bg-secondary\" :\r\n                                            sh.type === \"Warrant Holder\" ? \"bg-danger\" :\r\n                                              \"bg-success\"\r\n                                      }`}>\r\n                                      {formatPercentage(sh.ownershipPercent || 0)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center\">\r\n                                    <strong>{formatCurrency(sh.value || 0, currency)}</strong>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })\r\n                          ) : (\r\n                            <tr>\r\n                              <td colSpan=\"7\" className=\"text-center text-danger\">\r\n                                <strong> No post-Series A shareholders data available</strong>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* TOTAL ROW */}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td colSpan=\"2\">\r\n                              <strong>TOTAL</strong>\r\n                            </td>\r\n                            <td className=\"text-center\">{formatNumber(totalSharesBeforeSeriesA)}</td>\r\n                            <td className=\"text-center\">\r\n                              <span className=\"badge bg-success text-white\">\r\n                                +{formatNumber(seriesAInvestorShares + additionalOptionPoolShares + convertedShares + warrantShares)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"text-center\">{formatNumber(totalSharesAfterSeriesA)}</td>\r\n                            <td className=\"text-center\">\r\n                              <span className=\"badge bg-dark\">{formatPercentage(100)}</span>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <strong>{formatCurrency(calc.postMoneyValuation, currency)}</strong>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ========== DETAILED BREAKDOWN TABLE ========== */}\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-12\">\r\n                <div className=\"card border-info\">\r\n                  <div className=\"card-header bg-info text-white\">\r\n                    <h5 className=\"mb-0\"> Detailed Shareholder Breakdown</h5>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-sm table-bordered\">\r\n                        <thead className=\"table-light\">\r\n                          <tr>\r\n                            <th>Shareholder Category</th>\r\n                            <th className=\"text-center\">Pre-Series Shares</th>\r\n                            <th className=\"text-center\">New Shares</th>\r\n                            <th className=\"text-center\">Total Shares</th>\r\n                            <th className=\"text-center\">Ownership %</th>\r\n                            <th className=\"text-center\">Post-Money Value</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {postSeriesAShareholders.map((sh, idx) => {\r\n                            let newShares = 0;\r\n                            if (sh.type === \"Options Pool\" && additionalOptionPoolShares > 0) {\r\n                              newShares = additionalOptionPoolShares;\r\n                            } else if (sh.type === \"Investor\" && sh.originalType === \"Series A Investor\") {\r\n                              newShares = seriesAInvestorShares;\r\n                            } else if (sh.originalType === \"Convertible Investor\") {\r\n                              newShares = convertedShares;\r\n                            } else if (sh.type === \"Warrant Holder\") {\r\n                              newShares = warrantShares > 0 ? warrantShares : sh.shares;\r\n                            }\r\n\r\n                            const existingShares = Math.max(0, sh.shares - newShares);\r\n                            const ownershipPercent = sh.ownershipPercent || 0;\r\n                            const value = sh.value || 0;\r\n\r\n                            return (\r\n                              <tr key={idx}>\r\n                                <td>\r\n                                  <strong>{sh.name}</strong>\r\n                                  <br />\r\n                                  <small className=\"text-muted\">{sh.type}</small>\r\n                                </td>\r\n                                <td className=\"text-center text-muted\">\r\n                                  {existingShares > 0 ? formatNumber(existingShares) : \"\"}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  {newShares > 0 ? (\r\n                                    <span className=\"fw-bold text-success\">+{formatNumber(newShares)}</span>\r\n                                  ) : (\r\n                                    <span className=\"text-muted\"></span>\r\n                                  )}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-primary\">{formatPercentage(ownershipPercent)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-success\">{formatCurrency(value, currency)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })}\r\n                          <tr className=\"table-secondary fw-bold\">\r\n                            <td>GRAND TOTAL</td>\r\n                            <td className=\"text-center text-muted\">{formatNumber(totalSharesBeforeSeriesA)}</td>\r\n                            <td className=\"text-center text-success\">+{formatNumber(seriesAInvestorShares + additionalOptionPoolShares + convertedShares + warrantShares)}</td>\r\n                            <td className=\"text-center\">{formatNumber(totalSharesAfterSeriesA)}</td>\r\n                            <td className=\"text-center\">{formatPercentage(100)}</td>\r\n                            <td className=\"text-center text-success fw-bold\">{formatCurrency(calc.postMoneyValuation, currency)}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ========== SUMMARY CARDS ========== */}\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"card border-success\">\r\n                  <div className=\"card-header bg-success text-white\">\r\n                    <h6 className=\"mb-0\"> Capitalization Summary</h6>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"row mb-3\">\r\n                      <div className=\"col-6\">\r\n                        <small className=\"text-muted\">Pre-Money Valuation</small>\r\n                        <div className=\"h6\">{formatCurrency(calc.preMoneyValuation, currency)}</div>\r\n                      </div>\r\n                      <div className=\"col-6\">\r\n                        <small className=\"text-muted\">Post-Money Valuation</small>\r\n                        <div className=\"h6\">{formatCurrency(calc.postMoneyValuation, currency)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row mb-3\">\r\n                      <div className=\"col-6\">\r\n                        <small className=\"text-muted\">Investment Size</small>\r\n                        <div className=\"h6\">{formatCurrency(calc.investmentSize, currency)}</div>\r\n                      </div>\r\n                      <div className=\"col-6\">\r\n                        <small className=\"text-muted\">Series A Share Price</small>\r\n                        <div className=\"h6\">{formatCurrencyPricePerShare(calc.sharePrice, currency)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"border-top pt-2\">\r\n                      <small className=\"text-muted\">Series A Investor Ownership</small>\r\n                      <div className=\"h5 text-danger\">{formatPercentage(investorOwnershipPercent)}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <div className=\"card border-warning\">\r\n                  <div className=\"card-header bg-warning text-dark\">\r\n                    <h6 className=\"mb-0\"> Share Issuance Breakdown</h6>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"mb-2 pb-2 border-bottom\">\r\n                      <div className=\"d-flex justify-content-between\">\r\n                        <strong>Series A Investors:</strong>\r\n                        <strong className=\"text-danger\">{formatNumber(seriesAInvestorShares)}</strong>\r\n                      </div>\r\n                      <small className=\"text-muted\">{formatPercentage((seriesAInvestorShares / totalSharesAfterSeriesA) * 100)} of total</small>\r\n                    </div>\r\n                    <div className=\"mb-2 pb-2 border-bottom\">\r\n                      <div className=\"d-flex justify-content-between\">\r\n                        <strong>Option Pool Expansion:</strong>\r\n                        <strong className=\"text-warning\">{formatNumber(additionalOptionPoolShares)}</strong>\r\n                      </div>\r\n                      <small className=\"text-muted\">{formatPercentage((additionalOptionPoolShares / totalSharesAfterSeriesA) * 100)} of total</small>\r\n                    </div>\r\n                    {convertedShares > 0 && (\r\n                      <div className=\"mb-2 pb-2 border-bottom\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <strong>SAFE/Note Conversion:</strong>\r\n                          <strong className=\"text-info\">{formatNumber(convertedShares)}</strong>\r\n                        </div>\r\n                        <small className=\"text-muted\">{formatPercentage((convertedShares / totalSharesAfterSeriesA) * 100)} of total</small>\r\n                      </div>\r\n                    )}\r\n                    {warrantShares > 0 && (\r\n                      <div className=\"mb-2 pb-2 border-bottom\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <strong>Warrant Shares:</strong>\r\n                          <strong className=\"text-success\">{formatNumber(warrantShares)}</strong>\r\n                        </div>\r\n                        <small className=\"text-muted\">{formatPercentage((warrantShares / totalSharesAfterSeriesA) * 100)} of total</small>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"mt-2 pt-2 border-top\">\r\n                      <div className=\"d-flex justify-content-between fw-bold\">\r\n                        <strong>Total New Shares:</strong>\r\n                        <strong>{formatNumber(seriesAInvestorShares + additionalOptionPoolShares + convertedShares + warrantShares)}</strong>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  //  Helper function for chart data\r\n  const createChartDataFromShareholders = (shareholders) => {\r\n    if (!shareholders || shareholders.length === 0) {\r\n      return {\r\n        labels: [\"Founders\", \"Series A Investors\", \"Option Pool\"],\r\n        datasets: [{\r\n          data: [60, 25, 15],\r\n          backgroundColor: [\"#4e73df\", \"#e74a3b\", \"#f6c23e\"]\r\n        }]\r\n      };\r\n    }\r\n\r\n    const colors = {\r\n      'Founder': '#4e73df',\r\n      'Options Pool': '#f6c23e',\r\n      'Seed Investor': '#1cc88a',\r\n      'Convertible Investor': '#6c757d',\r\n      'Series A Investor': '#e74a3b',\r\n      'Warrant Holder': '#5a5c69'\r\n    };\r\n\r\n    return {\r\n      labels: shareholders.map(sh => sh.name || \"Unknown\"),\r\n      datasets: [{\r\n        data: shareholders.map(sh => sh.ownershipPercent || 0),\r\n        backgroundColor: shareholders.map(sh => {\r\n          const type = sh.type === 'Investor' ? (sh.originalType || 'Investor') : sh.type;\r\n          return colors[type] || '#858796';\r\n        })\r\n      }]\r\n    };\r\n  };\r\n  const PreferredEquityCapTable = ({ capTableData }) => {\r\n    if (!capTableData || !capTableData.calculations) {\r\n      return (\r\n        <div className=\"alert alert-warning\">\r\n          <h5> No Data Available</h5>\r\n          <p>Cap table data is not available for this round.</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const calc = capTableData.calculations;\r\n    const currency = capTableData.currency || \"USD\";\r\n\r\n    //  FIXED: Get warrant data from correct location\r\n    const hasExercisedWarrants = capTableData.hasExercisedWarrants || false;\r\n    const hasPendingWarrants = capTableData.hasPendingWarrants || false;\r\n    const exercisedWarrantShares = calc.exercisedWarrantShares || 0;\r\n    const warrantDetails = capTableData.warrantDetails || []; //  Changed from capTableData.warrants\r\n\r\n    // Get data from backend response structure\r\n    const postCapTable = capTableData.postSeriesACapTable || {};\r\n    const postSeriesAShareholders = postCapTable.shareholders || [];\r\n    const totalPostSharesAfterWarrants = postCapTable.totalSharesAfterWarrants || 0;\r\n\r\n    //  FIXED: Calculate actual totals from shareholders data\r\n    const totalFounderShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Founder\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalOptionShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Options Pool\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalSeedInvestorShares = postSeriesAShareholders\r\n      .filter(sh => sh.originalType === \"Seed Investor\" || sh.type === \"Investor\" && sh.name.includes(\"Seed\"))\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalSeriesAShares = postSeriesAShareholders\r\n      .filter(sh => sh.originalType === \"Series A Investor\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    const totalWarrantShares = postSeriesAShareholders\r\n      .filter(sh => sh.type === \"Warrant\")\r\n      .reduce((sum, sh) => sum + (sh.shares || 0), 0);\r\n\r\n    //  FIXED: Calculate ownership percentages\r\n    const founderOwnership = (totalFounderShares / totalPostSharesAfterWarrants) * 100;\r\n    const optionPoolOwnership = (totalOptionShares / totalPostSharesAfterWarrants) * 100;\r\n    const seedInvestorOwnership = (totalSeedInvestorShares / totalPostSharesAfterWarrants) * 100;\r\n    const seriesAOwnership = (totalSeriesAShares / totalPostSharesAfterWarrants) * 100;\r\n    const warrantOwnership = (totalWarrantShares / totalPostSharesAfterWarrants) * 100;\r\n\r\n    //  FIXED: Get correct share price\r\n    const sharePrice = calc.sharePrice || 0;\r\n\r\n    // Calculate pre-money shares properly\r\n    const preMoneyShares = totalPostSharesAfterWarrants - calc.seriesAShares - totalWarrantShares;\r\n    const preMoneyValuation = preMoneyShares * sharePrice;\r\n\r\n    //  FIXED: Format numbers\r\n\r\n    const calculations = capTableData.calculations\r\n    return (\r\n      <div className=\"container-fluid py-4\" style={{ backgroundColor: '#f8f9fa' }}>\r\n        {/* Header */}\r\n        <div className=\"card mb-4 shadow\">\r\n          <div className=\"card-header text-white\" style={{ backgroundColor: '#6f42c1' }}>\r\n            <h3 className=\"mb-0 head_text\"> {capTableData.roundType || \"Preferred Equity Round\"}</h3>\r\n            <small className=\"opacity-75\">\r\n              {capTableData.hasConversions && \"Includes Convertible Instruments\"}\r\n              {hasPendingWarrants && \" | Has Pending Warrants\"}\r\n              {hasExercisedWarrants && \" | Includes Exercised Warrants\"}\r\n            </small>\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n\r\n          <div className=\"card-body\">\r\n            {/* Investment Overview */}\r\n            <h5 className=\"mb-3 text-primary\"> Investment Overview</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100\" style={{ backgroundColor: '#e3f2fd' }}>\r\n                  <small className=\"text-muted d-block\">Investment Amount</small>\r\n                  <h5 className=\"mb-0\">{formatCurrency(calc.investmentSize)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100\" style={{ backgroundColor: '#f3e5f5' }}>\r\n                  <small className=\"text-muted d-block\">Pre-Money Valuation</small>\r\n                  <h5 className=\"mb-0\">\r\n                    {formatCurrency(calc.preMoneyValuation)}\r\n                  </h5>\r\n                  <small className=\"text-muted\">\r\n                    {formatNumber(calc.founderShares + calc.existingEmployeeShares)} shares  {formatCurrencyPricePerShare(calc.sharePrice)}\r\n                  </small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100\" style={{ backgroundColor: '#e8f5e9' }}>\r\n                  <small className=\"text-muted d-block\">Post-Money Valuation</small>\r\n                  <h5 className=\"mb-0\">{formatCurrency(calc.postMoneyValuation)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100\" style={{ backgroundColor: '#fff3e0' }}>\r\n                  <small className=\"text-muted d-block\">Share Price</small>\r\n                  <h5 className=\"mb-0\">{formatCurrencyPricePerShare(sharePrice)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Key Metrics */}\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100  bg-white\">\r\n                  <small className=\"text-muted d-block\">Series A Shares</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(calc.seriesAShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100 bg-white\">\r\n                  <small className=\"text-muted d-block\">Converted Shares (Seed)</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(calc.convertibleNoteShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100 bg-white\">\r\n                  <small className=\"text-muted d-block\">Option Pool</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(totalOptionShares)}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"p-3 border rounded h-100 bg-white\">\r\n                  <small className=\"text-muted d-block\">Total Shares</small>\r\n                  <h6 className=\"mb-0\">{formatNumber(totalPostSharesAfterWarrants)}</h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  FIXED: Warrants Section */}\r\n            {capTableData.hasWarrants && (\r\n              <div className=\"alert alert-info mb-4\">\r\n                <h6 className=\"alert-heading\">\r\n                  {hasExercisedWarrants ? \" Warrants Exercised\" : \" Pending Warrants\"}\r\n                </h6>\r\n                {warrantDetails.length > 0 ? ( //  Changed from capTableData.warrants\r\n                  <div>\r\n                    {warrantDetails.map((warrant, idx) => (\r\n                      <div key={idx} className=\"mb-2 p-2 border rounded bg-white\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <div>\r\n                            <strong>Warrant #{idx + 1}:</strong> {warrant.investor_name}\r\n                          </div>\r\n                          <div>\r\n                            <span className={`badge ${warrant.status === 'exercised' ? 'bg-success' : 'bg-warning'}`}>\r\n                              {hasExercisedWarrants ? 'Exercised' : 'Pending'}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"row mt-2 small\">\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Coverage:</strong> {warrant.coverage_percentage || warrant.coveragePercent}%\r\n                          </div>\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Exercise Price:</strong> {formatCurrencyPricePerShare(warrant.exercise_price || warrant.calculatedExercisePrice)}\r\n                          </div>\r\n                          <div className=\"col-md-4\">\r\n                            <strong>Shares:</strong> {formatNumber(warrant.warrant_shares || warrant.potentialShares)}\r\n                          </div>\r\n                        </div>\r\n                        {warrant.adjustment && warrant.adjustment !== 'None' && (\r\n                          <div className=\"text-muted mt-1\">\r\n                            <small>Adjustment: {warrant.adjustment}</small>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n\r\n                    {hasExercisedWarrants && (\r\n                      <div className=\"mt-3 p-2 border rounded bg-success text-white\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <div>\r\n                            <strong>Total Exercised Warrants:</strong> {formatNumber(calc.warrantShares || exercisedWarrantShares)} shares\r\n                          </div>\r\n                          <div>\r\n                            <strong>Total Value:</strong> {formatCurrency((calc.warrantShares || exercisedWarrantShares) * sharePrice)}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"small mt-1\">\r\n                          Dilution: {formatPercentage(warrantOwnership)} ownership\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {hasPendingWarrants && (\r\n                      <div className=\"mt-3 p-2 border rounded bg-warning text-dark\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <div>\r\n                            <strong> Pending Warrants:</strong> {formatNumber(exercisedWarrantShares)} shares\r\n                          </div>\r\n                          <div>\r\n                            <strong>Potential Dilution:</strong> {formatPercentage(\r\n                              (exercisedWarrantShares / totalPostSharesAfterWarrants) * 100\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <p className=\"text-muted\">No detailed warrant information available</p>\r\n                    {calc.warrantShares > 0 && (\r\n                      <div className=\"alert alert-success\">\r\n                        <strong>Total Warrant Shares Exercised:</strong> {formatNumber(calc.warrantShares)} shares |\r\n                        <strong> Value:</strong> {formatCurrency(calc.warrantShares * sharePrice)} |\r\n                        <strong> Ownership:</strong> {formatPercentage((calc.warrantShares / totalPostSharesAfterWarrants) * 100)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Convertible Note Conversion Details */}\r\n            {calc.convertibleNoteShares > 0 && (\r\n              <div className=\"alert alert-success mb-4\">\r\n                <h6 className=\"alert-heading\"> Convertible Note Conversion</h6>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Converted Shares:</strong><br />\r\n                    {formatNumber(calc.convertibleNoteShares)}\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Current Value:</strong><br />\r\n                    {formatCurrency(calc.convertibleNoteValue)}\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <strong>Ownership:</strong><br />\r\n                    {formatPercentage(seedInvestorOwnership)}\r\n                  </div>\r\n                </div>\r\n                {calc.conversionMOIC && (\r\n                  <div className=\"mt-2\">\r\n                    <strong>MOIC:</strong> {calc.conversionMOIC}x |\r\n                    <strong> Conversion Price:</strong> {formatCurrencyPricePerShare(calc.conversionPrice)}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* POST-INVESTMENT CAP TABLE */}\r\n            <div className=\"card shadow-sm mb-4\">\r\n              <div className=\"card-header bg-success text-white\">\r\n                <h5 className=\"mb-0\"> Post-{capTableData.roundType} Cap Table</h5>\r\n                <small>\r\n                  After Investment | Post-Money: {formatCurrency(calc.postMoneyValuation)} |\r\n                  Total Shares: {formatNumber(totalPostSharesAfterWarrants)}\r\n                  {hasExercisedWarrants && ` | Includes ${formatNumber(calc.warrantShares || exercisedWarrantShares)} Warrant Shares`}\r\n                </small>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-bordered table-hover\">\r\n                    <thead style={{ backgroundColor: '#343a40', color: 'white' }}>\r\n                      <tr>\r\n                        <th>Shareholder</th>\r\n                        <th className=\"text-center\">Type</th>\r\n                        <th className=\"text-center\">Shares</th>\r\n                        <th className=\"text-center\">Ownership %</th>\r\n                        <th className=\"text-center\">Value ({currency})</th>\r\n                        <th className=\"text-center\">Notes</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {postSeriesAShareholders.length > 0 ? (\r\n                        postSeriesAShareholders.map((sh, idx) => {\r\n                          //  FIXED: Calculate ownership properly\r\n                          const ownership = (sh.shares / totalPostSharesAfterWarrants) * 100;\r\n                          const value = sh.shares * sharePrice;\r\n\r\n                          return (\r\n                            <tr key={idx}>\r\n                              <td>\r\n                                <strong>{sh.name}</strong>\r\n                                {sh.fullName && sh.fullName !== sh.name && (\r\n                                  <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                )}\r\n                                {sh.email && sh.email !== \"-\" && (\r\n                                  <div className=\"small\"> {sh.email}</div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className={`badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                  sh.type === \"Options Pool\" ? \"bg-warning text-dark\" :\r\n                                    sh.type === \"Warrant\" ? \"bg-danger\" :\r\n                                      sh.type === \"Potential Dilution\" ? \"bg-info\" :\r\n                                        sh.originalType === \"Seed Investor\" ? \"bg-info\" :\r\n                                          \"bg-success\"\r\n                                  }`}>\r\n                                  {sh.type === \"Potential Dilution\" ? \"Pending Warrants\" :\r\n                                    sh.type === \"Warrant\" ? \"Warrant (Exercised)\" :\r\n                                      (sh.originalType || sh.type)}\r\n                                </span>\r\n                                {sh.isWarrant && (\r\n                                  <div className=\"small text-danger mt-1\">\r\n                                    <i className=\"fas fa-file-contract\"></i> Exercised\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(sh.shares)}</strong>\r\n                                {sh.type === \"Potential Dilution\" && sh.pendingShares && (\r\n                                  <div className=\"small text-warning\">\r\n                                    (Potential: {formatNumber(sh.pendingShares)})\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">\r\n                                  {formatPercentage(ownership)}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatCurrency(value)}</strong>\r\n                                {sh.investmentAmount && sh.investmentAmount > 0 && (\r\n                                  <div className=\"small text-success\">\r\n                                     Invested: {formatCurrency(sh.investmentAmount)}\r\n                                  </div>\r\n                                )}\r\n                                {sh.exercisePrice && (\r\n                                  <div className=\"small text-muted\">\r\n                                    Exercise: {formatCurrencyPricePerShare(sh.exercisePrice)}\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {sh.note && (\r\n                                  <small className=\"text-muted\">{sh.note}</small>\r\n                                )}\r\n                                {sh.moic && (\r\n                                  <div className=\"small text-success\">MOIC: {sh.moic}</div>\r\n                                )}\r\n                                {sh.warrantDetails && (\r\n                                  <div className=\"small\">\r\n                                    <div>Coverage: {sh.warrantDetails.coverage_percentage}%</div>\r\n                                    {sh.warrantDetails.adjustment && sh.warrantDetails.adjustment !== 'None' && (\r\n                                      <div>Adjustment: {sh.warrantDetails.adjustment}</div>\r\n                                    )}\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" className=\"text-center text-muted\">\r\n                            No shareholder data available\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n\r\n                      {/* TOTAL ROW */}\r\n                      <tr style={{ backgroundColor: '#e9ecef', fontWeight: 'bold' }}>\r\n                        <td>TOTAL</td>\r\n                        <td className=\"text-center\"></td>\r\n                        <td className=\"text-center\">{formatNumber(totalPostSharesAfterWarrants)}</td>\r\n                        <td className=\"text-center\">\r\n                          <span className=\"badge bg-dark\">100.00%</span>\r\n                        </td>\r\n                        <td className=\"text-center\">{formatCurrency(calc.postMoneyValuation)}</td>\r\n                        <td className=\"text-center\"></td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                {/* Post-Investment Summary */}\r\n                <div className=\"row mt-3 gy-3\">\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-primary mb-2 h-100\">\r\n                      <strong>Founders:</strong> {formatPercentage(founderOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalFounderShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-warning mb-2\">\r\n                      <strong>Employee Pool:</strong> {formatPercentage(optionPoolOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalOptionShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-info mb-2\">\r\n                      <strong>Seed Investors:</strong> {formatPercentage(seedInvestorOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalSeedInvestorShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3\">\r\n                    <div className=\"alert alert-success mb-2\">\r\n                      <strong>Series A Investors:</strong> {formatPercentage(seriesAOwnership)}\r\n                      <div className=\"small\">\r\n                        {formatNumber(totalSeriesAShares)} shares\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {hasExercisedWarrants && totalWarrantShares > 0 && (\r\n                    <div className=\"col-md-3\">\r\n                      <div className=\"alert alert-danger mb-2\">\r\n                        <strong>Warrant Holders:</strong> {formatPercentage(warrantOwnership)}\r\n                        <div className=\"small\">\r\n                          {formatNumber(totalWarrantShares)} shares (Exercised)\r\n                        </div>\r\n                        {warrantDetails.length > 0 && (\r\n                          <div className=\"small text-white\">\r\n                            {warrantDetails.length} warrant(s) exercised\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {hasPendingWarrants && (\r\n                    <div className=\"col-md-3\">\r\n                      <div className=\"alert alert-warning mb-2\">\r\n                        <strong>Pending Warrants:</strong> {formatPercentage(\r\n                          (exercisedWarrantShares / totalPostSharesAfterWarrants) * 100\r\n                        )}\r\n                        <div className=\"small\">\r\n                          Potential: {formatNumber(exercisedWarrantShares)} shares\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Total New Shares Section */}\r\n            {/* Total New Shares Section - DYNAMIC VERSION */}\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-12\">\r\n                <div className=\"card shadow-sm\">\r\n                  <div className=\"card-header bg-secondary text-white\">\r\n                    <h6 className=\"mb-0\"> Total New Shares Calculation</h6>\r\n                    <small className=\"opacity-75\">{calculations.calculationType}</small>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table table-bordered\">\r\n                        <thead className=\"bg-light\">\r\n                          <tr>\r\n                            <th>Component</th>\r\n                            <th className=\"text-end\">Shares</th>\r\n                            <th className=\"text-end\">Formula & Details</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {/* Founders */}\r\n                          <tr>\r\n                            <td>Founders New Shares</td>\r\n                            <td className=\"text-end\">0</td>\r\n                            <td className=\"text-end\">\r\n                              <small className=\"text-muted\">No new founder shares in this round</small>\r\n                            </td>\r\n                          </tr>\r\n\r\n                          {/* Converted SAFE/Note Shares */}\r\n                          <tr>\r\n                            <td>\r\n                              {calculations.safeInvestment > 0 ? \"Converted SAFE Shares\" : \"Converted Note Shares\"}\r\n                            </td>\r\n                            <td className=\"text-end\">\r\n                              {formatNumber(calculations.convertedShares || 0)}\r\n                            </td>\r\n                            <td className=\"text-end\">\r\n                              <small className=\"text-muted\">\r\n                                {calculations.safeInvestment > 0 ? (\r\n                                  <>\r\n                                    SAFE: ${formatNumber(calculations.safeInvestment)}  ${formatNumber(calculations.conversionPrice, 4)}<br />\r\n                                    = {formatNumber(calculations.convertedShares)} shares\r\n                                  </>\r\n                                ) : calculations.noteInvestment > 0 ? (\r\n                                  <>\r\n                                    Note: ${formatNumber(calculations.principalPlusInterest)}  ${formatNumber(calculations.conversionPrice, 4)}<br />\r\n                                    = {formatNumber(calculations.convertedShares)} shares\r\n                                  </>\r\n                                ) : (\r\n                                  \"No convertible instruments\"\r\n                                )}\r\n                              </small>\r\n                            </td>\r\n                          </tr>\r\n\r\n                          {/* New Option Pool Shares */}\r\n                          <tr>\r\n                            <td>New Option Pool Shares</td>\r\n                            <td className=\"text-end\">\r\n                              {formatNumber(calculations.newOptionShares || 0)}\r\n                            </td>\r\n                            <td className=\"text-end\">\r\n                              <small className=\"text-muted\">\r\n                                Total after pool ({formatNumber(calculations.totalSharesAfterPool)}) <br />\r\n                                Total before ({formatNumber(calculations.founderShares + calculations.convertedShares + calculations.seriesAShares)}) <br />\r\n                                Existing ({formatNumber(calculations.existingEmployeeShares)})<br />\r\n                                = {formatNumber(calculations.newOptionShares)} shares\r\n                              </small>\r\n                            </td>\r\n                          </tr>\r\n\r\n                          {/* Series A Shares */}\r\n                          <tr>\r\n                            <td>Series A New Shares</td>\r\n                            <td className=\"text-end\">\r\n                              {formatNumber(calculations.seriesAShares || 0)}\r\n                            </td>\r\n                            <td className=\"text-end\">\r\n                              <small className=\"text-muted\">\r\n                                ${formatNumber(calculations.investmentSize)}  ${formatNumber(calculations.sharePrice, 4)}<br />\r\n                                = {formatNumber(calculations.seriesAShares)} shares\r\n                              </small>\r\n                            </td>\r\n                          </tr>\r\n\r\n                          {/* Warrant Shares (if any) */}\r\n                          {hasExercisedWarrants && (\r\n                            <tr>\r\n                              <td>Exercised Warrant Shares</td>\r\n                              <td className=\"text-end\">\r\n                                {formatNumber(exercisedWarrantShares || 0)}\r\n                              </td>\r\n                              <td className=\"text-end\">\r\n                                <small className=\"text-muted\">\r\n                                  {warrantDetails.length > 0 ? (\r\n                                    <>\r\n                                      {warrantDetails[0].coverage_percentage}% coverage of<br />\r\n                                      Series A + Converted shares\r\n                                    </>\r\n                                  ) : (\r\n                                    \"Warrant exercise in this round\"\r\n                                  )}\r\n                                </small>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n\r\n                          {/* Total Row */}\r\n                          <tr className=\"table-active fw-bold\">\r\n                            <td>TOTAL NEW SHARES IN THIS ROUND</td>\r\n                            <td className=\"text-end\">\r\n                              {formatNumber(\r\n                                (calculations.convertedShares || 0) +\r\n                                (calculations.newOptionShares || 0) +\r\n                                (calculations.seriesAShares || 0) +\r\n                                (exercisedWarrantShares || 0)\r\n                              )}\r\n                            </td>\r\n                            <td className=\"text-end\">\r\n                              <span className=\"badge bg-success\">\r\n                                 {formatNumber(calculations.convertedShares || 0)} + {formatNumber(calculations.newOptionShares || 0)} + {formatNumber(calculations.seriesAShares || 0)}\r\n                                {exercisedWarrantShares > 0 ? ` + ${formatNumber(exercisedWarrantShares)}` : ''}\r\n                                = {formatNumber(\r\n                                  (calculations.convertedShares || 0) +\r\n                                  (calculations.newOptionShares || 0) +\r\n                                  (calculations.seriesAShares || 0) +\r\n                                  (exercisedWarrantShares || 0)\r\n                                )}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    {/* Verification Summary */}\r\n                    <div className=\"alert alert-success mt-3\">\r\n                      <h6> {calculations.calculationType} Verification:</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-md-3 text-center\">\r\n                          <div className=\"display-6 fw-bold\">\r\n                            {formatNumber(\r\n                              (calculations.convertedShares || 0) +\r\n                              (calculations.newOptionShares || 0) +\r\n                              (calculations.seriesAShares || 0) +\r\n                              (exercisedWarrantShares || 0)\r\n                            )}\r\n                          </div>\r\n                          <div className=\"small text-muted\">Total New Shares</div>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-9\">\r\n                          <div className=\"row\">\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Converted {calculations.safeInvestment > 0 ? 'SAFE' : 'Note'}:</strong><br />\r\n                              {formatNumber(calculations.convertedShares)} shares<br />\r\n                              <small className=\"text-muted\">\r\n                                {calculations.safeInvestment > 0 ?\r\n                                  `$${formatNumber(calculations.safeInvestment)} investment` :\r\n                                  `$${formatNumber(calculations.noteInvestment)} note`\r\n                                }<br />\r\n                                MOIC: {formatNumber(calculations.conversionMOIC, 2)}x\r\n                              </small>\r\n                            </div>\r\n\r\n                            <div className=\"col-md-4\">\r\n                              <strong>New Options:</strong><br />\r\n                              {formatNumber(calculations.newOptionShares)} shares<br />\r\n                              <small className=\"text-muted\">\r\n                                {formatNumber(calculations.existingEmployeeShares)} existing + {formatNumber(calculations.newOptionShares)} new<br />\r\n                                = {formatNumber(calculations.existingEmployeeShares + calculations.newOptionShares)} total pool\r\n                              </small>\r\n                            </div>\r\n\r\n                            <div className=\"col-md-4\">\r\n                              <strong>Series A:</strong><br />\r\n                              {formatNumber(calculations.seriesAShares)} shares<br />\r\n                              <small className=\"text-muted\">\r\n                                ${formatNumber(calculations.investmentSize)} investment<br />\r\n                                {formatPercentage((calculations.seriesAShares / calculations.totalSharesAfterPool) * 100)} ownership\r\n                              </small>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Additional Info */}\r\n                          <div className=\"row mt-2\">\r\n                            <div className=\"col-md-12\">\r\n                              <hr className=\"my-2\" />\r\n                              <div className=\"d-flex justify-content-between small\">\r\n                                <div>\r\n                                  <strong>Share Price:</strong> {formatCurrencyPricePerShare(calculations.sharePrice)}\r\n                                </div>\r\n                                <div>\r\n                                  <strong>Pre-Money:</strong> {formatCurrency(calculations.preMoneyValuation)}\r\n                                </div>\r\n                                <div>\r\n                                  <strong>Post-Money:</strong> {formatCurrency(calculations.postMoneyValuation)}\r\n                                </div>\r\n                                <div>\r\n                                  <strong>% of Total:</strong> {formatPercentage(\r\n                                    ((calculations.convertedShares || 0) +\r\n                                      (calculations.newOptionShares || 0) +\r\n                                      (calculations.seriesAShares || 0) +\r\n                                      (exercisedWarrantShares || 0)) /\r\n                                    calculations.totalSharesAfterPool * 100\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Visual Representation */}\r\n                    <div className=\"mt-3\">\r\n                      <h6 className=\"mb-2\"> New Shares Distribution</h6>\r\n                      <div className=\"progress\" style={{ height: '25px' }}>\r\n                        {/* Converted Shares */}\r\n                        {calculations.convertedShares > 0 && (\r\n                          <div\r\n                            className=\"progress-bar bg-info\"\r\n                            role=\"progressbar\"\r\n                            style={{\r\n                              width: `${(calculations.convertedShares /\r\n                                ((calculations.convertedShares || 0) +\r\n                                  (calculations.newOptionShares || 0) +\r\n                                  (calculations.seriesAShares || 0)) * 100)}%`\r\n                            }}\r\n                            title={`Converted: ${formatNumber(calculations.convertedShares)} shares (${calculations.safeInvestment > 0 ? 'SAFE' : 'Note'})`}\r\n                          >\r\n                            {calculations.safeInvestment > 0 ? 'SAFE' : 'Note'} ({formatPercentage(\r\n                              (calculations.convertedShares /\r\n                                ((calculations.convertedShares || 0) +\r\n                                  (calculations.newOptionShares || 0) +\r\n                                  (calculations.seriesAShares || 0)) * 100\r\n                              ))})\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* New Options */}\r\n                        {calculations.newOptionShares > 0 && (\r\n                          <div\r\n                            className=\"progress-bar bg-warning\"\r\n                            role=\"progressbar\"\r\n                            style={{\r\n                              width: `${(calculations.newOptionShares /\r\n                                ((calculations.convertedShares || 0) +\r\n                                  (calculations.newOptionShares || 0) +\r\n                                  (calculations.seriesAShares || 0)) * 100)}%`\r\n                            }}\r\n                            title={`New Options: ${formatNumber(calculations.newOptionShares)} shares`}\r\n                          >\r\n                            Options ({formatPercentage(\r\n                              (calculations.newOptionShares /\r\n                                ((calculations.convertedShares || 0) +\r\n                                  (calculations.newOptionShares || 0) +\r\n                                  (calculations.seriesAShares || 0)) * 100\r\n                              ))})\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Series A */}\r\n                        <div\r\n                          className=\"progress-bar bg-primary\"\r\n                          role=\"progressbar\"\r\n                          style={{\r\n                            width: `${(calculations.seriesAShares /\r\n                              ((calculations.convertedShares || 0) +\r\n                                (calculations.newOptionShares || 0) +\r\n                                (calculations.seriesAShares || 0)) * 100)}%`\r\n                          }}\r\n                          title={`Series A: ${formatNumber(calculations.seriesAShares)} shares`}\r\n                        >\r\n                          Series A ({formatPercentage(\r\n                            (calculations.seriesAShares /\r\n                              ((calculations.convertedShares || 0) +\r\n                                (calculations.newOptionShares || 0) +\r\n                                (calculations.seriesAShares || 0)) * 100\r\n                            ))})\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* CALCULATION FORMULAS */}\r\n            <div className=\"alert alert-dark\">\r\n              <h6 className=\"alert-heading pb-2\"> Calculation Formulas</h6>\r\n              <div className=\"row small\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <strong>1. Share Price:</strong><br />\r\n                  <code className=\"d-block p-2 mt-2 bg-light rounded\">\r\n                    Pre-Money Valuation  Pre-Money Shares<br />\r\n                    {formatCurrency(preMoneyValuation)}  {formatNumber(preMoneyShares)}\r\n                    = {formatCurrencyPricePerShare(sharePrice)}\r\n                  </code>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <strong>2. Series A Shares:</strong><br />\r\n                  <code className=\"d-block p-2 mt-2 bg-light rounded\">\r\n                    Investment  Share Price<br />\r\n                    {formatCurrency(calc.investmentSize)}  {formatCurrencyPricePerShare(sharePrice)}\r\n                    = {formatNumber(calc.seriesAShares)}\r\n                  </code>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <strong>3. Post-Money Valuation:</strong><br />\r\n                  <code className=\"d-block p-2 mt-2 bg-light rounded\">\r\n                    Total Shares  Share Price<br />\r\n                    {formatNumber(totalPostSharesAfterWarrants)}  {formatCurrencyPricePerShare(sharePrice)}\r\n                    = {formatCurrency(calc.postMoneyValuation)}\r\n                  </code>\r\n                </div>\r\n                {hasExercisedWarrants && (\r\n                  <div className=\"col-md-6\">\r\n                    <strong>4. Warrant Shares:</strong><br />\r\n                    <code className=\"d-block p-2 mt-2 bg-light rounded\">\r\n                      Total New Shares  Warrant Coverage %<br />\r\n                      {formatNumber(calc.seriesAShares + (calc.convertibleNoteShares || 0))}  {warrantDetails[0]?.coverage_percentage || 0}%\r\n                      = {formatNumber(calc.warrantShares || 0)}\r\n                    </code>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const renderConvertibleNoteRoundTable = () => {\r\n    if (!capTableData || !capTableData.calculations) return null;\r\n    console.log(capTableData)\r\n    const calc = capTableData.calculations;\r\n    const preTable = capTableData.preSeedCapTable;\r\n    const postTable = capTableData.postSeedCapTable;\r\n    const warrantData = capTableData.warrantData || {};\r\n    const hasWarrants = warrantData && warrantData.hasWarrants;\r\n\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"USD\";\r\n      const currencyCode = currency.split(' ')[0] || 'USD';\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-US').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n    const formatPercentages = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h4 className=\"mb-0 head_text\">{capTableData.roundType || \"Convertible Note Round\"}</h4>\r\n            <small>{roundname} - Convertible Notes (NO SHARES ISSUED)</small>\r\n            {hasWarrants && (\r\n              <span className=\"badge bg-danger ms-2\"> Includes Warrants</span>\r\n            )}\r\n          </div>\r\n          <div className=\"alert alert-warning mb-4\">\r\n            <strong>IMPORTANT:</strong> The calculations are for informational purposes only!\r\n            Please consult with your legal and financial advisors before making any investment decisions.\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n\r\n            {/* ===== INPUT PARAMETERS SECTION ===== */}\r\n            <h5 className=\"mb-3\"> Platform Inputs</h5>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded h-100 bg-light\">\r\n                  <small className=\"text-muted\">Company Value (Input #1)</small>\r\n                  <h5>{formatCurrency(calc.companyValue)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded h-100 bg-light\">\r\n                  <small className=\"text-muted\">Investment Size (Input #2 & #4)</small>\r\n                  <h5>{formatCurrency(calc.investmentSize)}</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded h-100 bg-light\">\r\n                  <small className=\"text-muted\">Conversion Discount (Input #3)</small>\r\n                  <h5>{calc.discountRate}%</h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"info-box p-3 border rounded h-100 bg-light\">\r\n                  <small className=\"text-muted\">Valuation Cap</small>\r\n                  <h5>{formatCurrency(calc.valuationCap)}</h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Warrant Inputs if available */}\r\n            {hasWarrants && (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-danger\">\r\n                    <div className=\"card-header bg-danger text-white\">\r\n                      <h6 className=\"mb-0\"> Warrants Information (Issued in this Round)</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"row\">\r\n                        {warrantData.warrants.map((warrant, index) => (\r\n                          <div key={index} className=\"col-md-4 mb-3\">\r\n                            <div className=\"p-3 border rounded bg-light\">\r\n                              <h6 className=\"text-danger\">\r\n                                <i className=\"fas fa-file-contract me-2\"></i>\r\n                                Warrant {index + 1}\r\n                              </h6>\r\n                              <div className=\"small\">\r\n                                <div><strong>Investor:</strong> {warrant.investorName}</div>\r\n                                <div><strong>Coverage:</strong> {formatPercentage(warrant.warrant_coverage_percentage)}</div>\r\n                                <div><strong>Exercise Type:</strong> {warrant.warrant_exercise_type}</div>\r\n                                {warrant.warrant_adjustment_percent !== 0 && (\r\n                                  <div>\r\n                                    <strong>Adjustment:</strong> {formatPercentage(warrant.warrant_adjustment_percent)}\r\n                                    {warrant.warrant_adjustment_direction === 'increase' ? ' increase' : ' decrease'}\r\n                                  </div>\r\n                                )}\r\n                                <div><strong>Status:</strong> <span className=\"badge bg-warning text-dark\">{warrant.warrant_status}</span></div>\r\n                                <div><strong>Will Exercise:</strong> Next Priced Equity Round</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"alert alert-info mt-2 mb-0\">\r\n                        <small>\r\n                          <i className=\"fas fa-info-circle me-1\"></i>\r\n                          These warrants will be exercisable at the next priced equity round (Series A).\r\n                          Exercise price will be based on Series A price with any adjustments specified.\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-info text-white\">\r\n                  <small>Pre-Seed Option Pool % (Input #5)</small>\r\n                  <h5>{calc.optionPoolPercent}%</h5>\r\n                  <small>{formatNumber(calc.employeeShares)} employee shares created</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small>Interest Rate</small>\r\n                  <h5>{calc.interestRate}%</h5>\r\n                  <small>Annual interest on convertible notes</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"info-box p-3 border rounded bg-light\">\r\n                  <small>Round 0 Founder Shares</small>\r\n                  <h5>{formatNumber(calc.roundZeroTotalShares)}</h5>\r\n                  <small>Total shares from incorporation</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== CALCULATION DETAILS ===== */}\r\n            <div className=\"alert alert-info mb-4\">\r\n              <h6 className=\"alert-heading\"> Employee Pool Calculation</h6>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Formula:</strong> Employee Shares = Total Founder Shares  (1 - Pool %)  Pool %\r\n              </p>\r\n              <p className=\"mb-2 small\">\r\n                <strong>Calculation:</strong> {formatNumber(calc.roundZeroTotalShares)}  (1 - {calc.optionPoolPercent / 100})  {calc.optionPoolPercent / 100} = {formatNumber(calc.employeeShares)} shares\r\n              </p>\r\n              <p className=\"mb-0 small\">\r\n                <strong>Total Shares:</strong> {formatNumber(calc.roundZeroTotalShares)} (founders) + {formatNumber(calc.employeeShares)} (employees) = {formatNumber(calc.totalSharesPreSeed)} shares\r\n              </p>\r\n            </div>\r\n\r\n            {/*  IMPORTANT NOTE - NO SHARES ISSUED */}\r\n            <div className=\"alert alert-warning mb-4\">\r\n              <h6 className=\"alert-heading\">\r\n                 CONVERTIBLE NOTES - NO SHARES ISSUED YET\r\n                {hasWarrants && \" |  Warrants Issued\"}\r\n              </h6>\r\n              <p className=\"mb-2\">\r\n                <strong>Important:</strong> Convertible notes are <strong>NOT converted into shares</strong> during this round.\r\n                {hasWarrants && \" Warrants are issued but will only be exercisable at the next priced equity round.\"}\r\n              </p>\r\n              <ul className=\"mb-2\">\r\n                <li>Convertible note investors have invested <strong>{formatCurrency(calc.totalConfirmedInvestment || calc.investmentSize)}</strong></li>\r\n                <li>They will receive <strong>0 shares</strong> in this round</li>\r\n                <li>Conversion happens at the <strong>next priced equity round</strong> (Series A)</li>\r\n                {hasWarrants && (\r\n                  <li>Warrants will be exercisable at <strong>Series A round</strong> price with adjustments</li>\r\n                )}\r\n              </ul>\r\n              <p className=\"mb-0\">\r\n                <strong>Conversion Price (at Series A):</strong> LOWER of:\r\n                <br /> Series A price  (1 - {formatPercentage(calc.discountRate)})\r\n                <br /> Valuation Cap  Total Shares\r\n                {hasWarrants && (\r\n                  <>\r\n                    <br />\r\n                    <strong>Warrant Exercise Price (at Series A):</strong>\r\n                    <br /> Series A price {warrantData.warrants[0]?.warrant_adjustment_direction === 'increase' ? 'increased' : 'decreased'} by {formatPercentage(warrantData.warrants[0]?.warrant_adjustment_percent || 0)}\r\n                  </>\r\n                )}\r\n              </p>\r\n            </div>\r\n\r\n            {/* ===== PRE-SEED CAP TABLE ===== */}\r\n            {preTable && preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header bg-secondary text-white\">\r\n                      <h5 className=\"mb-0\"> Common Shares at Pre-Seed Round 1 (Output #3)</h5>\r\n                      <small>Before Convertible Note investment (with {calc.optionPoolPercent}% option pool)</small>\r\n                      {hasWarrants && (\r\n                        <div className=\"badge bg-light text-dark ms-2\">\r\n                          <i className=\"fas fa-exclamation-triangle me-1\"></i>\r\n                          Excludes Warrants (not exercisable yet)\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th>Management</th>\r\n                              <th className=\"text-center\">Contact Info</th>\r\n                              <th className=\"text-center\">Common Shares</th>\r\n                              <th className=\"text-center\">New Shares</th>\r\n                              <th className=\"text-center\">Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\">Value ($)</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {preTable.shareholders.map((sh, idx) => (\r\n                              <tr key={idx} className={sh.type === \"Options Pool\" ? \"table-warning\" : \"\"}>\r\n                                <td>\r\n                                  <div>\r\n                                    <strong className={\r\n                                      sh.type === \"Founder\" ? \"text-primary\" :\r\n                                        sh.type === \"Options Pool\" ? \"text-warning\" : \"text-info\"\r\n                                    }>\r\n                                      {sh.name}\r\n                                    </strong>\r\n                                    {sh.fullName && sh.fullName !== sh.name && (\r\n                                      <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                    )}\r\n                                    <span className={`badge mt-1 ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                      sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-info\"\r\n                                      }`}>\r\n                                      {sh.type}\r\n                                    </span>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"text-center small\">\r\n                                  {sh.email && sh.email !== \"-\" ? (\r\n                                    <div className=\"text-muted\"> {sh.email}</div>\r\n                                  ) : <span className=\"text-muted\">-</span>}\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                    {formatNumber(sh.newShares)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <span className={`fSize-16 badge ${sh.type === \"Founder\" ? \"bg-primary\" :\r\n                                    sh.type === \"Options Pool\" ? \"bg-warning text-dark\" : \"bg-secondary\"\r\n                                    }`}>\r\n                                    {formatPercentage(sh.ownership)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"text-center\">\r\n                                  <strong>{formatCurrency(sh.value)}</strong>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n                            <tr className=\"table-secondary fw-bold\">\r\n                              <td colSpan=\"2\">TOTAL</td>\r\n                              <td className=\"text-center\">{formatNumber(preTable.totalShares)}</td>\r\n                              <td className=\"text-center\">{formatNumber(capTableData.preSeedCapTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}</td>\r\n                              <td className=\"text-center\">100%</td>\r\n                              <td className=\"text-center\">{formatCurrency(preTable.totalValue)}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row mt-3\">\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-primary mb-0\">\r\n                            <strong>Total Founders Ownership:</strong> {formatPercentages(\r\n                              preTable.shareholders\r\n                                .filter(sh => sh.type === \"Founder\")\r\n                                .reduce((sum, sh) => sum + parseFloat(sh.ownership), 0)  //  parseFloat here\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                          <div className=\"alert alert-warning mb-0\">\r\n                            <strong>Employee Pool Ownership:</strong> {formatPercentages(\r\n                              preTable.shareholders\r\n                                .filter(sh => sh.type === \"Options Pool\")\r\n                                .reduce((sum, sh) => sum + parseFloat(sh.ownership), 0)  //  parseFloat here\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== POST-SEED CAP TABLE ===== */}\r\n            {postTable && postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"card border-warning\">\r\n                    <div className=\"card-header bg-warning text-dark d-flex justify-content-between align-items-center\">\r\n                      <div>\r\n                        <h5 className=\"mb-0\"> Common Shares at Post-Seed Round 1 (Output #4)</h5>\r\n                        <small className=\"opacity-75\">After Convertible Note investment - Notes have NOT converted yet</small>\r\n                      </div>\r\n                      {hasWarrants && (\r\n                        <span className=\"badge bg-danger text-white\">\r\n                          <i className=\"fas fa-file-contract me-1\"></i>\r\n                          Warrants issued (not in share count yet)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-body p-0\">\r\n\r\n                      {/* Highlight Box */}\r\n                      <div className=\"alert alert-info m-3\">\r\n                        <strong className=\"d-block mb-2\"> Key Points:</strong>\r\n                        <ul className=\"mb-0 ps-3\">\r\n                          <li>Convertible notes do NOT convert to shares in this round</li>\r\n                          <li>Total shares remain <strong>{formatNumber(postTable.totalShares)}</strong> (same as Pre-Seed)</li>\r\n                          {hasWarrants && (\r\n                            <li>\r\n                              Warrants issued but will only exercise at next priced round (Series A)\r\n                              <span className=\"badge bg-danger ms-2\">Will dilute in Series A</span>\r\n                            </li>\r\n                          )}\r\n                        </ul>\r\n                      </div>\r\n\r\n                      <div className=\"table-responsive p-3 pt-0\">\r\n                        <table className=\"table table-bordered table-hover mb-0\">\r\n                          <thead className=\"table-dark\">\r\n                            <tr>\r\n                              <th style={{ minWidth: '200px' }}>Shareholder</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Contact Info</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '120px' }}>Common Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '100px' }}>New Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '120px' }}>Total Shares</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Fully Diluted Ownership %</th>\r\n                              <th className=\"text-center\" style={{ minWidth: '150px' }}>Value</th>\r\n                              {hasWarrants && <th className=\"text-center\" style={{ minWidth: '150px' }}>Warrants</th>}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {postTable.shareholders.map((sh, idx) => {\r\n                              // Check if this investor has warrants\r\n                              const investorWarrants = hasWarrants\r\n                                ? warrantData.warrants.filter(w =>\r\n                                  w.investorName === sh.name ||\r\n                                  w.investor_id === sh.investorId\r\n                                )\r\n                                : [];\r\n                              const hasWarrant = investorWarrants.length > 0;\r\n\r\n                              // Determine row class\r\n                              let rowClass = \"\";\r\n                              if (sh.type === \"Options Pool\") {\r\n                                rowClass = \"table-warning\";\r\n                              } else if (sh.type === \"Convertible Note Investor\") {\r\n                                rowClass = \"table-info\";\r\n                              } else if (sh.type === \"Available Investment\") {\r\n                                rowClass = \"table-danger\";\r\n                              } else if (hasWarrant) {\r\n                                rowClass = \"table-danger\";\r\n                              }\r\n\r\n                              // Determine text color\r\n                              let textClass = \"text-dark\";\r\n                              if (sh.type === \"Founder\") {\r\n                                textClass = \"text-primary\";\r\n                              } else if (sh.type === \"Options Pool\") {\r\n                                textClass = \"text-warning\";\r\n                              } else if (sh.type === \"Convertible Note Investor\") {\r\n                                textClass = \"text-info\";\r\n                              } else if (sh.type === \"Available Investment\") {\r\n                                textClass = \"text-danger\";\r\n                              } else if (hasWarrant) {\r\n                                textClass = \"text-danger\";\r\n                              }\r\n\r\n                              // Determine badge color\r\n                              let badgeClass = \"bg-secondary\";\r\n                              if (sh.type === \"Founder\") {\r\n                                badgeClass = \"bg-primary\";\r\n                              } else if (sh.type === \"Options Pool\") {\r\n                                badgeClass = \"bg-warning text-dark\";\r\n                              } else if (sh.type === \"Convertible Note Investor\") {\r\n                                badgeClass = \"bg-info\";\r\n                              } else if (sh.type === \"Available Investment\") {\r\n                                badgeClass = \"bg-danger\";\r\n                              } else if (hasWarrant) {\r\n                                badgeClass = \"bg-danger\";\r\n                              }\r\n\r\n                              return (\r\n                                <tr key={idx} className={rowClass}>\r\n                                  <td>\r\n                                    <div className=\"d-flex flex-column\">\r\n                                      <div>\r\n                                        <strong className={textClass}>\r\n                                          {sh.name}\r\n                                          {hasWarrant && (\r\n                                            <i className=\"fas fa-file-contract ms-2\"></i>\r\n                                          )}\r\n                                        </strong>\r\n                                      </div>\r\n                                      {sh.fullName && sh.fullName !== sh.name && (\r\n                                        <div className=\"small text-muted\">{sh.fullName}</div>\r\n                                      )}\r\n                                      <div className=\"mt-1\">\r\n                                        <span className={`badge ${badgeClass} me-1`}>\r\n                                          {sh.type}\r\n                                        </span>\r\n                                        {hasWarrant && (\r\n                                          <span className=\"badge bg-danger\">\r\n                                            Warrant\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                    </div>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    {sh.email && sh.email !== \"-\" ? (\r\n                                      <div className=\"text-truncate\" style={{ maxWidth: '150px' }}>\r\n                                        <small className=\"text-muted\"> {sh.email}</small>\r\n                                      </div>\r\n                                    ) : <span className=\"text-muted\">-</span>}\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <strong className=\"text-dark\">{formatNumber(sh.shares)}</strong>\r\n                                    {sh.type === \"Convertible Note Investor\" && (\r\n                                      <div className=\"small text-danger fw-bold mt-1\">\r\n                                         Not converted\r\n                                      </div>\r\n                                    )}\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <span className={`badge ${sh.newShares > 0 ? \"bg-success\" : \"bg-secondary\"}`}>\r\n                                      {formatNumber(0)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <strong className=\"text-primary\">{formatNumber(sh.shares)}</strong>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <span className={`badge fSize-16 ${badgeClass}`}>\r\n                                      {formatPercentage(sh.ownership)}\r\n                                    </span>\r\n                                  </td>\r\n                                  <td className=\"text-center align-middle\">\r\n                                    <div className=\"d-flex flex-column\">\r\n                                      <strong>{formatCurrency(sh.value)}</strong>\r\n                                      {sh.investmentAmount > 0 && (\r\n                                        <div className=\"small text-success mt-1\">\r\n                                           Convertible Note: {formatCurrency(sh.investmentAmount)}\r\n                                        </div>\r\n                                      )}\r\n                                      {sh.note && (\r\n                                        <div className=\"small text-muted mt-1\">{sh.note}</div>\r\n                                      )}\r\n                                    </div>\r\n                                  </td>\r\n                                  {hasWarrants && (\r\n                                    <td className=\"text-center align-middle\">\r\n                                      {hasWarrant ? (\r\n                                        <div className=\"d-flex flex-column\">\r\n                                          <span className=\"badge bg-danger mb-1\">\r\n                                            {formatPercentage(investorWarrants[0].warrant_coverage_percentage)} Coverage\r\n                                          </span>\r\n                                          <div className=\"small text-muted\">\r\n                                            Exercise at Series A\r\n                                          </div>\r\n                                        </div>\r\n                                      ) : (\r\n                                        <span className=\"text-muted\">-</span>\r\n                                      )}\r\n                                    </td>\r\n                                  )}\r\n                                </tr>\r\n                              );\r\n                            })}\r\n\r\n                            {/* TOTAL ROW */}\r\n                            <tr className=\"table-success fw-bold\">\r\n                              <td colSpan={2}>TOTAL</td>\r\n                              <td className=\"text-center align-middle\">{formatNumber(postTable.totalShares)}</td>\r\n                              <td className=\"text-center align-middle\">\r\n                                {formatNumber(postTable.shareholders.reduce((sum, sh) => sum + sh.newShares, 0))}\r\n                              </td>\r\n                              <td className=\"text-center align-middle\">{formatNumber(postTable.totalShares)}</td>\r\n                              <td className=\"text-center align-middle\">100%</td>\r\n                              <td className=\"text-center align-middle\">{formatCurrency(postTable.totalValue)}</td>\r\n                              {hasWarrants ? (\r\n                                <td className=\"text-center align-middle\">\r\n                                  <span className=\"badge bg-danger\">\r\n                                    {warrantData.totalWarrants || 0} Warrants\r\n                                  </span>\r\n                                </td>\r\n                              ) : null}\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n\r\n                      {/* Ownership Summary */}\r\n                      <div className=\"row m-3 mt-4\">\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-primary h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">Total Founders Ownership</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatPercentage(\r\n                                postTable.shareholders\r\n                                  .filter(sh => sh.type === \"Founder\")\r\n                                  .reduce((sum, sh) => sum + parseFloat(sh.ownership), 0)  //  parseFloat\r\n                              )}\r\n                            </h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-warning h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">Employee Pool</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatPercentage(\r\n                                postTable.shareholders\r\n                                  .filter(sh => sh.type === \"Options Pool\")\r\n                                  .reduce((sum, sh) => sum + parseFloat(sh.ownership), 0)  //  parseFloat\r\n                              )}\r\n                            </h5>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 mb-3\">\r\n                          <div className=\"alert alert-info h-100 mb-0\">\r\n                            <small className=\"d-block mb-1\">Convertible Note Investment</small>\r\n                            <h5 className=\"mb-0 fw-bold\">\r\n                              {formatCurrency(postTable.summary?.totalInvestment || 0)}\r\n                            </h5>\r\n                            <small className=\"text-muted\">{postTable.summary?.convertibleNotes || 0} investors</small>\r\n                          </div>\r\n                        </div>\r\n                        {hasWarrants && (\r\n                          <div className=\"col-md-3 mb-3\">\r\n                            <div className=\"alert alert-danger h-100 mb-0\">\r\n                              <small className=\"d-block mb-1\">Warrants Issued</small>\r\n                              <h5 className=\"mb-0 fw-bold\">{warrantData.totalWarrants || 0} Warrant(s)</h5>\r\n                              <small className=\"text-muted d-block\">Will exercise at Series A</small>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Warrant Summary if available */}\r\n                      {hasWarrants && (\r\n                        <div className=\"card border-danger m-3\">\r\n                          <div className=\"card-header bg-danger text-white\">\r\n                            <h6 className=\"mb-0\"> Warrant Details</h6>\r\n                          </div>\r\n                          <div className=\"card-body p-3\">\r\n                            <div className=\"table-responsive\">\r\n                              <table className=\"table table-sm table-bordered mb-0\">\r\n                                <thead className=\"table-dark\">\r\n                                  <tr>\r\n                                    <th style={{ width: '25%' }}>Investor</th>\r\n                                    <th style={{ width: '15%' }}>Coverage %</th>\r\n                                    <th style={{ width: '15%' }}>Exercise Type</th>\r\n                                    <th style={{ width: '15%' }}>Adjustment</th>\r\n                                    <th style={{ width: '15%' }}>Status</th>\r\n                                    <th style={{ width: '25%' }}>Will Exercise</th>\r\n                                  </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                  {warrantData.warrants.map((warrant, index) => (\r\n                                    <tr key={index}>\r\n                                      <td>{warrant.investorName}</td>\r\n                                      <td className=\"text-center\">{formatPercentage(warrant.warrant_coverage_percentage)}</td>\r\n                                      <td className=\"text-center\">{warrant.warrant_exercise_type}</td>\r\n                                      <td className=\"text-center\">\r\n                                        {warrant.warrant_adjustment_percent !== 0\r\n                                          ? `${formatPercentage(warrant.warrant_adjustment_percent)} ${warrant.warrant_adjustment_direction}`\r\n                                          : 'None'\r\n                                        }\r\n                                      </td>\r\n                                      <td className=\"text-center\">\r\n                                        <span className={`badge ${warrant.warrant_status === 'exercised' ? 'bg-success' :\r\n                                          warrant.warrant_status === 'pending' ? 'bg-warning text-dark' :\r\n                                            'bg-secondary'\r\n                                          }`}>\r\n                                          {warrant.warrant_status}\r\n                                        </span>\r\n                                      </td>\r\n                                      <td className=\"text-center\">Next Priced Round (Series A)</td>\r\n                                    </tr>\r\n                                  ))}\r\n                                </tbody>\r\n                              </table>\r\n                            </div>\r\n                            <div className=\"alert alert-info mt-3 mb-0\">\r\n                              <small>\r\n                                <strong>Note:</strong> These warrants will be calculated and exercised at the Series A round.\r\n                                The exact number of warrant shares will be determined based on the Series A price\r\n                                and total new shares issued in that round.\r\n                              </small>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ===== CONVERSION DETAILS ===== */}\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-header\">\r\n                <h5 className=\"mb-0\"> Convertible Notes will convert at next priced equity round</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Conversion Terms:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li><strong>Conversion Trigger:</strong> Next priced equity financing (Series A)</li>\r\n                      <li><strong>Valuation Cap:</strong> {formatCurrency(calc.valuationCap)}</li>\r\n                      <li><strong>Discount Rate:</strong> {calc.discountRate}%</li>\r\n                      <li><strong>Interest Rate:</strong> {calc.interestRate}% per annum</li>\r\n                      <li><strong>Conversion Price:</strong> Lower of (Series A price  discount) OR (Cap  Total Shares)</li>\r\n                    </ul>\r\n                  </div>\r\n\r\n                  <div className=\"col-md-6\">\r\n                    <h6>Next Steps:</h6>\r\n                    <ul className=\"mb-0\">\r\n                      <li> Convertible notes issued (0 shares)</li>\r\n                      <li> Investment received: {formatCurrency(calc.totalConfirmedInvestment)}</li>\r\n                      {hasWarrants && (\r\n                        <li> {warrantData.totalWarrants} warrant(s) issued</li>\r\n                      )}\r\n                      <li> Prepare for Series A priced round</li>\r\n                      <li> Convertible notes will automatically convert</li>\r\n                      <li> Warrants will be exercisable</li>\r\n                      <li> Update cap table after conversion</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Disclaimer */}\r\n            <div className=\"alert alert-danger mt-4\">\r\n              <strong> CPAVATE PLATFORM CALCULATION DISCLAIMER:</strong><br />\r\n              The calculations provided on this platform are for informational purposes only.\r\n              Please consult with your legal and financial advisors before making any investment decisions\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  const renderConvertibleNoteSeriesRoundTable = () => {\r\n\r\n\r\n    if (!capTableData) {\r\n      return <div className=\"alert alert-warning\">No data available</div>;\r\n    }\r\n\r\n    //  Extract data\r\n    const calc = capTableData.calculations || {};\r\n    const preTable = capTableData.preSeedCapTable || {};\r\n    const postTable = capTableData.postSeedCapTable || {};\r\n\r\n    console.log(\"Post Table Shareholders:\", calc.sharePrice);\r\n\r\n    //  Helper functions\r\n    const formatCurrency = (amount) => {\r\n      const currency = capTableData.currency || \"CAD\";\r\n      const currencyCode = currency.split(' ')[0] || 'CAD';\r\n\r\n      // For small amounts (< 1000), show 2 decimal places\r\n      if (Math.abs(amount) < 1000) {\r\n        return new Intl.NumberFormat('en-CA', {\r\n          style: 'currency',\r\n          currency: currencyCode,\r\n          minimumFractionDigits: 2,\r\n          maximumFractionDigits: 2\r\n        }).format(amount || 0);\r\n      }\r\n\r\n      // For larger amounts, no decimal places\r\n      return new Intl.NumberFormat('en-CA', {\r\n        style: 'currency',\r\n        currency: currencyCode,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0\r\n      }).format(amount || 0);\r\n    };\r\n\r\n    const formatNumber = (num) => {\r\n      return new Intl.NumberFormat('en-CA').format(Math.round(num || 0));\r\n    };\r\n\r\n    const formatPercentage = (percent) => {\r\n      const numValue = typeof percent === 'string' ? parseFloat(percent) : (percent || 0);\r\n      return `${numValue.toFixed(1)}%`;\r\n    };\r\n\r\n    //  Prepare chart data\r\n    const prepareChartData = () => {\r\n      if (!postTable.shareholders || postTable.shareholders.length === 0) {\r\n        return null;\r\n      }\r\n\r\n      const labels = postTable.shareholders.map(sh => sh.name || \"Shareholder\");\r\n      const data = postTable.shareholders.map(sh => parseFloat(sh.ownership) || 0);\r\n      const backgroundColors = postTable.shareholders.map(sh => {\r\n        if (sh.type?.includes(\"Founder\")) return '#4e73df';\r\n        if (sh.type?.includes(\"Option\")) return '#f6c23e';\r\n        if (sh.type?.includes(\"Convertible\") || sh.type?.includes(\"Seed\")) return '#1cc88a';\r\n        if (sh.type?.includes(\"Series\")) return '#36b9cc';\r\n        return '#858796';\r\n      });\r\n\r\n      return {\r\n        labels,\r\n        datasets: [{\r\n          data,\r\n          backgroundColor: backgroundColors,\r\n          borderColor: '#fff',\r\n          borderWidth: 1\r\n        }]\r\n      };\r\n    };\r\n\r\n    const chartData = prepareChartData();\r\n\r\n    //  Chart options\r\n    const chartOptions = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      plugins: {\r\n        legend: {\r\n          position: 'right',\r\n          labels: {\r\n            padding: 20,\r\n            usePointStyle: true,\r\n          }\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Post-Series A Ownership Distribution',\r\n          font: {\r\n            size: 16\r\n          }\r\n        },\r\n        tooltip: {\r\n          callbacks: {\r\n            label: function (context) {\r\n              const label = context.label || '';\r\n              const value = context.parsed || 0;\r\n              return `${label}: ${value.toFixed(1)}%`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var roundname = capTableData.instrumentType + ' ' + capTableData.shareClassType;\r\n\r\n    //  Calculate current shares from pre-table for comparison\r\n    const getPreSharesForShareholder = (name) => {\r\n      if (!preTable.shareholders) return 0;\r\n      const shareholder = preTable.shareholders.find(sh =>\r\n        sh.name.includes(name) || name.includes(sh.name)\r\n      );\r\n      return shareholder ? shareholder.shares : 0;\r\n    };\r\n\r\n    return (\r\n      <div className=\"cap-table-section\">\r\n        <div className=\"card mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h4 className=\"mb-0\"> {roundname} with Convertible Note Conversion</h4>\r\n            <small>{capTableData.message || \"Convertible Note conversion completed\"}</small>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            {/*  CHART SECTION */}\r\n            {chartData ? (\r\n              <div className=\"row mb-4\">\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                      <h6 className=\"mb-0\">Ownership Distribution (Pie Chart)</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div style={{ height: '300px' }}>\r\n                        {(() => {\r\n                          try {\r\n                            return <Pie data={chartData} options={chartOptions} />;\r\n                          } catch (e) {\r\n                            return <Bar data={chartData} options={chartOptions} />;\r\n                          }\r\n                        })()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                      <h6 className=\"mb-0\">Ownership Breakdown</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <ul className=\"list-group\">\r\n                        {postTable.shareholders.map((sh, idx) => (\r\n                          <li key={idx} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                            <span>\r\n                              <strong>{sh.name}</strong>\r\n                              <small className=\"text-muted ms-2\">{sh.type}</small>\r\n                            </span>\r\n                            <span className=\"badge bg-primary rounded-pill\">\r\n                              {formatPercentage(sh.ownership)}\r\n                            </span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"alert alert-warning mb-4\">\r\n                No shareholder data available for chart\r\n              </div>\r\n            )}\r\n\r\n            {/*  CONVERTIBLE NOTE CONVERSION DETAILS */}\r\n            <div className=\"alert alert-success mb-4\">\r\n              <h6 className=\"mb-2\"> Convertible Note Conversion</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Original Investment:</strong> {formatCurrency(calc.seedInvestment || 0)}</p>\r\n                  <p><strong>Interest Rate:</strong> {calc.interestRate || '0'}%</p>\r\n                  <p><strong>Discount Rate:</strong> {calc.discountRate || '0'}%</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Valuation Cap:</strong> {formatCurrency(calc.valuationCap || 0)}</p>\r\n                  <p><strong>Years Between Rounds:</strong> {calc.yearsBetweenRounds || 2}</p>\r\n                  <p><strong>Principal + Interest:</strong> {formatCurrency(calc.principalPlusInterest || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Shares Converted:</strong> {formatNumber(calc.seedConversionShares || 0)}</p>\r\n                  <p><strong>Conversion Value:</strong> {formatCurrency(calc.seedConversionValue || 0)}</p>\r\n                  <p><strong>MOIC:</strong> <strong className=\"text-success\">{calc.seedMOIC || \"0X\"}</strong></p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  SERIES A INVESTMENT DETAILS */}\r\n            <div className=\"alert alert-primary mb-4\">\r\n              <h6 className=\"mb-2\"> Series A Investment</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Investment Amount:</strong> {formatCurrency(calc.seriesAInvestment || 0)}</p>\r\n                  <p><strong>Shares Purchased:</strong> {formatNumber(calc.seriesAShares || 0)}</p>\r\n                  <p><strong>Share Price:</strong> {formatCurrency(calc.sharePrice || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Investment Value:</strong> {formatCurrency(calc.seriesAValue || 0)}</p>\r\n                  <p><strong>MOIC:</strong> <strong>{calc.seriesAMOIC || \"0X\"}</strong></p>\r\n                  <p><strong>Pre-Money Valuation:</strong> {formatCurrency(calc.preMoneyValuation || 0)}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  PRE-SERIES A CAP TABLE */}\r\n            {preTable.shareholders && preTable.shareholders.length > 0 && (\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-secondary text-white\">\r\n                  <h5 className=\"mb-0\"> Pre-Series A Cap Table</h5>\r\n                  <small>Total Shares: {formatNumber(preTable.totalShares || 0)} | Total Value: {formatCurrency(preTable.totalValue || 0)}</small>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table table-bordered table-hover\">\r\n                      <thead className=\"table-dark\">\r\n                        <tr>\r\n                          <th>Shareholder</th>\r\n                          <th className=\"text-center\">Type</th>\r\n                          <th className=\"text-center\">Shares</th>\r\n                          <th className=\"text-center\">Ownership %</th>\r\n                          <th className=\"text-center\">Value</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {preTable.shareholders.map((sh, idx) => (\r\n                          <tr key={idx}>\r\n                            <td>\r\n                              <strong>{sh.name || `Shareholder ${idx + 1}`}</strong>\r\n                              {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <span className={`badge ${sh.type?.includes(\"Founder\") ? \"bg-primary\" :\r\n                                sh.type?.includes(\"Option\") ? \"bg-warning text-dark\" :\r\n                                  \"bg-info\"\r\n                                }`}>\r\n                                {sh.type || \"Shareholder\"}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <strong>{formatNumber(sh.shares || 0)}</strong>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <span className=\"badge bg-dark\">\r\n                                {formatPercentage(sh.ownership || 0)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"text-center\">\r\n                              <strong>{formatCurrency(sh.value || 0)}</strong>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        <tr className=\"table-secondary fw-bold\">\r\n                          <td colSpan=\"2\">TOTAL</td>\r\n                          <td className=\"text-center\">{formatNumber(preTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">100%</td>\r\n                          <td className=\"text-center\">{formatCurrency(preTable.totalValue || 0)}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*  POST-SERIES A CAP TABLE WITH 3 COLUMNS */}\r\n            {postTable.shareholders && postTable.shareholders.length > 0 && (\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-primary text-white\">\r\n                  <h5 className=\"mb-0\"> Post-Series A Cap Table</h5>\r\n                  <small>Total Shares: {formatNumber(postTable.totalShares || 0)} | Total Value: {formatCurrency(postTable.totalValue || 0)}</small>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table table-bordered table-hover\">\r\n                      <thead className=\"table-dark\">\r\n                        <tr>\r\n                          <th>Shareholder</th>\r\n                          <th className=\"text-center\">Type</th>\r\n                          <th className=\"text-center\">Shares</th>\r\n                          <th className=\"text-center\">New Shares</th>\r\n                          <th className=\"text-center\">Total Shares</th>\r\n                          <th className=\"text-center\">Ownership %</th>\r\n                          <th className=\"text-center\">Value</th>\r\n                          <th className=\"text-center\">Investment Details</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {postTable.shareholders.map((sh, idx) => {\r\n                          // Calculate current shares from pre-table\r\n                          const preShares = getPreSharesForShareholder(sh.name);\r\n                          const newShares = sh.newShares || (sh.shares - preShares);\r\n                          const totalShares = sh.shares;\r\n\r\n                          return (\r\n                            <tr key={idx}>\r\n                              <td>\r\n                                <strong>{sh.name || `Shareholder ${idx + 1}`}</strong>\r\n                                {sh.note && <div className=\"small text-muted\">{sh.note}</div>}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className={`badge ${sh.type?.includes(\"Founder\") ? \"bg-primary\" :\r\n                                  sh.type?.includes(\"Option\") ? \"bg-warning text-dark\" :\r\n                                    sh.type?.includes(\"Convertible\") || sh.type?.includes(\"Seed\") ? \"bg-info\" :\r\n                                      sh.type?.includes(\"Series\") ? \"bg-success\" :\r\n                                        \"bg-secondary\"\r\n                                  }`}>\r\n                                  {sh.type || \"Shareholder\"}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(preShares)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {newShares > 0 ? (\r\n                                  <div className=\"text-success fw-bold\">\r\n                                    +{formatNumber(newShares)}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"text-muted\">0</span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatNumber(totalShares)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <span className=\"badge bg-dark\">\r\n                                  {formatPercentage(sh.ownership || 0)}\r\n                                </span>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                <strong>{formatCurrency(sh.value || 0)}</strong>\r\n                              </td>\r\n                              <td className=\"text-center\">\r\n                                {sh.conversionPrice ? (\r\n                                  <div className=\"small\">\r\n                                    @ {formatCurrency(sh.conversionPrice)}/share\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                    {sh.principalPlusInterest && (\r\n                                      <div className=\"text-info\">Principal + Interest: {formatCurrency(sh.principalPlusInterest)}</div>\r\n                                    )}\r\n                                  </div>\r\n                                ) : sh.investment ? (\r\n                                  <div className=\"small\">\r\n                                    Invested: {formatCurrency(sh.investment)}\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                  </div>\r\n                                ) : sh.originalInvestment ? (\r\n                                  <div className=\"small\">\r\n                                    Original: {formatCurrency(sh.originalInvestment)}\r\n                                    {sh.moic && <div className=\"text-success\">MOIC: {sh.moic}</div>}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"text-muted\">-</span>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                        <tr className=\"table-primary fw-bold\">\r\n                          <td colSpan=\"2\">TOTAL</td>\r\n                          <td className=\"text-center\">{formatNumber(preTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">{formatNumber(calc.newSharesIssued || 0)}</td>\r\n                          <td className=\"text-center\">{formatNumber(postTable.totalShares || 0)}</td>\r\n                          <td className=\"text-center\">100%</td>\r\n                          <td className=\"text-center\">{formatCurrency(postTable.totalValue || 0)}</td>\r\n                          <td className=\"text-center\">\r\n                            {formatCurrency((calc.seedInvestment || 0) + (calc.seriesAInvestment || 0))}\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n\r\n                  {/*  SUMMARY OF NEW SHARES */}\r\n                  <div className=\"alert alert-info mt-3\">\r\n                    <h6> New Shares Summary</h6>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Convertible Note Conversion:</strong> {formatNumber(calc.seedConversionShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Series A Investment:</strong> {formatNumber(calc.seriesAShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>New Option Pool:</strong> {formatNumber(calc.newOptionShares || 0)} shares</p>\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <p><strong>Total New Shares:</strong> {formatNumber(calc.newSharesIssued || 0)} shares</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*  FINAL SUMMARY */}\r\n            <div className=\"alert alert-info\">\r\n              <h6> Final Summary</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Pre-Money Valuation:</strong> {formatCurrency(calc.preMoneyValuation || 0)}</p>\r\n                  <p><strong>Post-Money Valuation:</strong> {formatCurrency(calc.postMoneyValuation || 0)}</p>\r\n                  <p><strong>Valuation Increase:</strong> {\r\n                    (((calc.postMoneyValuation || 0) - (calc.preMoneyValuation || 0)) /\r\n                      (calc.preMoneyValuation || 1) * 100).toFixed(1)}%\r\n                  </p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>Total Capital Raised:</strong> {\r\n                    formatCurrency((calc.seedInvestment || 0) + (calc.seriesAInvestment || 0))\r\n                  }</p>\r\n                  <p><strong>Share Price:</strong> {formatCurrency(calc.sharePrice || 0)}</p>\r\n                  <p><strong>Total Shares Outstanding:</strong> {formatNumber(postTable.totalShares || 0)}</p>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <p><strong>New Shares Issued:</strong> {formatNumber(calc.newSharesIssued || 0)}</p>\r\n                  <p><strong>Option Pool Created:</strong> {formatNumber(calc.newOptionShares || 0)} shares</p>\r\n                  <p><strong>Existing Option Pool:</strong> {formatNumber(calc.employeeSharesSeedRound || 0)} shares</p>\r\n                </div>\r\n              </div>\r\n\r\n              {/*  NEW: Ownership Summary Section */}\r\n              <div className=\"row mt-3\">\r\n                <div className=\"col-md-12\">\r\n                  <h6> Ownership Distribution</h6>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Total Founders Ownership:</strong> {\r\n                        (() => {\r\n                          // Calculate total founders shares from postSeedShareholders\r\n                          const founders = postTable.shareholders?.filter(s => s.type === \"Founder\") || [];\r\n                          const totalFounderShares = founders.reduce((sum, f) => sum + (f.shares || 0), 0);\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const founderPercentage = (totalFounderShares / totalPostShares * 100).toFixed(1);\r\n                          return `${founderPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Employee Option Pool:</strong> {\r\n                        (() => {\r\n                          const optionPool = postTable.shareholders?.find(s => s.type === \"Options Pool\") || {};\r\n                          const optionShares = optionPool.shares || 0;\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const optionPercentage = (optionShares / totalPostShares * 100).toFixed(1);\r\n                          return `${optionPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Investor Ownership:</strong> {\r\n                        (() => {\r\n                          const investors = postTable.shareholders?.filter(s => s.type === \"Investor\") || [];\r\n                          const totalInvestorShares = investors.reduce((sum, inv) => sum + (inv.shares || 0), 0);\r\n                          const totalPostShares = postTable.totalShares || 1;\r\n                          const investorPercentage = (totalInvestorShares / totalPostShares * 100).toFixed(1);\r\n                          return `${investorPercentage}%`;\r\n                        })()\r\n                      }</p>\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                      <p><strong>Fully Diluted Total:</strong> 100%</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"fullpage d-block\">\r\n        <div className=\"d-flex align-items-start gap-0\">\r\n          <ModuleSideNav\r\n            isCollapsed={isCollapsed}\r\n            setIsCollapsed={setIsCollapsed}\r\n          />\r\n          <div\r\n            className={`global_view ${isCollapsed ? \"global_view_col\" : \"\"}`}\r\n          >\r\n            <TopBar />\r\n            <SectionWrapper className=\"d-block p-md-4 p-3\">\r\n              <div className=\"container-fluid\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                  <h2>Capitalization Table</h2>\r\n                  <button\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => navigate(-1)}\r\n                  >\r\n                    Back to Rounds\r\n                  </button>\r\n                </div>\r\n\r\n                {loading && (\r\n                  <div className=\"text-center py-5\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <p className=\"mt-3\">Loading cap table data...</p>\r\n                  </div>\r\n                )}\r\n\r\n                {error && (\r\n                  <div className=\"alert alert-danger\" role=\"alert\">\r\n                    <strong>Error:</strong> {error}\r\n                  </div>\r\n                )}\r\n                {!loading && !error && capTableData && (() => {\r\n                  console.log(capTableData)\r\n                  // Normalize data for consistent checking\r\n                  const roundType = (capTableData.round_type).toLowerCase();\r\n                  const shareClassType = (capTableData.shareClassType).toLowerCase();\r\n                  const instrumentType = (capTableData.instrumentType || '').toLowerCase();\r\n\r\n                  // CONDITION 1: Round 0 / Incorporation (highest priority)\r\n                  if (roundType.includes(\"round 0\") ||\r\n                    roundType.includes(\"incorporation\") ||\r\n                    capTableData.isRoundZero) {\r\n                    return renderRoundZeroTable();\r\n                  }\r\n\r\n                  // CONDITION 2: Preferred Equity (check before Series/Seed)\r\n                  if (instrumentType === \"preferred equity\" ||\r\n                    instrumentType.includes(\"preferred\")) {\r\n                    return <PreferredEquityCapTable capTableData={capTableData} />;\r\n                  }\r\n\r\n                  // CONDITION 3: Series A + SAFE\r\n                  // if (\r\n                  //   shareClassType.includes(\"series\") &&\r\n                  //   instrumentType === \"safe\") {\r\n\r\n                  //   return renderSAFESeriesRoundTable();\r\n                  // }\r\n\r\n                  // CONDITION 4: Series A (without SAFE)\r\n                  if (instrumentType === 'common stock' &&\r\n                    shareClassType.includes(\"series\")) {\r\n                    return renderSeriesATableCommon();\r\n                  }\r\n\r\n                  // CONDITION 5: Seed + SAFE\r\n                  if (\r\n                    instrumentType === \"safe\") {\r\n                    return renderSAFERoundTable();\r\n                  }\r\n                  if (\r\n                    instrumentType === \"convertible note\") {\r\n                    return renderConvertibleNoteRoundTable();\r\n                  } else {\r\n                    return renderSeedRoundTable();\r\n                  }\r\n                  // if (shareClassType.includes(\"series\") &&\r\n                  //   instrumentType === \"convertible note\") {\r\n                  //   return renderConvertibleNoteSeriesRoundTable();\r\n                  // } else {\r\n                  //   return renderSeedRoundTable();\r\n                  // }\r\n                  // CONDITION 6: Default - Seed Round (any remaining seed or fallback)\r\n\r\n                })()}\r\n\r\n                {!loading && !error && !capTableData && (\r\n                  <div className=\"alert alert-warning\" role=\"alert\">\r\n                    No cap table data available for this roundsss.\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </SectionWrapper>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n}\r\n","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown,\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS<TType, TData, TLabel> | null>(null);\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["RecordRoundCaptable","navigate","useNavigate","storedUsername","localStorage","getItem","userLogin","JSON","parse","API_URL_CAPTABLE","API_BASE_URL","document","title","id","useParams","capTableData","setCapTableData","useState","roundData","setRoundData","loading","setLoading","error","setError","isCollapsed","setIsCollapsed","useEffect","getCapTableData","async","formData","company_id","companies","round_id","res","axios","post","headers","Accept","data","success","capTable","round","message","err","_err$response","_err$response$data","response","console","formatCurrency","amount","currency","arguments","length","undefined","cleanCurrency","trim","split","currencyCode","includes","toUpperCase","Intl","NumberFormat","style","minimumFractionDigits","format","parseFloat","toFixed","formatCurrencyPricePerShare","numAmount","maximumFractionDigits","formatPriceThreeDecimal","formatNumber","num","formatPercentage","percent","Number","isNaN","RoundCapChart","_ref","chartData","_jsx","height","children","Bar","options","responsive","plugins","legend","display","text","scales","y","beginAtZero","max","createChartDataFromShareholders","shareholders","labels","datasets","backgroundColor","colors","map","sh","name","ownershipPercent","type","originalType","PreferredEquityCapTable","_ref2","_warrantDetails$","calculations","_jsxs","className","calc","hasExercisedWarrants","hasPendingWarrants","exercisedWarrantShares","warrantDetails","postCapTable","postSeriesACapTable","postSeriesAShareholders","totalPostSharesAfterWarrants","totalSharesAfterWarrants","totalFounderShares","filter","reduce","sum","shares","totalOptionShares","totalSeedInvestorShares","totalSeriesAShares","totalWarrantShares","founderOwnership","optionPoolOwnership","seedInvestorOwnership","seriesAOwnership","warrantOwnership","sharePrice","preMoneyShares","seriesAShares","preMoneyValuation","roundType","hasConversions","investmentSize","founderShares","existingEmployeeShares","postMoneyValuation","convertibleNoteShares","hasWarrants","warrant","idx","investor_name","status","coverage_percentage","coveragePercent","exercise_price","calculatedExercisePrice","warrant_shares","potentialShares","adjustment","warrantShares","convertibleNoteValue","conversionMOIC","conversionPrice","color","ownership","value","fullName","email","isWarrant","pendingShares","investmentAmount","exercisePrice","note","moic","colSpan","fontWeight","calculationType","safeInvestment","convertedShares","_Fragment","noteInvestment","principalPlusInterest","newOptionShares","totalSharesAfterPool","role","width","Wrapper","ModuleSideNav","TopBar","SectionWrapper","onClick","log","round_type","toLowerCase","shareClassType","instrumentType","isRoundZero","founderCount","totalSharesIssued","totalValue","firstName","lastName","href","phone","shareType","customShareType","shareClass","customShareClass","votingRights","fontSize","renderSeriesATableCommon","_capTableData$postSer","_capTableData$capTabl","_capTableData$capTabl2","_capTableData$roundIn","details","stringify","preSeriesAShareholders","existingOptionPoolPercent","optionPoolPercentPost","investorOwnershipPercent","totalSharesBeforeSeriesA","seedInvestorShares","totalSharesAfterSeriesA","totalShares","seriesAInvestorShares","additionalOptionPoolShares","existingOptionPoolShares","totalOptionPoolShares","isPostMoneyOptionPool","roundname","roundInfo","w","original_round","original_instrument","round_name","adjustment_percent","pendingWarrantShares","minWidth","newShares","existingShares","Math","source","renderSAFERoundTable","_warrantData$warrants","_warrantData$warrants2","warrantData","warrants","companyValue","valuationCap","discountRate","index","investorName","warrant_coverage_percentage","warrant_exercise_type","warrant_adjustment_percent","warrant_adjustment_direction","warrant_status","optionPoolPercent","roundZeroTotalShares","employeeShares","preSeedCapTable","postSeedCapTable","investorWarrants","investor_id","investorId","hasWarrant","rowClass","textClass","badgeClass","maxWidth","totalWarrants","safeInvestorCount","totalSharesPreSeed","totalSharesPostSeed","conversionInfo","conversionTrigger","renderConvertibleNoteRoundTable","_warrantData$warrants3","_warrantData$warrants4","_postTable$summary","_postTable$summary2","preTable","postTable","formatPercentages","interestRate","totalConfirmedInvestment","summary","totalInvestment","convertibleNotes","renderSeedRoundTable","isConvertibleNote","isConvertibleNoteRound","postInvestmentTotalShares","totalNoteInvestment","optionPoolShares","availableForInvestment","coveragePercentage","exerciseType","adjustmentPercent","adjustmentDirection","baseExercisePrice","adjustedExercisePrice","warrantValue","totalWarrantValue","preSeedShareholders","preSeedTotalShares","isGeneric","futureShares","futureValue","borderRadius","expirationDate","ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","defaultDatasetIdKey","reforwardRef","ref","current","setLabels","currentData","nextLabels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","nextDataset","currentDataset","find","dataset","push","Object","assign","cloneData","nextData","ChartComponent","props","redraw","fallbackContent","updateMode","canvasProps","canvasRef","useRef","chartRef","renderChart","Chart$1","destroyChart","destroy","chart","nextOptions","setOptions","config","setTimeout","update","React","Chart","forwardRef","createTypedChart","registerables","BarController","Pie","PieController"],"sourceRoot":""}