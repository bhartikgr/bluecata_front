"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[286],{30286:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(65043),n=t(82527),i=t(97899),o=t(73216),r=t(86213),l=t(35475),c=t(58786),d=t(23156),m=t(38626),p=t(68155),x=t(60184),u=t(53162),g=t(63015),h=t(34348),f=t.n(h),j=t(70579);const b=function(){(0,o.Zp)();const[e,s]=(0,a.useState)([]);(0,a.useEffect)((()=>{document.title="Broadcast Session List - Admin"}),[]);const[t,h]=(0,a.useState)(Intl.DateTimeFormat().resolvedOptions().timeZone),b="http://localhost:5000/api/admin/module/",[w,y]=(0,a.useState)(""),[v,C]=(0,a.useState)(""),S=e.filter((e=>Object.values(e).join(" ").toLowerCase().includes(w.toLowerCase()))),[N,k]=(0,a.useState)(""),[A,_]=(0,a.useState)(!1),[D,T]=(0,a.useState)(""),[z,H]=(0,a.useState)(!1),M=[{name:"Meeting Date",selector:e=>new Date(e.meeting_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})},{name:"Time",selector:e=>{if(!e.time)return"-";const[s,t]=e.time.split(":").map(Number),a=new Date;return a.setHours(s),a.setMinutes(t),a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},sortable:!0,className:"age"},{name:"Session Type",selector:e=>e.session,sortable:!0,className:"age"},{name:"TimeZone",selector:e=>e.timezone,sortable:!0,className:"age"},{name:"Status",cell:e=>{let s="",t="";switch(e.statusexp){case"upcoming":s="badge bg-info",t="Upcoming";break;case"ongoing":s="badge bg-success",t="Ongoing";break;case"expired":s="badge bg-danger",t="Expired";break;default:s="badge bg-secondary",t=e.statusexp}return(0,j.jsx)("span",{className:s,children:t})},sortable:!0,className:"age"},{name:"Action",cell:e=>(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,j.jsx)(l.N_,{className:"dataedit_btn fs-5",to:`/admin/setting/broadcast/editsession/${e.id}`,title:"Edit",children:(0,j.jsx)(x.uO9,{})}),(0,j.jsx)("button",{type:"button",onClick:()=>(async e=>{T(e),_(!0)})(e.id),className:" deleteedit_btn text-white border-0 fs-5",title:"Delete",children:(0,j.jsx)(x.RCe,{})})]})}),ignoreRowClick:!0,allowOverflow:!0,button:!0}];(0,a.useEffect)((()=>{O()}),[]);const O=async()=>{let e={user_id:""};try{const a=await r.A.post(b+"getboradCasteList",e,{headers:{Accept:"application/json","Content-Type":"application/json"}}),n=(a.data.results||[]).map((e=>Y(e,t)));s(n)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},Y=(e,s)=>{if(!e.meeting_date||!e.time)return{...e,status:"unknown"};const t=e.timezone,a=f().tz(`${e.meeting_date} ${e.time}`,"YYYY-MM-DD HH:mm",t).clone().tz(s),n=f().tz(s),i=a.clone().add(30,"minutes");let o="upcoming";return n.isAfter(i)?o="expired":n.isBetween(a,i)&&(o="ongoing"),{...e,statusexp:o,local_meeting_date:a.format("YYYY-MM-DD"),local_meeting_time:a.format("HH:mm")}},q=()=>{_(!1)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,j.jsx)(n.A,{}),(0,j.jsxs)("div",{className:"d-flex flex-column gap-0 w-100 dashboard_padding",children:[(0,j.jsx)(i.A,{}),(0,j.jsx)("section",{className:"dashboard_adminh",children:(0,j.jsx)("div",{className:"container-xl",children:(0,j.jsx)("div",{className:"row gy-4",children:(0,j.jsx)("div",{className:"col-12",children:(0,j.jsxs)("div",{className:"card p-4",children:[N&&(0,j.jsx)(u.A,{message:N,onClose:()=>k("")}),(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[(0,j.jsx)("h5",{className:"mb-0",children:"Broadcast Session"}),(0,j.jsxs)(l.N_,{to:"/admin/setting/broadcast/addsession",className:"admin_btn",children:["Add Session ",(0,j.jsx)(d.OiG,{})]})]}),(0,j.jsx)("div",{className:"d-flex justify-content-end align-items-end mb-3",children:(0,j.jsxs)("div",{class:"search-bar",children:[(0,j.jsx)("input",{type:"text",placeholder:"Search...",value:w,onChange:e=>y(e.target.value)}),(0,j.jsx)("span",{class:"search-icon",children:(0,j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,j.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z"})})})]})}),(0,j.jsx)(c.Ay,{columns:M,data:S,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0,customStyles:{table:{style:{minWidth:"100%",boxShadow:"0 10px 15px rgba(0, 0, 0, 0.2)",border:"1px solid #00000036",borderRadius:"12px",overflow:"hidden",display:"block"}},headRow:{style:{display:"grid",gridTemplateColumns:"minmax(150px, 1fr) minmax(150px, 1fr) minmax(200px, 1fr) minmax(120px, 1fr) 80px 150px",backgroundColor:"#2e5692",color:"#fff",fontWeight:"600",fontSize:"12px",textTransform:"uppercase",whiteSpace:"nowrap"}},headCells:{style:{padding:"8px",textAlign:"left"}},rows:{style:{display:"grid",gridTemplateColumns:"minmax(150px, 1fr) minmax(150px, 1fr) minmax(200px, 1fr) minmax(120px, 1fr) 80px 150px",fontSize:"14px","&:hover":{backgroundColor:"#e8f0fe"}},stripedStyle:{backgroundColor:"#f4f6f8"}},cells:{style:{whiteSpace:"normal",overflow:"hidden",textOverflow:"ellipsis",padding:"8px",display:"flex",alignItems:"center"}},pagination:{style:{backgroundColor:"#fafafa",padding:"12px 16px"}}},className:"custom-scrollbar custome-icon",noDataComponent:(0,j.jsx)("div",{className:"text-center py-2",children:(0,j.jsx)("span",{children:"No users found"})})})]})})})})})]})]})}),(0,j.jsxs)(m.A,{show:A,onHide:q,children:[(0,j.jsx)(m.A.Header,{closeButton:!0,children:(0,j.jsx)(m.A.Title,{children:"Confirm Deletion"})}),(0,j.jsx)(m.A.Body,{children:(0,j.jsx)("p",{children:"Are you sure you want to delete this record?"})}),(0,j.jsxs)(m.A.Footer,{children:[(0,j.jsx)(p.A,{variant:"secondary",onClick:q,children:"Cancel"}),(0,j.jsx)(p.A,{variant:"danger",onClick:async()=>{let e={id:D};try{(await r.A.post(b+"deleteSessionmeet",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;_(!1),O(),k("Session deleted successfully."),setTimeout((()=>{k("")}),1200)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},children:"Confirm Delete"})]})]}),z&&(0,j.jsx)(g.A,{onClose:()=>H(!1),codeid:v,returnrefresh:()=>{}})]})}}}]);
//# sourceMappingURL=286.b89aa347.chunk.js.map