/*! For license information please see 4041.1522565c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[4041],{2948:(e,s,a)=>{a.d(s,{I:()=>u});var t=a(5043),r=a(1462),o=a(6213),l=a(793),n=a(8908),c=a(4117),i=a(2862),d=a(579);const u=e=>{let{isOpen:s,onClose:a,children:u,LoginData:p}=e;const[m,g]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[j,f]=(0,t.useState)(null),[v,N]=(0,t.useState)(!1),[y,b]=(0,t.useState)(""),[k,_]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),[C,A]=(0,t.useState)(!1),[L,R]=(0,t.useState)(!1),[q,M]=(0,t.useState)(""),[I,E]=(0,t.useState)(""),[J,O]=(0,t.useState)(""),[F,G]=(0,t.useState)(""),[T,D]=(0,t.useState)(""),{t:B}=(0,c.Bd)(),U=(0,t.useRef)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),i.A.language!==e&&i.A.changeLanguage(e)}),[i.A,B]);if((0,t.useEffect)((()=>{s||(_(null),O(""),G(""),g(""),x(""),N(!1),b(""),U.current&&(U.current.value=""))}),[s]),!s)return null;const Y=e=>new Promise(((s,a)=>{const t=new FileReader;t.onload=t=>{const r=new Image;r.onload=()=>{const t=document.createElement("canvas");t.width=r.width,t.height=r.height;t.getContext("2d").drawImage(r,0,0),t.toBlob((t=>{if(t){const a=new File([t],e.name.replace(/\.\w+$/,".png"),{type:"image/png",lastModified:Date.now()});s(a)}else a(new Error("Canvas conversion failed"))}),"image/png",1)},r.onerror=a,r.src=t.target.result},t.onerror=a,t.readAsDataURL(e)})),$=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"];return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&(a(),_(null),O(""),G(""),g(""),x(""),N(!1),b(""),U.current&&(U.current.value=""))},children:[C&&(0,d.jsx)(l.A,{message:q}),L&&(0,d.jsx)(n.A,{message:I}),(0,d.jsxs)("div",{className:"popup-content col-lg-5 col-md-7",children:[(0,d.jsx)("button",{className:"close-button",onClick:a,children:"\xd7 "}),(0,d.jsxs)("div",{className:"cneventup  d-flex flex-column gap-4",children:[(0,d.jsx)("h3",{children:B("Create_new_group")}),(0,d.jsx)("form",{onSubmit:async e=>{e.preventDefault(),S(!0);try{const e=new FormData;e.append("name",m),e.append("description",h),e.append("image",k),e.append("user_id",p.id),e.append("fileType","groups"),e.append("makeImageUse",v);const s=await o.A.post("https://backend.amourette.no/api/groups/groupsave",e,{headers:{"Content-Type":"multipart/form-data"}});S(!1),A(!0),M(s.data.message),setTimeout((()=>{R(!1),A(!1),window.location.reload(),a()}),800),f(null),g(""),x(""),N(!1),_(null)}catch(s){S(!1),R(!0),setTimeout((()=>{R(!1),a()}),800),E("Error creating esssvent:",s)}},action:"javascript:void(0)",method:"post",children:(0,d.jsxs)("div",{className:"row gy-4",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"uploadfile rel bgload",children:[(0,d.jsx)("input",{ref:U,type:"file",required:!0,accept:"image/*,video/mp4,video/webm,video/ogg",name:"image",onChange:async e=>{const s=e.target.files[0];if(s){const e=s.type.startsWith("image/"),t=s.type.startsWith("video/");if(!e&&!t)return b("Please upload a valid image or video file."),void _(null);let r=s;if(e&&!["image/jpeg","image/png","image/gif"].includes(s.type))try{r=await Y(s)}catch(a){return b("Failed to convert image to PNG."),void _(null)}if(r.size>26214400)return b("File size must be less than 5 MB."),void _(null);b(""),_(r),O(e?"image":"video")}},className:"fileload"}),(0,d.jsxs)("div",{className:"upload_image",children:["image"===J&&k&&(0,d.jsx)("img",{className:"w-100 h-100",src:URL.createObjectURL(k),alt:"Selected Image"}),"video"===J&&k&&(0,d.jsxs)("video",{className:"w-100 h-100",controls:!0,children:[(0,d.jsx)("source",{src:F||URL.createObjectURL(k),type:"video/mp4"}),B("Your_browser_does")]})]}),(0,d.jsx)("div",{className:"inload",style:{height:"100px"},children:(0,d.jsxs)("div",{children:[(0,d.jsx)(r.Kh2,{style:{fontSize:"24px"}}),(0,d.jsxs)("h3",{style:{fontSize:"14px"},children:[B("UPLOADIMAGE_Video")," *"]})]})}),y&&(0,d.jsx)("p",{className:"text-danger",children:y})]})}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("input",{type:"text",placeholder:`${B("Group_name")} *`,name:"name",required:!0,value:m,onChange:e=>{const s=e.target.value;g(s);const a=$.some((e=>s.toLowerCase().includes(e.toLowerCase())));D(!!a)}})}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("textarea",{rows:"5",placeholder:`${B("Group_description")} *`,name:"description",value:h,onChange:e=>{const s=e.target.value;x(s);const a=$.some((e=>s.toLowerCase().includes(e.toLowerCase())));D(!!a)}})}),T&&(0,d.jsx)("span",{className:"text-danger",style:{fontSize:"14px"},children:B("Your_message_contain")}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("div",{className:"listbox",children:(0,d.jsxs)("label",{className:"cbox",children:[B("Make_private"),(0,d.jsx)("input",{type:"checkbox",checked:v,onChange:e=>N(e.target.checked),name:"makeImagePrivate"}),(0,d.jsx)("span",{className:"checkmark"})]})})}),(0,d.jsxs)("div",{className:"col-12",children:[w&&(0,d.jsx)("div",{className:"spinner-border text-success",role:"status",children:(0,d.jsxs)("span",{className:"visually-hidden",children:[B("Loading"),"..."]})}),(0,d.jsx)("button",{type:"submit",children:B("Create_new_group")})]})]})})]})]})]})})}},4041:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var t=a(5043),r=a(5475),o=a(5328),l=a(787),n=a(184),c=a(3625),i=a(5442),d=a(6571),u=a(423),p=a(2425),m=a(5700),g=a(2074),h=a(2948),x=a(6213),j=a(4117),f=a(2862),v=a(579);const N=function(){const[e,s]=(0,t.useState)("Invite");var a="https://backend.amourette.no/api/groups/";const[N,y]=(0,t.useState)(!0),[b,k]=(0,t.useState)([]),[_,w]=(0,t.useState)([]),[S,C]=(0,t.useState)(0),[A,L]=(0,t.useState)(""),[R,q]=(0,t.useState)([]),[M,I]=(0,t.useState)(""),[E,J]=(0,t.useState)([]),O=async e=>{const s=localStorage.getItem("userLogin"),t=JSON.parse(s);if(C(e),2===e){t.id;let e={user_id:t.id,orderBy:N};try{const s=await x.A.post(a+"getgroupdiscoveryour",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});q(s.data.results),console.log("Response data:",s.data.results)}catch(r){r.response?(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)):r.request?console.error("Request data:",r.request):console.error("Error message:",r.message)}}else U("DESC")},[F,G]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);if(console.log(s,"ggg"),!s)return void console.error("Received invalid JSON:",e.data);"grouprequest_acceptnotification"===s.event&&U(!0===N?"DESC":"ASC")}catch(s){console.error("Failed to parse WebSocket message:",s),console.error("Raw message:",e.data)}},()=>{e.close()}}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;L(s),B()}),[]),(0,t.useEffect)((()=>{2===S?T():(console.log(N),U(!0===N?"DESC":"ASC"))}),[N,M,S]);const T=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,orderBy:N};try{const e=await x.A.post(a+"getgroupdiscoveryour",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});q(e.data.results),console.log("Response data:",e.data.results)}catch(t){t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message)}};(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin");e&&JSON.parse(e);D()}),[]);const D=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await x.A.post("https://backend.amourette.no/api/members/getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));console.log(e),console.log("fg"),w(e)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},B=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,orderby:N};try{var t=(await x.A.post(a+"getYourgroupMostpopular",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(t),J(t)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},U=async e=>{const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,orderBy:e,search:M};try{var r=(await x.A.post(a+"getgroupSearch",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;q(r)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}};function Y(e){const s=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(s)}const{t:$}=(0,j.Bd)();(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),f.A.language!==e&&f.A.changeLanguage(e)}),[f.A,$]);const[P,z]=(0,t.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.A,{}),(0,v.jsx)("section",{className:"alleventsbox d-block gapy",children:(0,v.jsx)("div",{className:"container-lg",children:(0,v.jsxs)("div",{className:"row gy-4",children:[(0,v.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,v.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,v.jsx)("h2",{children:$("RightMenu_Groups")}),(0,v.jsx)("div",{className:"filtersearch",children:(0,v.jsx)("form",{action:"",children:(0,v.jsx)("input",{type:"text",value:M,onChange:async e=>{I(e.target.value);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let r={search:e.target.value,user_id:t.id};try{var o=(await x.A.post(a+"getgroupSearch",r,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;q(o)}catch(l){l.response||l.request}},placeholder:$("Search_Group")})})}),(0,v.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,v.jsxs)(r.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,v.jsx)(p.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,v.jsx)("div",{className:"flex-grow-1",children:(0,v.jsx)("h4",{children:$("Home")})})]}),(0,v.jsxs)(r.N_,{to:"/allgroup",className:"d-flex gap-2 align-items-center filterlist ",onClick:()=>O(0),children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("div",{className:"eventicon fulw",children:(0,v.jsx)("img",{src:c,alt:"eventicon"})})}),(0,v.jsx)("div",{className:"flex-grow-1",children:(0,v.jsx)("h3",{children:$("All_Groups")})})]}),(0,v.jsxs)(r.N_,{to:"/groups",className:"d-flex gap-2 align-items-center filterlist active",onClick:()=>O(1),children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("div",{className:"eventicon fulw",children:(0,v.jsx)("img",{src:i,alt:"eventicon"})})}),(0,v.jsx)("div",{className:"flex-grow-1",children:(0,v.jsx)("h3",{children:$("Your_Groups")})})]}),(0,v.jsxs)("button",{type:"button",className:"d-flex gap-2 align-items-center filterlist "+(3===S?"active":""),onClick:()=>{z(!0)},children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("div",{className:"eventicon fulw",children:(0,v.jsx)("img",{src:d,alt:"eventicon"})})}),(0,v.jsx)("div",{className:"flex-grow-1",children:(0,v.jsx)("h3",{children:$("GuestUser")})})]}),(0,v.jsx)("div",{className:"newebentbtn d-block",children:(0,v.jsx)("button",{type:"button",onClick:()=>{G(!0),document.body.style.overflowY="hidden"},children:$("Create_new_group")})}),(0,v.jsx)("hr",{className:"linehr"}),(0,v.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,v.jsx)("h6",{children:$("Most_popular_group")}),(0,v.jsx)("div",{className:"d-flex flex-column gap-2 groupmy grouplistleft scroll_bar",children:0===E.length?(0,v.jsx)("h4",{children:$("LeftMenu_Nogroupfounds")}):E.map(((e,s)=>(0,v.jsxs)(r.N_,{to:`/group/${e.slug}`,className:"d-flex gap-3 align-items-center listoficons",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsxs)("div",{className:"userpic ofit rounded-3 overflow-hidden",children:[(0,v.jsx)("img",{src:e.image,alt:e.name})," "]})}),(0,v.jsxs)("div",{className:"flex-grow-1",children:[(0,v.jsx)("h4",{children:e.name})," ",(0,v.jsx)("p",{children:e.description})," "]})]},s)))})]})]})]})}),(0,v.jsx)("div",{className:"col-md-9",children:(0,v.jsxs)("div",{className:"row gy-4",children:[(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsxs)("select",{className:"form-control sortfilter",onChange:e=>(async e=>{var s=e.target.value;const t=localStorage.getItem("userLogin"),r=t?JSON.parse(t):null;if("Most_popular"===s||"Member_count"===s){let e={search_by:s,user_id:r.id};try{const s=await x.A.post(a+"getYourgroupMostpopular",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});q(s.data.results)}catch(o){o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("Request data:",o.request):console.error("Error message:",o.message)}}else{let e={search_by:s,user_id:r.id};try{const s=await x.A.post(a+"getYourgroupFilter",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});q(s.data.results)}catch(o){o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("Request data:",o.request):console.error("Error message:",o.message)}}})(e),children:[(0,v.jsx)("option",{value:"",children:$("Sortby")}),(0,v.jsx)("option",{value:"Newest_first",children:$("NewestFirst")}),(0,v.jsx)("option",{value:"Most_popular",children:$("MostPopular")}),(0,v.jsx)("option",{value:"Member_count",children:$("MemberCount")}),(0,v.jsx)("option",{value:"Most_active",children:$("MostActive")}),(0,v.jsx)("option",{value:"Oldest_first",children:$("OldestFirst")}),(0,v.jsx)("option",{value:"Alphabetical",children:$("Alphabetical")})]})})}),0===R.length?(0,v.jsx)("div",{className:"col-12 text-center",children:(0,v.jsx)("h2",{children:$("LeftMenu_Nogroupfounds")})}):R.map(((e,s)=>{var a;return(0,v.jsx)("div",{className:"col-md-4",children:(0,v.jsxs)(r.N_,{to:`/group/${e.slug}`,className:"groupblck d-flex gap-2",children:[(0,v.jsx)("div",{className:"flex-grow-1 ps-3 py-2",children:(0,v.jsxs)("div",{className:"d-flex flex-column h-100 gap-1",children:[(0,v.jsx)("h2",{className:"breakline",children:e.name}),(0,v.jsx)("h3",{children:Y(e.date)}),(0,v.jsx)("ul",{className:"avimgsgroup",children:(null===e||void 0===e||null===(a=e.invited_users)||void 0===a?void 0:a.length)>0&&e.invited_users.filter((e=>null!==e.user_id)).map(((e,s)=>(0,v.jsx)("li",{children:(0,v.jsx)(r.N_,{to:`/friend/${e.user_id}`,children:(0,v.jsx)("img",{className:"w-100 h-100",src:e.user_image,alt:"Profile"})})},s)))}),(0,v.jsxs)("h4",{children:[e.total_members," ",$("LeftMenu_Members")]})]})}),(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("div",{className:"grpic shimg",children:(0,v.jsx)(g.A,{url:e.image})})})]})},s)}))]})})]})})}),P&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"d-flex flex-column gap-3 scroll_bar guest_invitepop",children:[(0,v.jsx)("h4",{children:$("Guest")}),(0,v.jsx)("button",{onClick:()=>{z(!1)},className:"guestClose",children:(0,v.jsx)(u.qpF,{})}),(0,v.jsx)(l.A,{id:"controlled-tab-example",activeKey:e,onSelect:e=>s(e),className:"mb-3 flex gap-3",children:(0,v.jsx)(o.A,{eventKey:"Invite",title:`Invite (${b.length||0})`,children:(0,v.jsx)("div",{className:"d-flex flex-column gap-4",children:(0,v.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,v.jsxs)("h5",{children:[$("Friends")," (",b.length,")"]}),(0,v.jsx)("ul",{className:"scroll_bar invite_people",children:0===b.length?(0,v.jsx)("li",{className:"d-flex flex-column gap-2",children:(0,v.jsx)("div",{className:"d-flex justify-content-between gap-3 align-items-center",children:$("No_result_found")})}):b.map(((e,s)=>(0,v.jsx)("li",{className:"d-flex flex-column gap-2",children:(0,v.jsxs)("div",{className:"d-flex justify-content-between gap-3 align-items-center",children:[(0,v.jsxs)("div",{className:"d-flex align-items-center gap-3 pt-2",children:[(0,v.jsx)("div",{className:"d-block main_profile",children:(0,v.jsx)("img",{src:e.creator_profile_image,alt:"image"})}),(0,v.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,v.jsx)("h6",{children:e.creator_username})})]}),(0,v.jsxs)(r.N_,{to:`/receivedchatmessage/${e.creator_slug}`,className:"send_messsage",children:[(0,v.jsx)(n.dnO,{}),(0,v.jsxs)("p",{children:[" ",$("Message")]})]})]})})))})]})})})})]})}),(0,v.jsx)(h.I,{isOpen:F,onClose:()=>{G(!1),document.body.style.overflowY="auto"},LoginData:A})]})}},3625:(e,s,a)=>{e.exports=a.p+"static/media/ev1.c139f534f6b2d0f4efe4.png"},5442:(e,s,a)=>{e.exports=a.p+"static/media/ev2.dbb5ba26d46537e3b09e.png"},6571:(e,s,a)=>{e.exports=a.p+"static/media/ev3.f6a69b811c047b8c1d3e.png"},2425:(e,s,a)=>{a.d(s,{A:()=>t});var t=(0,a(4648).A)("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]])}}]);
//# sourceMappingURL=4041.1522565c.chunk.js.map