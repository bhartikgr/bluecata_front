"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[2046],{9665:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var r=t(5043),a=t(5475),l=t(5700),n=t(4117),o=t(2862),i=t(6213),c=t(9853),d=t.n(c),u=t(2074),p=t(4295),m=t(4241),g=t(579);const h=function(){var e="https://backend.amourette.no/api/members/";const[s,c]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[x,j]=(0,r.useState)([]),[v,N]=(0,r.useState)([]),[y,_]=(0,r.useState)([]),[w,A]=(0,r.useState)(!1),[S,b]=(0,r.useState)(null);(0,r.useEffect)((()=>{console.log("Running useEffect: getAllfriendss");(async()=>{if(w)return;A(!0),b(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),b("User not logged in"),void A(!1);let r={user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getAllfriends",r,{headers:{Accept:"application/json","Content-Type":"application/json"}}),t=s.data.results.map((e=>e.id));f((e=>d()(e,t)?(console.log("No change in AllfriendId, skipping update"),e):(console.log("Updating AllfriendId:",t),t)))}catch(a){a.response?(console.error("Server responded with error:",a.response.data),b("Failed to fetch friends")):a.request?(console.error("No response received:",a.request),b("No response from server")):(console.error("Error setting up request:",a.message),b("An error occurred"))}finally{A(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{h.length>0&&(console.log("Fetching gallery for AllfriendId:",h),I())})()}),[h]);const I=async()=>{if(w)return;A(!0),b(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),A(!1),void b("User not logged in");let r={user_ids:[...h,t.id].join(", "),user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getlastestpost",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log(s.data.results);const t=s.data.results;c(t)}catch(a){a.response?(console.error("Server responded with error:",a.response.data),b("Failed to fetch posts")):a.request?(console.error("No response received:",a.request),b("No response from server")):(console.error("Error setting up request:",a.message),b("An error occurred"))}finally{A(!1)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{k()}),2e3);return()=>clearInterval(e)}),[h]);const k=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{var a=(await i.A.post(e+"getAllforumLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;j(a.results)}catch(l){console.error(l)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{q()}),2e3);return()=>clearInterval(e)}),[h]);const q=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{const s=await i.A.post(e+"getAllgrouplatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});N(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{E()}),1500);return()=>clearInterval(e)}),[h]);const E=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let r={user_ids:[...h,t.id],user_id:t.id,search:""};try{const s=await i.A.post(e+"getAlleventsLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});_(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}},$=e=>{if(!e)return null;const s=e.replace(/Z$/,""),t=m.c9.fromISO(s,{zone:"Europe/Oslo"});if(!t.isValid)return console.error("Invalid Oslo Time:",t.invalidExplanation),"Invalid Date";const r=t.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),a=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(t);const l=m.c9.now().setZone(a),n=r.toFormat("HH:mm"),o=l.diff(r,"minutes").minutes,i=l.diff(r,"hours").hours,c=l.diff(r,"days").days,d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return o<60||i<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:u<12?`${u}m ${n}`:`${p}y ${n}`},C=e=>{if(!e)return null;const s=new Date(e),t={timeZone:"Europe/Oslo"};return`${s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",...t}).replace(/\//g,"-")} ${s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,...t})}`},{t:L}=(0,n.Bd)();(0,r.useEffect)((()=>{const e=localStorage.getItem("language")||"en";o.A.language!==e&&o.A.changeLanguage(e)}),[o.A,L]);const[D,O]=(0,r.useState)(!1),[T,R]=(0,r.useState)(""),[F,G]=(0,r.useState)(""),[U,J]=(0,r.useState)([]),[M,Z]=(0,r.useState)(""),[V,Y]=(0,r.useState)(""),[P,B]=(0,r.useState)(""),[H,z]=(0,r.useState)("");var K="https://backend.amourette.no/api/members/";(0,r.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;B(s),Q()}),[]);const Q=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await i.A.post(K+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];G(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},W=async e=>{Z(e),ee(e),X(e);let s={id:e,user_id:P.id};try{const e=await i.A.post(K+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];O(!0),document.body.style.overflowY="hidden",R(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},X=async e=>{let s={id:e,user_id:P.id};try{const e=await i.A.post(K+"getGalleryDetailnextprevious",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&z(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&Y(e.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},ee=async s=>{let t={id:s,user_id:P.id};try{var r=(await i.A.post(e+"getGalleryComments",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;J(r)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"news_main",children:[(0,g.jsx)(l.A,{}),(0,g.jsx)("section",{className:"latest d-block py-5",children:(0,g.jsx)("div",{className:"container-lg",children:(0,g.jsxs)("div",{className:"row gy-4",children:[(0,g.jsx)("div",{className:"col-12",children:(0,g.jsx)("h1",{children:L("Latestnew")})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsx)("h3",{className:" overflow-hidden  rounded-3",children:L("ACTIVITYLOG")}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  rounded-3 ",children:0===s.length?(0,g.jsx)("h2",{}):s.map(((e,s)=>{const r=$(e.date);return(0,g.jsxs)("div",{className:"postblock d-flex flex-column rounded-3 overflow-hidden",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center  px-3 py-1",children:[(0,g.jsx)("div",{className:"flex-grow-1",children:(0,g.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)(a.N_,{to:`/friend/${e.user_id}`,target:"_blank",className:"d-flex gap-2 align-items-center",children:(0,g.jsx)("div",{class:"flex-shrink-0",children:(0,g.jsx)("div",{class:"urpic ofit rounded-circle overflow-hidden",children:1===e.makeImagePrivate?(0,g.jsx)("img",{className:"w-100 h-100",src:t(7123),alt:"userpic"}):(0,g.jsx)(u.A,{url:e.uimage})})})})}),(0,g.jsxs)("div",{className:"flex-grow-1",children:[(0,g.jsx)(a.N_,{to:`/friend/${e.user_id}`,target:"_blank",className:"d-flex gap-2 align-items-center",children:(0,g.jsx)("h4",{children:e.username})}),(0,g.jsx)("h5",{children:r})]})]})}),(0,g.jsx)("div",{className:"flex-shrink-0"})]}),(0,g.jsx)(a.N_,{onClick:()=>W(e.id),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100"})})]},s)}))})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3 overflow-hidden",children:[(0,g.jsx)("h3",{className:"",children:L("UpcomingEvent")}),(0,g.jsx)(a.N_,{to:"/allevents",className:"view_all   rounded-3",children:L("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===y.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:L("No_result_found")})}):y.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/singleevent/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100 object-fit-cover"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:C(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:L("ForumPosts")}),(0,g.jsx)(a.N_,{to:"/allforums",className:"view_all   rounded-3",children:L("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===x.length?(0,g.jsx)("h5",{children:L("No_result_found")}):x.map(((e,s)=>{$(e.date);return(0,g.jsxs)(a.N_,{to:`/singleforums/${e.slug}`,className:"d-flex align-items-start gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:e.image?(0,g.jsx)(u.A,{url:e.image}):(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:t(7123),alt:"userpic"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:C(e.date)}),(0,g.jsx)("h5",{children:e.description})]})]})}))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:L("RightMenu_Groups")}),(0,g.jsx)(a.N_,{to:"/allgroup",className:"view_all  rounded-3",children:L("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===v.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:L("LeftMenu_Nogroupfounds")})}):v.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/group/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100 object-fit-cover"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:C(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]})]})})]})})})]}),(0,g.jsx)(p.d,{isOpen1:D,onClose1:()=>{O(!1),document.body.style.overflowY="auto"},seperateGallerydetail:T,UserDetail:F,LoginData:P,getUserfav:async()=>{W(M)},GalleryCommets:U,getCommentPost:async()=>{W(M)},GalleryIdDetailGet:M,previousId:H,nextId:V,getgallerydetialnext:()=>{W(V)},getgallerydetialprev:()=>{W(H)}})]})}}}]);
//# sourceMappingURL=2046.6deb89db.chunk.js.map