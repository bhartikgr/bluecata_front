"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[1298],{81298:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(65043),n=t(94060),i=t(44710),c=(t(38421),t(53579)),l=t(73216),r=t(86213),d=t(70579);function m(){(0,l.Zp)();const e=localStorage.getItem("SignatoryLoginData"),s=JSON.parse(e);document.title="Investor Portal";const[t,m]=(0,a.useState)([]),[o,h]=(0,a.useState)(!1),[x,j]=(0,a.useState)("overview"),[u,v]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[N,f]=(0,a.useState)({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}}),g="http://localhost:5000/api/user/investor/";(0,a.useEffect)((()=>{y()}),[]);const y=async()=>{let e={id:""};try{var s=(await r.A.post("http://localhost:5000/api/user/capitalround/getallcountrySymbolList",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;m(s)}catch(t){}};(0,a.useEffect)((()=>{I()}),[]);const I=async()=>{v(!0),b(null);const e={company_id:s.companies[0].id};try{const s=await r.A.post(g+"fetchInvestorData",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});s.data&&s.data.results?(console.log(s.data),f({investments:s.data.results,stats:s.data.stats||{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}})):(b("No investment data found"),f({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}}))}catch(t){console.error("Error fetching investor data:",t),b("Failed to fetch investor data"),f({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}})}finally{v(!1)}},w=async(e,t)=>{try{(await r.A.post(g+"updateInvestmentStatus",{request_id:e,status:t,updated_by_id:s.id},{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.message&&(I(),alert(`Investment ${"Yes"===t?"approved":"Rejected"===t?"rejected":"marked as pending"} successfully`))}catch(p){console.error("Error updating investment status:",p),alert("Failed to update investment status")}},S=e=>{const s={Yes:{class:"badge bg-success",text:"Confirmed",icon:"\u2713"},No:{class:"badge bg-warning text-dark",text:"Pending",icon:"\u23f3"},Rejected:{class:"badge bg-danger",text:"Rejected",icon:"\u2717"}},t=s[e]||s.No;return(0,d.jsxs)("span",{className:t.class,children:[t.icon," ",t.text]})},F=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!e||isNaN(parseFloat(e)))return"$0.00";const a=parseFloat(e);let n=s;s&&(n=s.replace(/[\$\u20ac\xa3\xa5\u20b9\u20bd]/g,"").replace(/\s+/g,"").trim().toUpperCase());const i=t.find((e=>e.currency_code===n||e.currency_code===s||e.currency_symbol===s));if(i)try{return new Intl.NumberFormat("en-US",{style:"currency",currency:i.currency_code,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(p){return`${i.currency_symbol}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}if(/^[A-Z]{3}$/.test(n))try{return new Intl.NumberFormat("en-US",{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(p){console.warn(`Currency formatting error for ${s}:`,p)}return`$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};N.investments.filter((e=>"Yes"===e.request_confirm));return(0,d.jsx)(c.mO,{children:(0,d.jsx)("div",{className:"fullpage d-block",children:(0,d.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,d.jsx)(i.A,{isCollapsed:o,setIsCollapsed:h}),(0,d.jsxs)("div",{className:"global_view "+(o?"global_view_col":""),children:[(0,d.jsx)(n.A,{}),(0,d.jsx)(c.$K,{className:"d-block p-md-4 p-3",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsxs)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-1",children:"Investor Portal"}),(0,d.jsxs)("p",{className:"text-muted mb-0",children:["Company:"," ",s.companies&&s.companies[0]?s.companies[0].name:"N/A"]})]}),(0,d.jsxs)("div",{className:"text-end",children:[(0,d.jsx)("small",{className:"text-muted",children:"Total Investments"}),(0,d.jsx)("h4",{className:"text-success mb-0",children:F(N.stats.totalInvestment)})]})]}),(0,d.jsxs)("div",{className:"row g-3 mb-4",children:[(0,d.jsx)("div",{className:"col-md-3 col-6",children:(0,d.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)("div",{className:"rounded-circle bg-primary bg-opacity-10 p-3 me-3",children:(0,d.jsx)("i",{className:"fas fa-chart-line text-primary"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Confirmed"}),(0,d.jsx)("h4",{className:"card-title mb-0",children:N.stats.confirmedInvestments})]})]})})})}),(0,d.jsx)("div",{className:"col-md-3 col-6",children:(0,d.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)("div",{className:"rounded-circle bg-success bg-opacity-10 p-3 me-3",children:(0,d.jsx)("i",{className:"fas fa-dollar-sign text-success"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Amount"}),(0,d.jsx)("h4",{className:"card-title mb-0",children:F(N.stats.totalInvestment)})]})]})})})}),(0,d.jsx)("div",{className:"col-md-3 col-6",children:(0,d.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)("div",{className:"rounded-circle bg-info bg-opacity-10 p-3 me-3",children:(0,d.jsx)("i",{className:"fas fa-share-alt text-info"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Issue Shares"}),(0,d.jsx)("h4",{className:"card-title mb-0",children:N.stats.totalShares.toLocaleString()})]})]})})})}),(0,d.jsx)("div",{className:"col-md-3 col-6",children:(0,d.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)("div",{className:"rounded-circle bg-warning bg-opacity-10 p-3 me-3",children:(0,d.jsx)("i",{className:"fas fa-clock text-warning"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Pending"}),(0,d.jsx)("h4",{className:"card-title mb-0",children:N.stats.pendingRequests})]})]})})})})]}),(0,d.jsxs)("div",{className:"card shadow-sm",children:[(0,d.jsxs)("div",{className:"card-header bg-white d-flex justify-content-between align-items-center",children:[(0,d.jsxs)("h5",{className:"mb-0",children:[(0,d.jsx)("i",{className:"fas fa-users me-2"}),"Investment Requests"]}),(0,d.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:I,disabled:u,children:[(0,d.jsx)("i",{className:"fas fa-sync-alt me-1"}),u?"Loading...":"Refresh"]})]}),(0,d.jsx)("div",{className:"card-body",children:u?(0,d.jsxs)("div",{className:"text-center py-5",children:[(0,d.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,d.jsx)("p",{className:"mt-3 text-muted",children:"Loading investment data..."})]}):p?(0,d.jsxs)("div",{className:"alert alert-warning text-center",children:[(0,d.jsx)("i",{className:"fas fa-exclamation-triangle fa-2x mb-3"}),(0,d.jsx)("h6",{children:"Error Loading Data"}),(0,d.jsx)("p",{children:p}),(0,d.jsx)("button",{className:"btn btn-sm btn-primary",onClick:I,children:"Try Again"})]}):0===N.investments.length?(0,d.jsxs)("div",{className:"text-center py-5",children:[(0,d.jsx)("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),(0,d.jsx)("h6",{children:"No Investment Requests Found"}),(0,d.jsx)("p",{className:"text-muted",children:"There are no investment requests for this company yet."})]}):(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table table-hover",children:[(0,d.jsx)("thead",{className:"table-light",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Investor Details"}),(0,d.jsx)("th",{children:"Round/Company"}),(0,d.jsx)("th",{children:"Investment"}),(0,d.jsx)("th",{children:"Ownership"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:N.investments.map((e=>{return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"fw-semibold",children:e.investor_name}),(0,d.jsx)("div",{className:"text-muted small",children:e.investor_email}),(0,d.jsx)("div",{className:"text-muted small",children:e.investor_phone})]})}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"fw-semibold",children:e.nameOfRound}),(0,d.jsx)("div",{className:"text-muted small",children:e.company_name}),(0,d.jsx)("div",{className:"text-muted small",children:e.shareClassType})]})}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"fw-semibold",children:F(e.investment_amount,e.currency)}),(0,d.jsxs)("div",{className:"text-muted small",children:[parseFloat(e.shares).toLocaleString()," ","shares"]}),(0,d.jsx)("div",{className:"text-muted small",children:e.instrumentType})]})}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"fw-semibold",children:[(s=e.shares,t=e.issuedshares,s&&t?(parseFloat(s)/parseFloat(t)*100).toFixed(2):"0"),"%"]}),(0,d.jsxs)("div",{className:"text-muted small",children:["of"," ",parseFloat(e.issuedshares).toLocaleString()]})]})}),(0,d.jsx)("td",{children:S(e.request_confirm)}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"btn-group",role:"group",children:["No"===e.request_confirm&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>w(e.id,"Yes"),title:"Approve",children:(0,d.jsx)("i",{className:"fas fa-check"})}),(0,d.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>w(e.id,"Rejected"),title:"Reject",children:(0,d.jsx)("i",{className:"fas fa-times"})})]}),(0,d.jsx)("button",{className:"btn btn-sm btn-outline-info",onClick:()=>{},title:"View Details",children:(0,d.jsx)("i",{className:"fas fa-eye"})})]})})]},e.id);var s,t}))})]})})})]})]})})]})]})})})}}}]);
//# sourceMappingURL=1298.48c71f31.chunk.js.map