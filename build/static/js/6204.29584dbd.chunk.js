"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[6204],{6204:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(5043),n=s(8786),o=s(3910),r=s(6213),i=s(6178),l=s.n(i),c=s(7929),d=s(3216),p=s(5475),u=s(4635),m=s(1003),x=s(6305),g=s(6836),f=(s(6115),s(5166)),y=(s(2806),s(579));const h=function(){const{slug:e}=(0,d.g)(),[t,i]=(0,a.useState)([]),h="https://backend.amourette.no/api/admin/",j=(0,d.Zp)(),[b,v]=(0,a.useState)(""),[S,w]=(0,a.useState)(!1),[A,N]=(0,a.useState)(!1),[C,D]=(0,a.useState)(""),[q,k]=(0,a.useState)(""),[Y,R]=(0,a.useState)(""),[I,T]=(0,a.useState)(""),[_,M]=(0,a.useState)(""),[z,E]=(0,a.useState)("");(0,a.useEffect)((()=>{const e=localStorage.getItem("adminLogin"),t=JSON.parse(e);console.log(t),null===t&&j("/admin/login")}),[]),(0,a.useEffect)((()=>{P()}),[]);const P=async()=>{let t={slug:e};try{var s=(await r.A.post(h+"getuserdetail",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;void 0===s&&j("/admin/users"),E(s)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},[F,O]=(0,a.useState)([]),[W,L]=(0,a.useState)(!1),[B,V]=(0,a.useState)({}),H=[{name:"Pay ID",selector:e=>e.payment_id,sortable:!0},{name:"User",selector:e=>e.username,sortable:!0},{name:"Plan",selector:e=>e.plan,sortable:!0},{name:"Amount",selector:e=>{const t=parseFloat(e.amount);return isNaN(t)?"0.00":t.toFixed(2)},sortable:!0},{name:"Date",selector:e=>l()(e.date).format("DD-MM-YYYY")},{name:"Action",cell:e=>(0,y.jsxs)("div",{className:"d-flex align-items-center gap-3",children:["Free"!==e.plan&&(0,y.jsx)("a",{className:"dataedit_btn",onClick:()=>J(e),style:{fontSize:"16px"},title:"Payment Disputes",children:(0,y.jsx)(o.g,{icon:c.DN2})}),"Free"!==e.plan&&(0,y.jsx)("a",{className:"dataedit_btn",style:{fontSize:"16px"},title:"Invoice View",onClick:()=>U(e),children:(0,y.jsx)(o.g,{icon:c.p4e})}),"Free"!==e.plan&&"Succeeded"!==e.refund&&(0,y.jsx)("a",{className:"dataedit_btn",style:{fontSize:"16px"},title:"Refund",onClick:()=>$(e),children:(0,y.jsx)(o.g,{icon:c.U23})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],U=async e=>{let t={id:e.id};try{var s=(await r.A.post(h+"getinvoieData",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;console.log(s),T(s)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}};(0,a.useEffect)((()=>{s(2806),Y.amount,l()(Y.PaymentrefundDispute_date).format("MMM D, YYYY"),Y.amount,Y.amount,l()(Y.PaymentrefundDispute_date).format("MMM D, YYYY"),Y.amount,Y.amount,s(2806),Y.amount,l()(Y.start_date).format("MMM D, YYYY"),Y.amount,Y.amount;console.log(_)}),[Y,_]),(0,a.useEffect)((()=>{const e=(0,y.jsxs)("div",{style:{width:"100%",margin:"50px auto",backgroundColor:"#ffffff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[(0,y.jsx)("table",{style:{width:"100%",textAlign:"center",padding:"20px"},children:(0,y.jsxs)("tbody",{children:[(0,y.jsx)("tr",{children:(0,y.jsx)("td",{children:(0,y.jsx)("img",{src:s(2806),alt:"Logo",style:{maxWidth:"350px",height:"auto",objectFit:"contain"}})})}),(0,y.jsx)("tr",{children:(0,y.jsx)("td",{style:{fontSize:"20px",color:"rgb(17, 16, 16)",textTransform:"capitalize",borderBottom:"2px solid #eee",paddingBottom:"10px"},children:"Receipt from Amourette"})})]})}),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:"20px"},children:[(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,y.jsx)("span",{style:{fontSize:"20px",color:"rgb(95, 91, 91)",fontWeight:"bold"},children:"Amount Paid"}),(0,y.jsxs)("span",{style:{fontSize:"18px",color:"rgb(95, 91, 91)"},children:[I.amount,"kr"]})]}),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,y.jsx)("span",{style:{fontSize:"20px",color:"rgb(95, 91, 91)",fontWeight:"bold"},children:"Date Paid"}),(0,y.jsx)("span",{style:{fontSize:"18px",color:"rgb(95, 91, 91)"},children:l()(I.start_date).format("MMM D, YYYY")})]})]}),(0,y.jsxs)("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px 20px",backgroundColor:"#fff",borderRadius:"8px"},children:[(0,y.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"rgb(95, 91, 91)"},children:"Payment To Amourette"}),(0,y.jsxs)("div",{style:{fontSize:"18px",color:"rgb(95, 91, 91)"},children:[I.amount,"kr"]})]}),(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"10px",padding:"15px 20px",backgroundColor:"#fff",borderRadius:"8px"},children:[(0,y.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"rgb(95, 91, 91)"},children:"Amount charged"}),(0,y.jsxs)("div",{style:{fontSize:"18px",color:"rgb(95, 91, 91)"},children:[I.amount,"kr"]})]})]})]});setTimeout((()=>{""!==I&&(0,f.A)(e)}),500)}),[I]);const $=async e=>{const t=e.unique_code;let s={paymentIntentId:t};try{const a=await r.A.post(h+"paymentrefund",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log(a.data);a.data.result;console.log(a.data),Z(),G(t),!0===a.data.success&&(Z(),D("Payment refunded successfully!"),w(!0),N(!1),setTimeout((()=>{(async e=>{let t={id:e.id};M(e.email);try{var s=(await r.A.post(h+"getinvoieData",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;R(s)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}})(e),D(""),w(!1)}),3500)),!1===a.data.success&&(Z(),k(a.data.error),w(!1),N(!0),setTimeout((()=>{k(""),N(!1)}),3500))}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},G=async e=>{let t={paymentIntentId:e};try{await r.A.post(h+"sendmailuserrefund",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},J=async e=>{let t={paymentIntentId:e.unique_code};try{const e=await r.A.post(h+"paymentdispute",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});e.data.result;Z(),!0===e.data.success&&(D("Payment Disputed successfully!"),w(!0),N(!1),setTimeout((()=>{Z(),D(""),w(!1)}),3500)),!1===e.data.success&&(k(e.data.error),w(!1),N(!0),setTimeout((()=>{k(""),N(!1)}),3500)),Z()}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}};(0,a.useEffect)((()=>{Z()}),[z]);const Z=async()=>{let e={user_id:z.id};try{var t=(await r.A.post(h+"getallpayment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;O(t)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},[K,Q]=(0,a.useState)(""),X=F.filter((e=>Object.values(e).join(" ").toLowerCase().includes(K.toLowerCase()))),[ee,te]=(0,a.useState)(!1);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{class:"position-relative bg-white d-flex p-0",children:[(0,y.jsx)(u.A,{isOpen:ee}),(0,y.jsxs)("div",{className:"content "+(ee?"open":""),children:[(0,y.jsx)(m.A,{onClick:()=>{te(!ee)}}),S&&(0,y.jsx)(x.A,{message:C}),A&&(0,y.jsx)(g.A,{message:q}),(0,y.jsx)("div",{className:"container-fluid pt-4 px-4",children:(0,y.jsx)("div",{className:"row g-4",children:(0,y.jsx)("div",{className:"col-12",children:(0,y.jsxs)("div",{className:"bg-light rounded h-100 p-4",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsxs)(p.N_,{to:"/admin/users",style:{display:"flex",alignItems:"center",textDecoration:"none"},className:"mb-4",children:[(0,y.jsx)(o.g,{icon:c.CeG,style:{marginRight:"8px"}})," ","Back"]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,y.jsxs)(p.N_,{to:`/admin/paymentrefund/${e}`,target:"_blank",className:"btn btn-primary mb-4",title:"View Refund",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:[(0,y.jsx)(o.g,{icon:c.pS3,style:{marginRight:"8px"}})," ","Refund"]}),(0,y.jsxs)(p.N_,{to:`/admin/paymentdispute/${e}`,target:"_blank",title:"View Dispute",className:"btn btn-primary mb-4",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:[(0,y.jsx)(o.g,{icon:c.pS3,style:{marginRight:"8px"}})," ","Dispute"]})]})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsx)("div",{className:"d-flex justify-content-between",children:(0,y.jsxs)("h6",{className:"mb-4",children:["Payment History (",z.username,")"]})}),(0,y.jsx)("div",{className:"mb-3",children:(0,y.jsx)("input",{type:"text",className:"form-control",placeholder:"Search...",value:K,onChange:e=>Q(e.target.value)})})]}),(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsx)(n.Ay,{columns:H,data:X,pagination:!0,highlightOnHover:!0,noDataComponent:"No records found."})})]})})})})]})]})})}}}]);
//# sourceMappingURL=6204.29584dbd.chunk.js.map