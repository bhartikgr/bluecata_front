"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[7954],{77954:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(65043),n=t(94060),r=t(44710),c=(t(38421),t(70579));const l=e=>{let{show:s,onClose:t,roundData:a,investors:n,countrySymbolList:r,onUpdateStatus:l}=e;if(!s)return null;const i=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!e||isNaN(parseFloat(e)))return"$0.00";const t=parseFloat(e);let a=s;s&&(a=s.replace(/[\$\u20ac\xa3\xa5\u20b9\u20bd]/g,"").replace(/\s+/g,"").trim().toUpperCase());const n=null===r||void 0===r?void 0:r.find((e=>e.currency_code===a||e.currency_code===s||e.currency_symbol===s));if(n)try{return new Intl.NumberFormat("en-US",{style:"currency",currency:n.currency_code,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}catch(c){return`${n.currency_symbol}${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}if(/^[A-Z]{3}$/.test(a))try{return new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}catch(c){console.warn(`Currency formatting error for ${s}:`,c)}return`$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`},d=e=>e.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}),o=(null===a||void 0===a?void 0:a.name)||"Round",m=parseFloat((null===a||void 0===a?void 0:a.roundSize)||0),h=parseFloat((null===a||void 0===a?void 0:a.issuedShares)||0),x=(null===a||void 0===a?void 0:a.currency)||"USD",u=parseFloat((null===a||void 0===a?void 0:a.pricePerShare)||0),j=(null===n||void 0===n?void 0:n.filter((e=>"Yes"===e.request_confirm)))||[],v=(null===n||void 0===n?void 0:n.filter((e=>"No"===e.request_confirm)))||[],p=(null===n||void 0===n?void 0:n.filter((e=>"Rejected"===e.request_confirm)))||[],N=(null===n||void 0===n?void 0:n.reduce(((e,s)=>e+parseFloat(s.investment_amount||0)),0))||0,b=j.reduce(((e,s)=>e+parseFloat(s.investment_amount||0)),0),f=(null===n||void 0===n?void 0:n.reduce(((e,s)=>e+parseFloat(s.shares||0)),0))||0,g=e=>{const s={Yes:{class:"badge bg-success",text:"Confirmed"},No:{class:"badge bg-warning text-dark",text:"Pending"},Rejected:{class:"badge bg-danger",text:"Rejected"}},t=s[e]||s.No;return(0,c.jsx)("span",{className:t.class,children:t.text})},y=e=>e&&h&&0!==h?(parseFloat(e)/parseFloat(h)*100).toFixed(2):"0.00",I=e=>e&&u&&0!==u?parseFloat(e)/u:0;return(0,c.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",role:"dialog",children:(0,c.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,c.jsxs)("h5",{className:"modal-title",children:[(0,c.jsx)("i",{className:"fas fa-users me-2"}),o," - Investors Details"]}),(0,c.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:t,"aria-label":"Close"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"row mb-4",children:[(0,c.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,c.jsx)("div",{className:"card border-0 bg-light h-100",children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsx)("h6",{className:"text-muted mb-2",children:"Round Target"}),(0,c.jsx)("h4",{className:"text-primary mb-1",children:i(m,x)}),(0,c.jsx)("small",{className:"text-muted",children:"Total to raise"})]})})}),(0,c.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,c.jsx)("div",{className:"card border-0 bg-light h-100",children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsx)("h6",{className:"text-muted mb-2",children:"Total Raised"}),(0,c.jsx)("h4",{className:"text-success mb-1",children:i(b,x)}),(0,c.jsxs)("small",{className:"text-muted",children:[m>0?Math.round(b/m*100):0,"% of target"]})]})})}),(0,c.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,c.jsx)("div",{className:"card border-0 bg-light h-100",children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsx)("h6",{className:"text-muted mb-2",children:"Issued Shares"}),(0,c.jsx)("h4",{className:"text-info mb-1",children:Math.round(h).toLocaleString()}),(0,c.jsx)("small",{className:"text-muted",children:"Total in round"})]})})}),(0,c.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,c.jsx)("div",{className:"card border-0 bg-light h-100",children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsx)("h6",{className:"text-muted mb-2",children:"Price/Share"}),(0,c.jsx)("h4",{className:"text-warning mb-1",children:i(u,x)}),(0,c.jsx)("small",{className:"text-muted",children:d(u)})]})})})]}),(0,c.jsx)("div",{className:"alert alert-info mb-4",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-3",children:[(0,c.jsx)("strong",{children:"Total Investors:"})," ",(null===n||void 0===n?void 0:n.length)||0]}),(0,c.jsxs)("div",{className:"col-md-3",children:[(0,c.jsx)("strong",{children:"Confirmed:"})," ",j.length]}),(0,c.jsxs)("div",{className:"col-md-3",children:[(0,c.jsx)("strong",{children:"Pending:"})," ",v.length]}),(0,c.jsxs)("div",{className:"col-md-3",children:[(0,c.jsx)("strong",{children:"Rejected:"})," ",p.length]})]})}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-hover table-sm",children:[(0,c.jsx)("thead",{className:"table-dark",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Investor"}),(0,c.jsx)("th",{className:"text-end",children:"Investment"}),(0,c.jsx)("th",{className:"text-end",children:"Shares"}),(0,c.jsx)("th",{className:"text-end",children:"Ownership %"}),(0,c.jsx)("th",{className:"text-center",children:"Status"}),(0,c.jsx)("th",{children:"Contact"}),(0,c.jsx)("th",{className:"text-center",children:"Actions"})]})}),(0,c.jsx)("tbody",{children:n&&0!==n.length?n.map((e=>{const s=parseFloat(e.investment_amount||0);let t=parseFloat(e.shares||0);0===t&&u>0&&s>0&&(t=I(s));const a=y(t);return(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[(0,c.jsx)("div",{className:"fw-semibold",children:e.name||e.investor_name||"Unnamed Investor"}),(0,c.jsxs)("div",{className:"text-muted small",children:["ID: ",e.investor_id]})]}),(0,c.jsx)("td",{className:"text-end",children:(0,c.jsx)("div",{className:"fw-semibold",children:i(s,e.currency||x)})}),(0,c.jsxs)("td",{className:"text-end",children:[(0,c.jsx)("div",{className:"fw-semibold",children:Math.round(t).toLocaleString()}),(0,c.jsxs)("div",{className:"text-muted small",children:[d(t)," exact"]})]}),(0,c.jsxs)("td",{className:"text-end",children:[(0,c.jsxs)("div",{className:"fw-semibold",children:[a,"%"]}),(0,c.jsx)("div",{className:"text-muted small",children:"of round"})]}),(0,c.jsx)("td",{className:"text-center",children:g(e.request_confirm)}),(0,c.jsxs)("td",{children:[(0,c.jsxs)("div",{className:"text-muted small",children:[(0,c.jsx)("i",{className:"fas fa-envelope me-1"}),e.email||e.investor_email||"N/A"]}),(0,c.jsxs)("div",{className:"text-muted small",children:[(0,c.jsx)("i",{className:"fas fa-phone me-1"}),e.phone||e.investor_phone||"N/A"]})]}),(0,c.jsxs)("td",{className:"text-center",children:["No"===e.request_confirm&&(0,c.jsxs)("div",{className:"btn-group btn-group-sm",role:"group",children:[(0,c.jsx)("button",{className:"btn btn-success",onClick:()=>l(e.id,"Yes"),title:"Approve Investment",children:(0,c.jsx)("i",{className:"fas fa-check"})}),(0,c.jsx)("button",{className:"btn btn-danger",onClick:()=>l(e.id,"Rejected"),title:"Reject Investment",children:(0,c.jsx)("i",{className:"fas fa-times"})})]}),"Yes"===e.request_confirm&&(0,c.jsxs)("span",{className:"text-success",children:[(0,c.jsx)("i",{className:"fas fa-check-circle"})," Approved"]}),"Rejected"===e.request_confirm&&(0,c.jsxs)("span",{className:"text-danger",children:[(0,c.jsx)("i",{className:"fas fa-ban"})," Rejected"]})]})]},e.id||e.investor_id)})):(0,c.jsx)("tr",{children:(0,c.jsxs)("td",{colSpan:"7",className:"text-center py-5",children:[(0,c.jsx)("i",{className:"fas fa-user-slash fa-3x text-muted mb-3"}),(0,c.jsx)("p",{className:"text-muted mb-0",children:"No investors found for this round"})]})})}),n&&n.length>0&&(0,c.jsxs)("tfoot",{className:"table-light",children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"fw-bold",children:"Total"}),(0,c.jsx)("td",{className:"text-end fw-bold",children:i(N,x)}),(0,c.jsx)("td",{className:"text-end fw-bold",children:Math.round(f).toLocaleString()}),(0,c.jsxs)("td",{className:"text-end fw-bold",children:[y(f),"%"]}),(0,c.jsx)("td",{colSpan:"3"})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"fw-bold text-success",children:"Confirmed Only"}),(0,c.jsx)("td",{className:"text-end fw-bold text-success",children:i(b,x)}),(0,c.jsx)("td",{className:"text-end fw-bold text-success",children:Math.round(j.reduce(((e,s)=>e+parseFloat(s.shares||0)),0)).toLocaleString()}),(0,c.jsxs)("td",{className:"text-end fw-bold text-success",children:[y(j.reduce(((e,s)=>e+parseFloat(s.shares||0)),0)),"%"]}),(0,c.jsx)("td",{colSpan:"3"})]})]})]})})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[(0,c.jsx)("i",{className:"fas fa-times me-1"})," Close"]}),(0,c.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(!n||0===n.length)return void alert("No data to export");const e=[];e.push(["Round Name","Investor ID","Investor Name","Email","Phone","Investment Amount","Currency","Shares","Ownership %","Status"]),n.forEach((s=>{const t=parseFloat(s.investment_amount||0);let a=parseFloat(s.shares||0);0===a&&u>0&&t>0&&(a=I(t));const n=y(a),r=[o,s.investor_id||"",s.name||s.investor_name||"",s.email||s.investor_email||"",s.phone||s.investor_phone||"",t,s.currency||x,a.toFixed(3),n,s.request_confirm||""];e.push(r)})),e.push([]),e.push(["Summary"]),e.push(["Round Target",m]),e.push(["Total Raised",b]),e.push(["Total Shares Issued",h]),e.push(["Price Per Share",u]),e.push(["Total Investors",n.length]),e.push(["Confirmed Investors",j.length]),e.push(["Pending Investors",v.length]);const s=e.map((e=>e.map((e=>`"${e}"`)).join(","))).join("\n"),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`${o.replace(/\s+/g,"_")}_investors_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)},children:[(0,c.jsx)("i",{className:"fas fa-download me-1"})," Export to CSV"]})]})]})})})};var i=t(53579),d=t(73216),o=t(86213),m=t(25581);function h(){(0,d.Zp)();const e=localStorage.getItem("SignatoryLoginData"),s=JSON.parse(e);document.title="Investor Portal";const[t,h]=(0,a.useState)([]),[x,u]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[p,N]=(0,a.useState)(null),[b,f]=(0,a.useState)({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}}),[g,y]=(0,a.useState)({}),[I,S]=(0,a.useState)(!1),[w,_]=(0,a.useState)(null),[F,C]=(0,a.useState)([]),R=m.J+"api/user/investor/",T=m.J+"api/user/capitalround/";(0,a.useEffect)((()=>{k()}),[]),(0,a.useEffect)((()=>{D()}),[]);const k=async()=>{let e={id:""};try{const s=await o.A.post(T+"getallcountrySymbolList",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});h(s.data.results||[])}catch(s){console.error("Error fetching currency list:",s)}},D=async()=>{v(!0),N(null);const e={company_id:s.companies[0].id};try{const s=await o.A.post(R+"fetchInvestorData",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data&&s.data.results){const e=(e=>{const s={};return e.forEach((e=>{const t=e.roundrecord_id;if(!t)return void console.warn("Investment without roundrecord_id:",e);const a=`round_${t}`;if(!s[a]){const n=parseFloat(e.roundsize||0),r=parseFloat(e.issuedshares||0);let c=0;n>0&&r>0&&(c=n/r),s[a]={id:t,name:e.nameOfRound||"Unnamed Round",company_name:e.company_name,shareClassType:e.shareClassType,instrumentType:e.instrumentType,currency:e.currency||"USD",roundSize:n,issuedShares:r,pricePerShare:c,investors:[],totalInvestment:0,confirmedInvestment:0,totalInvestors:0,confirmedInvestors:0,pendingInvestors:0,rejectedInvestors:0,totalSharesFromInvestors:0}}const n=parseFloat(e.investment_amount||0);let r=parseFloat(e.shares||0);0===r&&n>0&&s[a].pricePerShare>0&&(r=n/s[a].pricePerShare);const c={id:e.id,investor_id:e.investor_id,roundrecord_id:e.roundrecord_id,name:e.investor_name,email:e.investor_email,phone:e.investor_phone,investment_amount:n,shares:r,ownershipPercentage:e.ownershipPercentage||"0.00",request_confirm:e.request_confirm,instrumentType:e.instrumentType,currency:e.currency||"USD"};s[a].investors.push(c),s[a].totalInvestment+=n,s[a].totalInvestors++,s[a].totalSharesFromInvestors+=r,"Yes"===c.request_confirm?(s[a].confirmedInvestment+=n,s[a].confirmedInvestors++):"No"===c.request_confirm?s[a].pendingInvestors++:"Rejected"===c.request_confirm&&s[a].rejectedInvestors++})),s})(s.data.results);y(e),f({investments:s.data.results,stats:s.data.stats||{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}})}else N("No investment data found"),y({}),f({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}})}catch(t){console.error("Error fetching investor data:",t),N("Failed to fetch investor data"),y({}),f({investments:[],stats:{totalInvestment:0,activeInvestments:0,totalShares:0,pendingRequests:0,confirmedInvestments:0,rejectedInvestments:0}})}finally{v(!1)}},$=e=>{const s=g[e];s&&(_({id:s.id,name:s.name,company_name:s.company_name,shareClassType:s.shareClassType,instrumentType:s.instrumentType,currency:s.currency,roundSize:s.roundSize,pricePerShare:s.pricePerShare,issuedShares:s.issuedShares,totalInvestment:s.totalInvestment}),C(s.investors),S(!0))},U=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!e||isNaN(parseFloat(e)))return"$0.00";const a=parseFloat(e);let n=s;s&&(n=s.replace(/[\$\u20ac\xa3\xa5\u20b9\u20bd]/g,"").replace(/\s+/g,"").trim().toUpperCase());const r=t.find((e=>e.currency_code===n||e.currency_code===s||e.currency_symbol===s));if(r)try{return new Intl.NumberFormat("en-US",{style:"currency",currency:r.currency_code,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(p){return`${r.currency_symbol}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}if(/^[A-Z]{3}$/.test(n))try{return new Intl.NumberFormat("en-US",{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(p){console.warn(`Currency formatting error for ${s}:`,p)}return`$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};return(0,c.jsxs)(i.mO,{children:[(0,c.jsx)("div",{className:"fullpage d-block",children:(0,c.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,c.jsx)(r.A,{isCollapsed:x,setIsCollapsed:u}),(0,c.jsxs)("div",{className:"global_view "+(x?"global_view_col":""),children:[(0,c.jsx)(n.A,{}),(0,c.jsx)(i.$K,{className:"d-block p-md-4 p-3",children:(0,c.jsxs)("div",{className:"container-fluid",children:[(0,c.jsxs)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3 mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-bold mb-1",children:"Investor Portal"}),(0,c.jsxs)("p",{className:"text-muted mb-0",children:["Company:"," ",s.companies&&s.companies[0]?s.companies[0].name:"N/A"]})]}),(0,c.jsxs)("div",{className:"text-end",children:[(0,c.jsx)("small",{className:"text-muted",children:"Total Rounds"}),(0,c.jsx)("h4",{className:"text-success mb-0",children:Object.keys(g).length})]})]}),(0,c.jsxs)("div",{className:"row g-3 mb-4",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-primary bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-bullseye text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Target"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:Object.values(g).length>0?U(Object.values(g).reduce(((e,s)=>e+parseFloat(s.roundSize||0)),0)):U(0)}),(0,c.jsx)("small",{className:"text-muted",children:"Total amount to raise across all rounds"})]})]})})})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-success bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-chart-line text-success"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Completion Rate"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:Object.values(g).length>0?(()=>{const e=Object.values(g).reduce(((e,s)=>e+parseFloat(s.roundSize||0)),0),s=b.stats.totalInvestment;return e>0?`${(s/e*100).toFixed(1)}%`:"0%"})():"0%"}),(0,c.jsx)("small",{className:"text-muted",children:Object.values(g).length>0&&(0,c.jsxs)(c.Fragment,{children:[U(b.stats.totalInvestment)," raised of ",U(Object.values(g).reduce(((e,s)=>e+parseFloat(s.roundSize||0)),0))," target"]})})]})]})})})})]}),(0,c.jsxs)("div",{className:"row g-3 mb-4",children:[(0,c.jsx)("div",{className:"col-md-3 col-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-primary bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-layer-group text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Rounds"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:Object.keys(g).length})]})]})})})}),(0,c.jsx)("div",{className:"col-md-3 col-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-success bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-dollar-sign text-success"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Raised"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:U(b.stats.totalInvestment)})]})]})})})}),(0,c.jsx)("div",{className:"col-md-3 col-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-info bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-users text-info"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Total Investors"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:b.stats.confirmedInvestments+b.stats.pendingRequests})]})]})})})}),(0,c.jsx)("div",{className:"col-md-3 col-6",children:(0,c.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"rounded-circle bg-warning bg-opacity-10 p-3 me-3",children:(0,c.jsx)("i",{className:"fas fa-clock text-warning"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"card-subtitle mb-1 text-muted",children:"Pending Requests"}),(0,c.jsx)("h4",{className:"card-title mb-0",children:b.stats.pendingRequests})]})]})})})})]}),(0,c.jsxs)("div",{className:"card shadow-sm",children:[(0,c.jsxs)("div",{className:"card-header bg-white d-flex justify-content-between align-items-center",children:[(0,c.jsxs)("h5",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-chart-pie me-2"}),"Investment Rounds"]}),(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:D,disabled:j,children:[(0,c.jsx)("i",{className:"fas fa-sync-alt me-1"}),j?"Loading...":"Refresh"]})]}),(0,c.jsx)("div",{className:"card-body",children:j?(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,c.jsx)("p",{className:"mt-3 text-muted",children:"Loading investment data..."})]}):p?(0,c.jsxs)("div",{className:"alert alert-warning text-center",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle fa-2x mb-3"}),(0,c.jsx)("h6",{children:"Error Loading Data"}),(0,c.jsx)("p",{children:p}),(0,c.jsx)("button",{className:"btn btn-sm btn-primary",onClick:D,children:"Try Again"})]}):(()=>{const e=Object.values(g);return 0===e.length?(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("i",{className:"fas fa-chart-pie fa-3x text-muted mb-3"}),(0,c.jsx)("h6",{children:"No Investment Rounds Found"}),(0,c.jsx)("p",{className:"text-muted",children:"There are no investment rounds for this company yet."})]}):(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-hover",children:[(0,c.jsx)("thead",{className:"table-light",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Round Details"}),(0,c.jsx)("th",{children:"Investment Summary"}),(0,c.jsx)("th",{children:"Investors"}),(0,c.jsx)("th",{children:"Status"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map(((e,s)=>{const t=Object.keys(g)[s],a=e.totalInvestors>0?Math.round(e.confirmedInvestors/e.totalInvestors*100):0,n=e.roundSize>0?Math.round(e.totalInvestment/e.roundSize*100):0;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"fw-semibold",children:e.name}),(0,c.jsx)("div",{className:"text-muted small",children:e.company_name}),(0,c.jsxs)("div",{className:"text-muted small",children:[e.shareClassType," \u2022 ",e.instrumentType]})]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"fw-semibold text-primary",children:["Target: ",U(e.roundSize,e.currency)]}),(0,c.jsxs)("div",{className:"text-muted",children:["Raised: ",U(e.totalInvestment,e.currency),e.roundSize>0&&(0,c.jsxs)("span",{className:"ms-2",children:["(",n,"% of target)"]})]}),(0,c.jsxs)("div",{className:"text-muted small",children:["Confirmed: ",U(e.confirmedInvestment,e.currency)]}),(0,c.jsxs)("div",{className:"text-muted small",children:[Math.round(e.issuedShares).toLocaleString()," shares issued"]}),e.pricePerShare>0&&(0,c.jsxs)("div",{className:"text-muted small",children:["Price/share: ",U(e.pricePerShare,e.currency)]})]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"fw-semibold",children:[e.totalInvestors," investor",1!==e.totalInvestors?"s":""]}),(0,c.jsxs)("div",{className:"text-muted small",children:[e.confirmedInvestors," confirmed \u2022 ",e.pendingInvestors," pending",e.rejectedInvestors>0&&` \u2022 ${e.rejectedInvestors} rejected`]})]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"mb-1",children:100===a?(0,c.jsxs)("span",{className:"badge bg-success",children:[(0,c.jsx)("i",{className:"fas fa-check-circle me-1"})," Investors Complete (",a,"%)"]}):a>0?(0,c.jsxs)("span",{className:"badge bg-warning text-dark",children:[(0,c.jsx)("i",{className:"fas fa-clock me-1"})," Investors in Progress (",a,"%)"]}):(0,c.jsxs)("span",{className:"badge bg-secondary",children:[(0,c.jsx)("i",{className:"fas fa-hourglass-start me-1"})," No Investors"]})}),(0,c.jsx)("div",{children:n>=100?(0,c.jsxs)("span",{className:"badge bg-success",children:[(0,c.jsx)("i",{className:"fas fa-trophy me-1"})," Fully Funded"]}):n>0?(0,c.jsxs)("span",{className:"badge bg-info text-white",children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-1"})," ",n,"% Funded"]}):(0,c.jsxs)("span",{className:"badge bg-light text-dark",children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-1"})," Not Funded"]})})]})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"btn-group",role:"group",children:(0,c.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:()=>$(t),title:"View Investors",children:[(0,c.jsx)("i",{className:"fas fa-eye me-1"})," View Investors"]})})})]},t)}))})]})})})()})]})]})})]})]})}),(0,c.jsx)(l,{show:I,onClose:()=>{S(!1),_(null),C([])},roundData:w,investors:F,onUpdateStatus:async(e,t)=>{try{if((await o.A.post(R+"updateInvestmentStatus",{request_id:e,status:t,updated_by_id:s.id},{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.message){if(D(),w&&I){const e=`round_${w.id}`;g[e]&&$(e)}alert(`Investment ${"Yes"===t?"approved":"Rejected"===t?"rejected":"marked as pending"} successfully`)}}catch(p){console.error("Error updating investment status:",p),alert("Failed to update investment status")}}})]})}}}]);
//# sourceMappingURL=7954.98e79465.chunk.js.map