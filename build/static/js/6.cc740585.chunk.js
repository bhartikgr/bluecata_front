/*! For license information please see 6.cc740585.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[6],{40614:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},41680:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},42526:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(65043),n=s(65136),o=s(44710),i=(s(38421),s(53579)),l=s(27836),r=(s(86178),s(6551),s(83656),s(86213)),c=s(4563),d=s(56052),p=s(83885),m=s(17321),u=s(26022),h=(s(53162),s(37022)),x=s(48173),j=s(60184),y=s(73216),b=s(63393),g=s(69677),f=s(77784);const w=(0,f.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var N=s(5379),A=s(41680);const v=(0,f.A)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var k=s(40614),S=s(7104),C=s(70579);const D=(0,g.c)("pk_test_51RUJzWAx6rm2q3pys9SgKUPRxNxPZ4P1X6EazNQvnPuHKOOfzGsbylaTLUktId9ANHULkwBk67jnp5aqZ9Dlm6PR00jKdDwvSq");function _(){const[e,t]=(0,a.useState)("Export Documents"),[s,g]=(0,a.useState)(!1),[f,_]=(0,a.useState)(!1),[I,T]=(0,a.useState)(!1),[E,P]=(0,a.useState)([]),F=localStorage.getItem("UserLoginData"),M=JSON.parse(F);var R="https://blueprintcatalyst.com/api/user/aifile/";document.title="Approval Page";const[U,$]=(0,a.useState)(!1),{code:q}=(0,y.g)(),L=(0,y.Zp)();(0,a.useEffect)((()=>{O(),z()}),[]);const O=async()=>{let e={user_id:M.id,code:q};try{0===(await r.A.post(R+"checkunicode",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.length&&L("/dataroom-Duediligence")}catch(U){}},z=async()=>{let e={user_id:M.id};try{const t=await r.A.post("https://blueprintcatalyst.com/api/user/getcategories",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});P(t.data.results)}catch(U){}},H="https://blueprintcatalyst.com/api/admin/module/",V=()=>{const e=(0,b.useStripe)(),t=(0,b.useElements)(),[s,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1);setTimeout((()=>{i("")}),5e3);const d=async e=>{try{await r.A.post(`${R}CreateuserSubscriptionDataRoom`,e,{headers:{Accept:"application/json","Content-Type":"application/json"}}),i("Payment successful! \ud83c\udf89"),c(!1),setTimeout((()=>{window.location.reload()}),2e3)}catch(l){console.error("Success handler error:",l),i("Payment was captured, but post-process failed."),c(!0)}finally{n(!1)}};return(0,C.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!e||!t)return;const a=t.getElement(b.CardElement);if(!a)return i("Payment form is not ready. Please reload the page."),void c(!0);n(!0);try{const{data:t}=await r.A.post(`${R}CreateuserSubscriptionDataRoomCheck`,{user_id:M.id,amount:J.onetime_Fee}),s=await e.confirmCardPayment(t.clientSecret,{payment_method:{card:a}});if(s.error)console.error("Stripe error:",s.error),i(s.error.message),c(!0),n(!1);else if("succeeded"===s.paymentIntent.status){const e={user_id:M.id,amount:J.onetime_Fee,clientSecret:t.clientSecret};await d(e)}else i("Payment failed. Try again."),c(!0),n(!1)}catch(o){console.error("Unexpected error:",o),i("Unexpected error occurred."),c(!0),n(!1)}},children:[(0,C.jsx)("div",{className:"form-control rounded-3",style:{padding:"0.75rem",border:"1px solid #000",borderColor:"#ced4da"},children:(0,C.jsx)(b.CardElement,{options:{style:{base:{fontSize:"16px",color:"#32325d",fontFamily:'"Montserrat", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',"::placeholder":{color:"#a0aec0"},padding:"0.75rem"},invalid:{color:"#e5424d"}},classes:{base:"stripe-card-element",focus:"border-primary",invalid:"border-danger"}}})}),(0,C.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end mt-4",children:(0,C.jsxs)(u.$n,{disabled:!e||s,type:"submit",className:"submit d-flex align-items-center gap-2",style:{background:"#003b21"},children:[!s&&(0,C.jsxs)("span",{children:["Pay \u20ac",J.onetime_Fee]}),s&&(0,C.jsx)("div",{className:"spinner-border text-white spinneronetimepay m-0",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})]})}),o&&(0,C.jsx)("p",{className:l?" mt-3 error_pop":"success_pop mt-3",children:o})]})},[B,K]=(0,a.useState)(""),[Z,Q]=(0,a.useState)(""),[J,W]=(0,a.useState)(""),[G,X]=(0,a.useState)(!1);(0,a.useEffect)((()=>{Y(),se()}),[]);const Y=async()=>{let e={user_id:""};try{var t=(await r.A.post(H+"getDataroompayment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.row;W(t[0])}catch(U){U.response||(U.request?console.error("Request data:",U.request):console.error("Error message:",U.message))}},[ee,te]=(0,a.useState)(!1),se=async()=>{let e={user_id:M.id};try{const t=(await r.A.post(H+"getCheckOnetimePayment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.row;if(t.length>0){const e=new Date(t[0].end_date),s=new Date;e.setHours(0,0,0,0),s.setHours(0,0,0,0),s<=e?(te(!1),X(!0)):(te(!0),X(!1))}else te(!1),X(!1)}catch(U){U.response||(U.request?console.error("Request data:",U.request):console.error("Error message:",U.message))}},[ae,ne]=(0,a.useState)(!1),[oe,ie]=(0,a.useState)(!1),[le,re]=(0,a.useState)(!0),[ce,de]=(0,a.useState)(""),[pe,me]=(0,a.useState)(""),[ue,he]=(0,a.useState)(""),[xe,je]=(0,a.useState)(null),[ye,be]=(0,a.useState)(""),[ge,fe]=a.useState({}),[we,Ne]=(0,a.useState)(null),[Ae,ve]=(0,a.useState)(null),[ke,Se]=(0,a.useState)(""),Ce=(e,t)=>{const s=`${e}-${t}`;Ne((e=>e===s?null:s))},De=()=>{z(),_(!1)},_e=async()=>{let e={id:ye,user_id:M.id};try{const t=await r.A.post(R+"UserDocDeleteFile",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});z(),je(null),K("");const s=t.data.message;Q(s)}catch(U){}},[Ie,Te]=(0,a.useState)(!1),[Ee,Pe]=(0,a.useState)([]),[Fe,Me]=(0,a.useState)(!1),[Re,Ue]=(0,a.useState)(""),[$e,qe]=(0,a.useState)(""),Le=()=>{Te(!1),Me(!1),z()},[Oe,ze]=(0,a.useState)(""),[He,Ve]=(0,a.useState)(null),[Be,Ke]=(0,a.useState)(!1);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.mO,{children:(0,C.jsxs)("div",{className:"fullpage d-block",children:[(0,C.jsx)(n.A,{}),B&&(0,C.jsx)(h.A,{message:B,onConfirm:_e,onCancel:()=>{K("")}}),Z&&(0,C.jsx)(x.A,{message:Z,onConfirm:_e,onClose:()=>{Q("")}}),(0,C.jsxs)(i.$K,{className:"d-block py-5",children:[Oe&&(0,C.jsx)("p",{className:U?" mt-3 error_pop":"success_pop mt-3",children:Oe}),(0,C.jsx)("div",{className:"container-fluid",children:(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-md-3",children:(0,C.jsx)(o.A,{isCollapsed:Be,setIsCollapsed:Ke})}),(0,C.jsx)("div",{className:"col-md-9",children:(0,C.jsxs)(l.zP,{className:"d-flex flex-column gap-4",children:[(0,C.jsxs)("div",{className:"titleroom d-flex  justify-content-between align-items-center text-center",children:[(0,C.jsxs)("button",{disabled:s,style:{opacity:s?.6:1},type:"button",onClick:async()=>{let e={user_id:M.id,code:q};g(!0),t("Please wait....");try{if((await r.A.post(R+"checkapprovedorNot",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.length>0)t("Export Documents"),g(!1),$(!0),ze("All sections are required for approval"),setTimeout((()=>{$(!1),ze("")}),1500);else try{const s=await r.A.post(R+"generateDocFile",e,{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Type":"application/json"}});g(!1),t("Export Documents");const a=s.headers["content-disposition"];let n="download.docx";if(a){const e=a.match(/filename="?([^"]+)"?/);e&&e[1]&&(n=e[1])}const o=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=n,i.addEventListener("click",(()=>{setTimeout((()=>{window.location.reload()}),1e3)})),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(s){console.error("Download failed:",s)}}catch(U){}},className:"generatebutton  btn btn-outline-dark active gap-2",children:[e,s&&(0,C.jsx)("div",{className:" spinner-border spinneronetimepay m-0",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})]}),(0,C.jsx)("h4",{children:"Approval Page"})]}),(0,C.jsx)("div",{className:"table-responsive",children:E.map((e=>{e.category_id,e.category_id,e.category_id;return(0,C.jsxs)("table",{className:"table dataroomtab",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsxs)(l.A0,{children:[e.name," "]}),(0,C.jsx)(l.A0,{children:"Manage Documents"}),(0,C.jsx)(l.A0,{children:e.subcategories.length>0&&e.subcategories.some((e=>e.documents&&e.documents.length>0))?"Yes"===e.approvedOrNot?(0,C.jsxs)("button",{className:"btn btn-sm btn-success",children:[(0,C.jsx)(w,{}),"Approved"]}):(0,C.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(async e=>{let t={id:e,user_id:M.id};console.log(t);try{await r.A.post(R+"fileApproved",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),z()}catch(U){}})(e.id),children:"Approve"}):null}),(0,C.jsx)(l.A0,{children:(0,C.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-4 position-relative",children:[(0,C.jsx)("span",{children:"AI OverView Click Here "}),(0,C.jsxs)("div",{className:"d-flex justify-content-end overView_clixk",children:[(0,C.jsx)("button",{onClick:()=>{return t=e.name,void Ve((e=>e===t?null:t));var t},title:"More actions",className:"btn btn-link p-0 text-white",type:"button",children:(0,C.jsx)(N.A,{width:16,height:16})}),He===e.name&&(0,C.jsxs)("div",{style:{position:"absolute",width:"200px",backgroundColor:"#fff",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",padding:"2px",zIndex:997,right:-9,top:38},children:[(0,C.jsxs)("button",{type:"button",title:"View/Edit\r Summary",className:"editdelete-links",onClick:()=>(async e=>{let t={id:e,user_id:M.id};try{const e=await r.A.post(R+"getAISummary",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});2===e.data.status?(ze("No results found"),$(!0),setTimeout((()=>{$(!1),ze("")}),1500)):(ze(""),qe(e.data.results),Me(!0),e.data.row.length>0&&Ue(e.data.row[0].id))}catch(U){}})(e.id),children:[(0,C.jsx)(A.A,{className:"me-1",width:12,height:10}),"View/Edit Summary"]}),(0,C.jsxs)("button",{type:"button",title:"View/Edit\r Summary",className:"editdelete-links",onClick:()=>(async e=>{let t={id:e,user_id:M.id};try{const e=await r.A.post(R+"getAISummary",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(e.data.row.length),e.data.row.length>0){ze(""),Ue(e.data.row[0].id);let t={id:e.data.row[0].id,user_id:M.id};try{const e=await r.A.post(R+"getAIquestion",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});Pe(e.data.results),Te(!0)}catch(U){}}else ze("No results found"),$(!0),setTimeout((()=>{$(!1),ze("")}),1500)}catch(U){}})(e.id),children:[(0,C.jsx)(v,{className:"me-1",width:12,height:10}),"Attend AI Question Ans.."]})]})]})]})})]})}),e.subcategories&&e.subcategories.length>0?(0,C.jsx)("tbody",{children:e.subcategories.map(((t,s)=>{e.id,t.id,e.id,t.id;return(0,C.jsxs)("tr",{children:[(0,C.jsx)(l.l$,{children:(0,C.jsx)("h6",{children:t.name})}),(0,C.jsx)(l.l$,{children:t.documents&&t.documents.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.s5,{type:"button",onClick:()=>Ce(e.id,t.id),children:we===`${e.id}-${t.id}`?"Hide Documents":"View Documents"}),we===`${e.id}-${t.id}`&&(0,C.jsx)("div",{className:"popupDataRoom",children:(0,C.jsxs)("div",{className:"uploadFilescroll position-relative",children:[(0,C.jsxs)("div",{className:"d-flex mb-2 justify-content-between align-items-center bg-primary-subtle p-2",children:[(0,C.jsx)("h4",{className:"docName",children:t.name}),(0,C.jsx)("div",{className:"d-flex gap-2 align-items-center",children:(0,C.jsx)("button",{type:"button",className:"closebtn",onClick:()=>Ce(e.id,t.id),children:(0,C.jsx)(k.A,{width:14,height:14})})})]}),(0,C.jsx)("ol",{className:"text-start text-capitalize pdflist",children:t.documents.map((e=>(0,C.jsx)("li",{className:"  ",children:(0,C.jsxs)("span",{className:"d-flex justify-content-between align-items-center",children:[e.name,(0,C.jsxs)("div",{className:"d-inline ms-2",children:[(0,C.jsx)("button",{title:"More actions",className:"btn btn-link p-0 text-dark",type:"button",onClick:()=>{return t=e.id,be(t),void je((e=>e===t?null:t));var t},children:(0,C.jsx)(N.A,{width:16,height:16})}),xe===e.id&&(0,C.jsx)("div",{style:{position:"absolute",width:"100px",backgroundColor:"#fff",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",padding:"2px",zIndex:997,right:0},children:(0,C.jsxs)("button",{type:"button",title:"Download",className:"editdelete-links",onClick:()=>(async(e,t,s,a)=>{try{const t=await r.A.post(R+"filedownload",{userId:e,folderName:a,filename:s},{responseType:"blob"}),n=new Blob([t.data]),o=window.URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download=s,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(o)}catch(U){alert("Download failed"),console.error(U)}})(e.user_id,e.id,e.name,e.folder_name),children:[(0,C.jsx)(S.A,{className:"me-1",width:10,height:10}),"Download"]})})]})]})},e.id)))}),(0,C.jsx)("button",{className:" btn btn-outline-dark ",type:"button",onClick:()=>Ce(e.id,t.id),children:(0,C.jsx)(j.QCr,{})})]})})]}):(0,C.jsx)("span",{children:"--"})}),(0,C.jsx)(l.l$,{}),(0,C.jsx)(l.l$,{})]},t.id)}))}):(0,C.jsx)("tbody",{children:(0,C.jsx)("tr",{children:(0,C.jsx)(l.l$,{colSpan:5,children:(0,C.jsx)("p",{children:"No subcategories"})})})})]},e.id)}))})]})})]})})]})]})}),f&&(0,C.jsx)(c.A,{onClose:()=>_(!1),catgeoryId:ce,subcatgeoryId:pe,CategorynameFile:ue,refreshpage:De}),I&&(0,C.jsx)(d.A,{onClose:()=>T(!1),catgeoryId:ce,subcatgeoryId:pe,CategorynameFile:ue,refreshpage:De,Docname:ke,DeleteIdDocs:ye}),Ie&&(0,C.jsx)(m.A,{onClose:()=>Te(!1),catgeoryId:ce,subcatgeoryId:pe,CategorynameFile:ue,refreshpageAi:Le,Docname:ke,DeleteIdDocs:ye,AIquestions:Ee}),Fe&&(0,C.jsx)(p.A,{onClose:()=>Me(!1),AiUpdatesummaryID:Re,refreshpageAi:Le,AISummary:$e}),ae&&(0,C.jsx)("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},tabIndex:"-1",role:"dialog","aria-labelledby":"paymentModalLabel","aria-hidden":"false",children:(0,C.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,C.jsxs)("div",{className:"modal-content rounded-4 shadow-lg p-4",children:[(0,C.jsx)("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-3",onClick:()=>{ne(!1),ie(!1)},"aria-label":"Close"}),le&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("h2",{className:"modal-title text-center fw-bold text-dark mb-4",id:"paymentModalLabel",children:["Payment For ",ee&&"Renew"]}),(0,C.jsx)("div",{className:"mb-4",children:(0,C.jsx)("h5",{className:"fw-bold text-dark mb-2",children:"Dataroom Management & Diligence"})}),(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsxs)("div",{className:"fs-4 fw-semibold text-dark",children:["Fee:"," ",(0,C.jsx)("span",{style:{color:"#2e5692"},className:"fw-bold",children:"\u20ac500"})," ",(0,C.jsx)("span",{className:"fs-6 text-muted",children:"(One-Time)"})]}),(0,C.jsxs)("ul",{className:"list-group list-group-flush mt-3",children:[(0,C.jsx)("li",{className:"list-group-item text-dark ps-0",children:"Access to Dataroom for 3 months"}),(0,C.jsx)("li",{className:"list-group-item text-dark ps-0",children:"Includes uploading of documents"}),(0,C.jsxs)("li",{className:"list-group-item text-dark ps-0",children:["Due diligence documents can be generated"," ",(0,C.jsx)("strong",{children:"2 times"})]}),(0,C.jsxs)("li",{className:"list-group-item text-dark ps-0",children:["Additional generation:"," ",(0,C.jsx)("strong",{children:"\u20ac100 per instance"})]})]})]})]}),(0,C.jsx)("div",{className:"text-center mb-4",children:(0,C.jsx)("img",{src:"/assets/user/images/cardimage.jpg",alt:"cards",className:"img-fluid rounded",style:{maxWidth:"200px"}})}),(0,C.jsx)(b.Elements,{stripe:D,children:(0,C.jsx)(V,{})})]})})})]})}},53162:(e,t,s)=>{s.d(t,{A:()=>n});s(65043);var a=s(70579);const n=function(e){let{message:t,onClose:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[(0,a.jsx)("strong",{children:"Success!"})," ",t,(0,a.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:s})]})})}}}]);
//# sourceMappingURL=6.cc740585.chunk.js.map