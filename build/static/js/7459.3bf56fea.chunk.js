"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[7459],{57459:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(65043),l=a(44710),r=a(94060),i=(a(38421),a(53579)),n=a(27836),c=a(49535),o=a(65469),d=a(86213),m=a(73216),p=a(25581),h=a(70579);function u(){const e=(0,m.Zp)(),[s,a]=(0,t.useState)(),u=localStorage.getItem("SignatoryLoginData"),x=JSON.parse(u),[j,g]=(0,t.useState)(!1),[v,f]=(0,t.useState)(""),[y,b]=(0,t.useState)(!1),[N,_]=(0,t.useState)(""),{id:k}=(0,m.g)(),[w,S]=(0,t.useState)(""),[C,A]=(0,t.useState)("");var E=p.J+"api/user/investor/";document.title="Investor Report Form";const I=e=>{a({...s,[e.target.name]:e.target.value})};(0,t.useEffect)((()=>{k&&T()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.ipify.org?format=json"),s=await e.json();A(s.ip)}catch(e){console.error("Failed to fetch IP",e)}})()}),[]);const T=async()=>{const s={company_id:x.companies[0].id,id:k};try{const a=await d.A.post(E+"getInvestoreditlist",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});a.data.results.length>0?(S(a.data.results[0].investorType),_(a.data.results[0])):e("/crm/investor-directory")}catch(a){console.error("Error generating summary",a)}},[F,q]=(0,t.useState)(!1);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.mO,{children:(0,h.jsx)("div",{className:"fullpage d-block",children:(0,h.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,h.jsx)(l.A,{isCollapsed:F,setIsCollapsed:q}),(0,h.jsxs)("div",{className:"global_view "+(F?"global_view_col":""),children:[(0,h.jsx)(r.A,{}),(0,h.jsxs)(i.$K,{className:"d-block p-md-4 p-3",children:[v&&(0,h.jsx)("p",{className:y?" mt-3 error_pop":"success_pop mt-3",children:v}),(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsxs)(n.zP,{className:"d-flex flex-column gap-2",children:[(0,h.jsxs)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3",children:[(0,h.jsxs)(c.o,{type:"button",className:"backbtn",onClick:()=>{e("/crm/investor-directory")},children:[(0,h.jsx)(o.A,{size:16,className:"me-1"})," back"]}),(0,h.jsx)("h4",{children:N&&N.id?"Edit Investor":"Add Investor"})]}),(0,h.jsx)("form",{onSubmit:async s=>{s.preventDefault();const a={email:s.target.email.value,first_name:s.target.first_name.value,last_name:s.target.last_name.value,company_id:x.companies[0].id,created_by_id:x.id,created_by_role:x.role,id:N.id,ip_address:C};try{const s=await d.A.post(E+"Addnewinvenstor",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});g(!1),b(!1);var t=s.data;2===t.status?(b(!0),f(t.message)):(f(t.message),setTimeout((()=>{e("/crm/investor-directory")}),2500)),setTimeout((()=>{f("")}),2500)}catch(l){console.error("Error generating summary",l)}},children:(0,h.jsxs)("div",{className:"formlist",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("label",{className:"d-block mt-3",children:[(0,h.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,h.jsxs)("h5",{children:["Email"," ",(0,h.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,h.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter your email...",defaultValue:N.email||"",onChange:I,required:!0,disabled:!!N.email})]})}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("label",{className:"d-block mt-3",children:[(0,h.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,h.jsxs)("h5",{children:["First Name"," ",(0,h.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,h.jsx)("input",{className:"form-control",onChange:I,type:"text",defaultValue:N.first_name,name:"first_name",placeholder:"Enter here...",id:"first_name",required:!0})]})}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("label",{className:"d-block mt-3",children:[(0,h.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,h.jsxs)("h5",{children:["Last Name"," ",(0,h.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,h.jsx)("input",{className:"form-control",onChange:I,type:"text",defaultValue:N.last_name,name:"last_name",placeholder:"Enter here...",id:"last_name",required:!0})]})})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-start align-items-center mt-3",children:[(0,h.jsx)("input",{type:"submit",disabled:j,className:"global_btn ms-auto w-fit",value:"Submit",style:{opacity:j?.6:1}}),j&&(0,h.jsx)("div",{className:"spinner-border text-light ms-2",role:"status",style:{width:"1.5rem",height:"1.5rem"},children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})})]})})]})]})]})})})})}}}]);
//# sourceMappingURL=7459.3bf56fea.chunk.js.map