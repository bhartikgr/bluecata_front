/*! For license information please see 5551.2a53e8d6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[5551],{5551:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(65043),n=s(45394),i=s(44710),o=s(94060),l=(s(38421),s(53579)),c=s(27836),d=(s(83656),s(86213)),r=s(4563),p=s(56052),m=s(83885),u=s(17321),h=s(37022),x=s(48173),j=s(60184),g=s(73216),y=(s(69677),s(36210)),b=s(5379),f=s(41680);const w=(0,s(77784).A)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var A=s(7104),N=s(25581),v=s(70579);function k(){const[e,t]=(0,a.useState)("Export Documents"),[s,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[D,_]=(0,a.useState)(!1),[I,T]=(0,a.useState)([]),M=localStorage.getItem("SignatoryLoginData"),E=JSON.parse(M);var $=N.J+"api/user/",q=N.J+"api/user/aifile/";document.title="Approval Page";const[F,L]=(0,a.useState)(!1),{code:R}=(0,g.g)(),O=(0,g.Zp)();(0,a.useEffect)((()=>{z(),H()}),[]);const z=async()=>{let e={company_id:E.companies[0].id,code:R};try{0===(await d.A.post(q+"checkunicode",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.length&&O("/dataroom-Duediligence")}catch(F){}},H=async()=>{let e={company_id:E.companies[0].id};try{const t=await d.A.post($+"getcategories",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});T(t.data.results)}catch(F){}},U=N.J+"api/admin/module/",[V,P]=(0,a.useState)(""),[J,B]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(""),[K,W]=(0,a.useState)(!1);(0,a.useEffect)((()=>{Y(),ee()}),[]);const Y=async()=>{let e={user_id:""};try{var t=(await d.A.post(U+"getDataroompayment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.row;Z(t[0])}catch(F){F.response||(F.request?console.error("Request data:",F.request):console.error("Error message:",F.message))}},[G,X]=(0,a.useState)(!1),ee=async()=>{let e={company_id:E.companies[0].id};try{const t=(await d.A.post(U+"getCheckOnetimePayment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.row;if(t.length>0){const e=new Date(t[0].end_date),s=new Date;e.setHours(0,0,0,0),s.setHours(0,0,0,0),s<=e?(X(!1),W(!0)):(X(!0),W(!1))}else X(!1),W(!1)}catch(F){F.response||(F.request?console.error("Request data:",F.request):console.error("Error message:",F.message))}},[te,se]=(0,a.useState)(!1),[ae,ne]=(0,a.useState)(!1),[ie,oe]=(0,a.useState)(!0),[le,ce]=(0,a.useState)(""),[de,re]=(0,a.useState)(""),[pe,me]=(0,a.useState)(""),[ue,he]=(0,a.useState)(null),[xe,je]=(0,a.useState)(""),[ge,ye]=a.useState({}),[be,fe]=(0,a.useState)(null),[we,Ae]=(0,a.useState)(null),[Ne,ve]=(0,a.useState)(""),ke=(e,t)=>{const s=`${e}-${t}`;fe((e=>e===s?null:s))},Ce=()=>{H(),S(!1)},Se=async()=>{let e={id:xe,user_id:E.id};try{const t=await d.A.post(q+"UserDocDeleteFile",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});H(),he(null),P("");const s=t.data.message;B(s)}catch(F){}},[De,_e]=(0,a.useState)(!1),[Ie,Te]=(0,a.useState)([]),[Me,Ee]=(0,a.useState)(!1),[$e,qe]=(0,a.useState)(""),[Fe,Le]=(0,a.useState)(""),Re=()=>{_e(!1),Ee(!1),H()},[Oe,ze]=(0,a.useState)(""),[He,Ue]=(0,a.useState)(null),[Ve,Pe]=(0,a.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.mO,{children:(0,v.jsx)("div",{className:"fullpage d-block",children:(0,v.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,v.jsx)(i.A,{isCollapsed:Ve,setIsCollapsed:Pe}),(0,v.jsxs)("div",{className:"global_view "+(Ve?"global_view_col":""),children:[(0,v.jsx)(o.A,{}),V&&(0,v.jsx)(h.A,{message:V,onConfirm:Se,onCancel:()=>{P("")}}),J&&(0,v.jsx)(x.A,{message:J,onConfirm:Se,onClose:()=>{B("")}}),(0,v.jsxs)(l.$K,{className:"d-block p-md-4 p-3",children:[Oe&&(0,v.jsx)("p",{className:F?" mt-3 error_pop":"success_pop mt-3",children:Oe}),(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsxs)(c.zP,{className:"d-flex flex-column gap-4",children:[(0,v.jsxs)("div",{className:"titleroom d-flex  justify-content-between align-items-center text-center",children:[(0,v.jsxs)("button",{disabled:s,style:{opacity:s?.6:1},type:"button",onClick:async()=>{let e={company_id:E.companies[0].id,created_by_role:E.role,created_by_id:E.id,code:R};k(!0),t("Please wait....");try{if((await d.A.post(q+"checkapprovedorNot",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.length>0)t("Export Documents"),k(!1),L(!0),ze("All sections are required for approval"),setTimeout((()=>{L(!1),ze("")}),1500);else try{const s=await d.A.post(q+"generateDocFile",e,{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Type":"application/json"}});k(!1),t("Export Documents");const a=s.headers["content-disposition"];let n="download.docx";if(a){const e=a.match(/filename="?([^"]+)"?/);e&&e[1]&&(n=e[1])}const i=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),o=document.createElement("a");o.href=window.URL.createObjectURL(i),o.download=n,o.addEventListener("click",(()=>{setTimeout((()=>{window.location.reload()}),1e3)})),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(s){console.error("Download failed:",s)}}catch(F){}},className:"generatebutton d-flex btn btn-outline-dark active gap-2",children:[(0,v.jsx)("span",{children:e}),s&&(0,v.jsx)("div",{className:" spinner-border spinneronetimepay m-0",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden"})})]}),(0,v.jsx)("h4",{className:"mainh1",children:"Approval Page"})]}),(0,v.jsx)("div",{className:"table-responsive",children:I.map((e=>{e.category_id,e.category_id,e.category_id;return(0,v.jsx)("div",{className:"overflow-auto",children:(0,v.jsxs)("table",{className:"table document_table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsxs)(c.A0,{children:[e.name," "]}),(0,v.jsx)(c.A0,{children:"Manage Documents"}),(0,v.jsx)(c.A0,{children:e.subcategories.length>0&&e.subcategories.some((e=>e.documents&&e.documents.length>0))?"Yes"===e.approvedOrNot?(0,v.jsxs)("button",{style:{fontSize:"0.7rem"},className:"btn btn-sm btn-success d-flex align-items-center gap-2 justify-content-center",children:[(0,v.jsx)(y.A,{width:16}),(0,v.jsx)("span",{children:"Approved"})]}):(0,v.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(async e=>{let t={id:e,company_id:E.companies[0].id};try{await d.A.post(q+"fileApproved",t,{headers:{Accept:"application/json","Content-Type":"application/json"}}),H()}catch(F){}})(e.id),children:"Approve"}):null}),(0,v.jsx)(c.A0,{children:(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-4 position-relative",children:[(0,v.jsx)("span",{children:"AI OverView Click Here "}),(0,v.jsxs)("div",{className:"d-flex justify-content-end overView_clixk",children:[(0,v.jsx)("button",{onClick:()=>{return t=e.name,void Ue((e=>e===t?null:t));var t},title:"More actions",className:"btn btn-link p-0 text-white",type:"button",children:(0,v.jsx)(b.A,{width:16,height:16,style:{color:"var(--primary-icon)"}})}),He===e.name&&(0,v.jsxs)("div",{style:{position:"absolute",width:"200px",backgroundColor:"#fff",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",padding:"2px",zIndex:997,right:-9,top:38},children:[(0,v.jsxs)("button",{type:"button",title:"View/Edit\r Summary",className:"editdelete-links",onClick:()=>(async e=>{let t={id:e,company_id:E.companies[0].id};try{const e=await d.A.post(q+"getAISummary",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});2===e.data.status?(ze("No results found"),L(!0),setTimeout((()=>{L(!1),ze("")}),1500)):(ze(""),Le(e.data.results),Ee(!0),e.data.row.length>0&&qe(e.data.row[0].id))}catch(F){}})(e.id),children:[(0,v.jsx)(f.A,{className:"me-1",width:12,height:10}),"View/Edit Summary"]}),(0,v.jsxs)("button",{type:"button",title:"View/Edit\r Summary",className:"editdelete-links",onClick:()=>(async e=>{let t={id:e,company_id:E.companies[0].id};try{const e=await d.A.post(q+"getAISummary",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){ze(""),qe(e.data.row[0].id);let t={id:e.data.row[0].id,company_id:E.companies[0].id};try{const e=await d.A.post(q+"getAIquestion",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});Te(e.data.results),_e(!0)}catch(F){}}else ze("No results found"),L(!0),setTimeout((()=>{L(!1),ze("")}),1500)}catch(F){}})(e.id),children:[(0,v.jsx)(w,{className:"me-1",width:12,height:10}),"Attend AI Question Ans.."]})]})]})]})})]})}),e.subcategories&&e.subcategories.length>0?(0,v.jsx)("tbody",{children:e.subcategories.map(((t,s)=>{e.id,t.id,e.id,t.id;return(0,v.jsxs)("tr",{children:[(0,v.jsx)(c.l$,{children:(0,v.jsx)("h6",{children:t.name})}),(0,v.jsx)(c.l$,{children:t.documents&&t.documents.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.s5,{type:"button",onClick:()=>ke(e.id,t.id),children:be===`${e.id}-${t.id}`?"Hide Documents":"View Documents"}),be===`${e.id}-${t.id}`&&(0,v.jsx)("div",{className:"popupDataRoom",children:(0,v.jsxs)("div",{className:"uploadFilescroll position-relative",children:[(0,v.jsxs)("div",{className:"d-flex mb-2 pop_bg justify-content-between align-items-center p-2",children:[(0,v.jsx)("h4",{className:"docName",children:t.name}),(0,v.jsx)("div",{className:"d-flex gap-2 align-items-center",children:(0,v.jsx)("button",{type:"button",className:"bg-transparent text-white p-1 border-0",onClick:()=>ke(e.id,t.id),children:(0,v.jsx)(n.LwM,{size:24})})})]}),(0,v.jsx)("ol",{className:"text-start text-capitalize pdflist",children:t.documents.map((e=>(0,v.jsx)("li",{className:"  ",children:(0,v.jsxs)("span",{className:"d-flex justify-content-between align-items-center",children:[e.name,(0,v.jsxs)("div",{className:"d-inline ms-2",children:[(0,v.jsx)("button",{title:"More actions",className:"btn btn-link p-0 text-dark",type:"button",onClick:()=>{return t=e.id,je(t),void he((e=>e===t?null:t));var t},children:(0,v.jsx)(b.A,{width:16,height:16})}),ue===e.id&&(0,v.jsx)("div",{style:{position:"absolute",width:"100px",backgroundColor:"#fff",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",padding:"2px",zIndex:997,right:0},children:(0,v.jsxs)("button",{type:"button",title:"Download",className:"editdelete-links",onClick:()=>(async(e,t,s,a)=>{try{const t=await d.A.post(q+"filedownload",{userId:e,folderName:a,filename:s},{responseType:"blob"}),n=new Blob([t.data]),i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=s,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i)}catch(F){alert("Download failed"),console.error(F)}})(e.user_id,e.id,e.name,e.folder_name),children:[(0,v.jsx)(A.A,{className:"me-1",width:10,height:10}),"Download"]})})]})]})},e.id)))}),(0,v.jsx)("button",{className:" btn btn-outline-dark ",type:"button",onClick:()=>ke(e.id,t.id),children:(0,v.jsx)(j.QCr,{})})]})})]}):(0,v.jsx)("span",{children:"--"})}),(0,v.jsx)(c.l$,{}),(0,v.jsx)(c.l$,{})]},t.id)}))}):(0,v.jsx)("tbody",{children:(0,v.jsx)("tr",{children:(0,v.jsx)(c.l$,{colSpan:5,children:(0,v.jsx)("p",{children:"No subcategories"})})})})]},e.id)})}))})]})})]})]})]})})}),C&&(0,v.jsx)(r.A,{onClose:()=>S(!1),catgeoryId:le,subcatgeoryId:de,CategorynameFile:pe,refreshpage:Ce}),D&&(0,v.jsx)(p.A,{onClose:()=>_(!1),catgeoryId:le,subcatgeoryId:de,CategorynameFile:pe,refreshpage:Ce,Docname:Ne,DeleteIdDocs:xe}),De&&(0,v.jsx)(u.A,{onClose:()=>_e(!1),catgeoryId:le,subcatgeoryId:de,CategorynameFile:pe,refreshpageAi:Re,Docname:Ne,DeleteIdDocs:xe,AIquestions:Ie}),Me&&(0,v.jsx)(m.A,{onClose:()=>Ee(!1),AiUpdatesummaryID:$e,refreshpageAi:Re,AISummary:Fe}),te&&(0,v.jsx)("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},tabIndex:"-1",role:"dialog","aria-labelledby":"paymentModalLabel","aria-hidden":"false",children:(0,v.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,v.jsxs)("div",{className:"modal-content rounded-4 shadow-lg p-4",children:[(0,v.jsx)("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-3",onClick:()=>{se(!1),ne(!1)},"aria-label":"Close"}),ie&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("h2",{className:"modal-title text-center fw-bold text-dark mb-4",id:"paymentModalLabel",children:["Payment For ",G&&"Renew"]}),(0,v.jsx)("div",{className:"mb-4",children:(0,v.jsx)("h5",{className:"fw-bold text-dark mb-2",children:"Dataroom Management & Diligence"})}),(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsxs)("div",{className:"fs-4 fw-semibold text-dark",children:["Fee:"," ",(0,v.jsx)("span",{style:{color:"#2e5692"},className:"fw-bold",children:"\u20ac500"})," ",(0,v.jsx)("span",{className:"fs-6 text-muted",children:"(One-Time)"})]}),(0,v.jsxs)("ul",{className:"list-group list-group-flush mt-3",children:[(0,v.jsx)("li",{className:"list-group-item text-dark ps-0",children:"Access to Dataroom for 3 months"}),(0,v.jsx)("li",{className:"list-group-item text-dark ps-0",children:"Includes uploading of documents"}),(0,v.jsxs)("li",{className:"list-group-item text-dark ps-0",children:["Due diligence documents can be generated"," ",(0,v.jsx)("strong",{children:"2 times"})]}),(0,v.jsxs)("li",{className:"list-group-item text-dark ps-0",children:["Additional generation:"," ",(0,v.jsx)("strong",{children:"\u20ac100 per instance"})]})]})]})]}),(0,v.jsx)("div",{className:"text-center mb-4",children:(0,v.jsx)("img",{src:"/assets/user/images/cardimage.jpg",alt:"cards",className:"img-fluid rounded",style:{maxWidth:"200px"}})})]})})})]})}},36210:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},41680:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},83656:()=>{}}]);
//# sourceMappingURL=5551.2a53e8d6.chunk.js.map