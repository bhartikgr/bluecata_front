"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[8071],{8071:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var t=a(5043),l=a(5475),o=a(5700),r=a(6990),n=a(6999),c=a(6982),i=a(3625),d=a(5442),u=a(6213),m=a(4117),h=a(2862),p=a(2425),g=a(2074),x=a(686),j=a(5284),v=a(4282),y=a(793),f=a(1075),N=a(579);function b(){const[e,s]=(0,t.useState)("");var b="https://backend.amourette.no/api/members/";const[S,w]=(0,t.useState)(!1),[_,k]=(0,t.useState)(0),[C,A]=(0,t.useState)(""),[q,E]=(0,t.useState)(""),[R,I]=(0,t.useState)(""),[O,L]=(0,t.useState)([]),[D,F]=(0,t.useState)([]),[M,T]=(0,t.useState)(""),[G,J]=(0,t.useState)(""),[Y,W]=(0,t.useState)(""),[U,$]=(0,t.useState)(""),[B,H]=(0,t.useState)(""),[P,Q]=(0,t.useState)([]),[z,K]=(0,t.useState)(""),[V,X]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(!1),[se,ae]=(0,t.useState)(""),[te,le]=(0,t.useState)(!1),[oe,re]=(0,t.useState)(""),[ne,ce]=(0,t.useState)(""),[ie,de]=(0,t.useState)(!1),[ue,me]=(0,t.useState)([]),he=e=>{k(e)},[pe,ge]=(0,t.useState)(!1),[xe,je]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;E(s)}),[]),(0,t.useEffect)((()=>{void 0!==q&&ye()}),[q]),(0,t.useEffect)((()=>{ve()}),[M]);const ve=async()=>{console.log(M);const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,search:M.toLowerCase()};console.log(s);try{var a=(await u.A.post(b+"galleryfilter",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};(0,t.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);console.log(s.event);const a=localStorage.getItem("userLogin");a&&JSON.parse(a);"Deletegallery"===s.event&&ye()}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[]);const ye=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{var a=(await u.A.post(b+"getgallery",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},fe=async e=>{I(e),(async e=>{let s={id:e,user_id:q.id};try{var a=(await u.A.post(b+"getGalleryComments",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;F(a)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})(e),(async e=>{const s=localStorage.getItem("userLogin");let a={id:e,user_id:(s?JSON.parse(s):null).id};try{const e=await u.A.post(b+"getGalleryDetailnextpreviousspecificuser",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&$(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&H(e.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})(e);let s={id:e,user_id:q.id};try{const e=await u.A.post(b+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var a=e.data.row[0];je(!0),document.body.style.overflowY="hidden",J(a)}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};(0,t.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let a={search:P,user_id:s.id};try{const e=(await u.A.post(b+"getallgallerySearchfilter",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log("kl"),console.log(e),L(e)}catch(t){t.response?console.error("Response error:",t.response):t.request?console.error("Request error:",t.request):console.error("Error message:",t.message)}})()}),[P]);const Ne=async e=>{const s=e.target.value;e.target.checked?Q((e=>[...e,s])):Q((e=>e.filter((e=>e!==s))))},{t:be}=(0,m.Bd)();(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),h.A.language!==e&&h.A.changeLanguage(e)}),[h.A,be]);const Se=e=>{const s=new Date(e),a=new Date;let t=a.getFullYear()-s.getFullYear();const l=a.getMonth()-s.getMonth();return(l<0||0===l&&a.getDate()<s.getDate())&&t--,t},[we,_e]=(0,t.useState)(!1),ke=()=>{_e(!1)},Ce=()=>{le(!1)};(0,t.useEffect)((()=>{Ae()}),[]);const Ae=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{const e=await u.A.post(b+"getGalleryallAlbum",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});me(e.data.results)}catch(a){a.response?console.error("Server Response Error:",a.response.data):a.request?console.error("No Response Received:",a.request):console.error("Request Error:",a.message)}},qe=ue.filter((e=>"Private_visible"!==e.visibility)),[Ee,Re]=(0,t.useState)(!1);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.A,{refreshNotifications:S}),ie&&(0,N.jsx)(y.A,{message:ne}),(0,N.jsx)("section",{className:"d-block searchmain gapy",children:(0,N.jsx)("div",{className:"container-lg",children:(0,N.jsxs)("div",{className:"row gy-4",children:[(0,N.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,N.jsx)("h1",{children:be("Gallery")}),(0,N.jsx)("div",{className:"filtersearch",children:(0,N.jsx)("form",{action:"",children:(0,N.jsx)("input",{type:"text",value:Y,onInput:e=>(async e=>{W(e);let s={search:e,user_id:q.id};try{var a=(await u.A.post(b+"getgallerySearch",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})(e.target.value),placeholder:be("Search_gallery")})})}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,N.jsxs)(l.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,N.jsx)(p.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h4",{children:be("Home")})})]}),(0,N.jsxs)(l.N_,{to:"/allgallery",className:"d-flex gap-2 align-items-center filterlist ",onClick:()=>he(0),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:i,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:be("All_images")})})]}),(0,N.jsxs)(l.N_,{to:"/gallery",className:"d-flex gap-2 align-items-center filterlist active",onClick:()=>he(1),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:d,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:be("Your_images")})})]}),(0,N.jsx)("div",{className:"newebentbtn d-block",children:(0,N.jsx)("button",{type:"button",onClick:()=>{ge(!0),document.body.style.overflowY="hidden"},children:be("Upload_new_images")})}),(0,N.jsx)("hr",{className:"linehr"}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,N.jsxs)("h6",{children:[" ",be("Filters")]}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,N.jsxs)("div",{className:"listbox d-flex flex-column gap-3",children:[(0,N.jsxs)("label",{className:"cbox",children:[be("Men"),(0,N.jsx)("input",{type:"checkbox",name:"labels",value:"Male",checked:P.includes("Male"),onChange:Ne}),(0,N.jsx)("span",{className:"checkmark"})]}),(0,N.jsxs)("label",{className:"cbox",children:[be("Women"),(0,N.jsx)("input",{type:"checkbox",name:"labels",value:"Female",checked:P.includes("Female"),onChange:Ne}),(0,N.jsx)("span",{className:"checkmark"})]}),(0,N.jsxs)("label",{className:"cbox",children:[be("Couples"),(0,N.jsx)("input",{type:"checkbox",name:"labels",value:"Couple",checked:P.includes("Couple"),onChange:Ne}),(0,N.jsx)("span",{className:"checkmark"})]})]})})]})]})]})}),(0,N.jsx)("div",{className:"col-md-9",children:(0,N.jsx)("div",{className:"row gy-4",children:0===O.length?(0,N.jsx)("div",{className:"col-12 text-center",children:(0,N.jsx)("h2",{children:be("No_gallery_found")})}):O.map(((e,s)=>(0,N.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,N.jsxs)("div",{className:"position-relative search_content",children:[(0,N.jsx)("div",{className:"d-block searchimg h-100",onClick:()=>fe(e.id),children:e.image&&"string"===typeof e.image?(0,N.jsx)(g.A,{className:"w-100 h-100 object-fit-cover",url:e.image}):(0,N.jsx)("p",{children:be("No_avalibale_media")})}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2 searchgender_main",children:[(0,N.jsx)("div",{className:"d-block searchwomen flex-shrink-0",children:"Couple"===e.gender?(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex searchwomen justify-content-between",children:[(0,N.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}),(0,N.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"})]})}):"Male"===e.gender?(0,N.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}):"Female"===e.gender?(0,N.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"}):null}),(0,N.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,N.jsx)("button",{type:"button",className:"btnoption",onClick:()=>(e=>{_e(e)})(s),children:(0,N.jsx)(x.aQx,{})}),we===s&&(0,N.jsxs)("ul",{className:"popup-menu",children:[(0,N.jsx)("li",{onClick:()=>((e,s)=>{K(e),re(s),le(!0)})(e.id,e.image),children:be("MOve_to")}),(0,N.jsx)("li",{onClick:ke,children:be("Cancel")})]})]})]}),(0,N.jsx)("div",{className:"d-flex align-items-start gap-3 justify-content-between px-3 searchusere",children:(0,N.jsxs)("div",{className:"d-flex align-items-start justify-content-between w-100 gap-2",children:[(0,N.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,N.jsx)(l.N_,{className:"unamecolor",target:"_blank",to:`/friend/${e.user_id}`,children:e.username})," ",(0,N.jsx)("p",{children:"Couple"===e.gender?`${Se(e.birthday_date)} & ${Se(e.birthday_date_her)},`:e.birthday_date?`${Se(e.birthday_date)},`:""})]}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2",children:null!==e.location&&(0,N.jsx)("p",{children:e.location})})]})})]})},s)))})})]})})}),(0,N.jsx)(c.E,{isOpen1:xe,onClose1:()=>{je(!1),document.body.style.overflowY="auto"},seperateGallerydetail:G,UserDetail:C,LoginData:q,getUserfav:async()=>{fe(R)},GalleryCommets:D,getCommentPost:async()=>{fe(R)},GalleryIdDetailGet:R,previousId:U,nextId:B,getgallerydetialnext:()=>{fe(B)},getgallerydetialprev:()=>{fe(U)}}),(0,N.jsx)(n.j,{isOpen:pe,onClose:()=>{ge(!1),document.body.style.overflowY="auto"},LoginData:q,notification:async()=>{w((e=>!e))},visibleAlbums:qe}),(0,N.jsx)(f.x,{isOpen:Ee,onClose:()=>{Re(!1),document.body.style.overflowY="auto"},LoginData:q,closepopup11:async()=>{Re(!1),document.body.style.overflowY="auto"}}),(0,N.jsx)(r.w,{}),(0,N.jsxs)(j.A,{show:te,className:"edit_admin",onHide:Ce,children:[(0,N.jsx)(j.A.Header,{closeButton:!0,children:(0,N.jsxs)(j.A.Title,{className:"textcolor",children:[" ",be("Upload")]})}),(0,N.jsx)(j.A.Body,{children:(0,N.jsxs)("form",{onSubmit:async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let a={file:oe,id:se,user_id:s.id,galleryIdd:z};try{const e=await u.A.post(b+"gallerymovetoAlbum",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});de(!0),ce(e.data.message),setTimeout((()=>{de(!1),le(!1)}),1e3)}catch(t){t.response?console.error("Server Response Error:",t.response.data):t.request?console.error("No Response Received:",t.request):console.error("Request Error:",t.message)}},method:"post",action:"javascript:void(0)",children:[(0,N.jsxs)("div",{className:"row g-3",children:[" ",(0,N.jsxs)("div",{className:"col-md-12",children:[(0,N.jsxs)("label",{className:"stextlabel text-dark",children:[be("MOve_to")," *"]}),(0,N.jsxs)("select",{required:!0,className:"form-control",onChange:e=>{ae(e.target.value)},name:"move_to",children:[(0,N.jsx)("option",{value:"",children:"--Select--"}),qe.map(((e,s)=>(0,N.jsx)("option",{value:e.id,children:e.name},s)))]})]})]}),(0,N.jsx)("span",{className:"text-success",children:V}),Z&&(0,N.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,N.jsxs)("span",{className:"visually-hidden",children:[be("loading"),"..."]})}),(0,N.jsxs)(j.A.Footer,{children:[(0,N.jsx)(v.A,{variant:"secondary",onClick:Ce,children:be("Close")}),(0,N.jsx)(v.A,{type:"submit",style:{background:"#6e75a8"},className:"",children:be("Move")})]})]})})]})]})}}}]);
//# sourceMappingURL=8071.a8671214.chunk.js.map