"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[1929],{1929:(e,s,l)=>{l.r(s),l.d(s,{default:()=>u});var a=l(65043),t=l(94060),d=l(44710),n=(l(38421),l(53579)),i=l(86213),r=l(73216),c=l(25581),o=l(6058),m=l(76361),h=l(59042),x=l(70579);function u(){var e,s,l,m,h,u,v,j,p,b,N,y,g,_,f,w,C,S,P,F,k,$,A,D,T,I,V,R,M,O,E,U,B,W,z,L,J,Y,q,H,G,K,Z,Q,X,ee,se,le,ae,te,de,ne,ie,re,ce,oe,me,he;const{id:xe}=(0,r.g)(),ue=(0,r.Zp)(),ve=`${c.J}api/user/capitalround/`,je=localStorage.getItem("SignatoryLoginData"),pe=je?JSON.parse(je):null,[be,Ne]=(0,a.useState)(!0),[ye,ge]=(0,a.useState)(null),[_e,fe]=(0,a.useState)({pre_money:{items:[],totals:{}},post_money:{items:[],totals:{}}}),[we,Ce]=(0,a.useState)(null),[Se,Pe]=(0,a.useState)([]),[Fe,ke]=(0,a.useState)({}),[$e,Ae]=(0,a.useState)(null),[De,Te]=(0,a.useState)(null),[Ie,Ve]=(0,a.useState)(null),[Re,Me]=(0,a.useState)("pre-money"),[Oe,Ee]=(0,a.useState)(!1),[Ue,Be]=(0,a.useState)(null),We=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";const l=(null===s||void 0===s?void 0:s.trim().split(" ")[0])||"USD",a=["USD","CAD","EUR","GBP","INR","AUD","JPY"].includes(l.toUpperCase())?l.toUpperCase():"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(e||0)}catch(ye){return`${a} ${parseFloat(e||0).toFixed(2)}`}},ze=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";const l=(null===s||void 0===s?void 0:s.trim().split(" ")[0])||"USD",a=["USD","CAD","EUR","GBP","INR","AUD","JPY"].includes(l.toUpperCase())?l.toUpperCase():"USD";try{const s=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:3,maximumFractionDigits:3}).format(s)}catch(ye){return`${a} ${(parseFloat(e)||0).toFixed(3)}`}},Le=e=>e||0===e?`${parseFloat(e).toFixed(2)}%`:"0.00%",Je=e=>e||0===e?new Intl.NumberFormat("en-US").format(e):"0",Ye=(0,a.useCallback)((async()=>{if(!xe||!pe)return ge("Missing required parameters"),void Ne(!1);Ne(!0),ge(null);const e={company_id:pe.companies[0].id,round_id:xe};try{const d=await i.A.post(ve+"getRoundCapTableSingleRecord",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(d.data.success){var s,l,a,t;const e=d.data.cap_table||{pre_money:{items:[],totals:{}},post_money:{items:[],totals:{}}};if(console.log(d.data),fe(e),Be(d.data.conversion_status),Ce(d.data.round||null),Pe(d.data.pending_conversions||[]),ke(d.data.calculations||{}),console.log(d.data),Ze(d.data),(null===e||void 0===e||null===(s=e.pre_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l.length)>0){const s={labels:e.pre_money.items.map((e=>e.name)),datasets:[{label:"Shares",data:e.pre_money.items.map((e=>e.shares)),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8AC926","#1982C4"],borderWidth:1}]};Te(s)}if((null===e||void 0===e||null===(a=e.post_money)||void 0===a||null===(t=a.items)||void 0===t?void 0:t.length)>0){const s={labels:e.post_money.items.map((e=>e.name)),datasets:[{label:"Shares",data:e.post_money.items.map((e=>e.shares)),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8AC926","#1982C4"],borderWidth:1}]};Ve(s)}}else ge(d.data.message||"Failed to load cap table")}catch(r){var d,n;ge((null===(d=r.response)||void 0===d||null===(n=d.data)||void 0===n?void 0:n.message)||"Error loading cap table data"),console.error("API Error:",r)}finally{Ne(!1)}}),[xe,pe,ve]),qe="Safe"===(null===we||void 0===we?void 0:we.instrument)||"Convertible Note"===(null===we||void 0===we?void 0:we.instrument),He=!0===(null===Ue||void 0===Ue?void 0:Ue.is_converted);let Ge="",Ke="";qe?He?(Ge=Ue.conversion_price,Ke=Ue.converted_shares):(Ge="N/A",Ke="N/A"):(Ge=null===we||void 0===we?void 0:we.share_price,Ke=null===we||void 0===we?void 0:we.issued_shares);const Ze=e=>{if(!e.cap_table||!e.round)return;const s=e.cap_table.pre_money,l=e.cap_table.post_money,a=e.round,t=parseFloat(a.pre_money)||0,d=t+(parseFloat(a.investment)||0),n=s.totals.total_shares||0,i=l.totals.total_shares||0,r=n>0?t/n:0,c=i>0?d/i:0,o=s.items.filter((e=>"founder"===e.type)).reduce(((e,s)=>e+s.shares),0),m=o*r,h=o*c,x=l.items.filter((e=>"investor"===e.type)).reduce(((e,s)=>e+s.shares),0)*c,u=l.totals.total_option_pool||0;Ae({founderValuePre:m,founderValuePost:h,investorValue:x,optionPoolValue:u*c,sharePricePre:r,sharePricePost:c,totalSharesPre:n,totalSharesPost:i})};return(0,a.useEffect)((()=>{Ye()}),[]),be?(0,x.jsx)(n.mO,{children:(0,x.jsx)("div",{className:"fullpage d-block",children:(0,x.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,x.jsx)(d.A,{isCollapsed:Oe,setIsCollapsed:Ee}),(0,x.jsxs)("div",{className:"global_view "+(Oe?"global_view_col":""),children:[(0,x.jsx)(t.A,{}),(0,x.jsx)(n.$K,{className:"d-block p-md-4 p-3",children:(0,x.jsxs)("div",{className:"text-center py-5",children:[(0,x.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,x.jsx)("p",{className:"mt-3",children:"Loading Cap Table Data..."})]})})]})]})})}):ye&&!we?(0,x.jsx)(n.mO,{children:(0,x.jsx)("div",{className:"fullpage d-block",children:(0,x.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,x.jsx)(d.A,{isCollapsed:Oe,setIsCollapsed:Ee}),(0,x.jsxs)("div",{className:"global_view "+(Oe?"global_view_col":""),children:[(0,x.jsx)(t.A,{}),(0,x.jsx)(n.$K,{className:"d-block p-md-4 p-3",children:(0,x.jsxs)("div",{className:"alert alert-danger",children:[(0,x.jsx)("h5",{children:"Error Loading Cap Table"}),(0,x.jsx)("p",{children:ye}),(0,x.jsx)("button",{className:"btn btn-primary",onClick:()=>ue(-1),children:"Go Back"}),(0,x.jsx)("button",{className:"btn btn-secondary ms-2",onClick:Ye,children:"Try Again"})]})})]})]})})}):(0,x.jsx)(n.mO,{children:(0,x.jsx)("div",{className:"fullpage d-block",children:(0,x.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,x.jsx)(d.A,{isCollapsed:Oe,setIsCollapsed:Ee}),(0,x.jsxs)("div",{className:"global_view "+(Oe?"global_view_col":""),children:[(0,x.jsx)(t.A,{}),(0,x.jsxs)(n.$K,{className:"d-block p-md-4 p-3",children:[ye&&(0,x.jsxs)("div",{className:"alert alert-danger mb-4",children:[(0,x.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),ye]}),we&&(0,x.jsxs)("div",{className:"card mb-4",children:[(0,x.jsx)("div",{className:"card-header bg-primary text-white",children:(0,x.jsxs)("h4",{className:"mb-0",children:["Round: ",we.name]})}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Type:"})," ",we.instrument]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Status:"}),(0,x.jsx)("span",{className:`badge ${"CLOSED"===we.status?"bg-success":"bg-warning"} ms-2`,children:we.status||"ACTIVE"})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Date:"})," ",function(e){const s=new Date(e);if(isNaN(s))return"";const l=s.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],t=s.getFullYear();let d=s.getHours();const n=s.getMinutes().toString().padStart(2,"0"),i=(s.getSeconds().toString().padStart(2,"0"),d>=12?"PM":"AM");return d%=12,d=d||12,`${a} ${l}${(e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(l)}, ${t} ${d}:${n} ${i}`}(we.date)||"Not specified"]})]}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Pre-Money:"})," ",We(we.pre_money,we.currency)]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Investment:"})," ",We(we.investment,we.currency)]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Post-Money:"})," ",We(we.post_money,we.currency)]})]}),(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Share Price:"})," ",qe&&!He?"N/A":ze(Ge,null===we||void 0===we?void 0:we.currency)]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Issued Shares:"})," ",qe&&!He?"N/A":Je(Ke)]}),qe&&(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Status:"})," ",(0,x.jsx)("span",{className:He?"text-success":"text-warning",children:(null===Ue||void 0===Ue?void 0:Ue.message)||(He?"\u2705 Converted":"\u23f3 Not Converted")})]}),qe&&He&&(0,x.jsx)("div",{className:"mt-2 p-2 bg-light rounded",children:(0,x.jsxs)("small",{children:[(0,x.jsx)("strong",{children:"Converted in:"})," Round ",Ue.converted_in_round," (",Ue.converted_round_name,")",(0,x.jsx)("br",{}),(0,x.jsx)("strong",{children:"Conversion Price:"})," ",ze(Ue.conversion_price,null===we||void 0===we?void 0:we.currency),(0,x.jsx)("br",{}),(0,x.jsx)("strong",{children:"Converted Shares:"})," ",Je(Ue.converted_shares)]})}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Option Pool:"})," ",Le(we.option_pool_percent||0)]})]})]})})]}),(0,x.jsx)("div",{className:"mb-4",children:(0,x.jsxs)("ul",{className:"nav nav-tabs gap-1",children:["Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsx)("li",{className:"nav-item bg-primary",children:(0,x.jsx)("button",{className:"nav-link text-white backcolor "+("pre-money"===Re?"active":""),onClick:()=>Me("pre-money"),children:"Pre-Money Cap Table"})}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsx)("li",{className:"nav-item bg-primary",children:(0,x.jsx)("button",{className:"nav-link text-white backcolor "+("post-money"===Re?"active":""),onClick:()=>Me("post-money"),children:"Post-Money Cap Table"})}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsx)("li",{className:"nav-item bg-primary",children:(0,x.jsx)("button",{className:"nav-link text-white backcolor "+("summary"===Re?"active":""),onClick:()=>Me("summary"),children:"Chat & Analysis"})}),Se.length>0&&(0,x.jsx)("li",{className:"nav-item bg-primary",children:(0,x.jsx)("button",{className:"nav-link  text-white backcolor "+("pending"===Re?"active":""),onClick:()=>Me("pending"),children:"Pending Conversions"})})]})}),"pre-money"===Re&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header bg-light",children:[(0,x.jsx)("h5",{className:"mb-0",children:"Pre-Money Capitalization Table"}),(0,x.jsx)("small",{className:"text-muted",children:"Share ownership before this round's investment"})]}),(0,x.jsx)("div",{className:"card-body",children:0===_e.pre_money.items.length?(0,x.jsx)("div",{className:"text-center py-4",children:(0,x.jsx)("p",{className:"text-muted",children:"No pre-money cap table data available"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"table-responsive mt-4",children:(0,x.jsxs)("table",{className:"table table-striped table-hover",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"#"}),(0,x.jsx)("th",{children:"Founder"}),(0,x.jsx)("th",{className:"text-end",children:"Shares"}),(0,x.jsx)("th",{className:"text-end",children:"Ownership %"}),(0,x.jsx)("th",{children:"Details"})]})}),(0,x.jsxs)("tbody",{children:[_e.pre_money.items.filter((e=>"founder"===e.type)).map(((e,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("span",{className:"badge bg-info me-2",children:e.founder_code||`F${s+1}`})}),(0,x.jsx)("td",{children:(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{children:e.name}),e.email&&(0,x.jsx)("div",{className:"small text-muted",children:e.email})]})}),(0,x.jsx)("td",{className:"text-end",children:Je(e.shares)}),(0,x.jsx)("td",{className:"text-end",children:Le(e.percentage)}),(0,x.jsx)("td",{children:(0,x.jsxs)("div",{className:"small",children:[(0,x.jsxs)("div",{children:["Type: ",e.share_type||"common"]}),(0,x.jsxs)("div",{children:["Voting: ",e.voting||"voting"]})]})})]},s))),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&_e.pre_money.items.filter((e=>"founder"!==e.type)).map(((e,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("span",{className:`badge ${"investor"===e.type?"bg-success":"bg-warning"} me-2`,children:"investor"===e.type?"I":"O"})}),(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{className:"text-end",children:Je(e.shares)}),(0,x.jsx)("td",{className:"text-end",children:Le(e.percentage)}),(0,x.jsx)("td",{children:e.round_name})]},`other-${s}`)))]}),(0,x.jsx)("tfoot",{className:"table-light",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{colSpan:"2",children:"TOTAL"}),(0,x.jsx)("th",{className:"text-end",children:Je(_e.pre_money.totals.total_shares)}),(0,x.jsx)("th",{className:"text-end",children:"100%"}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{})]})})]})}),"Round 0"===(null===we||void 0===we?void 0:we.type)&&(0,x.jsx)("div",{className:"row mb-4",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,x.jsxs)("div",{className:"card-header bg-white border-0 d-flex justify-content-between align-items-center py-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h6",{className:"mb-0 fw-bold text-dark",children:[(0,x.jsx)("i",{className:"bi bi-pie-chart-fill text-primary me-2"}),"Founder Ownership Distribution - Round 0"]}),(0,x.jsx)("p",{className:"text-muted mb-0 small",children:"Initial share allocation"})]}),(0,x.jsxs)("span",{className:"badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill",children:[(0,x.jsx)("i",{className:"bi bi-shield me-1"}),Je((null===_e||void 0===_e||null===(e=_e.pre_money)||void 0===e||null===(s=e.totals)||void 0===s?void 0:s.total_shares)||0)," shares"]})]}),(0,x.jsx)("div",{className:"card-body p-4",children:(null===_e||void 0===_e||null===(l=_e.pre_money)||void 0===l||null===(m=l.items)||void 0===m?void 0:m.length)>0?(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-7",children:(0,x.jsx)("div",{style:{height:"350px",position:"relative"},children:(0,x.jsx)(o.Fq,{data:{labels:_e.pre_money.items.map((e=>e.name||e.founder_code||`Item ${_e.pre_money.items.indexOf(e)+1}`)),datasets:[{data:_e.pre_money.items.map((e=>e.shares)),backgroundColor:["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1","#fd7e14","#20c9a6","#858796","#5a5c69","#2c9faf","#b58df1"],borderWidth:1,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{datalabels:{display:function(e){const s=e.dataset,l=s.data.reduce(((e,s)=>e+s),0);return s.data[e.dataIndex]/l*100>=5},formatter:function(e,s){return(e/s.dataset.data.reduce(((e,s)=>e+s),0)*100).toFixed(1)+"%"},color:"#fff",font:{weight:"bold",size:12},textShadow:"1px 1px 2px rgba(0,0,0,0.8)",padding:8,backgroundColor:"rgba(0,0,0,0.3)",borderRadius:6},legend:{position:"right",labels:{padding:20,usePointStyle:!0,pointStyle:"circle",font:{size:12},generateLabels:function(e){const s=e.data;return s.labels.length&&s.datasets.length?s.labels.map(((l,a)=>{var t,d;const n=s.datasets[0].data[a],i=s.datasets[0].data.reduce(((e,s)=>e+s),0),r=i>0?(n/i*100).toFixed(1):0,c=null===_e||void 0===_e||null===(t=_e.pre_money)||void 0===t||null===(d=t.items)||void 0===d?void 0:d[a];let o=l;return null!==c&&void 0!==c&&c.founder_code&&(o=`${c.founder_code} - ${c.name}`),{text:`\ud83d\udc64  ${o}: ${r}%`,fillStyle:s.datasets[0].backgroundColor[a],strokeStyle:s.datasets[0].backgroundColor[a],lineWidth:1,hidden:e.getDatasetMeta(0).data[a].hidden,index:a,fontColor:"#333"}})):[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255,255,255,0.1)",borderWidth:1,cornerRadius:8,padding:12,displayColors:!0,callbacks:{label:function(e){var s,l;const a=e.label||"",t=e.parsed||0,d=e.dataset.data.reduce(((e,s)=>e+s),0),n=d>0?(t/d*100).toFixed(2):0,i=e.dataIndex,r=null===_e||void 0===_e||null===(s=_e.pre_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[i],c=(null===r||void 0===r?void 0:r.share_price)||(null===we||void 0===we?void 0:we.share_price)||0,o=t*c;return[`\ud83d\udcca ${a}`,`Shares: ${Je(t)}`,`Ownership: ${n}%`,`Value: ${We(o,null===we||void 0===we?void 0:we.currency)}`,`Price/Share: ${ze(c,null===we||void 0===we?void 0:we.currency)}`]},title:function(e){var s,l;const a=e[0].dataIndex,t=null===_e||void 0===_e||null===(s=_e.pre_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[a];return"founder"===(null===t||void 0===t?void 0:t.type)?`\ud83d\udc64 Founder: ${t.founder_code||""} ${t.name}`:(null===t||void 0===t?void 0:t.name)||e[0].label}}}}}})})}),(0,x.jsx)("div",{className:"col-md-5",children:(0,x.jsxs)("div",{className:"bg-light bg-opacity-50 rounded-3 p-4 h-100",children:[(0,x.jsxs)("h6",{className:"fw-bold mb-3 d-flex align-items-center",children:[(0,x.jsx)("i",{className:"bi bi-people-fill me-2 text-primary"}),"Founder Details"]}),(0,x.jsx)("div",{className:"legend-list",style:{maxHeight:"280px",overflowY:"auto"},children:null===_e||void 0===_e||null===(h=_e.pre_money)||void 0===h||null===(u=h.items)||void 0===u?void 0:u.filter((e=>"founder"===e.type)).map(((e,s)=>{const l=_e.pre_money.totals.total_shares||1,a=((e.shares||0)/l*100).toFixed(1),t=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1","#fd7e14","#20c9a6"],d=t[s%t.length];return(0,x.jsxs)("div",{className:"d-flex align-items-center mb-3 p-2 bg-white rounded-3 shadow-sm",children:[(0,x.jsx)("div",{className:"me-3 flex-shrink-0 d-flex align-items-center justify-content-center rounded-circle",style:{width:"40px",height:"40px",backgroundColor:`${d}20`,color:d},children:(0,x.jsx)("span",{className:"fw-bold",children:e.founder_code||`F${s+1}`})}),(0,x.jsxs)("div",{className:"flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,x.jsx)("span",{className:"fw-semibold",children:e.name}),(0,x.jsxs)("span",{className:"badge bg-primary rounded-pill",children:[a,"%"]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsxs)("small",{className:"text-muted",children:[Je(e.shares||0)," shares"]}),e.email&&(0,x.jsx)("small",{className:"text-muted",children:e.email})]}),(0,x.jsx)("div",{className:"progress mt-2",style:{height:"4px"},children:(0,x.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:`${a}%`,backgroundColor:d},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})})]})]},s)}))}),(0,x.jsxs)("div",{className:"mt-3 pt-3 border-top",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,x.jsx)("span",{className:"text-muted",children:"Total Founders:"}),(0,x.jsx)("span",{className:"fw-bold",children:(null===_e||void 0===_e||null===(v=_e.pre_money)||void 0===v||null===(j=v.items)||void 0===j?void 0:j.filter((e=>"founder"===e.type)).length)||0})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,x.jsx)("span",{className:"text-muted",children:"Total Shares:"}),(0,x.jsx)("span",{className:"fw-bold",children:Je((null===_e||void 0===_e||null===(p=_e.pre_money)||void 0===p||null===(b=p.totals)||void 0===b?void 0:b.total_shares)||0)})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsx)("span",{className:"text-muted",children:"Share Price:"}),(0,x.jsx)("span",{className:"fw-bold text-primary",children:ze((null===we||void 0===we?void 0:we.share_price)||0,null===we||void 0===we?void 0:we.currency)})]})]})]})})]}):(0,x.jsxs)("div",{className:"text-center py-5",children:[(0,x.jsx)("i",{className:"bi bi-pie-chart text-muted",style:{fontSize:"3rem"}}),(0,x.jsx)("p",{className:"mt-3 text-muted",children:"No founder data available"})]})})]})})}),(0,x.jsxs)("div",{className:"row mt-4",children:[(0,x.jsx)("div",{className:(null===we||void 0===we||we.type,"col-md-3"),children:(0,x.jsx)("div",{className:"card bg-primary text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Total Value"}),(0,x.jsx)("h4",{className:"card-title",children:We(_e.pre_money.totals.total_value,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("p",{className:"card-text",children:"Pre-Money Valuation"})]})})}),(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"card bg-info text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Founders"}),(0,x.jsx)("h4",{className:"card-title",children:Je(_e.pre_money.totals.total_founders)}),(0,x.jsx)("p",{className:"card-text",children:Le(_e.pre_money.totals.total_founders/_e.pre_money.totals.total_shares*100)})]})})}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsxs)(x.Fragment,{children:[_e.pre_money.totals.total_investors>0&&(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"card bg-success text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Investors"}),(0,x.jsx)("h4",{className:"card-title",children:Je(_e.pre_money.totals.total_investors)}),(0,x.jsx)("p",{className:"card-text",children:Le(_e.pre_money.totals.total_investors/_e.pre_money.totals.total_shares*100)})]})})}),_e.pre_money.totals.total_option_pool>0&&(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"card bg-warning text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Option Pool"}),(0,x.jsx)("h4",{className:"card-title",children:Je(_e.pre_money.totals.total_option_pool)}),(0,x.jsx)("p",{className:"card-text",children:Le(_e.pre_money.totals.total_option_pool/_e.pre_money.totals.total_shares*100)})]})})})]})]})]})})]}),"post-money"===Re&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header bg-light",children:[(0,x.jsx)("h5",{className:"mb-0",children:"Post-Money Capitalization Table"}),(0,x.jsx)("small",{className:"text-muted",children:"Share ownership after this round's investment"})]}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",{className:"table table-striped table-hover",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Shareholder"}),(0,x.jsx)("th",{className:"text-end",children:"Shares"}),(0,x.jsx)("th",{className:"text-end",children:"New Shares"}),(0,x.jsx)("th",{className:"text-end",children:"Ownership %"}),(0,x.jsx)("th",{className:"text-end",children:"Currency Value"}),(0,x.jsx)("th",{children:"Round"})]})}),(0,x.jsx)("tbody",{children:_e.post_money.items.map(((e,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{children:[(0,x.jsx)("span",{className:`badge ${"founder"===e.type?"bg-info":"investor"===e.type?"bg-success":"option_pool"===e.type?"bg-warning":"bg-secondary"} me-2`,children:"founder"===e.type?"F":"investor"===e.type?"I":"option_pool"===e.type?"O":"P"}),e.name]}),(0,x.jsx)("td",{className:"text-end",children:Je(e.shares)}),(0,x.jsx)("td",{className:"text-end",children:e.new_shares>0?(0,x.jsxs)("span",{className:"badge bg-success",children:["+",Je(e.new_shares)]}):"0"}),(0,x.jsx)("td",{className:"text-end",children:Le(e.percentage)}),(0,x.jsx)("td",{className:"text-end",children:We(e.value,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{children:e.round_name})]},s)))}),(0,x.jsx)("tfoot",{className:"table-light",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"TOTAL"}),(0,x.jsx)("th",{className:"text-end",children:Je(_e.post_money.totals.total_shares)}),(0,x.jsx)("th",{className:"text-end",children:(0,x.jsxs)("span",{className:"badge bg-success",children:["+",Je(_e.post_money.totals.total_new_shares||0)]})}),(0,x.jsx)("th",{className:"text-end",children:"100%"}),(0,x.jsx)("th",{className:"text-end",children:We(_e.post_money.totals.total_value,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{})]})})]})}),(0,x.jsxs)("div",{className:"row mt-4",children:[(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-primary text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Total Shares"}),(0,x.jsx)("h4",{className:"card-title",children:Je(_e.post_money.totals.total_shares)})]})})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-success text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"New Shares"}),(0,x.jsxs)("h4",{className:"card-title",children:["+",Je(_e.post_money.totals.total_new_shares||0)]})]})})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-info text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Founders"}),(0,x.jsx)("h4",{className:"card-title",children:Le(_e.post_money.totals.total_founders/_e.post_money.totals.total_shares*100)})]})})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-warning text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Investors"}),(0,x.jsx)("h4",{className:"card-title",children:Le(_e.post_money.totals.total_investors/_e.post_money.totals.total_shares*100)})]})})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-secondary text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Option Pool"}),(0,x.jsx)("h4",{className:"card-title",children:Le(_e.post_money.totals.total_option_pool/_e.post_money.totals.total_shares*100)})]})})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("div",{className:"card bg-dark text-white",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2",children:"Total Value"}),(0,x.jsx)("h4",{className:"card-title",children:We(_e.post_money.totals.total_value,null===we||void 0===we?void 0:we.currency)})]})})})]})]})]}),"summary"===Re&&$e&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header bg-light",children:[(0,x.jsx)("h5",{className:"mb-0",children:"CPAVATE Calculation Summary"}),(0,x.jsx)("small",{className:"text-muted",children:"Detailed breakdown based on CPAVATE formulas"})]}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"row mb-4",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:"Pre-Money Valuation"}),(0,x.jsx)("h4",{className:"card-title text-primary",children:We(Fe.pre_money_valuation,null===we||void 0===we?void 0:we.currency)})]})})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:"Investment"}),(0,x.jsx)("h4",{className:"card-title text-success",children:We(null===we||void 0===we?void 0:we.investment,null===we||void 0===we?void 0:we.currency)})]})})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:"Post-Money Valuation"}),(0,x.jsx)("h4",{className:"card-title text-info",children:We(Fe.post_money_valuation,null===we||void 0===we?void 0:we.currency)})]})})})]}),(0,x.jsxs)("div",{className:"row mb-4",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("h6",{className:"mb-0",children:"Share Price Calculation"})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Pre-Money Share Price:"})}),(0,x.jsxs)("p",{className:"mb-0",children:[We(Fe.pre_money_valuation,null===we||void 0===we?void 0:we.currency)," \xf7 ",Je($e.totalSharesPre)," shares =",(0,x.jsx)("strong",{className:"ms-2",children:ze($e.sharePricePre,null===we||void 0===we?void 0:we.currency)})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Post-Money Share Price:"})}),(0,x.jsxs)("p",{className:"mb-0",children:[We(Fe.post_money_valuation,null===we||void 0===we?void 0:we.currency)," \xf7 ",Je($e.totalSharesPost)," shares =",(0,x.jsx)("strong",{className:"ms-2",children:ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)})]})]})]})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("h6",{className:"mb-0",children:"Shareholder Values"})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Founder Value (Pre-Money):"})}),(0,x.jsxs)("p",{className:"mb-0",children:[Je(_e.pre_money.totals.total_founders)," shares \xd7 ",ze($e.sharePricePre,null===we||void 0===we?void 0:we.currency)," =",(0,x.jsx)("strong",{className:"ms-2 text-primary",children:We($e.founderValuePre,null===we||void 0===we?void 0:we.currency)})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Founder Value (Post-Money):"})}),(0,x.jsxs)("p",{className:"mb-0",children:[Je(_e.post_money.totals.total_founders)," shares \xd7 ",ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)," =",(0,x.jsx)("strong",{className:"ms-2 text-success",children:We($e.founderValuePost,null===we||void 0===we?void 0:we.currency)})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Investor Value (Post-Money):"})}),(0,x.jsxs)("p",{className:"mb-0",children:[Je(_e.post_money.totals.total_investors)," shares \xd7 ",ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)," =",(0,x.jsx)("strong",{className:"ms-2 text-warning",children:We($e.investorValue,null===we||void 0===we?void 0:we.currency)})]})]})]})]})})]}),(0,x.jsxs)("div",{className:"card mb-4",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("h6",{className:"mb-0",children:"Detailed Ownership Breakdown"})}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",{className:"table table-sm",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Shareholder Type"}),(0,x.jsx)("th",{className:"text-end",children:"Shares"}),(0,x.jsx)("th",{className:"text-end",children:"% Ownership"}),(0,x.jsx)("th",{className:"text-end",children:"Value (Post-Money)"}),(0,x.jsx)("th",{className:"text-end",children:"Value per Share"})]})}),(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("strong",{children:"Founders"})}),(0,x.jsx)("td",{className:"text-end",children:Je(_e.post_money.totals.total_founders)}),(0,x.jsx)("td",{className:"text-end",children:Le(_e.post_money.totals.total_founders/$e.totalSharesPost*100)}),(0,x.jsx)("td",{className:"text-end text-primary",children:We($e.founderValuePost,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{className:"text-end",children:ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("strong",{children:"Investors"})}),(0,x.jsx)("td",{className:"text-end",children:Je(_e.post_money.totals.total_investors)}),(0,x.jsx)("td",{className:"text-end",children:Le(_e.post_money.totals.total_investors/$e.totalSharesPost*100)}),(0,x.jsx)("td",{className:"text-end text-success",children:We($e.investorValue,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{className:"text-end",children:ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("strong",{children:"Option Pool"})}),(0,x.jsx)("td",{className:"text-end",children:Je(_e.post_money.totals.total_option_pool)}),(0,x.jsx)("td",{className:"text-end",children:Le(_e.post_money.totals.total_option_pool/$e.totalSharesPost*100)}),(0,x.jsx)("td",{className:"text-end text-warning",children:We($e.optionPoolValue,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{className:"text-end",children:ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("tr",{className:"table-active",children:[(0,x.jsx)("td",{children:(0,x.jsx)("strong",{children:"TOTAL"})}),(0,x.jsx)("td",{className:"text-end",children:(0,x.jsx)("strong",{children:Je($e.totalSharesPost)})}),(0,x.jsx)("td",{className:"text-end",children:(0,x.jsx)("strong",{children:"100%"})}),(0,x.jsx)("td",{className:"text-end",children:(0,x.jsx)("strong",{children:We($e.totalSharesPost*$e.sharePricePost,null===we||void 0===we?void 0:we.currency)})}),(0,x.jsx)("td",{className:"text-end",children:(0,x.jsx)("strong",{children:ze($e.sharePricePost,null===we||void 0===we?void 0:we.currency)})})]})]})]})})})]}),(De||Ie)&&(0,x.jsxs)("div",{className:"row",children:[De&&(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,x.jsx)("h6",{className:"mb-0",children:"Pre-Money Distribution"}),(0,x.jsxs)("span",{className:"badge bg-primary",children:["Total: ",Je((null===_e||void 0===_e||null===(N=_e.pre_money)||void 0===N||null===(y=N.totals)||void 0===y?void 0:y.total_shares)||0)," shares"]})]}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-12",style:{height:"300px"},children:(0,x.jsx)(o.Fq,{data:De,options:{responsive:!0,maintainAspectRatio:!1,cutout:"50%",plugins:{datalabels:{display:function(e){const s=e.dataset,l=s.data.reduce(((e,s)=>e+s),0);return s.data[e.dataIndex]/l*100>=3},formatter:function(e,s){return(e/s.dataset.data.reduce(((e,s)=>e+s),0)*100).toFixed(1)+"%"},color:"#fff",font:{weight:"bold",size:11},textShadow:"1px 1px 2px rgba(0,0,0,0.8)",padding:6},legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#333",borderWidth:1,cornerRadius:6,padding:12,displayColors:!0,callbacks:{label:function(e){const s=e.label||"",l=e.parsed||0,a=e.dataset.data.reduce(((e,s)=>e+s),0),t=a>0?(l/a*100).toFixed(2):0,d=(null===we||void 0===we?void 0:we.share_price)||0,n=l*d;return[`${s}`,`Shares: ${Je(l)}`,`Ownership: ${t}%`,`Value: ${We(n,null===we||void 0===we?void 0:we.currency)}`,`Price/Share: ${ze(d,null===we||void 0===we?void 0:we.currency)}`]},title:function(e){var s,l;const a=e[0].dataIndex,t=null===_e||void 0===_e||null===(s=_e.pre_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[a];return"founder"===(null===t||void 0===t?void 0:t.type)?`\ud83d\udc64 Founder: ${t.name}`:"investor"===(null===t||void 0===t?void 0:t.type)?`\ud83d\udcb0 Investor: ${t.name}`:"option_pool"===(null===t||void 0===t?void 0:t.type)?`\ud83d\udcca Option Pool: ${t.name}`:e[0].label}}}}}})}),(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"chart-legend-permanent h-100",children:[(0,x.jsx)("h6",{className:"mb-3 text-center fw-semibold",children:"Ownership Distribution"}),(0,x.jsx)("div",{className:"legend-list",style:{maxHeight:"240px",overflowY:"auto"},children:null===_e||void 0===_e||null===(g=_e.pre_money)||void 0===g||null===(_=g.items)||void 0===_?void 0:_.map(((e,s)=>{const l=_e.pre_money.totals.total_shares||1,a=((e.shares||0)/l*100).toFixed(1),t=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8AC926","#1982C4","#6A0572","#118AB2","#06D6A0","#FFD166"],d=t[s%t.length];let n=e.name;return"founder"===e.type&&e.founder_code?n=`${e.founder_code} - ${e.name}`:"investor"===e.type?n=`\ud83d\udcb0 ${e.name}`:"option_pool"===e.type&&(n=`\ud83d\udcca ${e.name}`),(0,x.jsxs)("div",{className:"legend-item d-flex align-items-center mb-2 p-2 border rounded",children:[(0,x.jsx)("div",{className:"legend-color me-2 flex-shrink-0",style:{width:"14px",height:"14px",borderRadius:"50%",backgroundColor:d,border:"2px solid #fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),(0,x.jsxs)("div",{className:"legend-text flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsx)("small",{className:"fw-semibold text-truncate",style:{maxWidth:"100px"},children:n}),(0,x.jsxs)("span",{className:"badge bg-primary ms-2",children:[a,"%"]})]}),(0,x.jsxs)("small",{className:"text-muted d-block",children:[Je(e.shares||0)," shares"]}),"founder"===e.type&&e.email&&(0,x.jsx)("small",{className:"text-muted d-block",children:e.email})]})]},s)}))}),(0,x.jsxs)("div",{className:"legend-total mt-3 pt-3 border-top",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,x.jsx)("small",{className:"text-muted",children:"Total Shares:"}),(0,x.jsx)("small",{className:"fw-semibold",children:Je((null===_e||void 0===_e||null===(f=_e.pre_money)||void 0===f||null===(w=f.totals)||void 0===w?void 0:w.total_shares)||0)})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,x.jsx)("small",{className:"text-muted",children:"Share Price:"}),(0,x.jsx)("small",{className:"fw-semibold",children:ze((null===we||void 0===we?void 0:we.share_price)||0,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,x.jsx)("small",{className:"text-muted",children:"Total Value:"}),(0,x.jsx)("small",{className:"fw-semibold",children:We((null===_e||void 0===_e||null===(C=_e.pre_money)||void 0===C||null===(S=C.totals)||void 0===S?void 0:S.total_value)||0,null===we||void 0===we?void 0:we.currency)})]})]})]})})]}),(0,x.jsx)("div",{className:"mt-3",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Total Shares"})}),(0,x.jsx)("h6",{className:"mb-0",children:Je((null===_e||void 0===_e||null===(P=_e.pre_money)||void 0===P||null===(F=P.totals)||void 0===F?void 0:F.total_shares)||0)})]})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Share Price"})}),(0,x.jsx)("h6",{className:"mb-0",children:ze((null===we||void 0===we?void 0:we.share_price)||0,null===we||void 0===we?void 0:we.currency)})]})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Total Value"})}),(0,x.jsx)("h6",{className:"mb-0",children:We((null===_e||void 0===_e||null===(k=_e.pre_money)||void 0===k||null===($=k.totals)||void 0===$?void 0:$.total_value)||0,null===we||void 0===we?void 0:we.currency)})]})})]})})]})]})}),Ie&&(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,x.jsx)("h6",{className:"mb-0",children:"Post-Money Distribution"}),(0,x.jsxs)("span",{className:"badge bg-success",children:["Total: ",Je((null===_e||void 0===_e||null===(A=_e.post_money)||void 0===A||null===(D=A.totals)||void 0===D?void 0:D.total_shares)||0)," shares"]})]}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-12",style:{height:"300px"},children:(0,x.jsx)(o.Fq,{data:Ie,options:{responsive:!0,maintainAspectRatio:!1,cutout:"50%",plugins:{datalabels:{display:function(e){const s=e.dataset,l=s.data.reduce(((e,s)=>e+s),0);return s.data[e.dataIndex]/l*100>=3},formatter:function(e,s){return(e/s.dataset.data.reduce(((e,s)=>e+s),0)*100).toFixed(1)+"%"},color:"#fff",font:{weight:"bold",size:11},textShadow:"1px 1px 2px rgba(0,0,0,0.8)",padding:6},legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#333",borderWidth:1,cornerRadius:6,padding:12,displayColors:!0,callbacks:{label:function(e){const s=e.label||"",l=e.parsed||0,a=e.dataset.data.reduce(((e,s)=>e+s),0),t=a>0?(l/a*100).toFixed(2):0,d=(null===we||void 0===we?void 0:we.share_price)||0,n=l*d;return[`${s}`,`Shares: ${Je(l)}`,`Ownership: ${t}%`,`Value: ${We(n,null===we||void 0===we?void 0:we.currency)}`,`Price/Share: ${ze(d,null===we||void 0===we?void 0:we.currency)}`]},title:function(e){var s,l;const a=e[0].dataIndex,t=null===_e||void 0===_e||null===(s=_e.post_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[a];if(t){if("founder"===t.type)return`\ud83d\udc64 Founder: ${t.name}`;if("investor"===t.type)return`\ud83d\udcb0 Investor: ${t.name}`;if("option_pool"===t.type)return`\ud83d\udcca Option Pool: ${t.name}`}return e[0].label}}}}}})}),(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"chart-legend-permanent h-100",children:[(0,x.jsx)("h6",{className:"mb-3 text-center fw-semibold",children:"Ownership Distribution"}),(0,x.jsx)("div",{className:"legend-list",style:{maxHeight:"240px",overflowY:"auto"},children:null===_e||void 0===_e||null===(T=_e.post_money)||void 0===T||null===(I=T.items)||void 0===I?void 0:I.map(((e,s)=>{const l=_e.post_money.totals.total_shares||1,a=((e.shares||0)/l*100).toFixed(1),t=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8AC926","#1982C4","#6A0572","#118AB2","#06D6A0","#FFD166"],d=t[s%t.length];let n=e.name,i="";return"founder"===e.type?(i="\ud83d\udc64 ",e.founder_code&&(n=`${e.founder_code} - ${e.name}`)):"investor"===e.type?(i="\ud83d\udcb0 ",e.is_converted?n=`\ud83d\udd04 ${e.name} (Converted)`:e.is_new_investment&&(n=`\ud83c\udd95 ${e.name}`)):"option_pool"===e.type?i="\ud83d\udcca ":"pending"===e.type&&(i="\u23f3 "),(0,x.jsxs)("div",{className:"legend-item d-flex align-items-center mb-2 p-2 border rounded",children:[(0,x.jsx)("div",{className:"legend-color me-2 flex-shrink-0",style:{width:"14px",height:"14px",borderRadius:"50%",backgroundColor:d,border:"2px solid #fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),(0,x.jsxs)("div",{className:"legend-text flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsxs)("small",{className:"fw-semibold text-truncate",style:{maxWidth:"100px"},children:[i,n]}),(0,x.jsxs)("span",{className:"badge bg-success ms-2",children:[a,"%"]})]}),(0,x.jsxs)("small",{className:"text-muted d-block",children:[Je(e.shares||0)," shares",e.new_shares>0&&(0,x.jsxs)("span",{className:"text-success ms-2",children:["(+",Je(e.new_shares),")"]})]}),e.round_name&&"Founding Share Allocation"!==e.round_name&&(0,x.jsx)("small",{className:"text-muted d-block",children:e.round_name})]})]},s)}))}),(0,x.jsxs)("div",{className:"legend-total mt-3 pt-3 border-top",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,x.jsx)("small",{className:"text-muted",children:"Total Shares:"}),(0,x.jsx)("small",{className:"fw-semibold",children:Je((null===_e||void 0===_e||null===(V=_e.post_money)||void 0===V||null===(R=V.totals)||void 0===R?void 0:R.total_shares)||0)})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,x.jsx)("small",{className:"text-muted",children:"New Shares:"}),(0,x.jsxs)("small",{className:"fw-semibold text-success",children:["+",Je((null===_e||void 0===_e||null===(M=_e.post_money)||void 0===M||null===(O=M.totals)||void 0===O?void 0:O.total_new_shares)||0)]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,x.jsx)("small",{className:"text-muted",children:"Share Price:"}),(0,x.jsx)("small",{className:"fw-semibold",children:ze((null===we||void 0===we?void 0:we.share_price)||0,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,x.jsx)("small",{className:"text-muted",children:"Total Value:"}),(0,x.jsx)("small",{className:"fw-semibold",children:We((null===_e||void 0===_e||null===(E=_e.post_money)||void 0===E||null===(U=E.totals)||void 0===U?void 0:U.total_value)||0,null===we||void 0===we?void 0:we.currency)})]})]})]})})]}),(0,x.jsxs)("div",{className:"mt-3",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Total Shares"})}),(0,x.jsx)("h6",{className:"mb-0",children:Je((null===_e||void 0===_e||null===(B=_e.post_money)||void 0===B||null===(W=B.totals)||void 0===W?void 0:W.total_shares)||0)})]})}),(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"New Shares"})}),(0,x.jsxs)("h6",{className:"mb-0 text-success",children:["+",Je((null===_e||void 0===_e||null===(z=_e.post_money)||void 0===z||null===(L=z.totals)||void 0===L?void 0:L.total_new_shares)||0)]})]})}),(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Share Price"})}),(0,x.jsx)("h6",{className:"mb-0",children:ze((null===we||void 0===we?void 0:we.share_price)||0,null===we||void 0===we?void 0:we.currency)})]})}),(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Total Value"})}),(0,x.jsx)("h6",{className:"mb-0",children:We((null===_e||void 0===_e||null===(J=_e.post_money)||void 0===J||null===(Y=J.totals)||void 0===Y?void 0:Y.total_value)||0,null===we||void 0===we?void 0:we.currency)})]})})]}),(0,x.jsxs)("div",{className:"row mt-3",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Founders"})}),(0,x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,x.jsx)("div",{className:"rounded-circle bg-info me-2",style:{width:"10px",height:"10px"}}),(0,x.jsx)("h6",{className:"mb-0",children:Le((null===_e||void 0===_e||null===(q=_e.post_money)||void 0===q||null===(H=q.totals)||void 0===H?void 0:H.total_founders)/(null===_e||void 0===_e||null===(G=_e.post_money)||void 0===G||null===(K=G.totals)||void 0===K?void 0:K.total_shares)*100||0)})]})]})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Investors"})}),(0,x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,x.jsx)("div",{className:"rounded-circle bg-success me-2",style:{width:"10px",height:"10px"}}),(0,x.jsx)("h6",{className:"mb-0",children:Le((null===_e||void 0===_e||null===(Z=_e.post_money)||void 0===Z||null===(Q=Z.totals)||void 0===Q?void 0:Q.total_investors)/(null===_e||void 0===_e||null===(X=_e.post_money)||void 0===X||null===(ee=X.totals)||void 0===ee?void 0:ee.total_shares)*100||0)})]})]})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"mb-1 text-muted",children:(0,x.jsx)("small",{children:"Option Pool"})}),(0,x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,x.jsx)("div",{className:"rounded-circle bg-warning me-2",style:{width:"10px",height:"10px"}}),(0,x.jsx)("h6",{className:"mb-0",children:Le((null===_e||void 0===_e||null===(se=_e.post_money)||void 0===se||null===(le=se.totals)||void 0===le?void 0:le.total_option_pool)/(null===_e||void 0===_e||null===(ae=_e.post_money)||void 0===ae||null===(te=ae.totals)||void 0===te?void 0:te.total_shares)*100||0)})]})]})})]})]})]})]})}),(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,x.jsx)("h6",{className:"mb-0",children:"Ownership Percentage Comparison"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"badge bg-primary me-2",children:"Pre-Money"}),(0,x.jsx)("span",{className:"badge bg-danger",children:"Post-Money"})]})]}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{style:{height:"400px"},children:(0,x.jsx)(o.yP,{data:{labels:(null===_e||void 0===_e||null===(de=_e.pre_money)||void 0===de||null===(ne=de.items)||void 0===ne?void 0:ne.map((e=>{const s=e.name||"";return s.length>20?s.substring(0,20)+"...":s})))||[],datasets:[{label:"Pre-Money %",data:(null===_e||void 0===_e||null===(ie=_e.pre_money)||void 0===ie||null===(re=ie.items)||void 0===re?void 0:re.map((e=>{const s=_e.pre_money.totals.total_shares||1;return parseFloat(((e.shares||0)/s*100).toFixed(1))})))||[],backgroundColor:"#4e73df",borderColor:"#4e73df",borderWidth:2,borderRadius:5,barPercentage:.4},{label:"Post-Money %",data:(null===_e||void 0===_e||null===(ce=_e.post_money)||void 0===ce||null===(oe=ce.items)||void 0===oe?void 0:oe.map((e=>{const s=_e.post_money.totals.total_shares||1;return parseFloat(((e.shares||0)/s*100).toFixed(1))})))||[],backgroundColor:"#e74a3b",borderColor:"#e74a3b",borderWidth:2,borderRadius:5,barPercentage:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#333",borderWidth:1,cornerRadius:6,padding:12,displayColors:!0,callbacks:{label:function(e){var s,l,a,t;const d=e.dataset.label||"",n=e.parsed.y||0,i=e.dataIndex,r=null===_e||void 0===_e||null===(s=_e.pre_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[i],c=null===_e||void 0===_e||null===(a=_e.post_money)||void 0===a||null===(t=a.items)||void 0===t?void 0:t[i];let o=`${d}: ${n}%`;if(r&&c){const e=r.shares||0,s=(c.shares||0)-e;0!==s&&(o+=`\nShares Change: ${s>0?"+":""}${Je(s)}`)}return o},afterLabel:function(e){var s,l;const a=e.dataIndex,t=null===_e||void 0===_e||null===(s=_e.post_money)||void 0===s||null===(l=s.items)||void 0===l?void 0:l[a];return null!==t&&void 0!==t&&t.type?`Type: ${t.type.charAt(0).toUpperCase()+t.type.slice(1)}`:""}}},datalabels:{display:!0,formatter:function(e){return e+"%"},color:"#fff",font:{weight:"bold",size:10},anchor:"center",align:"center"}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Stakeholders",font:{size:12,weight:"bold"}}},y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"},stepSize:10},title:{display:!0,text:"Ownership Percentage",font:{size:12,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}),(0,x.jsxs)("div",{className:"row mt-4",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"text-muted mb-2",children:"Total Stakeholders"}),(0,x.jsx)("h3",{className:"mb-0",children:(null===_e||void 0===_e||null===(me=_e.pre_money)||void 0===me||null===(he=me.items)||void 0===he?void 0:he.length)||0}),(0,x.jsx)("small",{className:"text-muted",children:"Same in Pre & Post"})]})})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"text-muted mb-2",children:"Avg Dilution"}),(0,x.jsx)("h3",{className:"mb-0",children:((e,s,l,a)=>{const t=(null===_e||void 0===_e||null===(e=_e.pre_money)||void 0===e||null===(s=e.totals)||void 0===s?void 0:s.total_shares)||1,d=(null===_e||void 0===_e||null===(l=_e.post_money)||void 0===l||null===(a=l.totals)||void 0===a?void 0:a.total_shares)||1;return`${((d-t)/d*100).toFixed(1)}%`})()}),(0,x.jsx)("small",{className:"text-muted",children:"For existing shareholders"})]})})}),(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("div",{className:"card bg-light",children:(0,x.jsxs)("div",{className:"card-body text-center",children:[(0,x.jsx)("h6",{className:"text-muted mb-2",children:"Largest Change"}),(0,x.jsx)("h3",{className:"mb-0",children:((e,s)=>{let l=0;return null!==_e&&void 0!==_e&&null!==(e=_e.pre_money)&&void 0!==e&&e.items&&null!==_e&&void 0!==_e&&null!==(s=_e.post_money)&&void 0!==s&&s.items&&_e.pre_money.items.forEach(((e,s)=>{const a=_e.post_money.items[s];if(e&&a){const s=_e.pre_money.totals.total_shares||1,t=_e.post_money.totals.total_shares||1,d=e.shares/s*100,n=a.shares/t*100,i=Math.abs(n-d);i>l&&(l=i)}})),`${l.toFixed(1)}%`})()}),(0,x.jsx)("small",{className:"text-muted",children:"Maximum percentage change"})]})})})]})]})]})})]})]})]}),"pending"===Re&&Se.length>0&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card-header bg-warning",children:[(0,x.jsx)("h5",{className:"mb-0",children:"Pending Conversions"}),(0,x.jsx)("small",{className:"text-white",children:"SAFE/Convertible Notes waiting to convert"})]}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",{className:"table table-striped",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Instrument"}),(0,x.jsx)("th",{children:"Round"}),(0,x.jsx)("th",{className:"text-end",children:"Investment"}),(0,x.jsx)("th",{className:"text-end",children:"Conversion Price"}),(0,x.jsx)("th",{className:"text-end",children:"Potential Shares"}),(0,x.jsx)("th",{children:"Discount"}),(0,x.jsx)("th",{children:"Valuation Cap"})]})}),(0,x.jsx)("tbody",{children:Se.map(((e,s)=>{var l,a;const t={instrument:e.instrument_type||e.instrument,round_name:e.round_name,investment:e.investment_amount||e.investment,conversion_price:e.share_price||e.conversion_price,potential_shares:e.estimated_shares||e.potential_shares,discount_rate:(null===(l=e.instrument_data)||void 0===l?void 0:l.discountRate_note)||e.discount_rate,valuation_cap:(null===(a=e.instrument_data)||void 0===a?void 0:a.valuationCap_note)||e.valuation_cap};return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("span",{className:"badge "+("Safe"===t.instrument?"bg-primary":"bg-info"),children:t.instrument})}),(0,x.jsx)("td",{children:t.round_name}),(0,x.jsx)("td",{className:"text-end",children:We(t.investment,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{className:"text-end",children:We(t.conversion_price,null===we||void 0===we?void 0:we.currency)}),(0,x.jsx)("td",{className:"text-end",children:Je(t.potential_shares)}),(0,x.jsxs)("td",{children:[t.discount_rate,"%"]}),(0,x.jsx)("td",{children:We(t.valuation_cap,null===we||void 0===we?void 0:we.currency)})]},s)}))})]})})})]}),"Round 0"!==(null===we||void 0===we?void 0:we.type)&&(0,x.jsxs)("div",{className:"card mt-4",children:[(0,x.jsx)("div",{className:"card-header bg-light",children:(0,x.jsx)("h6",{className:"mb-0",children:"Valuation Summary"})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Pre-Money Valuation"})}),(0,x.jsx)("h4",{children:We(Fe.pre_money_valuation,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Investment"})}),(0,x.jsx)("h4",{className:"text-success",children:We(null===we||void 0===we?void 0:we.investment,null===we||void 0===we?void 0:we.currency)})]}),(0,x.jsxs)("div",{className:"col-md-4",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Post-Money Valuation"})}),(0,x.jsx)("h4",{className:"text-info",children:We(Fe.post_money_valuation,null===we||void 0===we?void 0:we.currency)})]})]}),(0,x.jsxs)("div",{className:"row mt-3",children:[(0,x.jsxs)("div",{className:"col-md-6",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Total Shares Outstanding"})}),(0,x.jsx)("h5",{children:Je(Fe.total_shares_outstanding)})]}),(0,x.jsxs)("div",{className:"col-md-6",children:[(0,x.jsx)("p",{className:"mb-1",children:(0,x.jsx)("strong",{children:"Share Price"})}),(0,x.jsx)("h5",{children:qe&&!He?"N/A":ze(Ge,null===we||void 0===we?void 0:we.currency)})]})]})]})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsxs)("button",{className:"btn btn-secondary",onClick:()=>ue(-1),children:[(0,x.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back to Rounds List"]}),(0,x.jsxs)("button",{className:"btn btn-primary ms-2",onClick:Ye,children:[(0,x.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Refresh Data"]})]})]})]})]})})})}m.t1.register(m.PP,m.kc,m.E8,m.hE,m.m_,m.s$,m.Bs,h.A)}}]);
//# sourceMappingURL=1929.dd2ef42a.chunk.js.map