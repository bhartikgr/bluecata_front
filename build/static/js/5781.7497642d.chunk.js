"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[5781],{35781:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(65043),r=t(94060),n=t(44710),i=t(34939),o=t(62837),l=t(23086),c=t(89577),d=t(86213),m=t(37022),u=t(73216),h=t(25581),p=(t(57488),t(70579));function x(){const e=h.J+"api/user/capitalround/";var s=h.J+"api/user/investor/",t=h.J+"api/user/capitalroundinvestment/";const[x,v]=(0,a.useState)([]),[j,g]=(0,a.useState)(""),[b,f]=(0,a.useState)("CAD $"),[N,y]=(0,a.useState)(""),[_,S]=(0,a.useState)(""),[w,C]=(0,a.useState)("shareclass"),P=localStorage.getItem("SignatoryLoginData"),[T,k]=(0,a.useState)(""),[R,F]=(0,a.useState)(!1),A=JSON.parse(P),{id:E}=(0,u.g)(),[I,D]=(0,a.useState)(""),[q,O]=(0,a.useState)(""),[M,V]=(0,a.useState)([]),$=(0,u.Zp)(),[B,L]=(0,a.useState)(""),[z,W]=(0,a.useState)(!1),[H,Y]=(0,a.useState)(1),[G,J]=(0,a.useState)([{shares:"",shareType:"common",voting:"voting"}]),U=h.J+"api/user/";var X=h.J+"api/user/aifile/";const[K,Z]=(0,a.useState)("0"),[Q,ee]=(0,a.useState)("CAD $"),[se,te]=(0,a.useState)({liquidationOther:"",nameOfRound:"",shareClassType:"",shareclassother:"",instrumentType:"",customInstrument:"",issuedshares:"",dateroundclosed:"",liquidation:[],convertible:"",convertibleType:"",voting:"",termsheetFile:"",subscriptiondocument:"",common_stock_valuation:"",preferred_valuation:"",valuationCap:"",discountRate:"",interestRate:"",repaymentSchedule:"",hasWarrants_Bank:"",valuationCap_note:"",discountRate_note:"",maturityDate:"",interestRate_note:"",exercisedate_bank:"",pricePerShare:"",founders:""}),[ae,re]=(0,a.useState)({liquidationOther:"",liquidationpreferences:"",nameOfRound:"",shareClassType:"Common Shares",shareclassother:"",description:"",instrumentType:"",customInstrument:"",roundsize:"",round_investments:[],round_target_money:"",currency:Q,issuedshares:"",dateroundclosed:"",rights:"",liquidation:[],convertible:"",convertibleType:"",voting:"",termsheetFile:null,subscriptiondocument:null,generalnotes:"",hasWarrants_preferred:!1,warrant_coverage_percentage:"",warrant_exercise_type:"next_round_adjusted",warrant_adjustment_percent:"",warrant_adjustment_direction:"decrease",expirationDate_preferred:"",warrant_notes:"",preferred_valuation:"",valuationCap:"",discountRate:"",interestRate:"",repaymentSchedule:"",hasWarrants_Bank:!1,valuationCap_note:"",discountRate_note:"",maturityDate:"",interestRate_note:"",customInstrument:"",roundStatus:"",pricePerShare:"",pre_money:"",post_money:"",optionPoolPercent:"",optionPoolPercent_post:"",existingShares:"",isPostEntered:!1,investorPostMoney:"",isCalculationSource:!1,lastUpdatedField:null}),[ne,ie]=(0,a.useState)([{id:1,firstName:"",lastName:"",email:"",phone:"",amount:"",error:""}]);(0,a.useEffect)((()=>{oe()}),[]);const oe=async()=>{const e={company_id:A.companies[0].id};try{const s=await d.A.post(t+"getRoundZeroCurrency",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});s.data.results.length>0&&(ee(s.data.results[0].currency),f(s.data.results[0].currency))}catch(s){console.error("Error generating summary",s)}};(0,a.useEffect)((()=>{he(),pe(),le()}),[]);const le=async()=>{try{const s=(await d.A.post(X+"getexistingShares",{company_id:A.companies[0].id},{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;let t="0.01",a={},r=[],n=0;if(s.length>0){let i=s[0].founder_data;if("object"===typeof i&&null!==i)a=i;else if("string"===typeof i)try{i.startsWith('"')&&i.endsWith('"')&&(i=i.slice(1,-1),i=i.replace(/\\"/g,'"')),a=JSON.parse(i)}catch(e){console.error("\u274c Error parsing founder_data JSON:",e)}a.founders&&Array.isArray(a.founders)&&(r=a.founders),a.pricePerShare&&(t=a.pricePerShare),n=parseFloat(a.totalShares)||parseFloat(a.totalshares)||0,Z(n),re((e=>({...e,existingShares:n})))}else console.warn("\u26a0\ufe0f No existing shares found for this company.")}catch(e){console.error("\u274c Error fetching existing shares:",e)}},[ce,de]=(0,a.useState)(null),[me,ue]=(0,a.useState)([]),he=async()=>{try{console.log("\ud83d\udd04 Fetching allowed rounds...");const t=await d.A.post(`${e}getPreviousFundingRound`,{company_id:A.companies[0].id});if(t.data.success){var s;if(ue(t.data.results),de(t.data.allowedRounds||[]),console.log("\u2705 Allowed Rounds from API:",t.data.allowedRounds),console.log("\ud83d\udcca Allowed Count:",(null===(s=t.data.allowedRounds)||void 0===s?void 0:s.length)||0),t.data.allowedRounds){const e=["Pre-Seed","Seed","Post-Seed","Series A","Series A Extension","Series B","Series B Extension","Series C","Series C Extension","Series D","Series D Extension"].filter((e=>!t.data.allowedRounds.includes(e)));console.log("\ud83d\udeab Blocked Rounds:",e)}"default"!==_e&&t.data.allowedRounds&&!t.data.allowedRounds.includes(_e)&&(console.log(`\u26a0\ufe0f Resetting selection: ${_e} is not allowed`),Se("default"),Ne("shareClassType",""))}else console.error("\u274c API Error:",t.data.message),de(["Pre-Seed","Seed","Post-Seed","Series A","Series A Extension","Series B","Series B Extension","Series C","Series C Extension","Series D","Series D Extension","Bridge Round","Advisor Shares","OTHER"])}catch(t){console.error("\u274c Network Error:",t),de(["Pre-Seed","Seed","Post-Seed","Series A","Series A Extension","Series B","Series B Extension","Series C","Series C Extension","Series D","Series D Extension","Bridge Round","Advisor Shares","OTHER"])}},pe=async()=>{A.companies[0].id;try{const e=await d.A.post(X+"checkSubscriptionInvestorReport",{company_id:A.companies[0].id}),{subscriptionActive:s,updateAlreadySubmitted:t,lastUpdateDate:a}=e.data}catch(e){console.error(e),F(!0)}};(0,a.useEffect)((()=>{xe()}),[]);const xe=async()=>{const e={company_id:A.companies[0].id};try{const t=(await d.A.post(s+"getrecordRoundList",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;if(V(t),console.log(E),void 0!==E&&"undefined"!==E){const e=t.map((e=>e.id));Math.max(...e),t.some((e=>e.id===parseInt(E))),e.some((e=>e>parseInt(E)));console.log(`\u2705 Current round ${E} is the latest round`)}}catch(t){console.error("Error generating summary",t)}};(0,a.useEffect)((()=>{E&&xe()}),[E]),(0,a.useEffect)((()=>{E&&fe()}),[]);const[ve,je]=(0,a.useState)(""),[ge,be]=(0,a.useState)(""),fe=async()=>{const s={company_id:A.companies[0].id,id:E};try{const n=await d.A.post(e+"getEditrecordlist",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(n.data.results.length>0){var t=n.data.results[0];if(be(t),t){let e=[];try{t.round_investments?Array.isArray(t.round_investments)?e=t.round_investments:"string"===typeof t.round_investments&&(e=JSON.parse(t.round_investments)):t.investment_breakdown?Array.isArray(t.investment_breakdown)?e=t.investment_breakdown:"string"===typeof t.investment_breakdown&&(e=JSON.parse(t.investment_breakdown)):t.roundsize&&parseFloat(t.roundsize)>0&&(e=[{amount:parseFloat(t.roundsize),firstName:t.investor_first_name||"",lastName:t.investor_last_name||"",email:t.investor_email||"",phone:t.investor_phone||""}])}catch(a){console.error("Error parsing investment data:",a),t.roundsize&&parseFloat(t.roundsize)>0&&(e=[{amount:parseFloat(t.roundsize),firstName:"",lastName:"",email:"",phone:""}])}if(e.length>0){const s=e.map(((e,s)=>{const t="object"===typeof e?e.amount:e;return{id:s+1,firstName:e.firstName||e.first_name||"",lastName:e.lastName||e.last_name||"",email:e.email||"",phone:e.phone||"",amount:(null===t||void 0===t?void 0:t.toString())||"",error:""}}));ie(s);const t=s.reduce(((e,s)=>e+(parseFloat(s.amount)||0)),0);re((s=>({...s,roundsize:t.toString(),round_investments:e}))),e[0]&&re((s=>({...s,investor_first_name:e[0].firstName||e[0].first_name||"",investor_last_name:e[0].lastName||e[0].last_name||"",investor_email:e[0].email||"",investor_phone:e[0].phone||""})))}else ie([{id:1,firstName:"",lastName:"",email:"",phone:"",amount:"",error:""}])}"Round 0"===t.round_type?(W(!0),Ne("nameOfRound",""),Se("Founder Shares (Family and Friends)"),Re(!0)):W(!1);let e={};if(t.instrument_type_data&&""!==t.instrument_type_data)try{let s=t.instrument_type_data;"object"===typeof s&&null!==s?e=s:"string"===typeof s&&(s.startsWith('"')&&s.endsWith('"')&&(s=s.slice(1,-1),s=s.replace(/\\"/g,'"')),e=JSON.parse(s))}catch(r){console.error("Error parsing instrument_type_data",r)}let s={},i=[],o="0.01";if("Round 0"===t.round_type&&t.founder_data)try{let e=t.founder_data;"object"===typeof e&&null!==e?s=e:"string"===typeof e&&(e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1),e=e.replace(/\\"/g,'"')),s=JSON.parse(e)),s.founders&&Array.isArray(s.founders)&&(i=s.founders),s.pricePerShare&&(o=s.pricePerShare)}catch(r){console.error("Error parsing founder_data",r),console.error("Raw founder_data:",t.founder_data)}const l={...t,...e,..."Round 0"===t.round_type&&{pricePerShare:o},termsheetFile:Array.isArray(t.termsheetFile)?t.termsheetFile.map((e=>"string"===typeof e?{name:e}:e)):t.termsheetFile?(()=>{try{const e=JSON.parse(t.termsheetFile);return(Array.isArray(e)?e:[e]).map((e=>"string"===typeof e?{name:e}:e))}catch{return[{name:t.termsheetFile}]}})():[],subscriptiondocument:Array.isArray(t.subscriptiondocument)?t.subscriptiondocument.map((e=>"string"===typeof e?{name:e}:e)):t.subscriptiondocument?(()=>{try{const e=JSON.parse(t.subscriptiondocument);return(Array.isArray(e)?e:[e]).map((e=>"string"===typeof e?{name:e}:e))}catch{return[{name:t.subscriptiondocument}]}})():[],liquidation:t.liquidation?Array.isArray(t.liquidation)?t.liquidation:"string"===typeof t.liquidation?t.liquidation.split(",").map((e=>e.trim())).filter((e=>""!==e)):(console.warn("Unexpected liquidation data type:",typeof t.liquidation,t.liquidation),[]):[]};re(l),"Round 0"===t.round_type&&i.length>0&&(J(i),Y(i.length)),je(n.data.results[0]),Se(t.shareClassType)}else $("/record-round-list")}catch(r){console.error("Error generating summary",r)}},Ne=(e,s)=>{"currency"===e&&f(s),re((t=>({...t,[e]:s})))},ye=e=>(e*(parseFloat(ae.pricePerShare)||0)).toFixed(2),[_e,Se]=(0,a.useState)("default"),[we,Ce]=(0,a.useState)(""),[Pe,Te]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("https://ipapi.co/json/"),s=await e.json();D(s.ip),O(s.country_name)}catch(e){console.error("Failed to fetch IP",e)}})()}),[]);const[ke,Re]=(0,a.useState)(!1),Fe=e=>{const s=Ae.findIndex((e=>e.id===w));"next"===e&&s<Ae.length-1?C(Ae[s+1].id):"prev"===e&&s>0&&C(Ae[s-1].id)},Ae=((e,s)=>{if(z)return[{id:"shareclass",title:"Founder Share Allocation"},{id:"description",title:"Description"},{id:"issuedshares",title:"Round 0 Summary"},{id:"rights",title:"Rights & Preferences"},{id:"notes",title:"Notes"}];{let e=[{id:"shareclass",title:"Share Class"},{id:"instrument",title:"Investment Instrument"},{id:"roundsize",title:"Round Size"},{id:"issuedshares",title:"Round Active/Closed"},{id:"description",title:"Description"},{id:"rights",title:"Rights & Preferences"},{id:"termsheet",title:"Term Sheet"},{id:"subscription",title:"Subscription Document"},{id:"notes",title:"Notes"}];return"Preferred Equity"===s&&e.splice(6,0,{id:"liquidation",title:"Liquidation Preference"}),e}})(ae.shareClassType,ae.instrumentType),Ee=Ae.length,Ie=Ae.findIndex((e=>e.id===w)),De=Ee>0?Math.round((Ie+1)/Ee*100):0,qe={multiplePreferences:[{value:"1",label:"1x Investor Multiple Preference",description:"1x multiple of the original investment returned before common shares participate.",group:"multiple"},{value:"2",label:"2x Investor Multiple Preference",description:"2x multiple of the original investment returned before common shares participate.",group:"multiple"},{value:"3",label:"3x Investor Multiple Preference",description:"3x multiple of the original investment returned before common shares participate.",group:"multiple"}],participationRights:[{value:"Non-Participating",label:"Non-Participating",description:"Investor chooses either the liquidation preference or the stock value.",group:"participation"},{value:"Participating",label:"Participating",description:"Received liquidation preference and then participated pro-rata with common shareholders.",group:"participation"},{value:"Capped Participating",label:"Capped Participating",description:"Participation capped at a defined multiple (e.g. total return capped at 3x).",group:"participation"},{value:"Participating with Catch-up",label:"Participating with Catch-up",description:"Common gets paid first to a threshold, then preferred 'catches up' before full pro-rata sharing.",group:"participation"},{value:"Senior Debt",label:"Senior Debt",description:"A loan or obligation that takes repayment priority over other debts in the event of bankruptcy.",group:"participation"},{value:"Common Debt",label:"Common Debt",description:"A loan or obligation that takes secondary repayment priority over other senior debts in the event of bankruptcy.",group:"participation"}],otherOptions:[{value:"N/A",label:"N/A",description:"Does not apply to this round.",group:"other"},{value:"OTHER",label:"Other",description:"Custom response entered by the company.",group:"other"}]},[Oe,Me]=(0,a.useState)("en-US");(0,a.useEffect)((()=>{Ve(),Le()}),[]);const Ve=async()=>{let s={id:""};try{var t=(await d.A.post(e+"getallcountrySymbolList",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;v(t)}catch(a){}},[$e,Be]=(0,a.useState)("US"),Le=async()=>{try{const e=(await d.A.post(U+"getcountrySymbolLocal",{company_id:A.companies[0].id},{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;if(e.length>0){const s=e[0].country_code;Be(s);const t=x.find((e=>e.code===s));if(t){g(t.currency_symbol);const e=ze(s);Me(e)}}}catch(e){console.error("\u274c Error fetching existing shares:",e)}},ze=e=>({IN:"en-IN",US:"en-US",GB:"en-GB",CA:"en-CA",AU:"en-AU",DE:"de-DE",FR:"fr-FR",IT:"it-IT",ES:"es-ES",NL:"nl-NL",CN:"zh-CN",JP:"ja-JP",KR:"ko-KR",BR:"pt-BR",MX:"es-MX",AE:"ar-AE",SA:"ar-SA",SG:"en-SG",MY:"ms-MY",TH:"th-TH",PH:"en-PH",ID:"id-ID",VN:"vi-VN",PK:"ur-PK",BD:"bn-BD",LK:"si-LK",NP:"ne-NP"}[e]||"en-US"),[We,He]=(0,a.useState)(!1);(0,a.useEffect)((()=>{E||Ye()}),[]);const Ye=async()=>{try{const s={company_id:A.companies[0].id,id:E},t=(await d.A.post(e+"checkExistingRounds",s)).data.roundCount;W(!t),t||(Ne("nameOfRound",""),Se("Founder Shares (Family and Friends)"),Re(!0))}catch(s){console.error("Error checking rounds:",s)}},Ge=(e,s,t)=>{J((a=>{const r=[...a];return r[e]||(r[e]={}),r[e][s]=t,r}))},Je=()=>G.reduce(((e,s)=>e+(parseInt(s.shares)||0)),0),Ue=()=>(Je()*(parseFloat(ae.pricePerShare)||0)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Xe=()=>{const e=Je();return 0===e?[]:G.map(((s,t)=>{const a=parseInt(s.shares)||0;return{founder:`Founder ${t+1}`,percentage:(e>0?a/e*100:0).toFixed(1)}}))},[Ke,Ze]=(0,a.useState)(0),[Qe,es]=(0,a.useState)({sharePrice:"0.0000",newSharesIssued:0,totalPostShares:0,employeeOptionShares:0,newOptionShares:0,existingOptionPoolPercent:0,postMoneyValuation:"0.00",investorOwnershipPercent:"0.00",doc4Action:"NO_ACTION"}),[ss,ts]=(0,a.useState)({previousTotalShares:0,previousFounderShares:0,previousEmployeeShares:0,previousSeedInvestment:0,previousValuationCap:0,previousDiscountRate:0,seriesASharePrice:0,seedOptimalPrice:0,seedConversionShares:0,seedConversionValue:0,seedMOIC:0,seriesANewShares:0,seriesANewValue:0,seriesAMOIC:0,totalNewShares:0,totalExcludingOptions:0,totalSharesAfterPool:0,newOptionShares:0,postMoneyValuationEquity:0,foundersPostOwnership:0,employeesPostOwnership:0,seedInvestorsPostOwnership:0,seriesAInvestorsPostOwnership:0,previousIntrumentType:"",hasCalculated:!0}),[as,rs]=(0,a.useState)({previousTotalShares:0,previousFounderShares:0,previousEmployeeShares:0,previousRoundSize:0,previousInterestRate:0,previousValuationCap:0,previousDiscountRate:0,previousInstrumentType:"",previousemployeeSharesFromSeed:0,principalPlusInterest:"0.00",seriesASharePrice:"0.0000",noteOptimalPrice:"0.0000",noteConversionShares:0,noteConversionValue:0,noteMOIC:"0.00",seriesANewShares:0,seriesANewValue:0,seriesAMOIC:"0.00",totalNewSharesBeforeOptions:0,totalExcludingOptions:0,totalSharesAfterPool:0,newOptionShares:0,postMoneyValuationEquity:0,simplePostMoney:0,foundersPostOwnership:"0.0",employeesPostOwnership:"0.0",noteInvestorsPostOwnership:"0.0",seriesAInvestorsPostOwnership:"0.0"});(0,a.useEffect)((()=>{"Common Stock"===ae.instrumentType||ae.instrumentType;_e&&!z&&ns()}),[_e,ae.instrumentType]);const ns=async()=>{if(!z&&_e&&"Advisor Shares"!==_e)try{const s=await d.A.post(e+"getPreviousRoundForAutoFill",{company_id:A.companies[0].id,current_round_id:E||0,current_instrument_type:ae.instrumentType});if(s.data.success&&s.data.data){const e=s.data.data;e.existingShares>0&&(Z(e.existingShares.toString()),re((s=>({...s,existingShares:e.existingShares.toString()}))));const t="Common Stock"===ae.instrumentType||"Preferred Equity"===ae.instrumentType;if(t&&e.can_autofill&&e.existingOptionPoolPercent>0){const s=parseFloat(e.existingOptionPoolPercent)||0;console.log(`\u2705 AUTOFILL: Pre-money pool = ${s}%`),console.log(`\ud83d\udcca Previous post-money pool = ${e.previousPostMoneyPool}%`),console.log(`\ud83d\udcca Employee ownership = ${e.employee_ownership_percent}%`),re((e=>({...e,optionPoolPercent:s.toFixed(2)}))),Ze(s),es((e=>({...e,existingOptionPoolPercent:s})))}}}catch(s){console.error("\u274c Auto-fill error:",s)}};(0,a.useEffect)((()=>{(ae.pre_money>0||ae.roundsize>0||ae.optionPoolPercent_post!==ss.lastOptionPoolPost)&&ss.hasCalculated&&(console.log("Resetting calculation flag due to input change"),ts((e=>({...e,hasCalculated:!1,lastOptionPoolPost:ae.optionPoolPercent_post}))))}),[ae.pre_money,ae.roundsize,ae.optionPoolPercent_post]),(0,a.useEffect)((()=>{if("Safe"===ss.previousInstrumentType){const e=ss.previousInstrumentType&&ae.pre_money>0&&ae.roundsize>0&&!ss.hasCalculated;if(console.log("useEffect - shouldCalculate:",e,ss),!e)return;console.log("Calculating for:",ss.previousInstrumentType),"Safe"===ss.previousInstrumentType&&(()=>{if(ss.isCalculating)return;const e=parseFloat(ae.pre_money||0),s=parseFloat(ae.roundsize||0),t=parseFloat(ae.optionPoolPercent_post||0),a=ss.previousTotalShares,r=ss.previousFounderShares,n=ss.previousEmployeeShares,i=ss.previousSeedInvestment,o=ss.previousValuationCap,l=ss.previousDiscountRate;if(e<=0||s<=0||a<=0)return;const c=e/a,d=c*(1-l/100),m=o/a,u=Math.min(d,m),h=i/u,p=h*c,x=p/i,v=s/c,j=v*c,g=h+v,b=r+g;let f,N,y;if(0===t)f=b,N=0,y=n/f*100;else{const e=n/b*100;e>=t?(f=b,N=0,y=e):(f=b/(1-t/100),N=f-b-n,y=t)}const _=f*c,S=r/f*100,w=h/f*100,C=v/f*100;t>0&&(y=(n+N)/f*100);const P=h+v+N;ts({...ss,seriesASharePrice:c.toFixed(4),seedOptimalPrice:u.toFixed(4),seedConversionShares:Math.round(h),seedConversionValue:Math.round(p),seedMOIC:x.toFixed(2),seriesANewShares:Math.round(v),seriesANewValue:Math.round(j),seriesAMOIC:(j/s).toFixed(2),totalNewShares:Math.round(g),totalExcludingOptions:Math.round(b),totalSharesAfterPool:Math.round(f),newOptionShares:Math.round(N),postMoneyValuationEquity:Math.round(_),foundersPostOwnership:S.toFixed(1),employeesPostOwnership:y.toFixed(1),seedInvestorsPostOwnership:w.toFixed(1),seriesAInvestorsPostOwnership:C.toFixed(1),hasCalculated:!0}),re((t=>({...t,issuedshares:Math.round(P).toString(),post_money:(e+s).toFixed(2),investorPostMoney:C.toFixed(2)}))),setTimeout((()=>{re((e=>({...e,isCalculationSource:!1})))}),100)})()}"Convertible Note"===ss.previousInstrumentType&&(()=>{console.log(as);const e=parseFloat(ae.pre_money||0),s=parseFloat(ae.roundsize||0),t=parseFloat(ae.optionPoolPercent_post||0),a=as.previousRoundSize||0,r=as.previousValuationCap||0,n=as.previousDiscountRate||0,i=as.previousInterestRate||0,o=as.previousTotalShares||0,l=as.previousFounderShares||0,c=(as.previousEmployeeShares,as.previousemployeeSharesFromSeed||0);if(e<=0||s<=0||o<=0)return;const d=e/o,m=d*(1-n/100),u=r/o,h=Math.min(m,u),p=a*Math.pow(1+i/100,2),x=p/h,v=x*d,j=(v/a).toFixed(2),g=s/d,b=g*d,f=(b/s).toFixed(2),N=x+g,y=l+N;let _,S=0;t>0?(_=y/(1-t/100),S=_-y-c,S=Math.max(0,S)):_=o+N;const w=x+g+S,C=_*d,P=e+s,T=l/_*100,k=x/_*100,R=g/_*100,F=(c+S)/_*100;rs((e=>({...e,principalPlusInterest:p.toFixed(2),seriesASharePrice:d.toFixed(4),noteOptimalPrice:h.toFixed(4),noteConversionShares:Math.round(x),noteConversionValue:Math.round(v),noteMOIC:j+"X",seriesANewShares:Math.round(g),seriesANewValue:Math.round(b),seriesAMOIC:f+"X",totalNewSharesBeforeOptions:Math.round(N),totalExcludingOptions:Math.round(y),totalSharesAfterPool:Math.round(_),newOptionShares:Math.round(S),postMoneyValuationEquity:Math.round(C),simplePostMoney:Math.round(P),foundersPostOwnership:T.toFixed(1),employeesPostOwnership:F.toFixed(1),noteInvestorsPostOwnership:k.toFixed(1),seriesAInvestorsPostOwnership:R.toFixed(1)}))),console.log(w),re((e=>({...e,issuedshares:Math.round(w).toString(),post_money:P.toFixed(2),sharePrice:d.toFixed(4)})))})()}),[ae.pre_money,ae.roundsize,ae.optionPoolPercent_post,ss.previousInstrumentType,ss.hasCalculated]);(0,a.useEffect)((()=>{if(ae.isCalculationSource||!ae.instrumentType)return;console.log(ae);const e=parseFloat(ae.roundsize||0),s=parseFloat(ae.pre_money||0),t=parseFloat(ae.roundsize||0),a=parseFloat(ae.optionPoolPercent_post||0),r=parseFloat(K||0),n=parseFloat(ae.optionPoolPercent||0);if(console.log(n,r),s<=0||t<=0||r<=0)return;const i="Common Stock"===ae.instrumentType,o=a>0&&a>n;let l={};if(i){const e=Math.round(r*(n/100));l=o?((e,s,t,a,r)=>{console.log(e,s,t,a,r);const n=(t-a)/(1-r/100),i=n-t+a,o=e/n,l=s/o,c=i+l;return{sharePrice:parseFloat(o.toFixed(4)),newPoolShares:Math.round(i),newInvestorShares:Math.round(l),totalSharesIssued:Math.round(c),totalPostShares:Math.round(n+l),postMoneyValuation:(e+s).toFixed(2)}})(s,t,r,e,a):((e,s,t)=>{const a=e/t,r=s/a;return{sharePrice:parseFloat(a.toFixed(4)),newPoolShares:0,newInvestorShares:Math.round(r),totalSharesIssued:Math.round(r),totalPostShares:t+r,postMoneyValuation:(e+s).toFixed(2)}})(s,t,r)}console.log("ll");const c=s+e;es({sharePrice:l.sharePrice,newSharesIssued:l.totalSharesIssued,totalPostShares:l.totalPostShares,newOptionShares:l.newPoolShares,existingOptionPoolPercent:n,postMoneyValuation:c,investorOwnershipPercent:(t/parseFloat(c)*100).toFixed(2),doc4Action:o?"TOP_UP":"NO_ACTION"}),re((e=>({...e,post_money:c,investorPostMoney:(t/parseFloat(c)*100).toFixed(2),issuedshares:String(Qe.totalSharesIssued),sharePrice:String(l.sharePrice),isCalculationSource:!0}))),setTimeout((()=>{re((e=>({...e,isCalculationSource:!1})))}),10)}),[ae.pre_money,ae.instrumentType,ae.optionPoolPercent,ae.roundsize,ae.optionPoolPercent_post,K,Ke]),(0,a.useEffect)((()=>{"Preferred Equity"===ae.instrumentType&&is()}),[_e,ae.instrumentType]);const is=async()=>{try{const s=await d.A.post(e+"getPreviousRoundOptionPool",{company_id:A.companies[0].id});if(s.data.success){const{previousRoundData:e}=s.data,t=null===_e||void 0===_e?void 0:_e.includes("Series"),a="Seed"===_e;console.log(e),t?(re((e=>({...e}))),Ze(s.data.existingOptionPoolPercent),"Safe"===e.instrumentType&&ts((s=>({...s,previousTotalShares:e.totalShares||0,previousFounderShares:e.founderShares||0,previousEmployeeShares:e.employeeShares||0,previousSeedInvestorShares:0,previousSeedInvestment:e.seedInvestment||0,previousValuationCap:e.valuationCap||0,previousDiscountRate:e.discountRate||0,previousInstrumentType:e.instrumentType||"",hasCalculated:!1})))):a&&re((e=>({...e,optionPoolPercent:"0.00"}))),e.totalShares>0&&Z(e.totalShares.toString())}}catch(s){console.error("\u274c Error fetching previous round data:",s)}};(0,a.useEffect)((()=>{"Preferred Equity"===ae.instrumentType&&os()}),[_e,ae.instrumentType]);const os=async()=>{try{const s=await d.A.post(e+"getPreviousRoundForConvertible",{company_id:A.companies[0].id,current_round_id:E||0});if(s.data.success&&s.data.previousRoundData){const e=s.data.previousRoundData;console.log(e),""!==e.instrumentType&&(rs((s=>({...s,previousTotalShares:e.totalShares||0,previousFounderShares:e.founderShares||0,previousEmployeeShares:e.employeeShares||0,previousRoundSize:e.seedInvestment||0,previousValuationCap:e.valuationCap||0,previousDiscountRate:e.discountRate||0,previousInterestRate:e.interestRate,previousInstrumentType:e.instrumentType||"",previousemployeeSharesFromSeed:e.employeeSharesFromSeed||""}))),ts((s=>({...s,previousInstrumentType:e.instrumentType||""}))))}}catch(s){console.error("\u274c Error fetching previous SAFE round data:",s)}};function ls(e){const s=new Date(e);if(isNaN(s))return"";const t=s.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],r=s.getFullYear();let n=s.getHours();const i=s.getMinutes().toString().padStart(2,"0"),o=(s.getSeconds().toString().padStart(2,"0"),n>=12?"PM":"AM");return n%=12,n=n||12,`${a} ${t}${(e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)}, ${r} ${n}:${i} ${o}`}(0,a.useEffect)((()=>{if(null!==_e&&void 0!==_e&&_e.includes("Series")&&ae.optionPoolPercent){const e=parseFloat(ae.optionPoolPercent);!isNaN(e)&&e>0&&e!==Ke&&Ze(e)}}),[ae.optionPoolPercent]);const cs=()=>{ie([...ne,{id:ne.length+1,firstName:"",lastName:"",email:"",phone:"",amount:"",error:""}])},ds=(e,s,t)=>{const a=ne.map((a=>a.id===e?{...a,[s]:t,error:""}:a));ie(a)},[ms,us]=(0,a.useState)(!1);return(0,p.jsx)(o.mO,{children:(0,p.jsx)("div",{className:"fullpage d-block",children:(0,p.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,p.jsx)(n.A,{isCollapsed:ms,setIsCollapsed:us}),(0,p.jsxs)("div",{className:"global_view "+(ms?"global_view_col":""),children:[(0,p.jsx)(r.A,{}),(0,p.jsx)(o.$K,{className:"d-block p-md-4 p-3",children:(0,p.jsx)("div",{className:"container-fluid",children:(0,p.jsxs)("div",{className:"d-flex flex-column gap-4",children:[N&&(0,p.jsx)(i.A,{message:N,onClose:()=>y("")}),B&&(0,p.jsxs)("div",{className:"center_error_pop flex items-center justify-between gap-3 shadow-lg",children:[(0,p.jsx)("div",{className:"d-flex align-items-center gap-2",children:(0,p.jsx)("span",{className:"d-block",children:B})}),(0,p.jsx)("button",{onClick:()=>L(""),type:"button",className:"close_btnCros",children:"\xd7"})]}),T&&(0,p.jsxs)("div",{className:"shadow-lg "+(R?"error_pop":"success_pop"),children:[(0,p.jsx)("div",{className:"d-flex align-items-center gap-2",children:(0,p.jsx)("span",{className:"d-block",children:T})}),(0,p.jsx)("button",{type:"button",className:"close_btnCros",onClick:()=>k(""),children:"\xd7"})]}),_&&(0,p.jsx)(m.A,{message:_,onConfirm:async()=>{S(""),Te(!1),He(!0),await(async()=>{const s=new FormData;if(s.append("created_by_id",A.id),s.append("id",E||""),s.append("company_id",A.companies[0].id),s.append("created_by_role",A.role),s.append("country_name",q),z){s.append("round_type","Round 0"),s.append("shareClassType","Common Shares"),s.append("nameOfRound",ae.nameOfRound),s.append("issuedshares",Je().toString()),s.append("roundStatus",""),s.append("instrumentType",""),s.append("roundsize",""),s.append("currency",ae.currency),s.append("dateroundclosed",ae.dateroundclosed);const e={founders:G,totalShares:Je(),totalValue:Ue(),pricePerShare:ae.pricePerShare||"0.01",ownershipBreakdown:Xe()};s.append("founder_data",JSON.stringify(e)),s.append("total_founder_shares",Je().toString()),s.append("founder_count",H.toString())}else{const e=ne.filter((e=>e.amount&&""!==e.amount.trim())).map((e=>({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",amount:parseFloat(e.amount),currency:b})));s.append("round_target_money",ae.round_target_money),s.append("round_investments",JSON.stringify(e)),s.append("round_type","Investment"),"Convertible Note"===ae.instrumentType&&("Pre-Seed"===ae.shareClassType||"Post-Seed"===ae.shareClassType)||"Safe"===ae.instrumentType&&("Seed"===ae.shareClassType||"Pre-Seed"===ae.shareClassType||"Post-Seed"===ae.shareClassType)?s.append("investorPostMoney",""):s.append("investorPostMoney",ae.investorPostMoney||""),s.append("shareClassType",_e||""),s.append("nameOfRound",ae.nameOfRound||""),"Convertible Note"===ae.instrumentType||ae.instrumentType,s.append("issuedshares",""),"Safe"===ae.instrumentType?s.append("post_money",""):s.append("post_money",ae.post_money||""),s.append("roundStatus",ae.roundStatus||""),s.append("instrumentType",ae.instrumentType||""),s.append("roundsize",ae.roundsize||""),s.append("currency",Q),s.append("pre_money",ae.pre_money||""),s.append("optionPoolPercent_post",ae.optionPoolPercent_post),s.append("optionPoolPercent",ae.optionPoolPercent||"")}s.append("description",ae.description||""),s.append("liquidationOther",ae.liquidationOther||""),s.append("liquidationpreferences",ae.liquidationpreferences||""),s.append("shareclassother",ae.shareclassother||""),s.append("customInstrument",ae.customInstrument||""),s.append("rights",ae.rights||""),s.append("liquidation",Array.isArray(ae.liquidation)?ae.liquidation.join(","):""),s.append("convertible",ae.convertible||""),s.append("convertibleType",ae.convertibleType||""),s.append("voting",ae.voting||""),s.append("dateroundclosed",ae.dateroundclosed||""),s.append("generalnotes",ae.generalnotes||""),s.append("ip_address",I||""),s.append("ClientIP",I||""),ae.termsheetFile&&ae.termsheetFile.length>0?ae.termsheetFile.forEach((e=>{s.append("termsheetFile",e)})):s.append("termsheetFile",""),ae.subscriptiondocument&&ae.subscriptiondocument.length>0?ae.subscriptiondocument.forEach((e=>{s.append("subscriptiondocument",e)})):s.append("subscriptiondocument","");let t={};if(!z&&ae.instrumentType)switch(ae.instrumentType){case"Common Stock":default:t={};break;case"Preferred Equity":t={preferred_valuation:ae.preferred_valuation||"",hasWarrants_preferred:ae.hasWarrants_preferred||!1,...ae.hasWarrants_preferred&&{warrant_coverage_percentage:ae.warrant_coverage_percentage||"",warrant_exercise_type:ae.warrant_exercise_type||"next_round_adjusted",warrant_adjustment_direction:ae.warrant_adjustment_direction||"decrease",warrant_adjustment_percent:ae.warrant_adjustment_percent||"",expirationDate_preferred:ae.expirationDate_preferred||"",warrant_notes:ae.warrant_notes||"",warrant_status:"pending"}};break;case"Safe":t={valuationCap:ae.valuationCap||"",discountRate:ae.discountRate||""};break;case"Venture/Bank DEBT":t={interestRate:ae.interestRate||"",repaymentSchedule:ae.repaymentSchedule||"",hasWarrants_Bank:ae.hasWarrants_Bank||!1,...ae.hasWarrants_Bank&&{exercisePrice_bank:ae.exercisePrice_bank||"",exercisedate_bank:ae.exercisedate_bank||"",warrantRatio_bank:ae.warrantRatio_bank||"",warrantType_bank:ae.warrantType_bank||"CALL"}};break;case"Convertible Note":t={valuationCap_note:ae.valuationCap_note||"",discountRate_note:ae.discountRate_note||"",maturityDate:ae.maturityDate||"",interestRate_note:ae.interestRate_note||""}}s.append("instrument_type_data",JSON.stringify(t));try{const t=await d.A.post(e+"CreateOrUpdateCapitalRound",s,{headers:{"Content-Type":"multipart/form-data"}}),a=t.data.id;if(!z&&"Preferred Equity"===ae.instrumentType&&ae.hasWarrants_preferred&&a){const s={roundrecord_id:a,company_id:A.companies[0].id,investor_id:0,warrant_coverage_percentage:parseFloat(ae.warrant_coverage_percentage)||0,warrant_exercise_type:ae.warrant_exercise_type||"next_round_adjusted",warrant_adjustment_percent:parseFloat(ae.warrant_adjustment_percent)||0,warrant_adjustment_direction:ae.warrant_adjustment_direction||"decrease",calculated_exercise_price:null,calculated_warrant_shares:null,warrant_coverage_amount:null,warrant_status:"pending",issued_date:ae.dateroundclosed||(new Date).toISOString().split("T")[0],expiration_date:ae.expirationDate_preferred||null,notes:ae.warrant_notes||null};if(E){const s={roundrecord_id:E,company_id:A.companies[0].id,investor_id:0,warrant_coverage_percentage:parseFloat(ae.warrant_coverage_percentage)||0,warrant_exercise_type:ae.warrant_exercise_type||"next_round_adjusted",warrant_adjustment_percent:parseFloat(ae.warrant_adjustment_percent)||0,warrant_adjustment_direction:ae.warrant_adjustment_direction||"decrease",calculated_exercise_price:null,calculated_warrant_shares:null,warrant_coverage_amount:null,warrant_status:"pending",issued_date:ae.dateroundclosed||(new Date).toISOString().split("T")[0],expiration_date:ae.expirationDate_preferred||null,notes:ae.warrant_notes||null};await d.A.post(e+"warrantDataUpdate",s,{headers:{"Content-Type":"application/json"}})}else await d.A.post(e+"createWarrant",s,{headers:{"Content-Type":"application/json"}})}He(!1),F(!1),k(t.data.message),setTimeout((()=>{k(""),$("/record-round-list")}),1500)}catch(n){var a,r;He(!1),F(!0),k((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Error creating round"),setTimeout((()=>{k("")}),5e3),console.error("Error creating round:",n)}})()},onCancel:()=>{S("")}}),We&&(0,p.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.9)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,p.jsx)("div",{class:"spinner-border spinner-border_loader text-success",style:{width:"3rem",height:"3rem"},role:"status",children:(0,p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}),(0,p.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,p.jsx)("div",{className:"pb-3 bar_design",children:(0,p.jsx)("h4",{className:"h5 mb-0",children:E?"Edit Record Round":"Create New Record Round"})})}),(0,p.jsx)("div",{className:"mb-4 dashboard_card",children:(0,p.jsxs)("div",{class:"progress-container pt-3",children:[(0,p.jsxs)("div",{class:"progress-info",children:[(0,p.jsx)("div",{class:"progress-label",children:"Progress"}),(0,p.jsxs)("div",{class:"progress-value",children:[De,"% Complete"]})]}),(0,p.jsx)("div",{class:"progress-bar",children:(0,p.jsx)("div",{class:"progress-fill",style:{width:`${De}%`}})})]})}),(0,p.jsx)("div",{className:"mb-4 ",children:(0,p.jsx)("div",{className:"d-flex flex-wrap gap-2",children:Ae.map(((e,s)=>(0,p.jsx)("button",{className:`btn ${w===e.id?"select_btn_active":"select_btn"} rounded-pill`,children:e.title},e.id)))})}),(0,p.jsx)("form",{method:"post",action:"javascript:void(0)",children:(0,p.jsxs)("div",{className:"from_quation",children:["shareclass"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Company Incorporation":"Share Class"}),ae.dateroundclosed&&(e=>{if(!e||""===e.trim())return!0;const[s,t,a]=e.split("/"),r=parseInt(s,10)-1,n=parseInt(t,10),i=parseInt(a,10);if(isNaN(r)||isNaN(n)||isNaN(i))return!0;return new Date(i,r,n)>new Date})(ae.dateroundclosed)&&(0,p.jsxs)("div",{className:"alert-message text-danger p-3 mb-4 border rounded bg-white",children:[(0,p.jsx)("strong",{children:"Note:"})," Start by entering your company's original ownership (who owned which shares at registration). Then add future investment rounds. This keeps your cap table accurate and makes future funding easier."]}),z&&(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Welcome!"})," Let's start with your company's incorporation details. This will be your Round 0 - the foundation of your cap table."]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Name of Round ",(0,p.jsx)("span",{className:"text-danger fs-5",children:"*"}),se.nameOfRound&&(0,p.jsxs)("div",{className:"text-danger small mt-1 is-invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.nameOfRound]})]}),(0,p.jsx)("input",{type:"text",placeholder:"Founding Share Allocation",value:ae.nameOfRound,onChange:e=>Ne("nameOfRound",e.target.value),className:"form-control "+(se.nameOfRound?"is-invalid":""),maxLength:30}),(0,p.jsxs)("div",{className:"form-text",children:[ae.nameOfRound.length,"/30 characters"]})]}),z&&(0,p.jsxs)("div",{className:"round-zero-fields",children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Founder Share Allocation ",(0,p.jsx)("span",{className:"text-danger fs-5",children:"*"}),se.founders&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.founders]})]}),G.map(((e,s)=>(0,p.jsxs)("div",{className:"founder-allocation mb-4 p-3 border rounded",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,p.jsxs)("h6",{className:"mb-0",children:["Founder ",s+1]}),H>1&&(0,p.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>(e=>{H>1&&(J((s=>s.filter(((s,t)=>t!==e)))),Y((e=>e-1)))})(s),children:"Remove"})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsxs)("label",{className:"form-label",children:["First Name ",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)("input",{type:"text",className:"form-control "+(se[`founder_${s}_firstName`]?"is-invalid":""),placeholder:"First Name",value:e.firstName,onChange:e=>{Ge(s,"firstName",e.target.value),se[`founder_${s}_firstName`]&&te((e=>({...e,[`founder_${s}_firstName`]:""})))}}),se[`founder_${s}_firstName`]&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se[`founder_${s}_firstName`]]})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsxs)("label",{className:"form-label",children:["Last Name ",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)("input",{type:"text",className:"form-control "+(se[`founder_${s}_lastName`]?"is-invalid":""),placeholder:"Last Name",value:e.lastName,onChange:e=>{Ge(s,"lastName",e.target.value),se[`founder_${s}_lastName`]&&te((e=>({...e,[`founder_${s}_lastName`]:""})))}}),se[`founder_${s}_lastName`]&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se[`founder_${s}_lastName`]]})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsxs)("label",{className:"form-label",children:["Email ",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)("input",{type:"email",className:"form-control "+(se[`founder_${s}_email`]?"is-invalid":""),placeholder:"Email",value:e.email,onChange:e=>{Ge(s,"email",e.target.value),se[`founder_${s}_email`]&&te((e=>({...e,[`founder_${s}_email`]:""})))}}),se[`founder_${s}_email`]&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se[`founder_${s}_email`]]})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Phone"}),(0,p.jsx)("input",{type:"tel",className:"form-control",placeholder:"Phone",value:e.phone,onChange:e=>Ge(s,"phone",e.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsxs)("label",{className:"form-label",children:["Shares Allocated ",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(c.HG,{className:"form-control "+(se[`founder_${s}_shares`]?"is-invalid":""),placeholder:"e.g., 500",value:e.shares||"",onValueChange:e=>{Ge(s,"shares",e.value),se[`founder_${s}_shares`]&&te((e=>({...e,[`founder_${s}_shares`]:""})))},thousandSeparator:!0,allowNegative:!1,decimalScale:2,fixedDecimalScale:!0}),se[`founder_${s}_shares`]&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se[`founder_${s}_shares`]]})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Share Type"}),(0,p.jsxs)("select",{className:"form-control",value:e.shareType,onChange:e=>Ge(s,"shareType",e.target.value),children:[(0,p.jsx)("option",{value:"common",children:"Common Shares"}),(0,p.jsx)("option",{value:"preferred",children:"Preferred Shares"}),(0,p.jsx)("option",{value:"other",children:"Other"})]})]}),"other"===e.shareType&&(0,p.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Specify Share Type"}),(0,p.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter custom share type",value:e.customShareType||"",onChange:e=>Ge(s,"customShareType",e.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Share Class"}),(0,p.jsxs)("select",{className:"form-control",value:e.shareClass,onChange:e=>Ge(s,"shareClass",e.target.value),children:[(0,p.jsx)("option",{value:"Class A",children:"Class A"}),(0,p.jsx)("option",{value:"Class B",children:"Class B"}),(0,p.jsx)("option",{value:"Class C",children:"Class C"})]})]}),"other"===e.shareClass&&(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Specify Share Class"}),(0,p.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter custom share class",value:e.customShareClass||"",onChange:e=>Ge(s,"customShareClass",e.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3 mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Voting Rights"}),(0,p.jsxs)("select",{className:"form-control",value:e.voting,onChange:e=>Ge(s,"voting",e.target.value),children:[(0,p.jsx)("option",{value:"voting",children:"Voting"}),(0,p.jsx)("option",{value:"non-voting",children:"Non-Voting"})]})]})]})]},s))),(0,p.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{J((e=>[...e,{shares:"",shareType:"common",voting:"voting"}])),Y((e=>e+1))},children:"+ Add Another Founder"})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Currency ",(0,p.jsx)("span",{className:"text-danger fs-5",children:"*"}),se.currency&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.currency]})]}),(0,p.jsxs)("select",{className:"form-control "+(se.currency?"is-invalid":""),value:ae.currency,onChange:e=>{Ne("currency",e.target.value),se.currency&&te((e=>({...e,currency:""})))},children:[(0,p.jsx)("option",{value:"",children:"-- Select Currency --"}),x.map((e=>(0,p.jsxs)("option",{value:`${e.currency_code} ${e.currency_symbol}`,children:[e.currency_code," ",e.currency_symbol]},e.id)))]})]}),(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Price Per Share at Incorporation",ae.currency&&` (${ae.currency.split(" ")[1]})`,(0,p.jsx)("span",{className:"text-danger fs-5",children:"*"}),se.pricePerShare&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.pricePerShare]})]}),(0,p.jsx)("input",{type:"number",step:"0.001",className:"form-control "+(se.pricePerShare?"is-invalid":""),placeholder:`e.g., 0.001 ${ae.currency?ae.currency.split(" ")[1]:""}`,value:ae.pricePerShare||"",onChange:e=>{Ne("pricePerShare",e.target.value),se.pricePerShare&&te((e=>({...e,pricePerShare:""})))}}),(0,p.jsx)("div",{className:"form-text",children:"This is the par value from your incorporation documents"})]})]}),(0,p.jsxs)("div",{className:"calculation-results p-3 bg-light rounded mb-4",children:[(0,p.jsx)("h6",{children:"Round 0 Calculations"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("strong",{children:"Total Shares:"})," ",Je().toLocaleString()]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("strong",{children:"Total Value:"})," ",ae.currency?ae.currency.split(" ")[1]:"$",Ue()]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("strong",{children:"Founder Count:"})," ",H]})]}),Je()>0&&(0,p.jsxs)("div",{className:"mt-3",children:[(0,p.jsx)("strong",{children:"Ownership Breakdown:"}),(0,p.jsx)("ul",{className:"mb-0 mt-2",children:Xe().map(((e,s)=>(0,p.jsxs)("li",{children:[e.founder,": ",e.percentage,"%"]},s)))})]})]}),Je()>0&&(0,p.jsxs)("div",{className:"mt-3",children:[(0,p.jsx)("strong",{children:"Founder Details:"}),(0,p.jsx)("div",{className:"table-responsive mt-2",children:(0,p.jsxs)("table",{className:"table table-sm table-bordered",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Founder"}),(0,p.jsx)("th",{children:"Number of Shares"}),(0,p.jsx)("th",{children:"Price Per Share"}),(0,p.jsx)("th",{children:"Ownership %"}),(0,p.jsx)("th",{children:"Share Type"}),(0,p.jsx)("th",{children:"Share Class"}),(0,p.jsx)("th",{children:"Voting Rights"}),(0,p.jsx)("th",{children:"Value"})]})}),(0,p.jsxs)("tbody",{children:[G.map(((e,s)=>{const t=parseInt(e.shares)||0,a=Je()>0?(t/Je()*100).toFixed(1):"0.0",r="other"===e.shareType&&e.customShareType?e.customShareType:"common"===e.shareType?"Common":"Preferred",n=e.customShareClass?e.customShareClass:e.shareClass||"Class A";return(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[e.firstName," ",e.lastName]}),(0,p.jsx)("td",{children:t.toLocaleString()}),(0,p.jsxs)("td",{children:[ae.currency?ae.currency.split(" ")[1]:"$",ae.pricePerShare||"0.00"]}),(0,p.jsxs)("td",{children:[a,"%"]}),(0,p.jsx)("td",{children:r}),(0,p.jsx)("td",{children:n}),(0,p.jsx)("td",{children:"voting"===e.voting?"Voting":"Non-Voting"}),(0,p.jsxs)("td",{children:[ae.currency?ae.currency.split(" ")[1]:"$",ye(t)]})]},s)})),(0,p.jsxs)("tr",{className:"table-secondary fw-bold",children:[(0,p.jsx)("td",{colSpan:"2",children:"Total"}),(0,p.jsxs)("td",{children:[ae.currency?ae.currency.split(" ")[1]:"$",ae.pricePerShare||"0.00"]}),(0,p.jsx)("td",{children:"100%"}),(0,p.jsx)("td",{colSpan:"3"}),(0,p.jsxs)("td",{children:[ae.currency?ae.currency.split(" ")[1]:"$",Ue()]})]})]})]})})]})]}),!z&&(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Funding Rounds ",(0,p.jsx)("span",{className:"text-danger fs-5",children:"*"}),se.shareClassType&&(0,p.jsxs)("div",{className:"text-danger small mt-1 is-invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.shareClassType]})]}),(0,p.jsxs)("select",{className:"form-control "+(se.shareClassType?"is-invalid":""),value:_e,onChange:e=>{const s=e.target.value;if(s&&"default"!==s){if(console.log(ce.includes(s)),ce&&!ce.includes(s))return L(`\u274c ${s} is not available!\n\nAvailable rounds: ${ce.join(", ")}`),void setTimeout((()=>{L("")}),3500);L(""),Se(s),Ne("shareClassType","OTHER"===s?ae.shareclassother:s)}else L("")},disabled:!ce,children:[!ce&&(0,p.jsx)("option",{value:"default",disabled:!0,children:"Loading rounds..."}),ce&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("option",{value:"default",disabled:!0,children:0===ce.length?"No rounds available":"-- Select Funding Round --"}),(0,p.jsxs)("optgroup",{label:"Seed Rounds",children:[(0,p.jsx)("option",{value:"Pre-Seed",children:"Pre-Seed"}),(0,p.jsx)("option",{value:"Seed",children:"Seed"}),(0,p.jsx)("option",{value:"Post-Seed",children:"Post-Seed"})]}),(0,p.jsxs)("optgroup",{label:"Series Rounds",children:[(0,p.jsx)("option",{value:"Series A",children:"Series A"}),(0,p.jsx)("option",{value:"Series A Extension",children:"Series A Extension"}),(0,p.jsx)("option",{value:"Series B",children:"Series B"}),(0,p.jsx)("option",{value:"Series B Extension",children:"Series B Extension"}),(0,p.jsx)("option",{value:"Series C",children:"Series C"}),(0,p.jsx)("option",{value:"Series C Extension",children:"Series C Extension"}),(0,p.jsx)("option",{value:"Series D",children:"Series D"}),(0,p.jsx)("option",{value:"Series D Extension",children:"Series D Extension"})]}),(0,p.jsxs)("optgroup",{label:"Other Rounds",children:[(0,p.jsx)("option",{value:"Bridge Round",children:"Bridge Round"}),(0,p.jsx)("option",{value:"Advisor Shares",children:"Advisor Shares"}),(0,p.jsx)("option",{value:"OTHER",children:"OTHER"})]})]})]}),se.shareClassType&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.shareClassType]})]}),!z&&"OTHER"===_e&&(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("label",{className:"form-label fw-semibold",children:"Custom Share Class Name"}),(0,p.jsx)("input",{type:"text",placeholder:"Enter custom share class name",value:ae.shareclassother,onChange:e=>Ne("shareclassother",e.target.value),className:"form-control "+(se.shareclassother?"is-invalid":""),maxLength:30}),(0,p.jsxs)("div",{className:"form-text",children:[ae.shareclassother.length,"/30 characters"]}),se.shareclassother&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.shareclassother]})]}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{const e={};if(ae.nameOfRound.trim()||(e.nameOfRound="This field is required"),z){(!ae.pricePerShare||parseFloat(ae.pricePerShare)<=0)&&(e.pricePerShare="Valid price per share is required"),ae.currency&&""!==ae.currency.trim()||(e.currency="Currency selection is required");let s=!1,t=0,a=!1;G.forEach(((r,n)=>{const i=parseInt(r.shares)||0;r.firstName&&""!==r.firstName.trim()||(e[`founder_${n}_firstName`]="First name is required"),r.lastName&&""!==r.lastName.trim()||(e[`founder_${n}_lastName`]="Last name is required"),r.email&&""!==r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e[`founder_${n}_email`]="Please enter a valid email address"):e[`founder_${n}_email`]="Email is required",r.shares&&""!==r.shares.trim()?i<=0?e[`founder_${n}_shares`]="Shares must be greater than 0":isNaN(i)?e[`founder_${n}_shares`]="Please enter a valid number":(s=!0,t+=i,a=!0):e[`founder_${n}_shares`]="Shares allocated is required","other"!==r.shareType||r.customShareType&&""!==r.customShareType.trim()||(e[`founder_${n}_customShareType`]="Please specify the share type"),"other"!==r.shareClass||r.customShareClass&&""!==r.customShareClass.trim()||(e[`founder_${n}_customShareClass`]="Please specify the share class")})),s||(e.founders="At least one founder must have shares allocated"),0===t&&a&&(e.founders="Total shares must be greater than 0");!G.every((e=>(parseInt(e.shares)||0)>0))&&s&&(e.founders="All founders must have shares allocated")}else"default"===_e&&(e.shareClassType="Please select a funding round"),"OTHER"!==_e||ae.shareclassother.trim()||(e.shareclassother="This field is required");Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),z&&(Ne("issuedshares",Je().toString()),Ne("roundStatus","CLOSED"),Ne("shareClassType","Common Shares"),Se("Founder Shares (Family and Friends)")),Fe("next"))},children:"Save and Continue"})})]}),"instrument"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),z?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsxs)("div",{className:"alert alert-info",children:[(0,p.jsx)("strong",{children:"Round 0 - No Investment Instrument"}),(0,p.jsx)("p",{className:"mb-0 mt-2",children:"This is the incorporation round with founder shares only. No external investment instruments are involved."})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between pt-3 border-top gap-2",children:[(0,p.jsxs)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:[(0,p.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>Fe("next"),children:"Continue to Next Section"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:"Investment Instrument"}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center",children:["Select Investment Instrument Type",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"Description:"})," The type of equity issued. Common classes include Common Stock for founders/employees and Preferred shares for investors."]})]}),(0,p.jsx)("span",{className:"text-danger fs-5 ms-1",children:"*"}),se.instrumentType&&(0,p.jsxs)("span",{className:"text-danger small ms-2",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.instrumentType]})]}),(0,p.jsx)("div",{className:"row mt-3",children:[{value:"Common Stock",label:"Common Stock",description:"Direct sale of common shares, often to founders or early employees."},{value:"Preferred Equity",label:"Preferred Equity",description:"Equity with liquidity preference, often used in priced rounds with early-stage investors."},{value:"Convertible Note",label:"Convertible Note",description:"Short-term debt that converts into equity at a future financing round."},{value:"Safe",label:"Safe",description:"Simple Agreement for Future Equity - converts at the time of a priced round."},{value:"Venture/Bank DEBT",label:"Venture/Bank DEBT",description:"Non-convertible financing structured as loans, typically repaid with interest."},{value:"OTHER",label:"Other",description:"Custom investment instrument not listed above."}].map((e=>(0,p.jsx)("div",{className:"col-md-6 mb-3",children:(0,p.jsxs)("div",{className:`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${ae.instrumentType===e.value?"bg-light":"border-gray-300"} ${se.instrumentType?"border-danger":""}`,onClick:()=>{Ne("instrumentType",e.value),"Preferred Equity"!==e.value&&(Ne("liquidation",[]),Ne("liquidationpreferences",""),Ne("liquidationOther","")),"OTHER"!==e.value&&Ne("customInstrument",""),(se.instrumentType||se.customInstrument)&&te((e=>({...e,instrumentType:"",customInstrument:""})))},children:[(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"instrumentType",value:e.value,checked:ae.instrumentType===e.value,onChange:()=>{Ne("instrumentType",e.value),"Preferred Equity"!==e.value&&(Ne("liquidation",[]),Ne("liquidationpreferences",""),Ne("liquidationOther","")),"OTHER"!==e.value&&Ne("customInstrument",""),(se.instrumentType||se.customInstrument)&&te((e=>({...e,instrumentType:"",customInstrument:""})))},className:"form-check-input"}),(0,p.jsx)("label",{className:"form-check-label fw-medium",children:e.label})]}),(0,p.jsx)("p",{className:"text-muted small mb-0 mt-2",children:e.description})]})},e.value)))})]}),"test"===ae.instrumentType&&(0,p.jsxs)("div",{className:"mt-3 p-3 border rounded bg-light",children:[(0,p.jsx)("h5",{children:"Preferred Equity Details"}),(0,p.jsxs)("div",{className:"border-top pt-3 mt-3",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,p.jsx)("h6",{className:"mb-0",children:"Warrant Details (Optional)"}),(0,p.jsxs)("div",{className:"form-check form-switch",children:[(0,p.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasWarrants_preferred",checked:ae.hasWarrants_preferred||!1,onChange:e=>{const s=e.target.checked;Ne("hasWarrants_preferred",s),s||(Ne("warrant_coverage_percentage",""),Ne("warrant_exercise_type","next_round_adjusted"),Ne("warrant_adjustment_percent",""),Ne("warrant_adjustment_direction","decrease"),Ne("expirationDate_preferred",""),Ne("warrant_notes",""))}}),(0,p.jsx)("label",{className:"form-check-label",htmlFor:"hasWarrants_preferred",children:"Include Warrants with this investment"})]})]}),ae.hasWarrants_preferred&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,p.jsx)("strong",{children:"About Warrants:"})," Warrants will be exercised in the next priced equity round. Exercise price and shares will be calculated automatically at that time."]}),(0,p.jsx)("div",{className:"row mb-4",children:(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("label",{className:"form-label",children:["Warrant Coverage Percentage (%)",(0,p.jsx)("span",{className:"text-danger ms-1",children:"*"}),(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"What it is:"})," Percentage of new shares issued in the NEXT priced round that will be allocated as warrant shares.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Example:"})," If Series B issues 50,000 new shares and warrant coverage is 20%, then 10,000 warrant shares will be created."]})]})]}),(0,p.jsxs)("div",{className:"input-group",children:[(0,p.jsx)("input",{type:"number",className:"form-control "+(se.warrant_coverage_percentage?"is-invalid":""),value:ae.warrant_coverage_percentage||"",onChange:e=>{Ne("warrant_coverage_percentage",e.target.value),se.warrant_coverage_percentage&&te((e=>({...e,warrant_coverage_percentage:""})))},placeholder:"e.g., 20",min:"0",max:"100",step:"0.1"}),(0,p.jsx)("span",{className:"input-group-text",children:"%"})]}),se.warrant_coverage_percentage&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.warrant_coverage_percentage]}),(0,p.jsx)("small",{className:"text-muted d-block mt-1",children:"Percentage of next round's new shares that become warrant shares"})]})}),(0,p.jsx)("div",{className:"row mb-4",children:(0,p.jsxs)("div",{className:"col-md-12",children:[(0,p.jsxs)("label",{className:"form-label",children:["Warrant Exercise Price Method",(0,p.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,p.jsxs)("div",{className:"border rounded p-3 bg-white",children:[(0,p.jsxs)("div",{className:"form-check mb-3 opacity-50",children:[(0,p.jsx)("input",{className:"form-check-input",type:"radio",name:"warrant_exercise_type",id:"exerciseTypeFixed",value:"fixed",disabled:!0,checked:"fixed"===ae.warrant_exercise_type}),(0,p.jsxs)("label",{className:"form-check-label",htmlFor:"exerciseTypeFixed",children:[(0,p.jsx)("strong",{children:"Fixed Price"})," (Not available)",(0,p.jsx)("div",{className:"small text-muted",children:"Exercise at a predetermined fixed price - Not supported per client requirements"})]})]}),(0,p.jsxs)("div",{className:"form-check mb-3",children:[(0,p.jsx)("input",{className:"form-check-input",type:"radio",name:"warrant_exercise_type",id:"exerciseTypeNextRound",value:"next_round",checked:"next_round"===ae.warrant_exercise_type,onChange:e=>{Ne("warrant_exercise_type",e.target.value),Ne("warrant_adjustment_percent",""),se.warrant_exercise_type&&te((e=>({...e,warrant_exercise_type:""})))}}),(0,p.jsxs)("label",{className:"form-check-label",htmlFor:"exerciseTypeNextRound",children:[(0,p.jsx)("strong",{children:"Next Priced Round Price"})," (No Adjustment)",(0,p.jsx)("div",{className:"small text-muted",children:"Exercise at the exact share price of the next priced equity round"})]})]}),(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{className:"form-check-input",type:"radio",name:"warrant_exercise_type",id:"exerciseTypeAdjusted",value:"next_round_adjusted",checked:"next_round_adjusted"===ae.warrant_exercise_type||!ae.warrant_exercise_type,onChange:e=>{Ne("warrant_exercise_type",e.target.value),se.warrant_exercise_type&&te((e=>({...e,warrant_exercise_type:""})))}}),(0,p.jsxs)("label",{className:"form-check-label",htmlFor:"exerciseTypeAdjusted",children:[(0,p.jsx)("strong",{children:"Next Priced Round Price \xb1 Adjustment"})," (Recommended)",(0,p.jsx)("div",{className:"small text-muted",children:"Exercise at next round price, adjusted by a percentage increase or decrease"})]})]})]}),se.warrant_exercise_type&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.warrant_exercise_type]})]})}),"next_round_adjusted"===ae.warrant_exercise_type&&(0,p.jsxs)("div",{className:"row mb-4",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("label",{className:"form-label",children:["Adjustment Direction & Percentage",(0,p.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,p.jsxs)("div",{className:"input-group",children:[(0,p.jsxs)("select",{className:"form-select "+(se.warrant_adjustment_direction?"is-invalid":""),style:{maxWidth:"140px"},value:ae.warrant_adjustment_direction||"decrease",onChange:e=>{Ne("warrant_adjustment_direction",e.target.value),se.warrant_adjustment_direction&&te((e=>({...e,warrant_adjustment_direction:""})))},children:[(0,p.jsx)("option",{value:"decrease",children:"Decrease by"}),(0,p.jsx)("option",{value:"increase",children:"Increase by"})]}),(0,p.jsx)("input",{type:"number",className:"form-control "+(se.warrant_adjustment_percent?"is-invalid":""),value:ae.warrant_adjustment_percent||"",onChange:e=>{Ne("warrant_adjustment_percent",e.target.value),se.warrant_adjustment_percent&&te((e=>({...e,warrant_adjustment_percent:""})))},placeholder:"e.g., 20",min:"0",max:"100",step:"0.1"}),(0,p.jsx)("span",{className:"input-group-text",children:"%"})]}),(se.warrant_adjustment_direction||se.warrant_adjustment_percent)&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.warrant_adjustment_direction||se.warrant_adjustment_percent]}),(0,p.jsx)("small",{className:"text-muted d-block mt-1",children:"Adjust the next round's share price by this percentage"})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Example Calculation"}),(0,p.jsx)("div",{className:"form-control bg-light",children:ae.warrant_adjustment_percent?(0,p.jsxs)("small",{children:["If next round price = ",(0,p.jsx)("strong",{children:"$10.00"}),(0,p.jsx)("br",{}),"Adjustment = ",(0,p.jsxs)("strong",{children:[ae.warrant_adjustment_percent,"%"]})," ",ae.warrant_adjustment_direction,(0,p.jsx)("br",{}),(0,p.jsxs)("strong",{children:["\u2192 Exercise price = $","decrease"===ae.warrant_adjustment_direction?(10*(1-ae.warrant_adjustment_percent/100)).toFixed(2):(10*(1+ae.warrant_adjustment_percent/100)).toFixed(2)]})]}):(0,p.jsx)("small",{className:"text-muted",children:"Enter adjustment % to see example"})})]})]}),(0,p.jsx)("div",{className:"row mb-4",children:(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Warrant Expiration Date (Optional)"}),(0,p.jsx)("input",{type:"date",className:"form-control",value:ae.expirationDate_preferred||"",onChange:e=>Ne("expirationDate_preferred",e.target.value)}),(0,p.jsx)("small",{className:"text-muted d-block mt-1",children:"If not specified, warrants will expire in 10 years from issuance"})]})}),(0,p.jsx)("div",{className:"row mb-4",children:(0,p.jsxs)("div",{className:"col-md-12",children:[(0,p.jsx)("label",{className:"form-label",children:"Additional Warrant Terms (Optional)"}),(0,p.jsx)("textarea",{className:"form-control",rows:"3",value:ae.warrant_notes||"",onChange:e=>Ne("warrant_notes",e.target.value),placeholder:"Enter any additional terms or conditions for these warrants..."}),(0,p.jsx)("small",{className:"text-muted d-block mt-1",children:"Any special conditions, vesting schedules, or restrictions"})]})}),(0,p.jsxs)("div",{className:"alert alert-success",children:[(0,p.jsxs)("h6",{className:"fw-bold mb-2",children:[(0,p.jsx)("i",{className:"bi bi-check-circle me-2"}),"Warrant Terms Summary"]}),(0,p.jsxs)("ul",{className:"mb-0 small",children:[(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Coverage:"})," ",ae.warrant_coverage_percentage||"___","% of next round's new shares"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Exercise Method:"})," ","next_round"===ae.warrant_exercise_type?"At next priced round price (no adjustment)":"next_round_adjusted"===ae.warrant_exercise_type?`At next priced round price ${"decrease"===ae.warrant_adjustment_direction?"minus":"plus"} ${ae.warrant_adjustment_percent||"___"}%`:"Not selected"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Exercise Timing:"})," Warrants will be exercised automatically in the next priced equity round"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Share Calculation:"})," Number of warrant shares will be calculated when next round closes"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Dilution Effect:"})," Warrant exercise will dilute all existing shareholders proportionally"]})]})]}),(0,p.jsxs)("div",{className:"alert alert-warning",children:[(0,p.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," The exact number of warrant shares and exercise price will be calculated automatically when the next priced equity round is created. This ensures accurate pricing based on the actual next round terms."]})]})]})]}),"Safe"===ae.instrumentType&&(0,p.jsxs)("div",{className:"mt-3 p-3 border rounded bg-light",children:[(0,p.jsx)("h5",{children:"SAFE Details"}),(0,p.jsxs)("label",{className:"form-label",children:["Valuation Cap ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)(c.HG,{className:"form-control mb-3 "+(se.valuationCap?"is-invalid":""),placeholder:"Enter valuation cap",value:ae.valuationCap||"",thousandSeparator:!0,allowNegative:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:e=>{Ne("valuationCap",e.value),se.valuationCap&&te((e=>({...e,valuationCap:""})))}}),se.valuationCap&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.valuationCap]}),(0,p.jsxs)("label",{className:"form-label",children:["Conversion Discount: (%) ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)(c.HG,{decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter Conversion Discount: (10-25%)",value:ae.discountRate||"",onValueChange:e=>{Ne("discountRate",e.value),se.discountRate&&te((e=>({...e,discountRate:""})))},className:"form-control mb-3 "+(se.discountRate?"is-invalid":"")}),se.discountRate&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.discountRate]})]}),"Convertible Note"===ae.instrumentType&&(0,p.jsxs)("div",{className:"mt-3 p-3 border rounded bg-light",children:[(0,p.jsx)("h5",{children:"Convertible Note Details"}),(0,p.jsxs)("label",{className:"form-label",children:["Valuation Cap ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter valuation cap",value:ae.valuationCap_note||"",onValueChange:e=>{Ne("valuationCap_note",e.value),se.valuationCap_note&&te((e=>({...e,valuationCap_note:""})))},className:"form-control mb-3 "+(se.valuationCap_note?"is-invalid":"")}),se.valuationCap_note&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.valuationCap_note]}),(0,p.jsxs)("label",{className:"form-label",children:["Conversion Discount  (%) ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)(c.HG,{decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter Conversion Discount (10\u201330%)",value:ae.discountRate_note||"",onValueChange:e=>{Ne("discountRate_note",e.value),se.discountRate_note&&te((e=>({...e,discountRate_note:""})))},className:"form-control mb-3 "+(se.discountRate_note?"is-invalid":"")}),se.discountRate_note&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.discountRate_note]}),(0,p.jsx)("label",{className:"form-label",children:"Maturity Date"}),(0,p.jsx)("input",{type:"date",className:"form-control mb-3 "+(se.maturityDate?"is-invalid":""),value:ae.maturityDate||"",onChange:e=>Ne("maturityDate",e.target.value)}),se.maturityDate&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.maturityDate]}),(0,p.jsx)("label",{className:"form-label",children:"Interest Rate (%)"}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter annual interest rate",value:ae.interestRate_note||"",onValueChange:e=>{Ne("interestRate_note",e.value),se.interestRate_note&&te((e=>({...e,interestRate_note:""})))},className:"form-control mb-3 "+(se.interestRate_note?"is-invalid":"")}),se.interestRate_note&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.interestRate_note]})]}),"Venture/Bank DEBT"===ae.instrumentType&&(0,p.jsxs)("div",{className:"mt-3 p-3 border rounded bg-light",children:[(0,p.jsx)("h5",{children:"Venture/Bank Debt Details"}),(0,p.jsxs)("label",{className:"form-label",children:["Interest Rate (%) ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("input",{type:"number",className:"form-control mb-3 "+(se.interestRate?"is-invalid":""),value:ae.interestRate||"",onChange:e=>Ne("interestRate",e.target.value),placeholder:"Enter interest rate"}),se.interestRate&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.interestRate]}),(0,p.jsxs)("label",{className:"form-label",children:["Repayment Schedule (months) ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("input",{type:"number",className:"form-control mb-3 "+(se.repaymentSchedule?"is-invalid":""),value:ae.repaymentSchedule||"",onChange:e=>Ne("repaymentSchedule",e.target.value),placeholder:"Enter repayment schedule in months"}),se.repaymentSchedule&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.repaymentSchedule]}),(0,p.jsxs)("div",{className:"form-check mb-3",children:[(0,p.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasWarrants_Bank",checked:ae.hasWarrants_Bank||!1,onChange:e=>Ne("hasWarrants_Bank",e.target.checked)}),(0,p.jsx)("label",{className:"form-check-label",htmlFor:"hasWarrants_Bank",children:"Add Warrants (optional)"})]}),ae.hasWarrants_Bank&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("label",{className:"form-label",children:"Exercise Price (Strike Price)"}),(0,p.jsx)("input",{type:"number",className:"form-control mb-3",value:ae.exercisePrice_bank||"",onChange:e=>Ne("exercisePrice_bank",e.target.value),placeholder:"Enter exercise price"}),(0,p.jsx)("label",{className:"form-label",children:"Expiration Date"}),(0,p.jsx)("input",{type:"date",className:"form-control mb-3",value:ae.exercisedate_bank||"",onChange:e=>Ne("exercisedate_bank",e.target.value)}),(0,p.jsx)("label",{className:"form-label",children:"Warrant Ratio"}),(0,p.jsx)("input",{type:"text",className:"form-control mb-3",value:ae.warrantRatio_bank||"",onChange:e=>Ne("warrantRatio_bank",e.target.value),placeholder:"e.g., 1:1"}),(0,p.jsx)("label",{className:"form-label",children:"Type of Warrant"}),(0,p.jsxs)("select",{className:"form-control mb-3",value:ae.warrantType_bank||"CALL",onChange:e=>Ne("warrantType_bank",e.target.value),children:[(0,p.jsx)("option",{value:"CALL",children:"Call Warrant (buy shares)"}),(0,p.jsx)("option",{value:"PUT",children:"Put Warrant (sell shares)"})]})]})]}),"OTHER"===ae.instrumentType&&(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Custom Investment Instrument Name",(0,p.jsx)("span",{className:"text-danger fs-5 ms-1",children:"*"})]}),(0,p.jsx)("input",{type:"text",placeholder:"Enter custom investment instrument name",value:ae.customInstrument||"",onChange:e=>Ne("customInstrument",e.target.value),className:"form-control "+(se.customInstrument?"is-invalid":""),maxLength:30}),(0,p.jsxs)("div",{className:"form-text",children:[ae.customInstrument?ae.customInstrument.length:0,"/30 characters"]}),se.customInstrument&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.customInstrument]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between pt-3 border-top gap-2",children:[(0,p.jsxs)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:[(0,p.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{const e={};switch(ae.instrumentType||(e.instrumentType="Please select an investment instrument type"),"OTHER"===ae.instrumentType&&(ae.customInstrument||(e.customInstrument="This field is required")),ae.instrumentType){case"Preferred Equity":default:break;case"Safe":"Safe"===ae.instrumentType&&(ae.valuationCap||(e.valuationCap="This field is required"),ae.discountRate||(e.discountRate="This field is required"));break;case"Convertible Note":"Convertible Note"===ae.instrumentType&&(ae.valuationCap_note||(e.valuationCap_note="This field is required"),ae.discountRate_note||(e.discountRate_note="This field is required"),ae.maturityDate||(e.maturityDate="This field is required"),ae.interestRate_note||(e.interestRate_note="This field is required"));break;case"Venture/Bank DEBT":ae.repaymentSchedule||(e.repaymentSchedule="This field is required"),ae.interestRate||(e.interestRate="This field is required")}0===Object.keys(e).length?(te({}),Fe("next")):(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100))},children:"Save and Continue"})]})]})]}),"description"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Description"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsx)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:(0,p.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,p.jsxs)("p",{children:[" ",(0,p.jsx)("strong",{children:"What it is:"})," A strategic summary that links the equity class to its purpose, issuance context, and recipient group."]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Why it matters:"})," Investors use this to understand the logic behind each class, e.g. who holds it, under what conditions it was granted."]}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,p.jsxs)("p",{children:[" ",(0,p.jsx)("strong",{children:"How to fill it:"})," Detail the rationale and stakeholders behind issuance. Think of this as the why behind the class. For example:"]}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Reserved for key hires under Employee Stock Option Pool"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Issued to seed investors during SAFE conversion in 2022"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Created for strategic Gulf partner with board observer rights"})})]})]})]})})]}),(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("textarea",{placeholder:"Enter the strategic description of your round...",className:"textarea_input "+(se.description?"is-invalid":""),rows:"6",value:ae.description,onChange:e=>{Ne("description",e.target.value),se.description&&te((e=>({...e,description:""})))}}),se.description&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.description]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between pt-3 w-100 border-top gap-2",children:[(0,p.jsxs)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:[(0,p.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{ae.description?(te({...se,description:""}),Fe("next")):te({...se,description:"This field is required"})},children:"Save and Continue"})]})]}),"roundsize"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Company Valuation":"Round Size"}),z?(0,p.jsxs)("div",{className:"round-zero-content",children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Round 0 Information:"})," This is your company's incorporation round. The valuation is based on the share allocation and price per share from your incorporation documents."]}),(0,p.jsxs)("div",{className:"calculation-results p-4 border rounded bg-light mb-4",children:[(0,p.jsx)("h5",{children:"Round 0 - Incorporation Valuation"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Total Shares Issued:"})," ",Je().toLocaleString()]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Price Per Share:"})," $",ae.pricePerShare||"0.00"]})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Total Company Value:"})," $",Ue()]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Number of Founders:"})," ",H]})]})]}),(0,p.jsx)("div",{className:"alert alert-warning mt-3 mb-0",children:(0,p.jsxs)("small",{children:[(0,p.jsx)("strong",{children:"Note:"})," This valuation is for incorporation purposes only and will not carry over to future investment rounds. Each subsequent round will calculate its own price per share based on investment size and pre-money valuation."]})})]}),(0,p.jsxs)("div",{className:"mt-4 p-3 bg-light rounded",children:[(0,p.jsx)("h6",{children:"About Round 0 Valuation:"}),(0,p.jsxs)("ul",{className:"mb-0",children:[(0,p.jsx)("li",{children:"Based on incorporation documents and initial share allocation"}),(0,p.jsx)("li",{children:"Price per share is the par value from your incorporation"}),(0,p.jsx)("li",{children:"This valuation represents the initial capital contribution by founders"}),(0,p.jsx)("li",{children:"Future rounds will calculate price per share based on investment and valuation inputs"})]})]})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"row align-items-start",children:[(0,p.jsx)("div",{className:"col-md-12 mb-4",children:(0,p.jsxs)("div",{className:"card mb-4",children:[(0,p.jsxs)("div",{className:"card-header bg-light d-flex justify-content-between align-items-center",children:[(0,p.jsx)("h6",{className:"mb-0 fw-semibold",children:"Investment Details"}),(0,p.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:cs,children:[(0,p.jsx)("i",{className:"bi bi-plus-circle me-1"}),"Add Another Investor"]})]}),(0,p.jsxs)("div",{className:"card-body",children:[ne.map(((e,s)=>(0,p.jsxs)("div",{className:"card mb-3 border",children:[(0,p.jsx)("div",{className:"card-header bg-light py-2",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsxs)("span",{className:"fw-bold",children:["Investor #",s+1]}),ne.length>1&&(0,p.jsxs)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>(e=>{if(ne.length>1){const s=ne.filter((s=>s.id!==e));ie(s);const t=s.reduce(((e,s)=>{const t=parseFloat(s.amount);return e+(isNaN(t)?0:t)}),0);Ne("roundsize",t.toString())}})(e.id),children:[(0,p.jsx)("i",{className:"bi bi-trash me-1"}),"Remove"]})]})}),(0,p.jsx)("div",{className:"card-body",children:(0,p.jsxs)("div",{className:"row g-3",children:[(0,p.jsxs)("div",{className:"col-md-3",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["First Name ",0===s?"":`#${s+1}`,0===s&&(0,p.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,p.jsx)("input",{type:"text",className:"form-control form-control-sm "+(e.error?"is-invalid":""),placeholder:"First name",value:e.firstName||"",onChange:s=>ds(e.id,"firstName",s.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Last Name ",0===s?"":`#${s+1}`]}),(0,p.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:"Last name",value:e.lastName||"",onChange:s=>ds(e.id,"lastName",s.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Email ",0===s?"":`#${s+1}`]}),(0,p.jsx)("input",{type:"email",className:"form-control form-control-sm "+(e.error?"is-invalid":""),placeholder:"email@example.com",value:e.email||"",onChange:s=>ds(e.id,"email",s.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-3",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Phone ",0===s?"":`#${s+1}`]}),(0,p.jsx)("input",{type:"tel",className:"form-control form-control-sm",placeholder:"Phone number",value:e.phone||"",onChange:s=>ds(e.id,"phone",s.target.value)})]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Investment Amount ",0===s?"":`#${s+1}`," (",b,")",0===s&&(0,p.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter amount",value:e.amount||"",onValueChange:s=>((e,s)=>{const t=ne.map((t=>t.id===e?{...t,amount:s.value,error:""}:t));ie(t);const a=t.reduce(((e,s)=>{const t=parseFloat(s.amount);return e+(isNaN(t)?0:t)}),0);Ne("roundsize",a.toString())})(e.id,s),className:"form-control form-control-sm "+(e.error?"is-invalid":"")})]}),e.error&&(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),e.error]})})]})})]},e.id))),(0,p.jsx)("div",{className:"row mb-3",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsxs)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:cs,children:[(0,p.jsx)("i",{className:"bi bi-plus-circle me-1"}),"Add Another Investor"]})})}),(0,p.jsxs)("div",{className:"row mt-3 pt-3 border-top",children:[(0,p.jsx)("div",{className:"col-md-9",children:(0,p.jsx)("label",{className:"form-label fw-bold",children:"Total Investment Amount"})}),(0,p.jsx)("div",{className:"col-md-3",children:(0,p.jsxs)("div",{className:"input-group",children:[(0,p.jsx)("span",{className:"input-group-text",children:b}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter amount",value:ne.reduce(((e,s)=>{const t=parseFloat(s.amount);return e+(isNaN(t)?0:t)}),0).toFixed(2),readOnly:!0,disabled:!0,className:"form-control form-control-sm"})]})})]})]})]})}),(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Currency ",(0,p.jsx)("span",{className:"text-danger fs-5 ms-1",children:"*"})]}),(0,p.jsx)("select",{disabled:!0,className:"textarea_input "+(se.currency?"is-invalid":""),value:ae.currency,onChange:e=>{Ne("currency",e.target.value),se.currency&&te((e=>({...e,currency:""})))},children:(0,p.jsx)("option",{value:`${b}`,children:b})}),se.currency&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.currency]})]}),(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Target Investment Amount :",(0,p.jsx)("i",{className:"bi bi-info-circle text-muted ms-1",title:"."})]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter target investment amount",value:ae.round_target_money,onValueChange:e=>{Ne("round_target_money",e.value)},className:"textarea_input"})]}),(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:[" ","Safe"===ae.instrumentType||"Convertible Note"===ae.instrumentType?"Company Valuation":"Pre-Money Valuation"," "," "," (",b,")"]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter pre-money valuation",value:ae.pre_money,onValueChange:e=>{Ne("pre_money",e.value),re((e=>({...e,isPostEntered:!1})))},className:"textarea_input"})]}),("Safe"!==ae.instrumentType||"Convertible Note"!==ae.instrumentType)&&("OTHER"===ae.instrumentType||"Common Stock"===ae.instrumentType||"Preferred Equity"===ae.instrumentType)&&(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Post-Money Valuation"," ","(",b,")"]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,disabled:!0,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter post-money valuation",value:ae.post_money,onValueChange:e=>{Ne("post_money",e.value),re((e=>({...e,isPostEntered:!0})))},className:"textarea_input"})]}),(0,p.jsxs)("div",{className:"row",children:[("Common Stock"===ae.instrumentType||"Preferred Equity"===ae.instrumentType||"Safe"===ae.instrumentType||"OTHER"===ae.instrumentType||"Convertible Note"===ae.instrumentType)&&(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Pre-Money Option Pool (%)",(0,p.jsx)("i",{className:"bi bi-info-circle text-muted ms-1",title:"Common Stock"===ae.instrumentType||"Preferred Equity"===ae.instrumentType?"Carried over from previous round - This is the existing option pool percentage before Series A investment":"Percentage of equity reserved for employees before this round"})]}),("Common Stock"===ae.instrumentType||ae.instrumentType,(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter option pool % (e.g. 10)",value:ae.optionPoolPercent,onValueChange:e=>{Ne("optionPoolPercent",e.floatValue)},className:"textarea_input"})}))]}),(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Post-Money Option Pool Target (%)",(0,p.jsx)("i",{className:"bi bi-info-circle text-muted ms-1",title:"Target percentage of equity reserved for employees after this investment round. If higher than existing pool, additional shares will be created."})]}),(0,p.jsx)(c.HG,{suffix:"%",decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter target pool % (e.g. 20)",value:ae.optionPoolPercent_post,onValueChange:e=>{Ne("optionPoolPercent_post",e.value)},className:"textarea_input"}),se.optionPoolPercent_post&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.optionPoolPercent_post]}),(0,p.jsx)("small",{className:"text-muted d-block mt-1",children:"Target option pool percentage after investment (Post-Money)"}),ae.optionPoolPercent&&ae.optionPoolPercent_post&&(0,p.jsx)(p.Fragment,{children:"Safe"!==ae.instrumentType&&"Convertible Note"!==ae.instrumentType&&"Preferred Equity"!==ae.instrumentType&&(0,p.jsx)("div",{className:"mt-2",children:parseFloat(ae.optionPoolPercent_post)>parseFloat(ae.optionPoolPercent)?(0,p.jsxs)("div",{className:"alert alert-warning py-2 mb-0",style:{fontSize:"0.85em"},children:[(0,p.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),(0,p.jsx)("strong",{children:"Top-up needed:"})," Expanding pool from ",ae.optionPoolPercent,"% to ",ae.optionPoolPercent_post,"%",(0,p.jsx)("br",{})]}):parseFloat(ae.optionPoolPercent_post)===parseFloat(ae.optionPoolPercent)?(0,p.jsxs)("div",{className:"alert alert-info py-2 mb-0",style:{fontSize:"0.85em"},children:[(0,p.jsx)("i",{className:"bi bi-info-circle-fill me-2"}),(0,p.jsx)("strong",{children:"No change:"})," Maintaining ",ae.optionPoolPercent,"% pool"]}):(0,p.jsxs)("div",{className:"alert alert-success py-2 mb-0",style:{fontSize:"0.85em"},children:[(0,p.jsx)("i",{className:"bi bi-check-circle-fill me-2"}),(0,p.jsx)("strong",{children:"No top-up needed:"})," Existing ",ae.optionPoolPercent,"% pool is sufficient",(0,p.jsx)("br",{}),(0,p.jsx)("small",{className:"text-muted",children:"No additional option shares will be created"})]})})})]})]}),(()=>{const e="Safe"===ae.instrumentType,s="Common Stock"===ae.instrumentType,t="Convertible Note"===ae.instrumentType,a=["Seed","Pre-Seed","Post-Seed"].includes(ae.shareClassType),r=null===_e||void 0===_e?void 0:_e.includes("Series");return!(s||e&&a||e&&r||t&&r||t&&a||"Preferred Equity"===ae.instrumentType)&&(0,p.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Total Shares Issued in this Round"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsx)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:"The number of shares in an early-stage company represents the total units of ownership authorized, issued, or outstanding across the cap table..."})]})]}),(0,p.jsx)(c.HG,{thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"Enter # of shares",value:ae.issuedshares,onValueChange:e=>{Ne("issuedshares",e.value),se.issuedshares&&te((e=>({...e,issuedshares:""})))},className:"textarea_input"})]})})()]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{const e={};if(z);else{ae.currency&&""!==ae.currency.trim()||(e.currency="Currency selection is required");if(!(()=>{let e=!0,s=!1;const t=ne.map(((t,a)=>{let r="";const n=parseFloat(t.amount);return 0!==a||t.firstName&&""!==t.firstName.trim()||(r="First name is required",e=!1),t.email&&""!==t.email.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(r=r||"Invalid email format",e=!1)),0===a?t.amount&&""!==t.amount.trim()?isNaN(n)||n<=0?(r=r||"Amount must be greater than 0",e=!1):s=!0:(r=r||"Investment amount is required",e=!1):t.amount&&""!==t.amount.trim()&&(isNaN(n)||n<=0?(r=r||"Amount must be greater than 0",e=!1):s=!0,t.firstName&&""!==t.firstName.trim()||(r=r||"First name is required when amount is provided",e=!1)),{...t,error:r}}));return ie(t),s||(ie((e=>e.map(((e,s)=>0===s?{...e,error:"At least one investment is required"}:e)))),e=!1),e})())return void setTimeout((()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100);(null===_e||void 0===_e?void 0:_e.includes("Series"))&&ae.instrumentType,(null===_e||void 0===_e?void 0:_e.includes("Series"))&&ae.instrumentType,"Preferred Equity"===ae.instrumentType||ae.instrumentType}Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),ie((e=>e.map((e=>({...e,error:""}))))),Fe("next"))},children:"Save and Continue"})]})]}),"issuedshares"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Share Allocation Summary":""}),z?(0,p.jsxs)("div",{className:"round-zero-summary",children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Round 0 Summary"})," - This is your company's incorporation round. The shares have already been allocated to founders in the previous section."]}),(0,p.jsxs)("div",{className:"calculation-results p-4 border rounded bg-light",children:[(0,p.jsx)("h5",{children:"Round 0 - Incorporation Summary"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Total Shares Issued:"})," ",Je().toLocaleString()]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Price Per Share:"})," ",ae.currency?ae.currency.split(" ")[1]:"$",ae.pricePerShare||"0.00"]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Total Company Value:"})," ",ae.currency?ae.currency.split(" ")[1]:"$",Ue()]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Currency:"})," ",ae.currency||"CAD $"]})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Number of Founders:"})," ",H]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Round Status:"})," ",(0,p.jsx)("span",{className:"text-success",children:"COMPLETED"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Round Type:"})," Incorporation Round"]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Round Date:"})," ",ls(ge.created_at)]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("strong",{children:"Date of Incorporation:"})," ",(hs=ge.year_registration,hs?/^\d{4}$/.test(hs)?hs:ls(hs):"Not provided")]})]})]}),Je()>0&&(0,p.jsx)("div",{className:"mt-4 p-3 bg-white rounded border",children:(0,p.jsxs)("div",{className:"row text-center",children:[(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("small",{className:"text-muted",children:"Largest Ownership"}),(0,p.jsxs)("div",{className:"fw-bold",children:[Math.max(...G.map((e=>{const s=parseInt(e.shares)||0;return Je()>0?s/Je()*100:0}))).toFixed(1),"%"]})]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("small",{className:"text-muted",children:"Smallest Ownership"}),(0,p.jsxs)("div",{className:"fw-bold",children:[Math.min(...G.map((e=>{const s=parseInt(e.shares)||0;return Je()>0?s/Je()*100:0}))).toFixed(1),"%"]})]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("small",{className:"text-muted",children:"Founders"}),(0,p.jsxs)("div",{className:"fw-bold",children:[H," / ",H]})]})]})})]}),(0,p.jsxs)("div",{className:"mt-4 p-3 bg-light rounded",children:[(0,p.jsx)("h6",{children:"About Round 0 (Incorporation Round):"}),(0,p.jsxs)("ul",{className:"mb-0",children:[(0,p.jsx)("li",{children:"This round represents the initial share allocation at company incorporation"}),(0,p.jsx)("li",{children:"Shares are allocated to founders based on the incorporation documents"}),(0,p.jsx)("li",{children:'Round 0 is automatically considered "COMPLETED" as it happens at company formation'}),(0,p.jsx)("li",{children:"This forms the foundation of your cap table for future investment rounds"}),(0,p.jsx)("li",{children:"The valuation shown is for incorporation purposes only and will not carry over to future rounds"}),(0,p.jsx)("li",{children:"Each subsequent investment round will calculate its own price per share"})]})]}),(0,p.jsxs)("div",{className:"alert alert-warning mt-3",children:[(0,p.jsx)("strong",{children:"Important:"})," This Round 0 data will serve as the foundation for your cap table. Make sure all information is accurate before proceeding."]})]}):(0,p.jsx)("div",{className:"row",children:(0,p.jsxs)("div",{className:"col-md-12 mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Is this round closed or active?"," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{className:"form-check-input",type:"radio",name:"roundStatus",id:"roundClosed",value:"CLOSED",checked:"CLOSED"===ae.roundStatus,onChange:e=>Ne("roundStatus",e.target.value)}),(0,p.jsx)("label",{className:"form-check-label",htmlFor:"roundClosed",children:"CLOSED"})]}),(0,p.jsxs)("div",{className:"form-check mb-3",children:[(0,p.jsx)("input",{className:"form-check-input",type:"radio",name:"roundStatus",id:"roundActive",value:"ACTIVE",checked:"ACTIVE"===ae.roundStatus,onChange:e=>Ne("roundStatus",e.target.value)}),(0,p.jsx)("label",{className:"form-check-label",htmlFor:"roundActive",children:"ACTIVE"})]}),se.roundStatus&&(0,p.jsxs)("div",{className:"text-danger small",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.roundStatus]}),"CLOSED"===ae.roundStatus&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Date Round Closed"," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("input",{type:"text",placeholder:"MM/DD/YYYY",value:ae.dateroundclosed||"",onChange:e=>{Ne("dateroundclosed",e.target.value),se.dateroundclosed&&te((e=>({...e,dateroundclosed:""})))},className:"form-control "+(se.dateroundclosed?"is-invalid":"")}),se.dateroundclosed&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.dateroundclosed]}),(0,p.jsx)("div",{className:"form-text mb-3",children:"Calendar: MM / DD / YYYY"})]})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{if(z)return void Fe("next");const e={};if(ae.roundStatus||(e.roundStatus="Please select CLOSED or ACTIVE"),"CLOSED"===ae.roundStatus){const s=/^(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01])\/\d{4}$/,t=ae.dateroundclosed;if(t)if(s.test(t)){const[s,a,r]=t.split("/").map(Number),n=new Date(r,s-1,a),i=new Date;i.setHours(0,0,0,0),n<i&&(e.dateroundclosed="Date cannot be in the past")}else e.dateroundclosed="Enter a valid date (MM/DD/YYYY)";else e.dateroundclosed="This field is required"}Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid, .border-danger");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"rights"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Founder Rights & Preferences":"Rights Associated with this Share Class"}),z?(0,p.jsxs)("div",{className:"round-zero-content",children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Round 0 Information:"})," These are the rights and preferences for founder shares as per your incorporation documents."]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Founder Share Rights & Preferences"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"For Round 0 (Founder Shares):"})," Describe the rights and preferences for founder shares as outlined in your incorporation documents. This typically includes voting rights, dividend preferences, transfer restrictions, and any special founder protections.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Common Founder Rights:"}),"\u2013 Full voting rights on major company decisions",(0,p.jsx)("br",{}),"\u2013 Right to receive dividends if declared",(0,p.jsx)("br",{}),"\u2013 Pre-emptive rights to maintain ownership percentage",(0,p.jsx)("br",{}),"\u2013 Founder vesting schedules (if applicable)",(0,p.jsx)("br",{}),"\u2013 Transfer restrictions and right of first refusal"]})]})]}),(0,p.jsx)("textarea",{placeholder:"Describe the rights and preferences for founder shares as per incorporation documents (e.g., voting rights, dividend preferences, transfer restrictions)",className:"textarea_input",rows:"4",value:ae.rights,onChange:e=>Ne("rights",e.target.value)}),(0,p.jsx)("div",{className:"form-text",children:'Example: "Founders hold common shares with full voting rights, pre-emptive rights to maintain ownership percentage, and standard transfer restrictions as per the shareholders agreement."'})]}),(0,p.jsxs)("div",{className:"common-rights-info p-3 bg-light rounded mb-4",children:[(0,p.jsx)("h6",{children:"Common Founder Rights in Round 0:"}),(0,p.jsxs)("ul",{className:"mb-0 small",children:[(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Voting Rights:"})," Typically full voting rights on major decisions"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Dividend Rights:"})," Right to receive dividends if company declares them"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Pre-emptive Rights:"})," Right to participate in future rounds to maintain ownership"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Transfer Restrictions:"})," Limitations on selling shares without board approval"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Founder Vesting:"})," Shares may be subject to vesting schedule"]})]})]})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Rights Associated with this Share Class"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsx)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:(0,p.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"What it is:"})," Specifies the negotiated powers and entitlements that holders of this class enjoy \u2014 it's the fine print investors care about."]}),(0,p.jsxs)("p",{children:[" ",(0,p.jsx)("strong",{children:"Why it matters:"})," This defines control dynamics, dividend rights, conversion triggers, redemption clauses, anti-dilution, etc. It's the architecture of deal terms."]}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"How to fill it:"})," Reference exact clauses from investor agreements (term sheets or subscription documents) and simplify into readable but accurate summaries."]}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Non-cumulative dividends at 6% annually"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Non-cumulative dividends at 6% annually"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Automatic conversion on qualified financing >$5M"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Protective provisions for mergers, board expansion, and budget approvals"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Anti-dilution protection (full-ratchet or weighted-average)"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Redemption rights after 5 years"})}),(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:"\u2013 Pre-emptive rights for future rounds"})})]})]})]})})]}),(0,p.jsx)("span",{className:"text-danger fs-5 ms-1",children:"*"})]}),(0,p.jsx)("textarea",{placeholder:"Describe the rights and preferences for this share class (e.g., dividend rights, conversion triggers, protective provisions)",className:"textarea_input "+(se.rights?"is-invalid":""),rows:"4",value:ae.rights,onChange:e=>{Ne("rights",e.target.value),se.rights&&te((e=>({...e,rights:""})))}}),se.rights&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.rights]}),(0,p.jsx)("div",{className:"form-text",children:"Be specific about dividend preferences, conversion rights, protective provisions, and any special rights."})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{const e={};z||(ae.rights&&""!==ae.rights.trim()?ae.rights.trim().length<10&&(e.rights="Please provide more detailed description of rights"):e.rights="Please describe the rights associated with this share class"),Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"liquidation"===w&&!z&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares","rights"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:"Liquidation Preference"}),z?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsxs)("div",{className:"alert alert-info",children:[(0,p.jsx)("strong",{children:"Round 0 - No Liquidation Preference"}),(0,p.jsx)("p",{className:"mb-0 mt-2",children:"This is the incorporation round with founder shares only. Liquidation preferences typically apply to investor rounds only."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{className:"global_btn",onClick:()=>Fe("next"),children:"Continue to Next Section"})})]}):(0,p.jsx)(p.Fragment,{children:"Preferred Equity"===ae.instrumentType&&(0,p.jsxs)("div",{className:"investment-round-content",children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Liquidation Preference Details"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"Note from Meeting:"})," Liquidation preferences only apply to Preferred Stock in priced rounds.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"For SAFEs/Convertible Notes:"})," They get liquidation preferences ONLY when they convert to Preferred Stock.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"For Common Stock/Venture Debt:"})," No liquidation preferences apply."]})]})]}),(0,p.jsx)("textarea",{placeholder:"Describe the liquidation preference terms (e.g., 1x non-participating preference, senior to common shares)",className:"textarea_input",rows:"4",value:ae.liquidationpreferences,onChange:e=>Ne("liquidationpreferences",e.target.value)}),(0,p.jsxs)("div",{className:"form-text",children:['Example: "Investors receive 1x liquidation preference, non-participating, pari passu with other preferred shares."',(0,p.jsx)("br",{}),(0,p.jsx)("small",{className:"text-muted",children:(0,p.jsx)("i",{children:"Note: This section only appears for Preferred Equity rounds as per meeting guidelines."})})]})]}),(0,p.jsxs)("div",{className:"row mt-3",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"liquidation-group mb-4",children:[(0,p.jsx)("h6",{className:"fw-semibold mb-3 border-bottom pb-2",children:"Preference Multiple"}),(0,p.jsx)("div",{className:"row",children:qe.multiplePreferences.map((e=>{var s,t;return(0,p.jsx)("div",{className:"col-12 mb-3",children:(0,p.jsxs)("div",{className:`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${null!==ae&&void 0!==ae&&null!==(s=ae.liquidation)&&void 0!==s&&s.includes(e.value)?"bg-light border-primary":"border-gray-300"} ${se.liquidation?"is-invalid":""}`,onClick:()=>{let s=[...(null===ae||void 0===ae?void 0:ae.liquidation)||[]];const t=qe.participationRights.map((e=>e.value));s=s.filter((e=>!t.includes(e)));const a=qe.multiplePreferences.map((e=>e.value)).filter((s=>s!==e.value));s=s.filter((e=>!a.includes(e))),s=s.filter((e=>"N/A"!==e&&"OTHER"!==e)),s.includes(e.value)?s=s.filter((s=>s!==e.value)):s.push(e.value),Ne("liquidation",s),se.liquidation&&te((e=>({...e,liquidation:""})))},children:[(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"multiplePreference",value:e.value,checked:(null===ae||void 0===ae||null===(t=ae.liquidation)||void 0===t?void 0:t.includes(e.value))||!1,onChange:()=>{},className:"form-check-input"}),(0,p.jsx)("label",{className:"form-check-label fw-medium",children:e.label})]}),(0,p.jsx)("p",{className:"text-muted small mb-0 mt-2",children:e.description})]})},e.value)}))})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"liquidation-group mb-4",children:[(0,p.jsx)("h6",{className:"fw-semibold mb-3 border-bottom pb-2",children:"Participation Rights"}),(0,p.jsx)("div",{className:"row",children:qe.participationRights.map((e=>{var s,t;return(0,p.jsx)("div",{className:"col-12 mb-3",children:(0,p.jsxs)("div",{className:`form-check-card p-3 border rounded-3 cursor-pointer h-100 ${null!==ae&&void 0!==ae&&null!==(s=ae.liquidation)&&void 0!==s&&s.includes(e.value)?"bg-light border-primary":"border-gray-300"} ${se.liquidation?"is-invalid":""}`,onClick:()=>{let s=[...(null===ae||void 0===ae?void 0:ae.liquidation)||[]];if("N/A"===e.value)s=["N/A"];else{const t=qe.multiplePreferences.map((e=>e.value));s=s.filter((e=>!t.includes(e))),s=s.filter((e=>"N/A"!==e&&"OTHER"!==e)),s.includes(e.value)?s=s.filter((s=>s!==e.value)):s.push(e.value)}Ne("liquidation",s),se.liquidation&&te((e=>({...e,liquidation:""})))},children:[(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"checkbox",name:"participationRights",value:e.value,checked:(null===ae||void 0===ae||null===(t=ae.liquidation)||void 0===t?void 0:t.includes(e.value))||!1,onChange:()=>{},className:"form-check-input"}),(0,p.jsx)("label",{className:"form-check-label fw-medium",children:e.label})]}),(0,p.jsx)("p",{className:"text-muted small mb-0 mt-2",children:e.description})]})},e.value)}))})]})})]}),(0,p.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,p.jsx)("strong",{children:"Understanding Liquidation Preferences (For Preferred Equity Only):"}),(0,p.jsxs)("ul",{className:"mb-0 mt-2 small",children:[(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Applies to:"})," Preferred Stock only (not Common Stock, SAFEs, or Venture Debt)"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"SAFE/Convertible Notes:"})," Get preferences only when they convert to Preferred Stock"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"1x Preference:"})," Basic protection - get investment back first"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Multiple Preference:"})," Get 2x, 3x, etc. of investment back first"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Participating:"})," Get preference amount AND share remaining proceeds"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Non-Participating:"})," Choose between preference OR converting to common shares"]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Capped Participating:"})," Participation stops at a certain multiple"]})]})]})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{if(z)return void Fe("next");const e={};Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid, .border-danger");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"voting"===w&&!z&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares","rights","liquidation","convertible"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Founder Voting Rights":"Shareholders Voting Rights"}),z?(0,p.jsxs)("div",{className:"round-zero-content",children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Round 0 Information:"})," Founder shares typically have voting rights as per your incorporation documents."]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Do Founder Shares Have Voting Rights?"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"For Round 0 (Founder Shares):"})," Indicate whether founder shares carry voting rights for company decisions, board appointments, and major corporate actions.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Common Founder Voting Rights:"}),(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"Yes:"})," Founders can vote on major company decisions",(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"No:"})," Founders have non-voting shares (rare for founders)",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Typical Scenario:"})," Most founder shares have full voting rights allowing participation in key decisions like:",(0,p.jsx)("br",{}),"\u2022 Board of directors elections",(0,p.jsx)("br",{}),"\u2022 Major corporate transactions",(0,p.jsx)("br",{}),"\u2022 Approval of future funding rounds",(0,p.jsx)("br",{}),"\u2022 Changes to company bylaws"]})]})]}),(0,p.jsxs)("div",{className:"d-flex gap-3",children:[(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"voting",value:"Yes",checked:"Yes"===ae.voting,onChange:()=>{Ne("voting","Yes"),se.voting&&te((e=>({...e,voting:""})))},className:"form-check-input"}),(0,p.jsx)("label",{className:"form-check-label",children:"Yes"})]}),(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"voting",value:"No",checked:"No"===ae.voting,onChange:()=>{Ne("voting","No"),se.voting&&te((e=>({...e,voting:""})))},className:"form-check-input"}),(0,p.jsx)("label",{className:"form-check-label",children:"No"})]})]}),(0,p.jsx)("div",{className:"form-text",children:'Most founder shares have voting rights. Select "Yes" unless your incorporation documents specify non-voting shares.'})]}),"Yes"===ae.voting&&(0,p.jsxs)("div",{className:"mb-4 p-3 border rounded bg-light",children:[(0,p.jsx)("h6",{children:"Founder Voting Rights Details"}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("label",{className:"form-label",children:"Voting Power Distribution"}),(0,p.jsx)("div",{className:"table-responsive",children:(0,p.jsxs)("table",{className:"table table-sm table-bordered",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Founder"}),(0,p.jsx)("th",{children:"Shares"}),(0,p.jsx)("th",{children:"Voting Power"})]})}),(0,p.jsx)("tbody",{children:G.map(((e,s)=>{const t=parseInt(e.shares)||0,a=Je(),r=a>0?(t/a*100).toFixed(1):"0.0";return(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:["Founder ",s+1]}),(0,p.jsx)("td",{children:t.toLocaleString()}),(0,p.jsxs)("td",{children:[r,"%"]})]},s)}))})]})})]})]}),(0,p.jsxs)("div",{className:"alert alert-warning mt-3",children:[(0,p.jsx)("strong",{children:"About Founder Voting Rights:"}),(0,p.jsxs)("ul",{className:"mb-0 mt-2 small",children:[(0,p.jsx)("li",{children:"Founder voting rights are typically proportional to share ownership"}),(0,p.jsx)("li",{children:"Each share usually equals one vote (one-share-one-vote principle)"}),(0,p.jsx)("li",{children:"Voting rights allow participation in major corporate decisions"}),(0,p.jsx)("li",{children:"Some decisions may require supermajority votes for extra protection"})]})]})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold",children:["Shareholders Voting Rights"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"What it is:"})," Determines how much influence equity holders wield in company decisions, including board appointments, strategic pivots, and future fundraising.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Why it matters:"})," Control rights shape governance \u2014 founders often trade economic upside for retaining voting control. Investors may require protective provisions and veto rights.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Investor Voting Scenarios:"}),(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"Yes:"})," Investors have voting rights (common for preferred shares)",(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"No:"})," Investors have non-voting shares (rare for equity investors)",(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"Protective Provisions:"})," Veto rights on specific major decisions",(0,p.jsx)("br",{}),"\u2013 ",(0,p.jsx)("strong",{children:"Board Seats:"})," Right to appoint board directors"]})]})," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsxs)("div",{className:"d-flex gap-3",children:[(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"voting",value:"Yes",checked:"Yes"===ae.voting,onChange:()=>{Ne("voting","Yes"),se.voting&&te((e=>({...e,voting:""})))},className:"form-check-input "+(se.voting?"is-invalid":"")}),(0,p.jsx)("label",{className:"form-check-label",children:"Yes"})]}),(0,p.jsxs)("div",{className:"form-check",children:[(0,p.jsx)("input",{type:"radio",name:"voting",value:"No",checked:"No"===ae.voting,onChange:()=>{Ne("voting","No"),se.voting&&te((e=>({...e,voting:""})))},className:"form-check-input "+(se.voting?"is-invalid":"")}),(0,p.jsx)("label",{className:"form-check-label",children:"No"})]})]}),se.voting&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.voting]}),"Yes"===ae.voting&&(0,p.jsxs)("div",{className:"mt-3 p-3 bg-light rounded",children:[(0,p.jsx)("h6",{children:"Investor Voting Rights Details"}),(0,p.jsxs)("div",{className:"form-text",children:[(0,p.jsx)("strong",{children:"Common Investor Voting Rights Include:"}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{className:"alert alert-warning p-2 mt-2 mb-2",children:(0,p.jsxs)("strong",{className:"d-block text-center",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Please connect with your Legal Council and make sure that all your voting rights of this round are included in term sheet as subscription document"]})}),(0,p.jsxs)("ul",{className:"mb-0 mt-2",children:[(0,p.jsx)("li",{children:"May included Election of board directors"}),(0,p.jsx)("li",{children:"May included Approval of major corporate transactions"}),(0,p.jsx)("li",{children:"May included Changes to company charter or bylaws"}),(0,p.jsx)("li",{children:"May included Issuance of new equity securities"}),(0,p.jsx)("li",{children:"May included Approval of annual budgets"})]})]})]})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{const e={};z?ae.voting||Ne("voting","Yes"):ae.voting||(e.voting="Please select Yes or No"),Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid, .border-danger");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"termsheet"===w&&!z&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares","rights","liquidation","convertible","voting"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:"Investment Documents - Term Sheet"}),z?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsxs)("div",{className:"alert alert-info",children:[(0,p.jsx)("strong",{children:"Round 0 - No Term Sheet Required"}),(0,p.jsx)("p",{className:"mb-0 mt-2",children:"This is the incorporation round with founder shares only. Term sheets are typically used for investor funding rounds."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{className:"global_btn",onClick:()=>Fe("next"),children:"Continue to Notes Section"})})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center",children:["Upload Your Term Sheet(s)"," ",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:["A term sheet is a non-binding document that sets the stage for an investment by outlining the essential terms of the deal: valuation, share type, governance rights, investor protections, and expected post-money ownership. It is the 'strategic handshake' between founders and investors before drafting legal documents.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Key Elements in Term Sheets:"}),"\u2013 Valuation (pre-money and post-money)",(0,p.jsx)("br",{}),"\u2013 Investment amount and share price",(0,p.jsx)("br",{}),"\u2013 Liquidation preferences",(0,p.jsx)("br",{}),"\u2013 Voting rights and protective provisions",(0,p.jsx)("br",{}),"\u2013 Board composition",(0,p.jsx)("br",{}),"\u2013 Anti-dilution provisions",(0,p.jsx)("br",{}),"\u2013 Dividend preferences"]})]}),(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt",onChange:e=>{Ne("termsheetFile",Array.from(e.target.files)),se.termsheetFile&&te((e=>({...e,termsheetFile:""})))},className:"textarea_input "+(se.termsheetFile?"is-invalid":"")}),ae.termsheetFile&&ae.termsheetFile.length>0&&(0,p.jsxs)("div",{className:"mt-2",children:[(0,p.jsx)("strong",{children:"Selected Files:"}),(0,p.jsx)("ul",{className:"small text-muted mt-1 mb-0",children:ae.termsheetFile.map(((e,s)=>(0,p.jsx)("li",{children:(0,p.jsx)("strong",{children:e.name})},s)))})]}),se.termsheetFile&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.termsheetFile]}),(0,p.jsx)("div",{className:"form-text",children:"Supported formats: PDF, DOC, DOCX, TXT. Maximum file size: 10MB per file."})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{if(z)return void Fe("next");const e={};if(ae.termsheetFile&&0!==ae.termsheetFile.length){const s=["pdf","doc","docx","txt"],t=10485760;for(const a of ae.termsheetFile){const r=a.name.split(".").pop().toLowerCase();if(!s.includes(r)){e.termsheetFile="Invalid file type. Please upload PDF, DOC, DOCX, or TXT files only";break}if(a.size>t){e.termsheetFile=`File ${a.name} exceeds 10MB size limit`;break}}}else e.termsheetFile="Please upload at least one term sheet file";Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid, .border-danger");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"subscription"===w&&!z&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares","rights","liquidation","convertible","voting","termsheet"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:"Investment Documents - Subscription"}),z?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsxs)("div",{className:"alert alert-info",children:[(0,p.jsx)("strong",{children:"Round 0 - No Subscription Documents Required"}),(0,p.jsx)("p",{className:"mb-0 mt-2",children:"This is the incorporation round with founder shares only. Subscription documents are used for investor funding rounds."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{className:"global_btn",onClick:()=>Fe("next"),children:"Continue to Notes Section"})})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center",children:["Upload Your Subscription Documents",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsx)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:(0,p.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,p.jsx)("p",{children:"Subscription documents are the formal, legally binding agreements that an investor signs to purchase equity in a company after a term sheet has been agreed upon. These include the Subscription Agreement, which outlines how many shares the investor is buying, at what price, and under what terms."}),(0,p.jsx)("p",{children:(0,p.jsx)("strong",{children:"Common Subscription Documents:"})}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Subscription Agreement:"})," Primary investment contract"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Shareholders' Agreement:"})," Governance and rights"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Investor Rights Agreement:"})," Information and registration rights"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Board Consent:"})," Formal board approval of the round"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"Side Letters:"})," Special terms for specific investors"]}),(0,p.jsx)("p",{children:" These documents legally commit the investor to the deal and obligate the company to issue shares in exchange for capital."})]})})]}),(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]}),(0,p.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt",onChange:e=>{Ne("subscriptiondocument",Array.from(e.target.files)),se.subscriptiondocument&&te((e=>({...e,subscriptiondocument:""})))},className:"textarea_input "+(se.subscriptiondocument?"is-invalid":"")}),ae.subscriptiondocument&&ae.subscriptiondocument.length>0&&(0,p.jsxs)("div",{className:"mt-2",children:[(0,p.jsx)("strong",{children:"Selected Files:"}),(0,p.jsx)("ul",{className:"small text-muted mt-1 mb-0",children:ae.subscriptiondocument.map(((e,s)=>(0,p.jsx)("li",{children:(0,p.jsx)("strong",{children:e.name})},s)))})]}),se.subscriptiondocument&&(0,p.jsxs)("div",{className:"text-danger small mt-1",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle me-1"}),se.subscriptiondocument]}),(0,p.jsx)("div",{className:"form-text",children:"Upload all relevant subscription documents. Supported formats: PDF, DOC, DOCX, TXT. Maximum file size: 10MB per file."})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",onClick:()=>{if(z)return void Fe("next");const e={};if(ae.subscriptiondocument&&0!==ae.subscriptiondocument.length){const t=["pdf","doc","docx","txt"],a=10485760;for(const r of ae.subscriptiondocument){var s;const n=(null===(s=((null===r||void 0===r?void 0:r.name)||"").split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";if(!t.includes(n)){e.subscriptiondocument="Invalid file type. Please upload PDF, DOC, DOCX, or TXT files only";break}if(r.size>a){e.subscriptiondocument=`File ${r.name} exceeds 10MB size limit`;break}}}else e.subscriptiondocument="Please upload at least one subscription document";Object.keys(e).length>0?(te(e),setTimeout((()=>{const e=document.querySelector(".is-invalid, .border-danger");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)):(te({}),Fe("next"))},children:"Save and Continue"})]})]}),"notes"===w&&(0,p.jsxs)("div",{className:"section-content p-4 border rounded-3 shadow-sm bg-white",children:[(0,p.jsx)(l.A,{formData:ae,otherText:we,selected:_e,visibleFields:["shareclass","description","instrument","roundsize","issuedshares","rights","liquidation","convertible","voting","termsheet","subscription"],isFirstRound:z,foundersData:G,calculateTotalShares:Je,calculateTotalValue:Ue,founderCount:H,CurrDisplay:b}),(0,p.jsx)("h3",{className:"h5 mb-4 text-gray-800",children:z?"Round 0 - Additional Notes":"General Notes About the Round"}),z?(0,p.jsxs)("div",{className:"round-zero-content",children:[(0,p.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,p.jsx)("strong",{children:"Round 0 Information:"})," Add any additional notes about your company's incorporation and founder share allocation."]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center",children:["Incorporation & Founder Notes",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"For Round 0 (Founder Shares):"})," Add any additional information about your company's incorporation that wasn't captured in previous sections.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"What to include:"}),"\u2013 Special founder arrangements or vesting schedules",(0,p.jsx)("br",{}),"\u2013 Notes about the incorporation process or timeline",(0,p.jsx)("br",{}),"\u2013 Any unique terms from your incorporation documents",(0,p.jsx)("br",{}),"\u2013 Future plans for the company",(0,p.jsx)("br",{}),"\u2013 Additional context about founder relationships",(0,p.jsx)("br",{}),"\u2013 Any restrictions or special conditions on founder shares"]})]})]}),(0,p.jsx)("textarea",{placeholder:"Enter any additional notes about company incorporation, founder arrangements, or special terms from your incorporation documents...",className:"textarea_input",rows:"6",value:ae.generalnotes,onChange:e=>Ne("generalnotes",e.target.value)}),(0,p.jsx)("div",{className:"form-text",children:"This information helps provide context for your company's founding and initial share structure."})]}),(0,p.jsxs)("div",{className:"calculation-results p-4 border rounded bg-light mb-4",children:[(0,p.jsx)("h5",{children:"Round 0 - Incorporation Summary"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Total Shares:"})," ",Je().toLocaleString()]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Price Per Share:"})," $",ae.pricePerShare||"0.00"]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Total Value:"})," $",Ue()]})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Founders:"})," ",H]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Share Type:"})," Common Shares"]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("strong",{children:"Voting Rights:"})," ","Yes"===ae.voting?"Yes":"No"]})]})]})]}),(0,p.jsxs)("div",{className:"alert alert-success mt-3",children:[(0,p.jsx)("strong",{children:"Ready to Complete Round 0"}),(0,p.jsx)("p",{className:"mb-0 mt-2",children:"You've successfully entered all the information for your company's incorporation round. This will serve as the foundation for your cap table and future investment rounds."})]})]}):(0,p.jsx)("div",{className:"investment-round-content",children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{className:"form-label fw-semibold d-flex align-items-center",children:["General Notes About the Round",(0,p.jsxs)("span",{className:"tooltip-icon ms-2",tabIndex:0,children:[(0,p.jsx)("img",{className:"blackdark",width:"15",height:"15",src:"/assets/user/images/question.png",alt:"Tip"}),(0,p.jsxs)("div",{className:"tooltip-text tool-test-white text-white",role:"tooltip",children:[(0,p.jsx)("strong",{children:"For Investment Rounds:"})," Add any additional information, context, or special considerations about this funding round that weren't captured in previous sections.",(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"What to include:"}),"\u2013 Background on investor negotiations",(0,p.jsx)("br",{}),"\u2013 Special terms or side agreements",(0,p.jsx)("br",{}),"\u2013 Timeline and process notes",(0,p.jsx)("br",{}),"\u2013 Key people involved in the round",(0,p.jsx)("br",{}),"\u2013 Future plans tied to this funding",(0,p.jsx)("br",{}),"\u2013 Any unusual or noteworthy aspects of the deal",(0,p.jsx)("br",{}),"\u2013 Conditions precedent or subsequent"]})]})]}),(0,p.jsx)("textarea",{placeholder:"Enter any additional notes about the investment round, investor relationships, special terms, or context that would be helpful for future reference...",className:"textarea_input",rows:"6",value:ae.generalnotes,onChange:e=>Ne("generalnotes",e.target.value)}),(0,p.jsx)("div",{className:"form-text",children:"These notes will be stored with your round information for future reference and reporting."})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,p.jsx)("button",{className:"close_btn w-fit",onClick:()=>Fe("prev"),children:"Back"}),(0,p.jsx)("button",{className:"global_btn w-fit",type:"button",onClick:()=>{S(E?"\u26a0\ufe0f WARNING: Editing this round will affect ALL subsequent rounds. All following investment rounds will be recalculated based on new values. Please review all information carefully before submitting.":"Please review all the information carefully before submitting. Once submitted, it can be officially recorded."),Te(!0)},children:z?"Complete Round 0":"Save and Review"})]}),z&&(0,p.jsxs)("div",{className:"mt-4 pt-3 border-top",children:[(0,p.jsx)("div",{className:"progress",style:{height:"8px"},children:(0,p.jsx)("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:"100%"},"aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between mt-2 small text-muted",children:[(0,p.jsx)("span",{children:"Round 0 Setup"}),(0,p.jsx)("span",{children:"100% Complete"})]})]})]})]})})]})})})]})]})})});var hs}}}]);
//# sourceMappingURL=5781.7497642d.chunk.js.map