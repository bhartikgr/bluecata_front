"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[7459],{57459:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(65043),l=a(44710),r=a(94060),i=(a(38421),a(53579)),n=a(27836),c=a(49535),o=a(65469),d=a(86213),m=a(73216),p=a(70579);function h(){const e=(0,m.Zp)(),[s,a]=(0,t.useState)(),h=localStorage.getItem("SignatoryLoginData"),u=JSON.parse(h),[x,j]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[f,y]=(0,t.useState)(!1),[b,N]=(0,t.useState)(""),{id:_}=(0,m.g)(),[k,w]=(0,t.useState)(""),[S,C]=(0,t.useState)("");var A="http://localhost:5000/api/user/investor/";document.title="Investor Report Form";const E=e=>{a({...s,[e.target.name]:e.target.value})};(0,t.useEffect)((()=>{_&&I()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.ipify.org?format=json"),s=await e.json();C(s.ip)}catch(e){console.error("Failed to fetch IP",e)}})()}),[]);const I=async()=>{const s={company_id:u.companies[0].id,id:_};try{const a=await d.A.post(A+"getInvestoreditlist",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});a.data.results.length>0?(w(a.data.results[0].investorType),N(a.data.results[0])):e("/crm/investor-directory")}catch(a){console.error("Error generating summary",a)}},[T,F]=(0,t.useState)(!1);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.mO,{children:(0,p.jsx)("div",{className:"fullpage d-block",children:(0,p.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,p.jsx)(l.A,{isCollapsed:T,setIsCollapsed:F}),(0,p.jsxs)("div",{className:"global_view "+(T?"global_view_col":""),children:[(0,p.jsx)(r.A,{}),(0,p.jsxs)(i.$K,{className:"d-block p-md-4 p-3",children:[g&&(0,p.jsx)("p",{className:f?" mt-3 error_pop":"success_pop mt-3",children:g}),(0,p.jsx)("div",{className:"container-fluid",children:(0,p.jsxs)(n.zP,{className:"d-flex flex-column gap-2",children:[(0,p.jsxs)("div",{className:"titleroom d-flex justify-content-between align-items-center border-bottom pb-3",children:[(0,p.jsxs)(c.o,{type:"button",className:"backbtn",onClick:()=>{e("/crm/investor-directory")},children:[(0,p.jsx)(o.A,{size:16,className:"me-1"})," back"]}),(0,p.jsx)("h4",{children:b&&b.id?"Edit Investor":"Add Investor"})]}),(0,p.jsx)("form",{onSubmit:async s=>{s.preventDefault();const a={email:s.target.email.value,first_name:s.target.first_name.value,last_name:s.target.last_name.value,company_id:u.companies[0].id,created_by_id:u.id,created_by_role:u.role,id:b.id,ip_address:S};try{const s=await d.A.post(A+"Addnewinvenstor",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});j(!1),y(!1);var t=s.data;2===t.status?(y(!0),v(t.message)):(v(t.message),setTimeout((()=>{e("/crm/investor-directory")}),2500)),setTimeout((()=>{v("")}),2500)}catch(l){console.error("Error generating summary",l)}},children:(0,p.jsxs)("div",{className:"formlist",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-6",children:(0,p.jsxs)("label",{className:"d-block mt-3",children:[(0,p.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,p.jsxs)("h5",{children:["Email"," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,p.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter your email...",defaultValue:b.email||"",onChange:E,required:!0,disabled:!!b.email})]})}),(0,p.jsx)("div",{className:"col-6",children:(0,p.jsxs)("label",{className:"d-block mt-3",children:[(0,p.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,p.jsxs)("h5",{children:["First Name"," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,p.jsx)("input",{className:"form-control",onChange:E,type:"text",defaultValue:b.first_name,name:"first_name",placeholder:"Enter here...",id:"first_name",required:!0})]})}),(0,p.jsx)("div",{className:"col-6",children:(0,p.jsxs)("label",{className:"d-block mt-3",children:[(0,p.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,p.jsxs)("h5",{children:["Last Name"," ",(0,p.jsx)("span",{style:{color:"var(--primary)"},children:"*"})]})}),(0,p.jsx)("input",{className:"form-control",onChange:E,type:"text",defaultValue:b.last_name,name:"last_name",placeholder:"Enter here...",id:"last_name",required:!0})]})})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-start align-items-center mt-3",children:[(0,p.jsx)("input",{type:"submit",disabled:x,className:"global_btn ms-auto w-fit",value:"Submit",style:{opacity:x?.6:1}}),x&&(0,p.jsx)("div",{className:"spinner-border text-light ms-2",role:"status",style:{width:"1.5rem",height:"1.5rem"},children:(0,p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})})]})})]})]})]})})})})}}}]);
//# sourceMappingURL=7459.9c714b3c.chunk.js.map