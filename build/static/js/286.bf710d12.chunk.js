"use strict";(self.webpackChunkkeiretsuproject=self.webpackChunkkeiretsuproject||[]).push([[286],{30286:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(65043),n=t(82527),i=t(97899),r=t(73216),o=t(86213),c=t(35475),l=t(58786),d=t(23156),m=t(38626),u=t(68155),h=t(60184),g=t(53162),p=t(63015),x=t(34348),j=t.n(x),b=t(70579);const f=function(){(0,r.Zp)();const[e,s]=(0,a.useState)([]);(0,a.useEffect)((()=>{document.title="Broadcast Session List - Admin"}),[]);const[t,x]=(0,a.useState)(Intl.DateTimeFormat().resolvedOptions().timeZone),f="https://blueprintcatalyst.com/api/admin/module/",[v,w]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),A=e.filter((e=>Object.values(e).join(" ").toLowerCase().includes(v.toLowerCase()))),[C,S]=(0,a.useState)(""),[k,D]=(0,a.useState)(!1),[_,T]=(0,a.useState)(""),[H,M]=(0,a.useState)(!1),Y=[{name:"Meeting Date",selector:e=>new Date(e.meeting_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})},{name:"Time",selector:e=>{if(!e.time)return"-";const[s,t]=e.time.split(":").map(Number),a=new Date;return a.setHours(s),a.setMinutes(t),a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},sortable:!0,className:"age"},{name:"Session Type",selector:e=>e.session,sortable:!0,className:"age"},{name:"TimeZone",selector:e=>e.timezone,sortable:!0,className:"age"},{name:"Status",cell:e=>{let s="",t="";switch(e.statusexp){case"upcoming":s="badge bg-info",t="Upcoming";break;case"ongoing":s="badge bg-success",t="Ongoing";break;case"expired":s="badge bg-danger",t="Expired";break;default:s="badge bg-secondary",t=e.statusexp}return(0,b.jsx)("span",{className:s,children:t})},sortable:!0,className:"age"},{name:"Action",cell:e=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,b.jsx)(c.N_,{className:" fs-5",to:`/admin/setting/broadcast/editsession/${e.id}`,title:"Edit",children:(0,b.jsx)(h.uO9,{})}),(0,b.jsx)("button",{type:"button",onClick:()=>(async e=>{T(e),D(!0)})(e.id),className:"dataedit_btn text-danger border-0 fs-5",title:"Delete",children:(0,b.jsx)(h.RCe,{})})]})}),ignoreRowClick:!0,allowOverflow:!0,button:!0}];(0,a.useEffect)((()=>{O()}),[]);const O=async()=>{let e={user_id:""};try{const a=await o.A.post(f+"getboradCasteList",e,{headers:{Accept:"application/json","Content-Type":"application/json"}}),n=(a.data.results||[]).map((e=>q(e,t)));s(n)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},q=(e,s)=>{if(!e.meeting_date||!e.time)return{...e,status:"unknown"};const t=e.timezone,a=j().tz(`${e.meeting_date} ${e.time}`,"YYYY-MM-DD HH:mm",t).clone().tz(s),n=j().tz(s),i=a.clone().add(30,"minutes");let r="upcoming";return n.isAfter(i)?r="expired":n.isBetween(a,i)&&(r="ongoing"),{...e,statusexp:r,local_meeting_date:a.format("YYYY-MM-DD"),local_meeting_time:a.format("HH:mm")}},z=()=>{D(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,b.jsx)(n.A,{}),(0,b.jsxs)("div",{className:"d-flex flex-column gap-0 w-100",children:[(0,b.jsx)(i.A,{}),(0,b.jsx)("section",{className:"dashboard_adminh",children:(0,b.jsx)("div",{className:"container-xl",children:(0,b.jsx)("div",{className:"row gy-4",children:(0,b.jsx)("div",{className:"col-12",children:(0,b.jsxs)("div",{className:"card p-4",children:[C&&(0,b.jsx)(g.A,{message:C,onClose:()=>S("")}),(0,b.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,b.jsx)("h5",{className:"mb-3",children:"Broadcast Session"}),(0,b.jsxs)(c.N_,{to:"/admin/setting/broadcast/addsession",className:"btn btn-primary",children:["Add Session ",(0,b.jsx)(d.OiG,{})]})]}),(0,b.jsx)("div",{className:"d-flex justify-content-end align-items-end",children:(0,b.jsxs)("div",{class:"search-bar",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:v,onChange:e=>w(e.target.value)}),(0,b.jsx)("span",{class:"search-icon",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z"})})})]})}),(0,b.jsx)(l.Ay,{columns:Y,data:A,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0,noDataComponent:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("span",{children:"No results found"})})})]})})})})})]})]})}),(0,b.jsxs)(m.A,{show:k,onHide:z,children:[(0,b.jsx)(m.A.Header,{closeButton:!0,children:(0,b.jsx)(m.A.Title,{children:"Confirm Deletion"})}),(0,b.jsx)(m.A.Body,{children:(0,b.jsx)("p",{children:"Are you sure you want to delete this record?"})}),(0,b.jsxs)(m.A.Footer,{children:[(0,b.jsx)(u.A,{variant:"secondary",onClick:z,children:"Cancel"}),(0,b.jsx)(u.A,{variant:"danger",onClick:async()=>{let e={id:_};try{(await o.A.post(f+"deleteSessionmeet",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;D(!1),O(),S("Session deleted successfully."),setTimeout((()=>{S("")}),1200)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},children:"Confirm Delete"})]})]}),H&&(0,b.jsx)(p.A,{onClose:()=>M(!1),codeid:y,returnrefresh:()=>{}})]})}}}]);
//# sourceMappingURL=286.bf710d12.chunk.js.map